import{A as dr,B as qt,a as J,b as Ve,c as tk,d as $h,e as hv,f as k,g as XI,h as qh,i as JI,j as eC,k as tC,l as fv,m as Hh,n as Zc,o as pv,p as zh,q as Gh,r as nC,s as gv,t as He,u as ur,v as Or,w as Wh,x as ms,y as Kh,z as rC}from"./chunk-7GDN6HIT.js";var Ku=tk((Gr,M_)=>{"use strict";(function(t,e){typeof Gr=="object"&&typeof M_<"u"?M_.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(Gr,function(){"use strict";function t(y,d){(d==null||d>y.length)&&(d=y.length);for(var f=0,v=Array(d);f<d;f++)v[f]=y[f];return v}function e(y){if(Array.isArray(y))return y}function n(y){if(Array.isArray(y))return t(y)}function r(y,d,f){if(typeof y=="function"?y===d:y.has(d))return arguments.length<3?d:f;throw new TypeError("Private element is not present on this object")}function i(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function o(y,d,f){return d=O(d),ae(y,W()?Reflect.construct(d,f||[],O(y).constructor):d.apply(y,f))}function s(y,d){if(d.has(y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function l(y,d){return y.get(r(y,d))}function u(y,d,f){s(y,d),d.set(y,f)}function h(y,d,f){return y.set(r(y,d),f),f}function g(y,d,f){if(W())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,d);var I=new(y.bind.apply(y,v));return I}function w(y,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,F(v.key),v)}}function E(y,d,f){return d&&w(y.prototype,d),Object.defineProperty(y,"prototype",{writable:!1}),y}function A(){return A=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,d,f){var v=D(y,d);if(v){var I=Object.getOwnPropertyDescriptor(v,d);return I.get?I.get.call(arguments.length<3?y:f):I.value}},A.apply(null,arguments)}function O(y){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},O(y)}function P(y,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(d&&d.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),d&&S(y,d)}function W(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W=function(){return!!y})()}function Z(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function H(y,d){var f=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(f!=null){var v,I,$,ne,xe=[],Ne=!0,yt=!1;try{if($=(f=f.call(y)).next,d!==0)for(;!(Ne=(v=$.call(f)).done)&&(xe.push(v.value),xe.length!==d);Ne=!0);}catch(Yc){yt=!0,I=Yc}finally{try{if(!Ne&&f.return!=null&&(ne=f.return(),Object(ne)!==ne))return}finally{if(yt)throw I}}return xe}}function X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(y,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(y)}function S(y,d){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},S(y,d)}function b(y,d){return e(y)||H(y,d)||Bn(y,d)||X()}function D(y,d){for(;!{}.hasOwnProperty.call(y,d)&&(y=O(y))!==null;);return y}function M(y){return n(y)||Z(y)||Bn(y)||ce()}function R(y,d){if(typeof y!="object"||!y)return y;var f=y[Symbol.toPrimitive];if(f!==void 0){var v=f.call(y,d);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}function F(y){var d=R(y,"string");return typeof d=="symbol"?d:d+""}function C(y){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},C(y)}function Bn(y,d){if(y){if(typeof y=="string")return t(y,d);var f={}.toString.call(y).slice(8,-1);return f==="Object"&&y.constructor&&(f=y.constructor.name),f==="Map"||f==="Set"?Array.from(y):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?t(y,d):void 0}}var Xo=100,be={},Jo=function(){be.previousActiveElement instanceof HTMLElement?(be.previousActiveElement.focus(),be.previousActiveElement=null):document.body&&document.body.focus()},es=function(d){return new Promise(function(f){if(!d)return f();var v=window.scrollX,I=window.scrollY;be.restoreFocusTimeout=setTimeout(function(){Jo(),f()},Xo),window.scrollTo(v,I)})},Ia="swal2-",Zd=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],U=Zd.reduce(function(y,d){return y[d]=Ia+d,y},{}),Tr=["success","warning","info","question","error"],Ct=Tr.reduce(function(y,d){return y[d]=Ia+d,y},{}),Xd="SweetAlert2:",li=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},Jt=function(d){console.warn("".concat(Xd," ").concat(C(d)==="object"?d.join(" "):d))},Rn=function(d){console.error("".concat(Xd," ").concat(d))},Jd=[],Qm=function(d){Jd.includes(d)||(Jd.push(d),Jt(d))},Ca=function(d,f){Qm('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(f,'" instead.'))},ci=function(d){return typeof d=="function"?d():d},ts=function(d){return d&&typeof d.toPromise=="function"},ui=function(d){return ts(d)?d.toPromise():Promise.resolve(d)},ns=function(d){return d&&Promise.resolve(d)===d},$t=function(){return document.body.querySelector(".".concat(U.container))},Qi=function(d){var f=$t();return f?f.querySelector(d):null},en=function(d){return Qi(".".concat(d))},Ge=function(){return en(U.popup)},Yi=function(){return en(U.icon)},eh=function(){return en(U["icon-content"])},Da=function(){return en(U.title)},Ta=function(){return en(U["html-container"])},th=function(){return en(U.image)},rs=function(){return en(U["progress-steps"])},Zi=function(){return en(U["validation-message"])},Cn=function(){return Qi(".".concat(U.actions," .").concat(U.confirm))},pt=function(){return Qi(".".concat(U.actions," .").concat(U.cancel))},gt=function(){return Qi(".".concat(U.actions," .").concat(U.deny))},Sa=function(){return en(U["input-label"])},di=function(){return Qi(".".concat(U.loader))},Xi=function(){return en(U.actions)},nh=function(){return en(U.footer)},Sr=function(){return en(U["timer-progress-bar"])},Aa=function(){return en(U.close)},rh=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,is=function(){var d=Ge();if(!d)return[];var f=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),v=Array.from(f).sort(function(ne,xe){var Ne=parseInt(ne.getAttribute("tabindex")||"0"),yt=parseInt(xe.getAttribute("tabindex")||"0");return Ne>yt?1:Ne<yt?-1:0}),I=d.querySelectorAll(rh),$=Array.from(I).filter(function(ne){return ne.getAttribute("tabindex")!=="-1"});return M(new Set(v.concat($))).filter(function(ne){return un(ne)})},Oc=function(){return Un(document.body,U.shown)&&!Un(document.body,U["toast-shown"])&&!Un(document.body,U["no-backdrop"])},xa=function(){var d=Ge();return d?Un(d,U.toast):!1},Fc=function(){var d=Ge();return d?d.hasAttribute("data-loading"):!1},tn=function(d,f){if(d.textContent="",f){var v=new DOMParser,I=v.parseFromString(f,"text/html"),$=I.querySelector("head");$&&Array.from($.childNodes).forEach(function(xe){d.appendChild(xe)});var ne=I.querySelector("body");ne&&Array.from(ne.childNodes).forEach(function(xe){xe instanceof HTMLVideoElement||xe instanceof HTMLAudioElement?d.appendChild(xe.cloneNode(!0)):d.appendChild(xe)})}},Un=function(d,f){if(!f)return!1;for(var v=f.split(/\s+/),I=0;I<v.length;I++)if(!d.classList.contains(v[I]))return!1;return!0},os=function(d,f){Array.from(d.classList).forEach(function(v){!Object.values(U).includes(v)&&!Object.values(Ct).includes(v)&&!Object.values(f.showClass||{}).includes(v)&&d.classList.remove(v)})},nn=function(d,f,v){if(os(d,f),f.customClass&&f.customClass[v]){if(typeof f.customClass[v]!="string"&&!f.customClass[v].forEach){Jt("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(C(f.customClass[v]),'"'));return}Ae(d,f.customClass[v])}},Ji=function(d,f){if(!f)return null;switch(f){case"select":case"textarea":case"file":return d.querySelector(".".concat(U.popup," > .").concat(U[f]));case"checkbox":return d.querySelector(".".concat(U.popup," > .").concat(U.checkbox," input"));case"radio":return d.querySelector(".".concat(U.popup," > .").concat(U.radio," input:checked"))||d.querySelector(".".concat(U.popup," > .").concat(U.radio," input:first-child"));case"range":return d.querySelector(".".concat(U.popup," > .").concat(U.range," input"));default:return d.querySelector(".".concat(U.popup," > .").concat(U.input))}},Ar=function(d){if(d.focus(),d.type!=="file"){var f=d.value;d.value="",d.value=f}},Vc=function(d,f,v){!d||!f||(typeof f=="string"&&(f=f.split(/\s+/).filter(Boolean)),f.forEach(function(I){Array.isArray(d)?d.forEach(function($){v?$.classList.add(I):$.classList.remove(I)}):v?d.classList.add(I):d.classList.remove(I)}))},Ae=function(d,f){Vc(d,f,!0)},Nn=function(d,f){Vc(d,f,!1)},Dn=function(d,f){for(var v=Array.from(d.children),I=0;I<v.length;I++){var $=v[I];if($ instanceof HTMLElement&&Un($,f))return $}},xr=function(d,f,v){v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?d.style.setProperty(f,typeof v=="number"?"".concat(v,"px"):v):d.style.removeProperty(f)},je=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=f)},Ft=function(d){d&&(d.style.display="none")},hi=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){ss(d,d.innerHTML,f)}).observe(d,{childList:!0,subtree:!0})},eo=function(d,f,v,I){var $=d.querySelector(f);$&&$.style.setProperty(v,I)},ss=function(d,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";f?je(d,v):Ft(d)},un=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},to=function(){return!un(Cn())&&!un(gt())&&!un(pt())},ih=function(d){return d.scrollHeight>d.clientHeight},oh=function(d){var f=window.getComputedStyle(d),v=parseFloat(f.getPropertyValue("animation-duration")||"0"),I=parseFloat(f.getPropertyValue("transition-duration")||"0");return v>0||I>0},no=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=Sr();v&&un(v)&&(f&&(v.style.transition="none",v.style.width="100%"),setTimeout(function(){v.style.transition="width ".concat(d/1e3,"s linear"),v.style.width="0%"},10))},sh=function(){var d=Sr();if(d){var f=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var v=parseInt(window.getComputedStyle(d).width),I=f/v*100;d.style.width="".concat(I,"%")}},Ma=function(){return typeof window>"u"||typeof document>"u"},Ra=`
 <div aria-labelledby="`.concat(U.title,'" aria-describedby="').concat(U["html-container"],'" class="').concat(U.popup,`" tabindex="-1">
   <button type="button" class="`).concat(U.close,`"></button>
   <ul class="`).concat(U["progress-steps"],`"></ul>
   <div class="`).concat(U.icon,`"></div>
   <img class="`).concat(U.image,`" />
   <h2 class="`).concat(U.title,'" id="').concat(U.title,`"></h2>
   <div class="`).concat(U["html-container"],'" id="').concat(U["html-container"],`"></div>
   <input class="`).concat(U.input,'" id="').concat(U.input,`" />
   <input type="file" class="`).concat(U.file,`" />
   <div class="`).concat(U.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(U.select,'" id="').concat(U.select,`"></select>
   <div class="`).concat(U.radio,`"></div>
   <label class="`).concat(U.checkbox,`">
     <input type="checkbox" id="`).concat(U.checkbox,`" />
     <span class="`).concat(U.label,`"></span>
   </label>
   <textarea class="`).concat(U.textarea,'" id="').concat(U.textarea,`"></textarea>
   <div class="`).concat(U["validation-message"],'" id="').concat(U["validation-message"],`"></div>
   <div class="`).concat(U.actions,`">
     <div class="`).concat(U.loader,`"></div>
     <button type="button" class="`).concat(U.confirm,`"></button>
     <button type="button" class="`).concat(U.deny,`"></button>
     <button type="button" class="`).concat(U.cancel,`"></button>
   </div>
   <div class="`).concat(U.footer,`"></div>
   <div class="`).concat(U["timer-progress-bar-container"],`">
     <div class="`).concat(U["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Mr=function(){var d=$t();return d?(d.remove(),Nn([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0):!1},Rr=function(){be.currentInstance.resetValidationMessage()},ah=function(){var d=Ge(),f=Dn(d,U.input),v=Dn(d,U.file),I=d.querySelector(".".concat(U.range," input")),$=d.querySelector(".".concat(U.range," output")),ne=Dn(d,U.select),xe=d.querySelector(".".concat(U.checkbox," input")),Ne=Dn(d,U.textarea);f.oninput=Rr,v.onchange=Rr,ne.onchange=Rr,xe.onchange=Rr,Ne.oninput=Rr,I.oninput=function(){Rr(),$.value=I.value},I.onchange=function(){Rr(),$.value=I.value}},Lc=function(d){return typeof d=="string"?document.querySelector(d):d},jc=function(d){var f=Ge();f.setAttribute("role",d.toast?"alert":"dialog"),f.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||f.setAttribute("aria-modal","true")},lh=function(d){window.getComputedStyle(d).direction==="rtl"&&Ae($t(),U.rtl)},ch=function(d){var f=Mr();if(Ma()){Rn("SweetAlert2 requires document to initialize");return}var v=document.createElement("div");v.className=U.container,f&&Ae(v,U["no-transition"]),tn(v,Ra);var I=Lc(d.target);I.appendChild(v),jc(d),lh(I),ah()},Bc=function(d,f){d instanceof HTMLElement?f.appendChild(d):C(d)==="object"?Na(d,f):d&&tn(f,d)},Na=function(d,f){d.jquery?uh(f,d):tn(f,d.toString())},uh=function(d,f){if(d.textContent="",0 in f)for(var v=0;v in f;v++)d.appendChild(f[v].cloneNode(!0));else d.appendChild(f.cloneNode(!0))},or=function(){if(Ma())return!1;var y=document.createElement("div");return typeof y.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof y.style.animation<"u"?"animationend":!1}(),as=function(d,f){var v=Xi(),I=di();!v||!I||(!f.showConfirmButton&&!f.showDenyButton&&!f.showCancelButton?Ft(v):je(v),nn(v,f,"actions"),fi(v,I,f),tn(I,f.loaderHtml||""),nn(I,f,"loader"))};function fi(y,d,f){var v=Cn(),I=gt(),$=pt();!v||!I||!$||($c(v,"confirm",f),$c(I,"deny",f),$c($,"cancel",f),Uc(v,I,$,f),f.reverseButtons&&(f.toast?(y.insertBefore($,v),y.insertBefore(I,v)):(y.insertBefore($,d),y.insertBefore(I,d),y.insertBefore(v,d))))}function Uc(y,d,f,v){if(!v.buttonsStyling){Nn([y,d,f],U.styled);return}Ae([y,d,f],U.styled),v.confirmButtonColor&&(y.style.backgroundColor=v.confirmButtonColor,Ae(y,U["default-outline"])),v.denyButtonColor&&(d.style.backgroundColor=v.denyButtonColor,Ae(d,U["default-outline"])),v.cancelButtonColor&&(f.style.backgroundColor=v.cancelButtonColor,Ae(f,U["default-outline"]))}function $c(y,d,f){var v=li(d);ss(y,f["show".concat(v,"Button")],"inline-block"),tn(y,f["".concat(d,"ButtonText")]||""),y.setAttribute("aria-label",f["".concat(d,"ButtonAriaLabel")]||""),y.className=U[d],nn(y,f,"".concat(d,"Button"))}var dh=function(d,f){var v=Aa();v&&(tn(v,f.closeButtonHtml||""),nn(v,f,"closeButton"),ss(v,f.showCloseButton),v.setAttribute("aria-label",f.closeButtonAriaLabel||""))},hh=function(d,f){var v=$t();v&&(fh(v,f.backdrop),qc(v,f.position),Hc(v,f.grow),nn(v,f,"container"))};function fh(y,d){typeof d=="string"?y.style.background=d:d||Ae([document.documentElement,document.body],U["no-backdrop"])}function qc(y,d){d&&(d in U?Ae(y,U[d]):(Jt('The "position" parameter is not valid, defaulting to "center"'),Ae(y,U.center)))}function Hc(y,d){d&&Ae(y,U["grow-".concat(d)])}var Ye={innerParams:new WeakMap,domCache:new WeakMap},ph=["input","file","range","select","radio","checkbox","textarea"],Ym=function(d,f){var v=Ge();if(v){var I=Ye.innerParams.get(d),$=!I||f.input!==I.input;ph.forEach(function(ne){var xe=Dn(v,U[ne]);xe&&(mh(ne,f.inputAttributes),xe.className=U[ne],$&&Ft(xe))}),f.input&&($&&Zm(f),Xm(f))}},Zm=function(d){if(d.input){if(!at[d.input]){Rn("Unexpected type of input! Expected ".concat(Object.keys(at).join(" | "),', got "').concat(d.input,'"'));return}var f=ls(d.input),v=at[d.input](f,d);je(f),d.inputAutoFocus&&setTimeout(function(){Ar(v)})}},gh=function(d){for(var f=0;f<d.attributes.length;f++){var v=d.attributes[f].name;["id","type","value","style"].includes(v)||d.removeAttribute(v)}},mh=function(d,f){var v=Ji(Ge(),d);if(v){gh(v);for(var I in f)v.setAttribute(I,f[I])}},Xm=function(d){var f=ls(d.input);C(d.customClass)==="object"&&Ae(f,d.customClass.input)},sr=function(d,f){(!d.placeholder||f.inputPlaceholder)&&(d.placeholder=f.inputPlaceholder)},dn=function(d,f,v){if(v.inputLabel){var I=document.createElement("label"),$=U["input-label"];I.setAttribute("for",d.id),I.className=$,C(v.customClass)==="object"&&Ae(I,v.customClass.inputLabel),I.innerText=v.inputLabel,f.insertAdjacentElement("beforebegin",I)}},ls=function(d){return Dn(Ge(),U[d]||U.input)},pi=function(d,f){["string","number"].includes(C(f))?d.value="".concat(f):ns(f)||Jt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(C(f),'"'))},at={};at.text=at.email=at.password=at.number=at.tel=at.url=at.search=at.date=at["datetime-local"]=at.time=at.week=at.month=function(y,d){return pi(y,d.inputValue),dn(y,y,d),sr(y,d),y.type=d.input,y},at.file=function(y,d){return dn(y,y,d),sr(y,d),y},at.range=function(y,d){var f=y.querySelector("input"),v=y.querySelector("output");return pi(f,d.inputValue),f.type=d.input,pi(v,d.inputValue),dn(f,y,d),y},at.select=function(y,d){if(y.textContent="",d.inputPlaceholder){var f=document.createElement("option");tn(f,d.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,y.appendChild(f)}return dn(y,y,d),y},at.radio=function(y){return y.textContent="",y},at.checkbox=function(y,d){var f=Ji(Ge(),"checkbox");f.value="1",f.checked=!!d.inputValue;var v=y.querySelector("span");return tn(v,d.inputPlaceholder),f},at.textarea=function(y,d){pi(y,d.inputValue),sr(y,d),dn(y,y,d);var f=function(I){return parseInt(window.getComputedStyle(I).marginLeft)+parseInt(window.getComputedStyle(I).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var v=parseInt(window.getComputedStyle(Ge()).width),I=function(){if(document.body.contains(y)){var ne=y.offsetWidth+f(y);ne>v?Ge().style.width="".concat(ne,"px"):xr(Ge(),"width",d.width)}};new MutationObserver(I).observe(y,{attributes:!0,attributeFilter:["style"]})}}),y};var Xe=function(d,f){var v=Ta();v&&(hi(v),nn(v,f,"htmlContainer"),f.html?(Bc(f.html,v),je(v,"block")):f.text?(v.textContent=f.text,je(v,"block")):Ft(v),Ym(d,f))},Pa=function(d,f){var v=nh();v&&(hi(v),ss(v,f.footer,"block"),f.footer&&Bc(f.footer,v),nn(v,f,"footer"))},cs=function(d,f){var v=Ye.innerParams.get(d),I=Yi();if(I){if(v&&f.icon===v.icon){yh(I,f),ro(I,f);return}if(!f.icon&&!f.iconHtml){Ft(I);return}if(f.icon&&Object.keys(Ct).indexOf(f.icon)===-1){Rn('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(f.icon,'"')),Ft(I);return}je(I),yh(I,f),ro(I,f),Ae(I,f.showClass&&f.showClass.icon)}},ro=function(d,f){for(var v=0,I=Object.entries(Ct);v<I.length;v++){var $=b(I[v],2),ne=$[0],xe=$[1];f.icon!==ne&&Nn(d,xe)}Ae(d,f.icon&&Ct[f.icon]),tv(d,f),Jm(),nn(d,f,"icon")},Jm=function(){var d=Ge();if(d)for(var f=window.getComputedStyle(d).getPropertyValue("background-color"),v=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),I=0;I<v.length;I++)v[I].style.backgroundColor=f},vh=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,ev=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,yh=function(d,f){if(!(!f.icon&&!f.iconHtml)){var v=d.innerHTML,I="";if(f.iconHtml)I=wh(f.iconHtml);else if(f.icon==="success")I=vh,v=v.replace(/ style=".*?"/g,"");else if(f.icon==="error")I=ev;else if(f.icon){var $={question:"?",warning:"!",info:"i"};I=wh($[f.icon])}v.trim()!==I.trim()&&tn(d,I)}},tv=function(d,f){if(f.iconColor){d.style.color=f.iconColor,d.style.borderColor=f.iconColor;for(var v=0,I=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];v<I.length;v++){var $=I[v];eo(d,$,"background-color",f.iconColor)}eo(d,".swal2-success-ring","border-color",f.iconColor)}},wh=function(d){return'<div class="'.concat(U["icon-content"],'">').concat(d,"</div>")},us=function(d,f){var v=th();if(v){if(!f.imageUrl){Ft(v);return}je(v,""),v.setAttribute("src",f.imageUrl),v.setAttribute("alt",f.imageAlt||""),xr(v,"width",f.imageWidth),xr(v,"height",f.imageHeight),v.className=U.image,nn(v,f,"image")}},Nr=function(d,f){var v=$t(),I=Ge();if(!(!v||!I)){if(f.toast){xr(v,"width",f.width),I.style.width="100%";var $=di();$&&I.insertBefore($,Yi())}else xr(I,"width",f.width);xr(I,"padding",f.padding),f.color&&(I.style.color=f.color),f.background&&(I.style.background=f.background),Ft(Zi()),_h(I,f)}},_h=function(d,f){var v=f.showClass||{};d.className="".concat(U.popup," ").concat(un(d)?v.popup:""),f.toast?(Ae([document.documentElement,document.body],U["toast-shown"]),Ae(d,U.toast)):Ae(d,U.modal),nn(d,f,"popup"),typeof f.customClass=="string"&&Ae(d,f.customClass),f.icon&&Ae(d,U["icon-".concat(f.icon)])},Eh=function(d,f){var v=rs();if(v){var I=f.progressSteps,$=f.currentProgressStep;if(!I||I.length===0||$===void 0){Ft(v);return}je(v),v.textContent="",$>=I.length&&Jt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.forEach(function(ne,xe){var Ne=bh(ne);if(v.appendChild(Ne),xe===$&&Ae(Ne,U["active-progress-step"]),xe!==I.length-1){var yt=io(f);v.appendChild(yt)}})}},bh=function(d){var f=document.createElement("li");return Ae(f,U["progress-step"]),tn(f,d),f},io=function(d){var f=document.createElement("li");return Ae(f,U["progress-step-line"]),d.progressStepsDistance&&xr(f,"width",d.progressStepsDistance),f},nv=function(d,f){var v=Da();v&&(hi(v),ss(v,f.title||f.titleText,"block"),f.title&&Bc(f.title,v),f.titleText&&(v.innerText=f.titleText),nn(v,f,"title"))},Ih=function(d,f){Nr(d,f),hh(d,f),Eh(d,f),cs(d,f),us(d,f),nv(d,f),dh(d,f),Xe(d,f),as(d,f),Pa(d,f);var v=Ge();typeof f.didRender=="function"&&v&&f.didRender(v)},rv=function(){return un(Ge())},ar=function(){var d;return(d=Cn())===null||d===void 0?void 0:d.click()},iv=function(){var d;return(d=gt())===null||d===void 0?void 0:d.click()},ov=function(){var d;return(d=pt())===null||d===void 0?void 0:d.click()},$n=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ds=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},Ch=function(d,f,v){ds(d),f.toast||(d.keydownHandler=function(I){return zc(f,I,v)},d.keydownTarget=f.keydownListenerCapture?window:Ge(),d.keydownListenerCapture=f.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},gi=function(d,f){var v,I=is();if(I.length){d=d+f,d===I.length?d=0:d===-1&&(d=I.length-1),I[d].focus();return}(v=Ge())===null||v===void 0||v.focus()},oo=["ArrowRight","ArrowDown"],Dh=["ArrowLeft","ArrowUp"],zc=function(d,f,v){d&&(f.isComposing||f.keyCode===229||(d.stopKeydownPropagation&&f.stopPropagation(),f.key==="Enter"?lt(f,d):f.key==="Tab"?sv(f):[].concat(oo,Dh).includes(f.key)?av(f.key):f.key==="Escape"&&Th(f,d,v)))},lt=function(d,f){if(ci(f.allowEnterKey)){var v=Ji(Ge(),f.input);if(d.target&&v&&d.target instanceof HTMLElement&&d.target.outerHTML===v.outerHTML){if(["textarea","file"].includes(f.input))return;ar(),d.preventDefault()}}},sv=function(d){for(var f=d.target,v=is(),I=-1,$=0;$<v.length;$++)if(f===v[$]){I=$;break}d.shiftKey?gi(I,-1):gi(I,1),d.stopPropagation(),d.preventDefault()},av=function(d){var f=Xi(),v=Cn(),I=gt(),$=pt();if(!(!f||!v||!I||!$)){var ne=[v,I,$];if(!(document.activeElement instanceof HTMLElement&&!ne.includes(document.activeElement))){var xe=oo.includes(d)?"nextElementSibling":"previousElementSibling",Ne=document.activeElement;if(Ne){for(var yt=0;yt<f.children.length;yt++){if(Ne=Ne[xe],!Ne)return;if(Ne instanceof HTMLButtonElement&&un(Ne))break}Ne instanceof HTMLButtonElement&&Ne.focus()}}}},Th=function(d,f,v){ci(f.allowEscapeKey)&&(d.preventDefault(),v($n.esc))},mi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Sh=function(){var d=$t(),f=Array.from(document.body.children);f.forEach(function(v){v.contains(d)||(v.hasAttribute("aria-hidden")&&v.setAttribute("data-previous-aria-hidden",v.getAttribute("aria-hidden")||""),v.setAttribute("aria-hidden","true"))})},hs=function(){var d=Array.from(document.body.children);d.forEach(function(f){f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")||""),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},Gc=typeof window<"u"&&!!window.GestureEvent,lr=function(){if(Gc&&!Un(document.body,U.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),Ae(document.body,U.iosfix),Ah()}},Ah=function(){var d=$t();if(d){var f;d.ontouchstart=function(v){f=lv(v)},d.ontouchmove=function(v){f&&(v.preventDefault(),v.stopPropagation())}}},lv=function(d){var f=d.target,v=$t(),I=Ta();return!v||!I||fs(d)||xh(d)?!1:f===v||!ih(v)&&f instanceof HTMLElement&&f.tagName!=="INPUT"&&f.tagName!=="TEXTAREA"&&!(ih(I)&&I.contains(f))},fs=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},xh=function(d){return d.touches&&d.touches.length>1},Wc=function(){if(Un(document.body,U.iosfix)){var d=parseInt(document.body.style.top,10);Nn(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},ka=function(){var d=document.createElement("div");d.className=U["scrollbar-measure"],document.body.appendChild(d);var f=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),f},vi=null,Oa=function(d){vi===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(vi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(vi+ka(),"px"))},cv=function(){vi!==null&&(document.body.style.paddingRight="".concat(vi,"px"),vi=null)};function Kc(y,d,f,v){xa()?Qc(y,v):(es(f).then(function(){return Qc(y,v)}),ds(be)),Gc?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),Oc()&&(cv(),Wc(),hs()),ps()}function ps(){Nn([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}function cr(y){y=Rh(y);var d=mi.swalPromiseResolve.get(this),f=Mh(this);this.isAwaitingPromise?y.isDismissed||(yi(this),d(y)):f&&d(y)}var Mh=function(d){var f=Ge();if(!f)return!1;var v=Ye.innerParams.get(d);if(!v||Un(f,v.hideClass.popup))return!1;Nn(f,v.showClass.popup),Ae(f,v.hideClass.popup);var I=$t();return Nn(I,v.showClass.backdrop),Ae(I,v.hideClass.backdrop),Va(d,f,v),!0};function Fa(y){var d=mi.swalPromiseReject.get(this);yi(this),d&&d(y)}var yi=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,Ye.innerParams.get(d)||d._destroy())},Rh=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},Va=function(d,f,v){var I=$t(),$=or&&oh(f);typeof v.willClose=="function"&&v.willClose(f),$?Nh(d,f,I,v.returnFocus,v.didClose):Kc(d,I,v.returnFocus,v.didClose)},Nh=function(d,f,v,I,$){or&&(be.swalCloseEventFinishedCallback=Kc.bind(null,d,v,I,$),f.addEventListener(or,function(ne){ne.target===f&&(be.swalCloseEventFinishedCallback(),delete be.swalCloseEventFinishedCallback)}))},Qc=function(d,f){setTimeout(function(){typeof f=="function"&&f.bind(d.params)(),d._destroy&&d._destroy()})},Tn=function(d){var f=Ge();if(f||new Uh,f=Ge(),!!f){var v=di();xa()?Ft(Yi()):Ph(f,d),je(v),f.setAttribute("data-loading","true"),f.setAttribute("aria-busy","true"),f.focus()}},Ph=function(d,f){var v=Xi(),I=di();!v||!I||(!f&&un(Cn())&&(f=Cn()),je(v),f&&(Ft(f),I.setAttribute("data-button-to-replace",f.className),v.insertBefore(I,f)),Ae([d,v],U.loading))},kh=function(d,f){f.input==="select"||f.input==="radio"?Vh(d,f):["text","email","number","tel","textarea"].some(function(v){return v===f.input})&&(ts(f.inputValue)||ns(f.inputValue))&&(Tn(Cn()),Lh(d,f))},Oh=function(d,f){var v=d.getInput();if(!v)return null;switch(f.input){case"checkbox":return Fh(v);case"radio":return La(v);case"file":return hn(v);default:return f.inputAutoTrim?v.value.trim():v.value}},Fh=function(d){return d.checked?1:0},La=function(d){return d.checked?d.value:null},hn=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},Vh=function(d,f){var v=Ge();if(v){var I=function(ne){f.input==="select"?so(v,p(ne),f):f.input==="radio"&&c(v,p(ne),f)};ts(f.inputOptions)||ns(f.inputOptions)?(Tn(Cn()),ui(f.inputOptions).then(function($){d.hideLoading(),I($)})):C(f.inputOptions)==="object"?I(f.inputOptions):Rn("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(C(f.inputOptions)))}},Lh=function(d,f){var v=d.getInput();v&&(Ft(v),ui(f.inputValue).then(function(I){v.value=f.input==="number"?"".concat(parseFloat(I)||0):"".concat(I),je(v),v.focus(),d.hideLoading()}).catch(function(I){Rn("Error in inputValue promise: ".concat(I)),v.value="",je(v),v.focus(),d.hideLoading()}))};function so(y,d,f){var v=Dn(y,U.select);if(v){var I=function(ne,xe,Ne){var yt=document.createElement("option");yt.value=Ne,tn(yt,xe),yt.selected=m(Ne,f.inputValue),ne.appendChild(yt)};d.forEach(function($){var ne=$[0],xe=$[1];if(Array.isArray(xe)){var Ne=document.createElement("optgroup");Ne.label=ne,Ne.disabled=!1,v.appendChild(Ne),xe.forEach(function(yt){return I(Ne,yt[1],yt[0])})}else I(v,xe,ne)}),v.focus()}}function c(y,d,f){var v=Dn(y,U.radio);if(v){d.forEach(function($){var ne=$[0],xe=$[1],Ne=document.createElement("input"),yt=document.createElement("label");Ne.type="radio",Ne.name=U.radio,Ne.value=ne,m(ne,f.inputValue)&&(Ne.checked=!0);var Yc=document.createElement("span");tn(Yc,xe),Yc.className=U.label,yt.appendChild(Ne),yt.appendChild(Yc),v.appendChild(yt)});var I=v.querySelectorAll("input");I.length&&I[0].focus()}}var p=function y(d){var f=[];return d instanceof Map?d.forEach(function(v,I){var $=v;C($)==="object"&&($=y($)),f.push([I,$])}):Object.keys(d).forEach(function(v){var I=d[v];C(I)==="object"&&(I=y(I)),f.push([v,I])}),f},m=function(d,f){return!!f&&f.toString()===d.toString()},_=void 0,N=function(d){var f=Ye.innerParams.get(d);d.disableButtons(),f.input?Ke(d,"confirm"):Pr(d,!0)},j=function(d){var f=Ye.innerParams.get(d);d.disableButtons(),f.returnInputValueOnDeny?Ke(d,"deny"):Re(d,!1)},Y=function(d,f){d.disableButtons(),f($n.cancel)},Ke=function(d,f){var v=Ye.innerParams.get(d);if(!v.input){Rn('The "input" parameter is needed to be set when using returnInputValueOn'.concat(li(f)));return}var I=d.getInput(),$=Oh(d,v);v.inputValidator?Vt(d,$,f):I&&!I.checkValidity()?(d.enableButtons(),d.showValidationMessage(v.validationMessage||I.validationMessage)):f==="deny"?Re(d,$):Pr(d,$)},Vt=function(d,f,v){var I=Ye.innerParams.get(d);d.disableInput();var $=Promise.resolve().then(function(){return ui(I.inputValidator(f,I.validationMessage))});$.then(function(ne){d.enableButtons(),d.enableInput(),ne?d.showValidationMessage(ne):v==="deny"?Re(d,f):Pr(d,f)})},Re=function(d,f){var v=Ye.innerParams.get(d||_);if(v.showLoaderOnDeny&&Tn(gt()),v.preDeny){d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return ui(v.preDeny(f,v.validationMessage))});I.then(function($){$===!1?(d.hideLoading(),yi(d)):d.close({isDenied:!0,value:typeof $>"u"?f:$})}).catch(function($){return jt(d||_,$)})}else d.close({isDenied:!0,value:f})},Lt=function(d,f){d.close({isConfirmed:!0,value:f})},jt=function(d,f){d.rejectPromise(f)},Pr=function(d,f){var v=Ye.innerParams.get(d||_);if(v.showLoaderOnConfirm&&Tn(),v.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return ui(v.preConfirm(f,v.validationMessage))});I.then(function($){un(Zi())||$===!1?(d.hideLoading(),yi(d)):Lt(d,typeof $>"u"?f:$)}).catch(function($){return jt(d||_,$)})}else Lt(d,f)};function rn(){var y=Ye.innerParams.get(this);if(y){var d=Ye.domCache.get(this);Ft(d.loader),xa()?y.icon&&je(Yi()):ja(d),Nn([d.popup,d.actions],U.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var ja=function(d){var f=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));f.length?je(f[0],"inline-block"):to()&&Ft(d.actions)};function Ba(){var y=Ye.innerParams.get(this),d=Ye.domCache.get(this);return d?Ji(d.popup,y.input):null}function xI(y,d,f){var v=Ye.domCache.get(y);d.forEach(function(I){v[I].disabled=f})}function MI(y,d){var f=Ge();if(!(!f||!y))if(y.type==="radio")for(var v=f.querySelectorAll('[name="'.concat(U.radio,'"]')),I=0;I<v.length;I++)v[I].disabled=d;else y.disabled=d}function RI(){xI(this,["confirmButton","denyButton","cancelButton"],!1)}function NI(){xI(this,["confirmButton","denyButton","cancelButton"],!0)}function PI(){MI(this.getInput(),!1)}function kI(){MI(this.getInput(),!0)}function OI(y){var d=Ye.domCache.get(this),f=Ye.innerParams.get(this);tn(d.validationMessage,y),d.validationMessage.className=U["validation-message"],f.customClass&&f.customClass.validationMessage&&Ae(d.validationMessage,f.customClass.validationMessage),je(d.validationMessage);var v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",U["validation-message"]),Ar(v),Ae(v,U.inputerror))}function FI(){var y=Ye.domCache.get(this);y.validationMessage&&Ft(y.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),Nn(d,U.inputerror))}var Ua={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},rP=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],iP={},oP=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],VI=function(d){return Object.prototype.hasOwnProperty.call(Ua,d)},LI=function(d){return rP.indexOf(d)!==-1},jI=function(d){return iP[d]},sP=function(d){VI(d)||Jt('Unknown parameter "'.concat(d,'"'))},aP=function(d){oP.includes(d)&&Jt('The parameter "'.concat(d,'" is incompatible with toasts'))},lP=function(d){var f=jI(d);f&&Ca(d,f)},cP=function(d){d.backdrop===!1&&d.allowOutsideClick&&Jt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var f in d)sP(f),d.toast&&aP(f),lP(f)};function BI(y){var d=Ge(),f=Ye.innerParams.get(this);if(!d||Un(d,f.hideClass.popup)){Jt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var v=uP(y),I=Object.assign({},f,v);Ih(this,I),Ye.innerParams.set(this,I),Object.defineProperties(this,{params:{value:Object.assign({},this.params,y),writable:!1,enumerable:!0}})}var uP=function(d){var f={};return Object.keys(d).forEach(function(v){LI(v)?f[v]=d[v]:Jt("Invalid parameter to update: ".concat(v))}),f};function UI(){var y=Ye.domCache.get(this),d=Ye.innerParams.get(this);if(!d){$I(this);return}y.popup&&be.swalCloseEventFinishedCallback&&(be.swalCloseEventFinishedCallback(),delete be.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),dP(this)}var dP=function(d){$I(d),delete d.params,delete be.keydownHandler,delete be.keydownTarget,delete be.currentInstance},$I=function(d){d.isAwaitingPromise?(uv(Ye,d),d.isAwaitingPromise=!0):(uv(mi,d),uv(Ye,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},uv=function(d,f){for(var v in d)d[v].delete(f)},hP=Object.freeze({__proto__:null,_destroy:UI,close:cr,closeModal:cr,closePopup:cr,closeToast:cr,disableButtons:NI,disableInput:kI,disableLoading:rn,enableButtons:RI,enableInput:PI,getInput:Ba,handleAwaitingPromise:yi,hideLoading:rn,rejectPromise:Fa,resetValidationMessage:FI,showValidationMessage:OI,update:BI}),fP=function(d,f,v){d.toast?pP(d,f,v):(mP(f),vP(f),yP(d,f,v))},pP=function(d,f,v){f.popup.onclick=function(){d&&(gP(d)||d.timer||d.input)||v($n.close)}},gP=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},jh=!1,mP=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(f){d.container.onmouseup=function(){},f.target===d.container&&(jh=!0)}}},vP=function(d){d.container.onmousedown=function(f){f.target===d.container&&f.preventDefault(),d.popup.onmouseup=function(v){d.popup.onmouseup=function(){},(v.target===d.popup||v.target instanceof HTMLElement&&d.popup.contains(v.target))&&(jh=!0)}}},yP=function(d,f,v){f.container.onclick=function(I){if(jh){jh=!1;return}I.target===f.container&&ci(d.allowOutsideClick)&&v($n.backdrop)}},wP=function(d){return C(d)==="object"&&d.jquery},qI=function(d){return d instanceof Element||wP(d)},_P=function(d){var f={};return C(d[0])==="object"&&!qI(d[0])?Object.assign(f,d[0]):["title","html","icon"].forEach(function(v,I){var $=d[I];typeof $=="string"||qI($)?f[v]=$:$!==void 0&&Rn("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(C($)))}),f};function EP(){for(var y=this,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return g(y,f)}function bP(y){var d=function(f){function v(){return a(this,v),o(this,v,arguments)}return P(v,f),E(v,[{key:"_main",value:function($,ne){return A(O(v.prototype),"_main",this).call(this,$,Object.assign({},y,ne))}}])}(this);return d}var IP=function(){return be.timeout&&be.timeout.getTimerLeft()},HI=function(){if(be.timeout)return sh(),be.timeout.stop()},zI=function(){if(be.timeout){var d=be.timeout.start();return no(d),d}},CP=function(){var d=be.timeout;return d&&(d.running?HI():zI())},DP=function(d){if(be.timeout){var f=be.timeout.increase(d);return no(f,!0),f}},TP=function(){return!!(be.timeout&&be.timeout.isRunning())},GI=!1,dv={};function SP(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";dv[y]=this,GI||(document.body.addEventListener("click",AP),GI=!0)}var AP=function(d){for(var f=d.target;f&&f!==document;f=f.parentNode)for(var v in dv){var I=f.getAttribute(v);if(I){dv[v].fire({template:I});return}}},xP=Object.freeze({__proto__:null,argsToParams:_P,bindClickHandler:SP,clickCancel:ov,clickConfirm:ar,clickDeny:iv,enableLoading:Tn,fire:EP,getActions:Xi,getCancelButton:pt,getCloseButton:Aa,getConfirmButton:Cn,getContainer:$t,getDenyButton:gt,getFocusableElements:is,getFooter:nh,getHtmlContainer:Ta,getIcon:Yi,getIconContent:eh,getImage:th,getInputLabel:Sa,getLoader:di,getPopup:Ge,getProgressSteps:rs,getTimerLeft:IP,getTimerProgressBar:Sr,getTitle:Da,getValidationMessage:Zi,increaseTimer:DP,isDeprecatedParameter:jI,isLoading:Fc,isTimerRunning:TP,isUpdatableParameter:LI,isValidParameter:VI,isVisible:rv,mixin:bP,resumeTimer:zI,showLoading:Tn,stopTimer:HI,toggleTimer:CP}),MP=function(){function y(d,f){a(this,y),this.callback=d,this.remaining=f,this.running=!1,this.start()}return E(y,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(f){var v=this.running;return v&&this.stop(),this.remaining+=f,v&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),WI=["swal-title","swal-html","swal-footer"],RP=function(d){var f=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!f)return{};var v=f.content;jP(v);var I=Object.assign(NP(v),PP(v),kP(v),OP(v),FP(v),VP(v),LP(v,WI));return I},NP=function(d){var f={},v=Array.from(d.querySelectorAll("swal-param"));return v.forEach(function(I){gs(I,["name","value"]);var $=I.getAttribute("name"),ne=I.getAttribute("value");typeof Ua[$]=="boolean"?f[$]=ne!=="false":C(Ua[$])==="object"?f[$]=JSON.parse(ne):f[$]=ne}),f},PP=function(d){var f={},v=Array.from(d.querySelectorAll("swal-function-param"));return v.forEach(function(I){var $=I.getAttribute("name"),ne=I.getAttribute("value");f[$]=new Function("return ".concat(ne))()}),f},kP=function(d){var f={},v=Array.from(d.querySelectorAll("swal-button"));return v.forEach(function(I){gs(I,["type","color","aria-label"]);var $=I.getAttribute("type");f["".concat($,"ButtonText")]=I.innerHTML,f["show".concat(li($),"Button")]=!0,I.hasAttribute("color")&&(f["".concat($,"ButtonColor")]=I.getAttribute("color")),I.hasAttribute("aria-label")&&(f["".concat($,"ButtonAriaLabel")]=I.getAttribute("aria-label"))}),f},OP=function(d){var f={},v=d.querySelector("swal-image");return v&&(gs(v,["src","width","height","alt"]),v.hasAttribute("src")&&(f.imageUrl=v.getAttribute("src")||void 0),v.hasAttribute("width")&&(f.imageWidth=v.getAttribute("width")||void 0),v.hasAttribute("height")&&(f.imageHeight=v.getAttribute("height")||void 0),v.hasAttribute("alt")&&(f.imageAlt=v.getAttribute("alt")||void 0)),f},FP=function(d){var f={},v=d.querySelector("swal-icon");return v&&(gs(v,["type","color"]),v.hasAttribute("type")&&(f.icon=v.getAttribute("type")),v.hasAttribute("color")&&(f.iconColor=v.getAttribute("color")),f.iconHtml=v.innerHTML),f},VP=function(d){var f={},v=d.querySelector("swal-input");v&&(gs(v,["type","label","placeholder","value"]),f.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(f.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(f.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(f.inputValue=v.getAttribute("value")));var I=Array.from(d.querySelectorAll("swal-input-option"));return I.length&&(f.inputOptions={},I.forEach(function($){gs($,["value"]);var ne=$.getAttribute("value"),xe=$.innerHTML;f.inputOptions[ne]=xe})),f},LP=function(d,f){var v={};for(var I in f){var $=f[I],ne=d.querySelector($);ne&&(gs(ne,[]),v[$.replace(/^swal-/,"")]=ne.innerHTML.trim())}return v},jP=function(d){var f=WI.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(v){var I=v.tagName.toLowerCase();f.includes(I)||Jt("Unrecognized element <".concat(I,">"))})},gs=function(d,f){Array.from(d.attributes).forEach(function(v){f.indexOf(v.name)===-1&&Jt(['Unrecognized attribute "'.concat(v.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(f.length?"Allowed attributes are: ".concat(f.join(", ")):"To set the value, use HTML within the element.")])})},KI=10,BP=function(d){var f=$t(),v=Ge();typeof d.willOpen=="function"&&d.willOpen(v);var I=window.getComputedStyle(document.body),$=I.overflowY;HP(f,v,d),setTimeout(function(){$P(f,v)},KI),Oc()&&(qP(f,d.scrollbarPadding,$),Sh()),!xa()&&!be.previousActiveElement&&(be.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(v)}),Nn(f,U["no-transition"])},UP=function y(d){var f=Ge();if(!(d.target!==f||!or)){var v=$t();f.removeEventListener(or,y),v.style.overflowY="auto"}},$P=function(d,f){or&&oh(f)?(d.style.overflowY="hidden",f.addEventListener(or,UP)):d.style.overflowY="auto"},qP=function(d,f,v){lr(),f&&v!=="hidden"&&Oa(v),setTimeout(function(){d.scrollTop=0})},HP=function(d,f,v){Ae(d,v.showClass.backdrop),v.animation?(f.style.setProperty("opacity","0","important"),je(f,"grid"),setTimeout(function(){Ae(f,v.showClass.popup),f.style.removeProperty("opacity")},KI)):je(f,"grid"),Ae([document.documentElement,document.body],U.shown),v.heightAuto&&v.backdrop&&!v.toast&&Ae([document.documentElement,document.body],U["height-auto"])},QI={email:function(d,f){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid email address")},url:function(d,f){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid URL")}};function zP(y){y.inputValidator||(y.input==="email"&&(y.inputValidator=QI.email),y.input==="url"&&(y.inputValidator=QI.url))}function GP(y){(!y.target||typeof y.target=="string"&&!document.querySelector(y.target)||typeof y.target!="string"&&!y.target.appendChild)&&(Jt('Target parameter is not valid, defaulting to "body"'),y.target="body")}function WP(y){zP(y),y.showLoaderOnConfirm&&!y.preConfirm&&Jt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),GP(y),typeof y.title=="string"&&(y.title=y.title.split(`
`).join("<br />")),ch(y)}var kr,Bh=new WeakMap,Dt=function(){function y(){if(a(this,y),u(this,Bh,void 0),!(typeof window>"u")){kr=this;for(var d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];var I=Object.freeze(this.constructor.argsToParams(f));this.params=I,this.isAwaitingPromise=!1,h(Bh,this,this._main(kr.params))}}return E(y,[{key:"_main",value:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(cP(Object.assign({},v,f)),be.currentInstance){var I=mi.swalPromiseResolve.get(be.currentInstance),$=be.currentInstance.isAwaitingPromise;be.currentInstance._destroy(),$||I({isDismissed:!0}),Oc()&&hs()}be.currentInstance=kr;var ne=QP(f,v);WP(ne),Object.freeze(ne),be.timeout&&(be.timeout.stop(),delete be.timeout),clearTimeout(be.restoreFocusTimeout);var xe=YP(kr);return Ih(kr,ne),Ye.innerParams.set(kr,ne),KP(kr,xe,ne)}},{key:"then",value:function(f){return l(Bh,this).then(f)}},{key:"finally",value:function(f){return l(Bh,this).finally(f)}}])}(),KP=function(d,f,v){return new Promise(function(I,$){var ne=function(Ne){d.close({isDismissed:!0,dismiss:Ne})};mi.swalPromiseResolve.set(d,I),mi.swalPromiseReject.set(d,$),f.confirmButton.onclick=function(){N(d)},f.denyButton.onclick=function(){j(d)},f.cancelButton.onclick=function(){Y(d,ne)},f.closeButton.onclick=function(){ne($n.close)},fP(v,f,ne),Ch(be,v,ne),kh(d,v),BP(v),ZP(be,v,ne),XP(f,v),setTimeout(function(){f.container.scrollTop=0})})},QP=function(d,f){var v=RP(d),I=Object.assign({},Ua,f,v,d);return I.showClass=Object.assign({},Ua.showClass,I.showClass),I.hideClass=Object.assign({},Ua.hideClass,I.hideClass),I.animation===!1&&(I.showClass={backdrop:"swal2-noanimation"},I.hideClass={}),I},YP=function(d){var f={popup:Ge(),container:$t(),actions:Xi(),confirmButton:Cn(),denyButton:gt(),cancelButton:pt(),loader:di(),closeButton:Aa(),validationMessage:Zi(),progressSteps:rs()};return Ye.domCache.set(d,f),f},ZP=function(d,f,v){var I=Sr();Ft(I),f.timer&&(d.timeout=new MP(function(){v("timer"),delete d.timeout},f.timer),f.timerProgressBar&&(je(I),nn(I,f,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&no(f.timer)})))},XP=function(d,f){if(!f.toast){if(!ci(f.allowEnterKey)){ek();return}JP(d,f)||gi(-1,1)}},JP=function(d,f){return f.focusDeny&&un(d.denyButton)?(d.denyButton.focus(),!0):f.focusCancel&&un(d.cancelButton)?(d.cancelButton.focus(),!0):f.focusConfirm&&un(d.confirmButton)?(d.confirmButton.focus(),!0):!1},ek=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var YI=new Date,ZI=localStorage.getItem("swal-initiation");ZI?(YI.getTime()-Date.parse(ZI))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(function(){y.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(YI))}Dt.prototype.disableButtons=NI,Dt.prototype.enableButtons=RI,Dt.prototype.getInput=Ba,Dt.prototype.disableInput=kI,Dt.prototype.enableInput=PI,Dt.prototype.hideLoading=rn,Dt.prototype.disableLoading=rn,Dt.prototype.showValidationMessage=OI,Dt.prototype.resetValidationMessage=FI,Dt.prototype.close=cr,Dt.prototype.closePopup=cr,Dt.prototype.closeModal=cr,Dt.prototype.closeToast=cr,Dt.prototype.rejectPromise=Fa,Dt.prototype.update=BI,Dt.prototype._destroy=UI,Object.assign(Dt,xP),Object.keys(hP).forEach(function(y){Dt[y]=function(){if(kr&&kr[y]){var d;return(d=kr)[y].apply(d,arguments)}return null}}),Dt.DismissReason=$n,Dt.version="11.11.1";var Uh=Dt;return Uh.default=Uh,Uh});typeof Gr<"u"&&Gr.Sweetalert2&&(Gr.swal=Gr.sweetAlert=Gr.Swal=Gr.SweetAlert=Gr.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var vv=null;var mv=1,yv=Symbol("SIGNAL");function We(t){let e=vv;return vv=t,e}function iC(){return vv}var wv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nk(t){if(!(Cv(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===mv)){if(!t.producerMustRecompute(t)&&!Ev(t)){t.dirty=!1,t.lastCleanEpoch=mv;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=mv}}function _v(t){return t&&(t.nextProducerIndex=0),We(t)}function oC(t,e){if(We(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Cv(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Iv(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ev(t){Dv(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(nk(n),r!==n.version))return!0}return!1}function bv(t){if(Dv(t),Cv(t))for(let e=0;e<t.producerNode.length;e++)Iv(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Iv(t,e){if(rk(t),t.liveConsumerNode.length===1&&ik(t))for(let r=0;r<t.producerNode.length;r++)Iv(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Dv(i),i.producerIndexOfThis[r]=e}}function Cv(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dv(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function rk(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ik(t){return t.producerNode!==void 0}function ok(){throw new Error}var sk=ok;function sC(t){sk=t}function me(t){return typeof t=="function"}function $a(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qh=$a(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var wt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(me(r))try{r()}catch(o){e=o instanceof Qh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aC(o)}catch(s){e=e??[],s instanceof Qh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Qh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)aC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vs(n,e)}remove(e){let{_finalizers:n}=this;n&&vs(n,e),e instanceof t&&e._removeParent(this)}};wt.EMPTY=(()=>{let t=new wt;return t.closed=!0,t})();var Tv=wt.EMPTY;function Yh(t){return t instanceof wt||t&&"closed"in t&&me(t.remove)&&me(t.add)&&me(t.unsubscribe)}function aC(t){me(t)?t():t.unsubscribe()}var hr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qa={setTimeout(t,e,...n){let{delegate:r}=qa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Zh(t){qa.setTimeout(()=>{let{onUnhandledError:e}=hr;if(e)e(t);else throw t})}function Xc(){}var lC=Sv("C",void 0,void 0);function cC(t){return Sv("E",void 0,t)}function uC(t){return Sv("N",t,void 0)}function Sv(t,e,n){return{kind:t,value:e,error:n}}var ys=null;function Ha(t){if(hr.useDeprecatedSynchronousErrorHandling){let e=!ys;if(e&&(ys={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ys;if(ys=null,n)throw r}}else t()}function dC(t){hr.useDeprecatedSynchronousErrorHandling&&ys&&(ys.errorThrown=!0,ys.error=t)}var ws=class extends wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yh(e)&&e.add(this)):this.destination=ck}static create(e,n,r){return new wi(e,n,r)}next(e){this.isStopped?xv(uC(e),this):this._next(e)}error(e){this.isStopped?xv(cC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xv(lC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ak=Function.prototype.bind;function Av(t,e){return ak.call(t,e)}var Mv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Xh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Xh(r)}else Xh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Xh(n)}}},wi=class extends ws{constructor(e,n,r){super();let i;if(me(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&hr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Av(e.next,o),error:e.error&&Av(e.error,o),complete:e.complete&&Av(e.complete,o)}):i=e}this.destination=new Mv(i)}};function Xh(t){hr.useDeprecatedSynchronousErrorHandling?dC(t):Zh(t)}function lk(t){throw t}function xv(t,e){let{onStoppedNotification:n}=hr;n&&qa.setTimeout(()=>n(t,e))}var ck={closed:!0,next:Xc,error:lk,complete:Xc};var za=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fn(t){return t}function Rv(...t){return Nv(t)}function Nv(t){return t.length===0?fn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dk(n)?n:new wi(n,r,i);return Ha(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=hC(r),new r((i,o)=>{let s=new wi({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[za](){return this}pipe(...n){return Nv(n)(this)}toPromise(n){return n=hC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function hC(t){var e;return(e=t??hr.Promise)!==null&&e!==void 0?e:Promise}function uk(t){return t&&me(t.next)&&me(t.error)&&me(t.complete)}function dk(t){return t&&t instanceof ws||uk(t)&&Yh(t)}function Pv(t){return me(t?.lift)}function we(t){return e=>{if(Pv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(t,e,n,r,i){return new kv(t,e,n,r,i)}var kv=class extends ws{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ga(){return we((t,e)=>{let n=null;t._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Wa=class extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wt;let n=this.getSubject();e.add(this.source.subscribe(_e(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wt.EMPTY)}return e}refCount(){return Ga()(this)}};var fC=$a(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Jh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new fC}next(n){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tv:(this.currentObservers=null,o.push(n),new wt(()=>{this.currentObservers=null,vs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return t.create=(e,n)=>new Jh(e,n),t})(),Jh=class extends rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tv}};var Gt=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jc={now(){return(Jc.delegate||Date).now()},delegate:void 0};var ef=class extends rt{constructor(e=1/0,n=1/0,r=Jc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var tf=class extends wt{constructor(e,n){super()}schedule(e,n=0){return this}};var eu={setInterval(t,e,...n){let{delegate:r}=eu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=eu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ka=class extends tf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return eu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&eu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vs(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qa=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qa.now=Jc.now;var Ya=class extends Qa{constructor(e,n=Qa.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var _s=new Ya(Ka);var nf=class extends Ka{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var rf=class extends Ya{};var Ov=new rf(nf);var pn=new Te(t=>t.complete());function pC(t){return t&&me(t.schedule)}function Fv(t){return t[t.length-1]}function of(t){return me(Fv(t))?t.pop():void 0}function Fr(t){return pC(Fv(t))?t.pop():void 0}function gC(t,e){return typeof Fv(t)=="number"?t.pop():e}var sf=t=>t&&typeof t.length=="number"&&typeof t!="function";function af(t){return me(t?.then)}function lf(t){return me(t[za])}function cf(t){return Symbol.asyncIterator&&me(t?.[Symbol.asyncIterator])}function uf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var df=hk();function hf(t){return me(t?.[df])}function ff(t){return JI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield qh(n.read());if(i)return yield qh(void 0);yield yield qh(r)}}finally{n.releaseLock()}})}function pf(t){return me(t?.getReader)}function it(t){if(t instanceof Te)return t;if(t!=null){if(lf(t))return fk(t);if(sf(t))return pk(t);if(af(t))return gk(t);if(cf(t))return mC(t);if(hf(t))return mk(t);if(pf(t))return vk(t)}throw uf(t)}function fk(t){return new Te(e=>{let n=t[za]();if(me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pk(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gk(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Zh)})}function mk(t){return new Te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function mC(t){return new Te(e=>{yk(t,e).catch(n=>e.error(n))})}function vk(t){return mC(ff(t))}function yk(t,e){var n,r,i,o;return XI(this,void 0,void 0,function*(){try{for(n=eC(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Sn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Pn(t,e=0){return we((n,r)=>{n.subscribe(_e(r,i=>Sn(r,t,()=>r.next(i),e),()=>Sn(r,t,()=>r.complete(),e),i=>Sn(r,t,()=>r.error(i),e)))})}function fr(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vC(t,e){return it(t).pipe(fr(e),Pn(e))}function yC(t,e){return it(t).pipe(fr(e),Pn(e))}function wC(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _C(t,e){return new Te(n=>{let r;return Sn(n,e,()=>{r=t[df](),Sn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>me(r?.return)&&r.return()})}function gf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{Sn(n,e,()=>{let r=t[Symbol.asyncIterator]();Sn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function EC(t,e){return gf(ff(t),e)}function bC(t,e){if(t!=null){if(lf(t))return vC(t,e);if(sf(t))return wC(t,e);if(af(t))return yC(t,e);if(cf(t))return gf(t,e);if(hf(t))return _C(t,e);if(pf(t))return EC(t,e)}throw uf(t)}function Pe(t,e){return e?bC(t,e):it(t)}function pe(...t){let e=Fr(t);return Pe(t,e)}function Za(t,e){let n=me(t)?t:()=>t,r=i=>i.error(n());return new Te(e?i=>e.schedule(r,0,i):r)}function Vv(t){return!!t&&(t instanceof Te||me(t.lift)&&me(t.subscribe))}var _i=$a(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function fe(t,e){return we((n,r)=>{let i=0;n.subscribe(_e(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:wk}=Array;function _k(t,e){return wk(e)?t(...e):t(e)}function mf(t){return fe(e=>_k(t,e))}var{isArray:Ek}=Array,{getPrototypeOf:bk,prototype:Ik,keys:Ck}=Object;function vf(t){if(t.length===1){let e=t[0];if(Ek(e))return{args:e,keys:null};if(Dk(e)){let n=Ck(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Dk(t){return t&&typeof t=="object"&&bk(t)===Ik}function yf(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wf(...t){let e=Fr(t),n=of(t),{args:r,keys:i}=vf(t);if(r.length===0)return Pe([],e);let o=new Te(Tk(r,e,i?s=>yf(i,s):fn));return n?o.pipe(mf(n)):o}function Tk(t,e,n=fn){return r=>{IC(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)IC(e,()=>{let u=Pe(t[l],e),h=!1;u.subscribe(_e(r,g=>{o[l]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function IC(t,e,n){t?Sn(n,t,e):e()}function CC(t,e,n,r,i,o,s,a){let l=[],u=0,h=0,g=!1,w=()=>{g&&!l.length&&!u&&e.complete()},E=O=>u<r?A(O):l.push(O),A=O=>{o&&e.next(O),u++;let P=!1;it(n(O,h++)).subscribe(_e(e,W=>{i?.(W),o?E(W):e.next(W)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;l.length&&u<r;){let W=l.shift();s?Sn(e,s,()=>A(W)):A(W)}w()}catch(W){e.error(W)}}))};return t.subscribe(_e(e,E,()=>{g=!0,w()})),()=>{a?.()}}function Bt(t,e,n=1/0){return me(e)?Bt((r,i)=>fe((o,s)=>e(r,o,i,s))(it(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>CC(r,i,t,n)))}function tu(t=1/0){return Bt(fn,t)}function DC(){return tu(1)}function Xa(...t){return DC()(Pe(t,Fr(t)))}function _f(t){return new Te(e=>{it(t()).subscribe(e)})}function Lv(...t){let e=of(t),{args:n,keys:r}=vf(t),i=new Te(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let g=!1;it(n[h]).subscribe(_e(o,w=>{g||(g=!0,u--),a[h]=w},()=>l--,void 0,()=>{(!l||!g)&&(u||o.next(r?yf(r,a):a),o.complete())}))}});return e?i.pipe(mf(e)):i}function jv(...t){let e=Fr(t),n=gC(t,1/0),r=t;return r.length?r.length===1?it(r[0]):tu(n)(Pe(r,e)):pn}function on(t,e){return we((n,r)=>{let i=0;n.subscribe(_e(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ao(t){return we((e,n)=>{let r=null,i=!1,o;r=e.subscribe(_e(n,void 0,void 0,s=>{o=it(t(s,ao(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function TC(t,e,n,r,i){return(o,s)=>{let a=n,l=e,u=0;o.subscribe(_e(s,h=>{let g=u++;l=a?t(l,h,g):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Ja(t,e){return me(e)?Bt(t,e,1):Bt(t,1)}function Bv(t,e=_s){return we((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function l(){let u=s+t,h=e.now();if(h<u){i=this.schedule(void 0,u-h),r.add(i);return}a()}n.subscribe(_e(r,u=>{o=u,s=e.now(),i||(i=e.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function lo(t){return we((e,n)=>{let r=!1;e.subscribe(_e(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ei(t){return t<=0?()=>pn:we((e,n)=>{let r=0;e.subscribe(_e(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Uv(t){return fe(()=>t)}function $v(t,e=fn){return t=t??Sk,we((n,r)=>{let i,o=!0;n.subscribe(_e(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Sk(t,e){return t===e}function Ef(t=Ak){return we((e,n)=>{let r=!1;e.subscribe(_e(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Ak(){return new _i}function nu(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,o)=>t(i,o,r)):fn,Ei(1),n?lo(e):Ef(()=>new _i))}function el(t){return t<=0?()=>pn:we((e,n)=>{let r=[];e.subscribe(_e(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?on((i,o)=>t(i,o,r)):fn,el(1),n?lo(e):Ef(()=>new _i))}function ru(){return we((t,e)=>{let n,r=!1;t.subscribe(_e(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Es(t,e){return we(TC(t,e,arguments.length>=2,!0))}function SC(t={}){let{connector:e=()=>new rt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,u=0,h=!1,g=!1,w=()=>{a?.unsubscribe(),a=void 0},E=()=>{w(),s=l=void 0,h=g=!1},A=()=>{let O=s;E(),O?.unsubscribe()};return we((O,P)=>{u++,!g&&!h&&w();let W=l=l??e();P.add(()=>{u--,u===0&&!g&&!h&&(a=Hv(A,i))}),W.subscribe(P),!s&&u>0&&(s=new wi({next:Z=>W.next(Z),error:Z=>{g=!0,w(),a=Hv(E,n,Z),W.error(Z)},complete:()=>{h=!0,w(),a=Hv(E,r),W.complete()}}),it(O).subscribe(s))})(o)}}function Hv(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new wi({next:()=>{r.unsubscribe(),t()}});return it(e(...n)).subscribe(r)}function bf(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,SC({connector:()=>new ef(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function bs(...t){let e=Fr(t);return we((n,r)=>{(e?Xa(t,n,e):Xa(t,n)).subscribe(r)})}function ct(t,e){return we((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(_e(r,l=>{i?.unsubscribe();let u=0,h=o++;it(t(l,h)).subscribe(i=_e(r,g=>r.next(e?e(l,g,h,u++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function If(t,e){return me(e)?ct(()=>t,e):ct(()=>t)}function zv(t){return we((e,n)=>{it(t).subscribe(_e(n,()=>n.complete(),Xc)),!n.closed&&e.subscribe(n)})}function xt(t,e,n){let r=me(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):fn}var xk="https://g.co/ng/security#xss",ge=class extends Error{constructor(e,n){super(Gy(e,n)),this.code=e}};function Gy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gu(t){return{toString:t}.toString()}var Cf="__parameters__";function Mk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function fD(t,e,n){return gu(()=>{let r=Mk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let g=l.hasOwnProperty(Cf)?l[Cf]:Object.defineProperty(l,Cf,{value:[]})[Cf];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var jr=globalThis;function Je(t){for(let e in t)if(t[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function Rk(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(mn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function AC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Nk=Je({__forward_ref__:Je});function vr(t){return t.__forward_ref__=vr,t.toString=function(){return mn(this())},t}function gn(t){return pD(t)?t():t}function pD(t){return typeof t=="function"&&t.hasOwnProperty(Nk)&&t.__forward_ref__===vr}function ue(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Jf(t){return xC(t,mD)||xC(t,vD)}function gD(t){return Jf(t)!==null}function xC(t,e){return t.hasOwnProperty(e)?t[e]:null}function Pk(t){let e=t&&(t[mD]||t[vD]);return e||null}function MC(t){return t&&(t.hasOwnProperty(RC)||t.hasOwnProperty(kk))?t[RC]:null}var mD=Je({\u0275prov:Je}),RC=Je({\u0275inj:Je}),vD=Je({ngInjectableDef:Je}),kk=Je({ngInjectorDef:Je}),oe=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yD(t){return t&&!!t.\u0275providers}var Ok=Je({\u0275cmp:Je}),Fk=Je({\u0275dir:Je}),Vk=Je({\u0275pipe:Je}),Lk=Je({\u0275mod:Je}),Nf=Je({\u0275fac:Je}),iu=Je({__NG_ELEMENT_ID__:Je}),NC=Je({__NG_ENV_ID__:Je});function ou(t){return typeof t=="string"?t:t==null?"":String(t)}function jk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ou(t)}function Bk(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ge(-200,t)}function Wy(t,e){throw new ge(-201,!1)}var Se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Se||{}),sy;function wD(){return sy}function Hn(t){let e=sy;return sy=t,e}function _D(t,e,n){let r=Jf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Se.Optional)return null;if(e!==void 0)return e;Wy(t,"Injector")}var Uk={},su=Uk,ay="__NG_DI_FLAG__",Pf="ngTempTokenPath",$k="ngTokenPath",qk=/\n/gm,Hk="\u0275",PC="__source",il;function zk(){return il}function co(t){let e=il;return il=t,e}function Gk(t,e=Se.Default){if(il===void 0)throw new ge(-203,!1);return il===null?_D(t,void 0,e):il.get(t,e&Se.Optional?null:void 0,e)}function Q(t,e=Se.Default){return(wD()||Gk)(gn(t),e)}function re(t,e=Se.Default){return Q(t,ep(e))}function ep(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ly(t){let e=[];for(let n=0;n<t.length;n++){let r=gn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ge(900,!1);let i,o=Se.Default;for(let s=0;s<r.length;s++){let a=r[s],l=Wk(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(Q(i,o))}else e.push(Q(r))}return e}function ED(t,e){return t[ay]=e,t.prototype[ay]=e,t}function Wk(t){return t[ay]}function Kk(t,e,n,r){let i=t[Pf];throw e[PC]&&i.unshift(e[PC]),t.message=Qk(`
`+t.message,i,n,r),t[$k]=i,t[Pf]=null,t}function Qk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Hk?t.slice(2):t;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qk,`
  `)}`}var mu=ED(fD("Optional"),8);var bD=ED(fD("SkipSelf"),4);function sl(t,e){let n=t.hasOwnProperty(Nf);return n?t[Nf]:null}function Ky(t,e){t.forEach(n=>Array.isArray(n)?Ky(n,e):e(n))}function ID(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yk(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Zk(t,e,n){let r=vu(t,e);return r>=0?t[r|1]=n:(r=~r,Yk(t,r,e,n)),r}function Gv(t,e){let n=vu(t,e);if(n>=0)return t[n|1]}function vu(t,e){return Xk(t,e,1)}function Xk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var al={},zn=[],ll=new oe(""),CD=new oe("",-1),DD=new oe(""),Of=class{get(e,n=su){if(n===su){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return n}},TD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(TD||{}),Br=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Br||{}),cl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(cl||{});function Jk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function cy(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];tO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function eO(t){return t===3||t===4||t===6}function tO(t){return t.charCodeAt(0)===64}function au(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?kC(t,n,i,null,e[++r]):kC(t,n,i,null,null))}}return t}function kC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var SD="ng-template";function nO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Jk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Qy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Qy(t){return t.type===4&&t.value!==SD}function rO(t,e,n){let r=t.type===4&&!n?SD:t.value;return e===r}function iO(t,e,n){let r=4,i=t.attrs,o=i!==null?aO(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!pr(r)&&!pr(l))return!1;if(s&&pr(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!rO(t,l,n)||l===""&&e.length===1){if(pr(r))return!1;s=!0}}else if(r&8){if(i===null||!nO(t,i,l,n)){if(pr(r))return!1;s=!0}}else{let u=e[++a],h=oO(l,i,Qy(t),n);if(h===-1){if(pr(r))return!1;s=!0;continue}if(u!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&u!==g){if(pr(r))return!1;s=!0}}}}return pr(r)||s}function pr(t){return(t&1)===0}function oO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return lO(e,t)}function sO(t,e,n=!1){for(let r=0;r<e.length;r++)if(iO(t,e[r],n))return!0;return!1}function aO(t){for(let e=0;e<t.length;e++){let n=t[e];if(eO(n))return e}return t.length}function lO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function OC(t,e){return t?":not("+e.trim()+")":e}function cO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pr(s)&&(e+=OC(o,i),i=""),r=s,o=o||!pr(r);n++}return i!==""&&(e+=OC(o,i)),e}function uO(t){return t.map(cO).join(",")}function dO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!pr(i))break;i=o}r++}return{attrs:e,classes:n}}function ut(t){return gu(()=>{let e=ND(t),n=Ve(J({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===TD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Br.Emulated,styles:t.styles||zn,_:null,schemas:t.schemas||null,tView:null,id:""});PD(n);let r=t.dependencies;return n.directiveDefs=VC(r,!1),n.pipeDefs=VC(r,!0),n.id=pO(n),n})}function hO(t){return Ds(t)||AD(t)}function fO(t){return t!==null}function Kt(t){return gu(()=>({type:t.type,bootstrap:t.bootstrap||zn,declarations:t.declarations||zn,imports:t.imports||zn,exports:t.exports||zn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function FC(t,e){if(t==null)return al;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=cl.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==cl.None?[r,a]:r,e[o]=s):n[o]=r}return n}function _t(t){return gu(()=>{let e=ND(t);return PD(e),e})}function Ds(t){return t[Ok]||null}function AD(t){return t[Fk]||null}function xD(t){return t[Vk]||null}function MD(t){let e=Ds(t)||AD(t)||xD(t);return e!==null?e.standalone:!1}function RD(t,e){let n=t[Lk]||null;if(!n&&e===!0)throw new Error(`Type ${mn(t)} does not have '\u0275mod' property.`);return n}function ND(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||al,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:FC(t.inputs,e),outputs:FC(t.outputs),debugInfo:null}}function PD(t){t.features?.forEach(e=>e(t))}function VC(t,e){if(!t)return null;let n=e?xD:hO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(fO)}function pO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Yy(t){return{\u0275providers:t}}function Zy(...t){return{\u0275providers:kD(!0,t),\u0275fromNgModule:!0}}function kD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ky(e,s=>{let a=s;uy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&OD(i,o),n}function OD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xy(i,o=>{e(o,r)})}}function uy(t,e,n,r){if(t=gn(t),!t)return!1;let i=null,o=MC(t),s=!o&&Ds(t);if(!o&&!s){let l=t.ngModule;if(o=MC(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)uy(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ky(o.imports,h=>{uy(h,e,n,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&OD(u,e)}if(!a){let u=sl(i)||(()=>new i);e({provide:i,useFactory:u,deps:zn},i),e({provide:DD,useValue:i,multi:!0},i),e({provide:ll,useValue:()=>Q(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=t;Xy(l,h=>{e(h,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Xy(t,e){for(let n of t)yD(n)&&(n=n.\u0275providers),Array.isArray(n)?Xy(n,e):e(n)}var gO=Je({provide:String,useValue:Je});function FD(t){return t!==null&&typeof t=="object"&&gO in t}function mO(t){return!!(t&&t.useExisting)}function vO(t){return!!(t&&t.useFactory)}function ul(t){return typeof t=="function"}function yO(t){return!!t.useClass}var tp=new oe(""),Sf={},wO={},Wv;function Jy(){return Wv===void 0&&(Wv=new Of),Wv}var Kn=class{},lu=class extends Kn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hy(e,s=>this.processProvider(s)),this.records.set(CD,tl(void 0,this)),i.has("environment")&&this.records.set(Kn,tl(void 0,this));let o=this.records.get(tp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(DD,zn,Se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=We(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),We(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=co(this),r=Hn(void 0),i;try{return e()}finally{co(n),Hn(r)}}get(e,n=su,r=Se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(NC))return e[NC](this);r=ep(r);let i,o=co(this),s=Hn(void 0);try{if(!(r&Se.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=CO(e)&&Jf(e);u&&this.injectableDefInScope(u)?l=tl(dy(e),Sf):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&Se.Self?Jy():this.parent;return n=r&Se.Optional&&n===su?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Pf]=a[Pf]||[]).unshift(mn(e)),o)throw a;return Kk(a,e,"R3InjectorError",this.source)}else throw a}finally{Hn(s),co(o)}}resolveInjectorInitializers(){let e=We(null),n=co(this),r=Hn(void 0),i;try{let o=this.get(ll,zn,Se.Self);for(let s of o)s()}finally{co(n),Hn(r),We(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(e){e=gn(e);let n=ul(e)?e:gn(e&&e.provide),r=EO(e);if(!ul(e)&&e.multi===!0){let i=this.records.get(n);i||(i=tl(void 0,Sf,!0),i.factory=()=>ly(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=We(null);try{return n.value===Sf&&(n.value=wO,n.value=n.factory()),typeof n.value=="object"&&n.value&&IO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{We(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=gn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dy(t){let e=Jf(t),n=e!==null?e.factory:sl(t);if(n!==null)return n;if(t instanceof oe)throw new ge(204,!1);if(t instanceof Function)return _O(t);throw new ge(204,!1)}function _O(t){if(t.length>0)throw new ge(204,!1);let n=Pk(t);return n!==null?()=>n.factory(t):()=>new t}function EO(t){if(FD(t))return tl(void 0,t.useValue);{let e=VD(t);return tl(e,Sf)}}function VD(t,e,n){let r;if(ul(t)){let i=gn(t);return sl(i)||dy(i)}else if(FD(t))r=()=>gn(t.useValue);else if(vO(t))r=()=>t.useFactory(...ly(t.deps||[]));else if(mO(t))r=()=>Q(gn(t.useExisting));else{let i=gn(t&&(t.useClass||t.provide));if(bO(t))r=()=>new i(...ly(t.deps));else return sl(i)||dy(i)}return r}function tl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bO(t){return!!t.deps}function IO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function CO(t){return typeof t=="function"||typeof t=="object"&&t instanceof oe}function hy(t,e){for(let n of t)Array.isArray(n)?hy(n,e):n&&yD(n)?hy(n.\u0275providers,e):e(n)}function Si(t,e){t instanceof lu&&t.assertNotDestroyed();let n,r=co(t),i=Hn(void 0);try{return e()}finally{co(r),Hn(i)}}function DO(){return wD()!==void 0||zk()!=null}function TO(t){return typeof t=="function"}var Ai=0,ke=1,ve=2,vn=3,gr=4,yr=5,Ff=6,Vf=7,mr=8,dl=9,bi=10,Mt=11,cu=12,LC=13,wl=14,Ur=15,hl=16,nl=17,fl=18,np=19,LD=20,uo=21,Kv=22,Gn=23,Ii=25,jD=1;var Ts=7,Lf=8,jf=9,Wn=10,Bf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Bf||{});function ho(t){return Array.isArray(t)&&typeof t[jD]=="object"}function xi(t){return Array.isArray(t)&&t[jD]===!0}function ew(t){return(t.flags&4)!==0}function rp(t){return t.componentOffset>-1}function ip(t){return(t.flags&1)===1}function fo(t){return!!t.template}function fy(t){return(t[ve]&512)!==0}var py=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function BD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Mi(){return UD}function UD(t){return t.type.prototype.ngOnChanges&&(t.setInput=AO),SO}Mi.ngInherit=!0;function SO(){let t=qD(this),e=t?.current;if(e){let n=t.previous;if(n===al)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function AO(t,e,n,r,i){let o=this.declaredInputs[r],s=qD(t)||xO(t,{previous:al,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new py(u&&u.currentValue,n,l===al),BD(t,e,i,n)}var $D="__ngSimpleChanges__";function qD(t){return t[$D]||null}function xO(t,e){return t[$D]=e}var jC=null;var Vr=function(t,e,n){jC?.(t,e,n)},MO="svg",RO="math";function $r(t){for(;Array.isArray(t);)t=t[Ai];return t}function HD(t,e){return $r(e[t])}function Qn(t,e){return $r(e[t.index])}function zD(t,e){return t.data[e]}function vo(t,e){let n=e[t];return ho(n)?n:n[Ai]}function tw(t){return(t[ve]&128)===128}function NO(t){return xi(t[vn])}function pl(t,e){return e==null?null:t[e]}function GD(t){t[nl]=0}function WD(t){t[ve]&1024||(t[ve]|=1024,tw(t)&&op(t))}function PO(t,e){for(;t>0;)e=e[wl],t--;return e}function uu(t){return!!(t[ve]&9216||t[Gn]?.dirty)}function gy(t){t[bi].changeDetectionScheduler?.notify(7),t[ve]&64&&(t[ve]|=1024),uu(t)&&op(t)}function op(t){t[bi].changeDetectionScheduler?.notify(0);let e=Ss(t);for(;e!==null&&!(e[ve]&8192||(e[ve]|=8192,!tw(e)));)e=Ss(e)}function KD(t,e){if((t[ve]&256)===256)throw new ge(911,!1);t[uo]===null&&(t[uo]=[]),t[uo].push(e)}function kO(t,e){if(t[uo]===null)return;let n=t[uo].indexOf(e);n!==-1&&t[uo].splice(n,1)}function Ss(t){let e=t[vn];return xi(e)?e[vn]:e}var Me={lFrame:sT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var QD=!1;function OO(){return Me.lFrame.elementDepthCount}function FO(){Me.lFrame.elementDepthCount++}function VO(){Me.lFrame.elementDepthCount--}function YD(){return Me.bindingsEnabled}function LO(){return Me.skipHydrationRootTNode!==null}function jO(t){return Me.skipHydrationRootTNode===t}function BO(){Me.skipHydrationRootTNode=null}function tt(){return Me.lFrame.lView}function yn(){return Me.lFrame.tView}function ZD(t){return Me.lFrame.contextLView=t,t[mr]}function XD(t){return Me.lFrame.contextLView=null,t}function wn(){let t=JD();for(;t!==null&&t.type===64;)t=t.parent;return t}function JD(){return Me.lFrame.currentTNode}function UO(){let t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ps(t,e){let n=Me.lFrame;n.currentTNode=t,n.isParent=e}function nw(){return Me.lFrame.isParent}function eT(){Me.lFrame.isParent=!1}function tT(){return QD}function BC(t){QD=t}function $O(){return Me.lFrame.bindingIndex}function qO(t){return Me.lFrame.bindingIndex=t}function sp(){return Me.lFrame.bindingIndex++}function nT(t){let e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HO(){return Me.lFrame.inI18n}function zO(t,e){let n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,my(e)}function GO(){return Me.lFrame.currentDirectiveIndex}function my(t){Me.lFrame.currentDirectiveIndex=t}function WO(t){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function rT(t){Me.lFrame.currentQueryIndex=t}function KO(t){let e=t[ke];return e.type===2?e.declTNode:e.type===1?t[yr]:null}function iT(t,e,n){if(n&Se.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Se.Host);)if(i=KO(o),i===null||(o=o[wl],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Me.lFrame=oT();return r.currentTNode=e,r.lView=t,!0}function rw(t){let e=oT(),n=t[ke];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oT(){let t=Me.lFrame,e=t===null?null:t.child;return e===null?sT(t):e}function sT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function aT(){let t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var lT=aT;function iw(){let t=aT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function QO(t){return(Me.lFrame.contextLView=PO(t,Me.lFrame.contextLView))[mr]}function ks(){return Me.lFrame.selectedIndex}function As(t){Me.lFrame.selectedIndex=t}function ow(){let t=Me.lFrame;return zD(t.tView,t.selectedIndex)}function YO(){return Me.lFrame.currentNamespace}var cT=!0;function ap(){return cT}function lp(t){cT=t}function ZO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function cp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Af(t,e,n){uT(t,e,3,n)}function xf(t,e,n,r){(t[ve]&3)===n&&uT(t,e,n,r)}function Qv(t,e){let n=t[ve];(n&3)===e&&(n&=16383,n+=1,t[ve]=n)}function uT(t,e,n,r){let i=r!==void 0?t[nl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[nl]+=65536),(a<o||o==-1)&&(XO(t,n,e,l),t[nl]=(t[nl]&4294901760)+l+2),l++}function UC(t,e){Vr(4,t,e);let n=We(null);try{e.call(t)}finally{We(n),Vr(5,t,e)}}function XO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ve]>>14<t[nl]>>16&&(t[ve]&3)===e&&(t[ve]+=16384,UC(a,o)):UC(a,o)}var ol=-1,xs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function JO(t){return t instanceof xs}function eF(t){return(t.flags&8)!==0}function tF(t){return(t.flags&16)!==0}function dT(t){return t!==ol}function Uf(t){return t&32767}function nF(t){return t>>16}function $f(t,e){let n=nF(t),r=e;for(;n>0;)r=r[wl],n--;return r}var vy=!0;function $C(t){let e=vy;return vy=t,e}var rF=256,hT=rF-1,fT=5,iF=0,Lr={};function oF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(iu)&&(r=n[iu]),r==null&&(r=n[iu]=iF++);let i=r&hT,o=1<<i;e.data[t+(i>>fT)]|=o}function qf(t,e){let n=pT(t,e);if(n!==-1)return n;let r=e[ke];r.firstCreatePass&&(t.injectorIndex=e.length,Yv(r.data,t),Yv(e,null),Yv(r.blueprint,null));let i=sw(t,e),o=t.injectorIndex;if(dT(i)){let s=Uf(i),a=$f(i,e),l=a[ke].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Yv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=wT(i),r===null)return ol;if(n++,i=i[wl],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ol}function yy(t,e,n){oF(t,e,n)}function gT(t,e,n){if(n&Se.Optional||t!==void 0)return t;Wy(e,"NodeInjector")}function mT(t,e,n,r){if(n&Se.Optional&&r===void 0&&(r=null),!(n&(Se.Self|Se.Host))){let i=t[dl],o=Hn(void 0);try{return i?i.get(e,r,n&Se.Optional):_D(e,r,n&Se.Optional)}finally{Hn(o)}}return gT(r,e,n)}function vT(t,e,n,r=Se.Default,i){if(t!==null){if(e[ve]&2048&&!(r&Se.Self)){let s=uF(t,e,n,r,Lr);if(s!==Lr)return s}let o=yT(t,e,n,r,Lr);if(o!==Lr)return o}return mT(e,n,r,i)}function yT(t,e,n,r,i){let o=lF(n);if(typeof o=="function"){if(!iT(e,t,r))return r&Se.Host?gT(i,n,r):mT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Se.Optional))Wy(n);else return s}finally{lT()}}else if(typeof o=="number"){let s=null,a=pT(t,e),l=ol,u=r&Se.Host?e[Ur][yr]:null;for((a===-1||r&Se.SkipSelf)&&(l=a===-1?sw(t,e):e[a+8],l===ol||!HC(r,!1)?a=-1:(s=e[ke],a=Uf(l),e=$f(l,e)));a!==-1;){let h=e[ke];if(qC(o,a,h.data)){let g=sF(a,e,n,s,r,u);if(g!==Lr)return g}l=e[a+8],l!==ol&&HC(r,e[ke].data[a+8]===u)&&qC(o,a,e)?(s=h,a=Uf(l),e=$f(l,e)):a=-1}}return i}function sF(t,e,n,r,i,o){let s=e[ke],a=s.data[t+8],l=r==null?rp(a)&&vy:r!=s&&(a.type&3)!==0,u=i&Se.Host&&o===a,h=aF(a,s,n,l,u);return h!==null?gl(e,s,h,a):Lr}function aF(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,u=t.directiveEnd,h=o>>20,g=r?a:a+h,w=i?a+h:u;for(let E=g;E<w;E++){let A=s[E];if(E<l&&n===A||E>=l&&A.type===n)return E}if(i){let E=s[l];if(E&&fo(E)&&E.type===n)return l}return null}function gl(t,e,n,r){let i=t[n],o=e.data;if(JO(i)){let s=i;s.resolving&&Bk(jk(o[n]));let a=$C(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Hn(s.injectImpl):null,h=iT(t,r,Se.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&ZO(n,o[n],e)}finally{u!==null&&Hn(u),$C(a),s.resolving=!1,lT()}}return i}function lF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(iu)?t[iu]:void 0;return typeof e=="number"?e>=0?e&hT:cF:e}function qC(t,e,n){let r=1<<t;return!!(n[e+(t>>fT)]&r)}function HC(t,e){return!(t&Se.Self)&&!(t&Se.Host&&e)}var Cs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vT(this._tNode,this._lView,e,ep(r),n)}};function cF(){return new Cs(wn(),tt())}function Ri(t){return gu(()=>{let e=t.prototype.constructor,n=e[Nf]||wy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Nf]||wy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function wy(t){return pD(t)?()=>{let e=wy(gn(t));return e&&e()}:sl(t)}function uF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ve]&2048&&!(s[ve]&512);){let a=yT(o,s,n,r|Se.Self,Lr);if(a!==Lr)return a;let l=o.parent;if(!l){let u=s[LD];if(u){let h=u.get(n,Lr,r);if(h!==Lr)return h}l=wT(s),s=s[wl]}o=l}return i}function wT(t){let e=t[ke],n=e.type;return n===2?e.declTNode:n===1?t[yr]:null}function zC(t,e=null,n=null,r){let i=_T(t,e,n,r);return i.resolveInjectorInitializers(),i}function _T(t,e=null,n=null,r,i=new Set){let o=[n||zn,Zy(t)];return r=r||(typeof t=="object"?void 0:mn(t)),new lu(o,e||Jy(),r||null,i)}var Is=class Is{static create(e,n){if(Array.isArray(e))return zC({name:""},n,e,"");{let r=e.name??"";return zC({name:r},e.parent,e.providers,r)}}};Is.THROW_IF_NOT_FOUND=su,Is.NULL=new Of,Is.\u0275prov=ue({token:Is,providedIn:"any",factory:()=>Q(CD)}),Is.__NG_ELEMENT_ID__=-1;var po=Is;var dF=new oe("");dF.__NG_ELEMENT_ID__=t=>{let e=wn();if(e===null)throw new ge(204,!1);if(e.type&2)return e.value;if(t&Se.Optional)return null;throw new ge(204,!1)};var hF="ngOriginalError";function Zv(t){return t[hF]}var Ci=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Zv(e);for(;n&&Zv(n);)n=Zv(n);return n||null}},ET=new oe("",{providedIn:"root",factory:()=>re(Ci).handleError.bind(void 0)}),bT=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fF,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),_y=class extends bT{constructor(e){super(),this._lView=e}onDestroy(e){return KD(this._lView,e),()=>kO(this._lView,e)}};function fF(){return new _y(tt())}function pF(){return up(wn(),tt())}function up(t,e){return new Ni(Qn(t,e))}var Ni=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=pF;let t=e;return t})();var _l=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Ey=class extends rt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,DO()&&(this.destroyRef=re(bT,{optional:!0})??void 0,this.pendingTasks=re(_l,{optional:!0})??void 0)}emit(e){let n=We(null);try{super.next(e)}finally{We(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof wt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ot=Ey;function IT(t){return(t.flags&128)===128}var CT=new Map,gF=0;function mF(){return gF++}function vF(t){CT.set(t[np],t)}function yF(t){CT.delete(t[np])}var GC="__ngContext__";function go(t,e){ho(e)?(t[GC]=e[np],vF(e)):t[GC]=e}function DT(t){return ST(t[cu])}function TT(t){return ST(t[gr])}function ST(t){for(;t!==null&&!xi(t);)t=t[gr];return t}var by;function AT(t){by=t}function wF(){if(by!==void 0)return by;if(typeof document<"u")return document;throw new ge(210,!1)}var dp=new oe("",{providedIn:"root",factory:()=>_F}),_F="ng",aw=new oe(""),An=new oe("",{providedIn:"platform",factory:()=>"unknown"});var lw=new oe("",{providedIn:"root",factory:()=>wF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EF="h",bF="b";var IF=()=>null;function cw(t,e,n=!1){return IF(t,e,n)}var xT=!1,CF=new oe("",{providedIn:"root",factory:()=>xT});var Iy=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xk})`}};function uw(t){return t instanceof Iy?t.changingThisBreaksApplicationSecurity:t}var DF=/^>|^->|<!--|-->|--!>|<!-$/g,TF=/(<|>)/g,SF="\u200B$1\u200B";function AF(t){return t.replace(DF,e=>e.replace(TF,SF))}function MT(t){return t instanceof Function?t():t}var Di=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Di||{}),xF;function dw(t,e){return xF(t,e)}function rl(t,e,n,r,i){if(r!=null){let o,s=!1;xi(r)?o=r:ho(r)&&(s=!0,r=r[Ai]);let a=$r(r);t===0&&n!==null?i==null?OT(e,n,a):Hf(e,n,a,i||null,!0):t===1&&n!==null?Hf(e,n,a,i||null,!0):t===2?GF(e,a,s):t===3&&e.destroyNode(a),o!=null&&KF(e,t,o,n,i)}}function MF(t,e){return t.createText(e)}function RF(t,e,n){t.setValue(e,n)}function NF(t,e){return t.createComment(AF(e))}function RT(t,e,n){return t.createElement(e,n)}function PF(t,e){NT(t,e),e[Ai]=null,e[yr]=null}function kF(t,e,n,r,i,o){r[Ai]=i,r[yr]=e,fp(t,r,n,1,i,o)}function NT(t,e){e[bi].changeDetectionScheduler?.notify(8),fp(t,e,e[Mt],2,null,null)}function OF(t){let e=t[cu];if(!e)return Xv(t[ke],t);for(;e;){let n=null;if(ho(e))n=e[cu];else{let r=e[Wn];r&&(n=r)}if(!n){for(;e&&!e[gr]&&e!==t;)ho(e)&&Xv(e[ke],e),e=e[vn];e===null&&(e=t),ho(e)&&Xv(e[ke],e),n=e&&e[gr]}e=n}}function FF(t,e,n,r){let i=Wn+r,o=n.length;r>0&&(n[i-1][gr]=e),r<o-Wn?(e[gr]=n[i],ID(n,Wn+r,e)):(n.push(e),e[gr]=null),e[vn]=n;let s=e[hl];s!==null&&n!==s&&PT(s,e);let a=e[fl];a!==null&&a.insertView(t),gy(e),e[ve]|=128}function PT(t,e){let n=t[jf],r=e[vn];if(ho(r))t[ve]|=Bf.HasTransplantedViews;else{let i=r[vn][Ur];e[Ur]!==i&&(t[ve]|=Bf.HasTransplantedViews)}n===null?t[jf]=[e]:n.push(e)}function hw(t,e){let n=t[jf],r=n.indexOf(e);n.splice(r,1)}function Cy(t,e){if(t.length<=Wn)return;let n=Wn+e,r=t[n];if(r){let i=r[hl];i!==null&&i!==t&&hw(i,r),e>0&&(t[n-1][gr]=r[gr]);let o=kf(t,Wn+e);PF(r[ke],r);let s=o[fl];s!==null&&s.detachView(o[ke]),r[vn]=null,r[gr]=null,r[ve]&=-129}return r}function kT(t,e){if(!(e[ve]&256)){let n=e[Mt];n.destroyNode&&fp(t,e,n,3,null,null),OF(e)}}function Xv(t,e){if(e[ve]&256)return;let n=We(null);try{e[ve]&=-129,e[ve]|=256,e[Gn]&&bv(e[Gn]),LF(t,e),VF(t,e),e[ke].type===1&&e[Mt].destroy();let r=e[hl];if(r!==null&&xi(e[vn])){r!==e[vn]&&hw(r,e);let i=e[fl];i!==null&&i.detachView(t)}yF(e)}finally{We(n)}}function VF(t,e){let n=t.cleanup,r=e[Vf];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Vf]=null);let i=e[uo];if(i!==null){e[uo]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function LF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof xs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Vr(4,a,l);try{l.call(a)}finally{Vr(5,a,l)}}else{Vr(4,i,o);try{o.call(i)}finally{Vr(5,i,o)}}}}}function jF(t,e,n){return BF(t,e.parent,n)}function BF(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ai];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Br.None||o===Br.Emulated)return null}return Qn(r,n)}}function Hf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function OT(t,e,n){t.appendChild(e,n)}function WC(t,e,n,r,i){r!==null?Hf(t,e,n,r,i):OT(t,e,n)}function UF(t,e,n,r){t.removeChild(e,n,r)}function fw(t,e){return t.parentNode(e)}function $F(t,e){return t.nextSibling(e)}function qF(t,e,n){return zF(t,e,n)}function HF(t,e,n){return t.type&40?Qn(t,n):null}var zF=HF,KC;function hp(t,e,n,r){let i=jF(t,r,e),o=e[Mt],s=r.parent||e[yr],a=qF(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)WC(o,i,n[l],a,!1);else WC(o,i,n,a,!1);KC!==void 0&&KC(o,r,e,n,i)}function Mf(t,e){if(e!==null){let n=e.type;if(n&3)return Qn(e,t);if(n&4)return Dy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Mf(t,r);{let i=t[e.index];return xi(i)?Dy(-1,i):$r(i)}}else{if(n&32)return dw(e,t)()||$r(t[e.index]);{let r=FT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ss(t[Ur]);return Mf(i,r)}else return Mf(t,e.next)}}}return null}function FT(t,e){if(e!==null){let r=t[Ur][yr],i=e.projection;return r.projection[i]}return null}function Dy(t,e){let n=Wn+t+1;if(n<e.length){let r=e[n],i=r[ke].firstChild;if(i!==null)return Mf(r,i)}return e[Ts]}function GF(t,e,n){let r=fw(t,e);r&&UF(t,r,e,n)}function pw(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&go($r(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)pw(t,e,n.child,r,i,o,!1),rl(e,t,i,a,o);else if(l&32){let u=dw(n,r),h;for(;h=u();)rl(e,t,i,h,o);rl(e,t,i,a,o)}else l&16?WF(t,e,r,n,i,o):rl(e,t,i,a,o);n=s?n.projectionNext:n.next}}function fp(t,e,n,r,i,o){pw(n,r,t.firstChild,e,i,o,!1)}function WF(t,e,n,r,i,o){let s=n[Ur],l=s[yr].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];rl(e,t,i,h,o)}else{let u=l,h=s[vn];IT(r)&&(u.flags|=128),pw(t,e,u,h,i,o,!0)}}function KF(t,e,n,r,i){let o=n[Ts],s=$r(n);o!==s&&rl(e,t,r,o,i);for(let a=Wn;a<n.length;a++){let l=n[a];fp(l[ke],l,t,e,r,o)}}function QF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Di.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Di.Important),t.setStyle(n,r,i,o))}}function YF(t,e,n){t.setAttribute(e,"style",n)}function VT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function LT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&cy(t,e,r),i!==null&&VT(t,e,i),o!==null&&YF(t,e,o)}var yo={};function q(t=1){jT(yn(),tt(),ks()+t,!1)}function jT(t,e,n,r){if(!r)if((e[ve]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Af(e,o,n)}else{let o=t.preOrderHooks;o!==null&&xf(e,o,0,n)}As(n)}function se(t,e=Se.Default){let n=tt();if(n===null)return Q(t,e);let r=wn();return vT(r,n,gn(t),e)}function BT(t,e,n,r,i,o){let s=We(null);try{let a=null;i&cl.SignalBased&&(a=e[r][yv]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&cl.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):BD(e,a,r,o)}finally{We(s)}}function ZF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)As(~i);else{let o=i,s=n[++r],a=n[++r];zO(s,o);let l=e[o];a(2,l)}}}finally{As(-1)}}function pp(t,e,n,r,i,o,s,a,l,u,h){let g=e.blueprint.slice();return g[Ai]=i,g[ve]=r|4|128|8|64,(u!==null||t&&t[ve]&2048)&&(g[ve]|=2048),GD(g),g[vn]=g[wl]=t,g[mr]=n,g[bi]=s||t&&t[bi],g[Mt]=a||t&&t[Mt],g[dl]=l||t&&t[dl]||null,g[yr]=o,g[np]=mF(),g[Ff]=h,g[LD]=u,g[Ur]=e.type==2?t[Ur]:g,g}function yu(t,e,n,r,i){let o=t.data[e];if(o===null)o=XF(t,e,n,r,i),HO()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=UO();o.injectorIndex=s===null?-1:s.injectorIndex}return Ps(o,!0),o}function XF(t,e,n,r,i){let o=JD(),s=nw(),a=s?o:o&&o.parent,l=t.data[e]=r2(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function UT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function $T(t,e,n,r,i){let o=ks(),s=r&2;try{As(-1),s&&e.length>Ii&&jT(t,e,Ii,!1),Vr(s?2:0,i),n(r,i)}finally{As(o),Vr(s?3:1,i)}}function gw(t,e,n){if(ew(e)){let r=We(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{We(r)}}}function mw(t,e,n){YD()&&(c2(t,e,n,Qn(n,e)),(n.flags&64)===64&&GT(t,e,n))}function vw(t,e,n=Qn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function qT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=yw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function yw(t,e,n,r,i,o,s,a,l,u,h){let g=Ii+r,w=g+i,E=JF(g,w),A=typeof u=="function"?u():u;return E[ke]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:A,incompleteFirstPass:!1,ssrId:h}}function JF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:yo);return n}function e2(t,e,n,r){let o=r.get(CF,xT)||n===Br.ShadowDom,s=t.selectRootElement(e,o);return t2(s),s}function t2(t){n2(t)}var n2=()=>null;function r2(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LO()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function QC(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=cl.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?YC(r,n,u,a,l):YC(r,n,u,a)}return r}function YC(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function i2(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,u=null;for(let h=r;h<i;h++){let g=o[h],w=n?n.get(g):null,E=w?w.inputs:null,A=w?w.outputs:null;l=QC(0,g.inputs,h,l,E),u=QC(1,g.outputs,h,u,A);let O=l!==null&&s!==null&&!Qy(e)?_2(l,h,s):null;a.push(O)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function o2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function HT(t,e,n,r,i,o,s,a){let l=Qn(e,n),u=e.inputs,h;!a&&u!=null&&(h=u[r])?(_w(t,n,h,r,i),rp(e)&&s2(n,e.index)):e.type&3?(r=o2(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function s2(t,e){let n=vo(e,t);n[ve]&16||(n[ve]|=64)}function ww(t,e,n,r){if(YD()){let i=r===null?null:{"":-1},o=d2(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&zT(t,e,n,s,i,a),i&&h2(n,r,i)}n.mergedAttrs=au(n.mergedAttrs,n.attrs)}function zT(t,e,n,r,i,o){for(let u=0;u<r.length;u++)yy(qf(n,e),t,r[u].type);p2(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let h=r[u];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=UT(t,e,r.length,null);for(let u=0;u<r.length;u++){let h=r[u];n.mergedAttrs=au(n.mergedAttrs,h.hostAttrs),g2(t,n,e,l,h),f2(l,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}i2(t,n,o)}function a2(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;l2(s)!=a&&s.push(a),s.push(n,r,o)}}function l2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function c2(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;rp(n)&&m2(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qf(n,e),go(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],u=gl(e,t,a,n);if(go(u,e),s!==null&&w2(e,a-i,u,l,n,s),fo(l)){let h=vo(n.index,e);h[mr]=gl(e,t,a,n)}}}function GT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=GO();try{As(o);for(let a=r;a<i;a++){let l=t.data[a],u=e[a];my(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&u2(l,u)}}finally{As(-1),my(s)}}function u2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function d2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(sO(e,s.selectors,!1))if(r||(r=[]),fo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;Ty(t,e,l)}else r.unshift(s),Ty(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ty(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function h2(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new ge(-301,!1);r.push(e[i],o)}}}function f2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;fo(e)&&(n[""]=t)}}function p2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function g2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=sl(i.type,!0)),s=new xs(o,fo(i),se);t.blueprint[r]=s,n[r]=s,a2(t,e,r,UT(t,n,i.hostVars,yo),i)}function m2(t,e,n){let r=Qn(e,t),i=qT(n),o=t[bi].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=gp(t,pp(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function v2(t,e,n,r,i,o){let s=Qn(t,e);y2(e[Mt],s,o,t.value,n,r,i)}function y2(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ou(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function w2(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],h=s[a++],g=s[a++];BT(r,n,l,u,h,g)}}function _2(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function WT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KT(t,e){let n=t.contentQueries;if(n!==null){let r=We(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];rT(o),a.contentQueries(2,e[s],s)}}}finally{We(r)}}}function gp(t,e){return t[cu]?t[LC][gr]=e:t[cu]=e,t[LC]=e,e}function Sy(t,e,n){rT(0);let r=We(null);try{e(t,n)}finally{We(r)}}function E2(t){return t[Vf]??=[]}function b2(t){return t.cleanup??=[]}function QT(t,e){let n=t[dl],r=n?n.get(Ci,null):null;r&&r.handleError(e)}function _w(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],u=e[s],h=t.data[s];BT(h,u,r,a,l,i)}}function YT(t,e,n){let r=HD(e,t);RF(t[Mt],r,n)}function I2(t,e){let n=vo(e,t),r=n[ke];C2(r,n);let i=n[Ai];i!==null&&n[Ff]===null&&(n[Ff]=cw(i,n[dl])),Ew(r,n,n[mr])}function C2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ew(t,e,n){rw(e);try{let r=t.viewQuery;r!==null&&Sy(1,r,n);let i=t.template;i!==null&&$T(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[fl]?.finishViewCreation(t),t.staticContentQueries&&KT(t,e),t.staticViewQueries&&Sy(2,t.viewQuery,n);let o=t.components;o!==null&&D2(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ve]&=-5,iw()}}function D2(t,e){for(let n=0;n<e.length;n++)I2(t,e[n])}function T2(t,e,n,r){let i=We(null);try{let o=e.tView,a=t[ve]&4096?4096:16,l=pp(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];l[hl]=u;let h=t[fl];return h!==null&&(l[fl]=h.createEmbeddedView(o)),Ew(o,l,n),l}finally{We(i)}}function ZC(t,e){return!e||e.firstChild===null||IT(t)}function S2(t,e,n,r=!0){let i=e[ke];if(FF(i,e,t,n),r){let s=Dy(n,t),a=e[Mt],l=fw(a,t[Ts]);l!==null&&kF(i,t[yr],a,e,l,s)}let o=e[Ff];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zf(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push($r(o)),xi(o)&&A2(o,r);let s=n.type;if(s&8)zf(t,e,n.child,r);else if(s&32){let a=dw(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=FT(e,n);if(Array.isArray(a))r.push(...a);else{let l=Ss(e[Ur]);zf(l[ke],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function A2(t,e){for(let n=Wn;n<t.length;n++){let r=t[n],i=r[ke].firstChild;i!==null&&zf(r[ke],r,i,e)}t[Ts]!==t[Ai]&&e.push(t[Ts])}var ZT=[];function x2(t){return t[Gn]??M2(t)}function M2(t){let e=ZT.pop()??Object.create(N2);return e.lView=t,e}function R2(t){t.lView[Gn]!==t&&(t.lView=null,ZT.push(t))}var N2=Ve(J({},wv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{op(t.lView)},consumerOnSignalRead(){this.lView[Gn]=this}});function P2(t){let e=t[Gn]??Object.create(k2);return e.lView=t,e}var k2=Ve(J({},wv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ss(t.lView);for(;e&&!XT(e[ke]);)e=Ss(e);e&&WD(e)},consumerOnSignalRead(){this.lView[Gn]=this}});function XT(t){return t.type!==2}var O2=100;function JT(t,e=!0,n=0){let r=t[bi],i=r.rendererFactory,o=!1;o||i.begin?.();try{F2(t,n)}catch(s){throw e&&QT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function F2(t,e){let n=tT();try{BC(!0),Ay(t,e);let r=0;for(;uu(t);){if(r===O2)throw new ge(103,!1);r++,Ay(t,1)}}finally{BC(n)}}function V2(t,e,n,r){let i=e[ve];if((i&256)===256)return;let o=!1,s=!1;!o&&e[bi].inlineEffectRunner?.flush(),rw(e);let a=!0,l=null,u=null;o||(XT(t)?(u=x2(e),l=_v(u)):iC()===null?(a=!1,u=P2(e),l=_v(u)):e[Gn]&&(bv(e[Gn]),e[Gn]=null));try{GD(e),qO(t.bindingStartIndex),n!==null&&$T(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let E=t.preOrderCheckHooks;E!==null&&Af(e,E,null)}else{let E=t.preOrderHooks;E!==null&&xf(e,E,0,null),Qv(e,0)}if(s||L2(e),eS(e,0),t.contentQueries!==null&&KT(t,e),!o)if(h){let E=t.contentCheckHooks;E!==null&&Af(e,E)}else{let E=t.contentHooks;E!==null&&xf(e,E,1),Qv(e,1)}ZF(t,e);let g=t.components;g!==null&&nS(e,g,0);let w=t.viewQuery;if(w!==null&&Sy(2,w,r),!o)if(h){let E=t.viewCheckHooks;E!==null&&Af(e,E)}else{let E=t.viewHooks;E!==null&&xf(e,E,2),Qv(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Kv]){for(let E of e[Kv])E();e[Kv]=null}o||(e[ve]&=-73)}catch(h){throw o||op(e),h}finally{u!==null&&(oC(u,l),a&&R2(u)),iw()}}function eS(t,e){for(let n=DT(t);n!==null;n=TT(n))for(let r=Wn;r<n.length;r++){let i=n[r];tS(i,e)}}function L2(t){for(let e=DT(t);e!==null;e=TT(e)){if(!(e[ve]&Bf.HasTransplantedViews))continue;let n=e[jf];for(let r=0;r<n.length;r++){let i=n[r];WD(i)}}}function j2(t,e,n){let r=vo(e,t);tS(r,n)}function tS(t,e){tw(t)&&Ay(t,e)}function Ay(t,e){let r=t[ke],i=t[ve],o=t[Gn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ev(o)),s||=!1,o&&(o.dirty=!1),t[ve]&=-9217,s)V2(r,t,r.template,t[mr]);else if(i&8192){eS(t,1);let a=r.components;a!==null&&nS(t,a,1)}}function nS(t,e,n){for(let r=0;r<e.length;r++)j2(t,e[r],n)}function bw(t,e){let n=tT()?64:1088;for(t[bi].changeDetectionScheduler?.notify(e);t;){t[ve]|=n;let r=Ss(t);if(fy(t)&&!r)return t;t=r}return null}var Ms=class{get rootNodes(){let e=this._lView,n=e[ke];return zf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mr]}set context(e){this._lView[mr]=e}get destroyed(){return(this._lView[ve]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vn];if(xi(e)){let n=e[Lf],r=n?n.indexOf(this):-1;r>-1&&(Cy(e,r),kf(n,r))}this._attachedToViewContainer=!1}kT(this._lView[ke],this._lView)}onDestroy(e){KD(this._lView,e)}markForCheck(){bw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ve]&=-129}reattach(){gy(this._lView),this._lView[ve]|=128}detectChanges(){this._lView[ve]|=1024,JT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fy(this._lView),n=this._lView[hl];n!==null&&!e&&hw(n,this._lView),NT(this._lView[ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=e;let n=fy(this._lView),r=this._lView[hl];r!==null&&!n&&PT(r,this._lView),gy(this._lView)}},mp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$2;let t=e;return t})(),B2=mp,U2=class extends B2{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=T2(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ms(i)}};function $2(){return q2(wn(),tt())}function q2(t,e){return t.type&4?new U2(e,t,up(t,e)):null}var N7=new RegExp(`^(\\d+)*(${bF}|${EF})*(.*)`);var H2=()=>null;function XC(t,e){return H2(t,e)}var du=class{},rS=new oe("",{providedIn:"root",factory:()=>!1});var iS=new oe(""),xy=class{},Gf=class{};function z2(t){let e=Error(`No component factory found for ${mn(t)}.`);return e[G2]=t,e}var G2="ngComponent";var My=class{resolveComponentFactory(e){throw z2(e)}},Pw=class Pw{};Pw.NULL=new My;var ml=Pw,vl=class{},wo=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>W2();let t=e;return t})();function W2(){let t=tt(),e=wn(),n=vo(e.index,t);return(ho(n)?n:t)[Mt]}var K2=(()=>{let e=class e{};e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Jv={};var JC=new Set;function oS(t){JC.has(t)||(JC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sS(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof jr.requestAnimationFrame=="function"&&jr.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function eD(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function tD(...t){}var qe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,Z2(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ge(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Q2,tD,tD);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Q2={};function Iw(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Y2(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{sS(()=>{t.callbackScheduled=!1,Ry(t),t.isCheckStableRunning=!0,Iw(t),t.isCheckStableRunning=!1})}),Ry(t))}function Z2(t){let e=()=>{Y2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(X2(a))return n.invokeTask(i,o,s,a);try{return nD(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),rD(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return nD(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!J2(a)&&e(),rD(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ry(t),Iw(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ry(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function nD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rD(t){t._nesting--,Iw(t)}var Ny=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function X2(t){return aS(t,"__ignore_ng_zone__")}function J2(t){return aS(t,"__scheduler_tick__")}function aS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var lS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Wf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=AC(i,a);else if(o==2){let l=a,u=e[++s];r=AC(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Kf=class extends ml{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ds(e);return new hu(n,this.ngModule)}};function iD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function eV(t){let e=t.toLowerCase();return e==="svg"?MO:e==="math"?RO:null}var Py=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ep(r);let i=this.injector.get(e,Jv,r);return i!==Jv||n===Jv?i:this.parentInjector.get(e,n,r)}},hu=class extends Gf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=iD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return iD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=uO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=We(null);try{i=i||this.ngModule;let s=i instanceof Kn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Py(e,s):e,l=a.get(vl,null);if(l===null)throw new ge(407,!1);let u=a.get(K2,null),h=a.get(lS,null),g=a.get(du,null),w={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:g},E=l.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=r?e2(E,r,this.componentDef.encapsulation,a):RT(E,A,eV(A)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let W=null;O!==null&&(W=cw(O,a,!0));let Z=yw(0,null,null,1,0,null,null,null,null,null,null),H=pp(null,Z,null,P,null,null,w,E,a,null,W);rw(H);let X,ce;try{let ae=this.componentDef,S,b=null;ae.findHostDirectiveDefs?(S=[],b=new Map,ae.findHostDirectiveDefs(ae,S,b),S.push(ae)):S=[ae];let D=tV(H,O),M=nV(D,O,ae,S,H,w,E);ce=zD(Z,Ii),O&&oV(E,ae,O,r),n!==void 0&&sV(ce,this.ngContentSelectors,n),X=iV(M,ae,S,b,H,[aV]),Ew(Z,H,null)}finally{iw()}return new ky(this.componentType,X,up(ce,H),H,ce)}finally{We(o)}}},ky=class extends xy{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ms(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;_w(o[ke],o,i,e,n),this.previousInputValues.set(e,n);let s=vo(this._tNode.index,o);bw(s,1)}}get injector(){return new Cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tV(t,e){let n=t[ke],r=Ii;return t[r]=e,yu(n,r,2,"#host",null)}function nV(t,e,n,r,i,o,s){let a=i[ke];rV(r,t,e,s);let l=null;e!==null&&(l=cw(e,i[dl]));let u=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let g=pp(i,qT(n),null,h,i[t.index],t,o,u,null,null,l);return a.firstCreatePass&&Ty(a,t,r.length-1),gp(i,g),i[t.index]=g}function rV(t,e,n,r){for(let i of t)e.mergedAttrs=au(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Wf(e,e.mergedAttrs,!0),n!==null&&LT(r,n,e))}function iV(t,e,n,r,i,o){let s=wn(),a=i[ke],l=Qn(s,i);zT(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let g=s.directiveStart+h,w=gl(i,a,g,s);go(w,i)}GT(a,i,s),l&&go(l,i);let u=gl(i,a,s.directiveStart+s.componentOffset,s);if(t[mr]=i[mr]=u,o!==null)for(let h of o)h(u,e);return gw(a,s,i),u}function oV(t,e,n,r){if(r)cy(t,n,["ng-version","18.0.3"]);else{let{attrs:i,classes:o}=dO(e.selectors[0]);i&&cy(t,n,i),o&&o.length>0&&VT(t,n,o.join(" "))}}function sV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function aV(){let t=wn();cp(tt()[ke],t)}var El=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lV;let t=e;return t})();function lV(){let t=wn();return uV(t,tt())}var cV=El,cS=class extends cV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return up(this._hostTNode,this._hostLView)}get injector(){return new Cs(this._hostTNode,this._hostLView)}get parentInjector(){let e=sw(this._hostTNode,this._hostLView);if(dT(e)){let n=$f(e,this._hostLView),r=Uf(e),i=n[ke].data[r+8];return new Cs(i,n)}else return new Cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Wn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=XC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ZC(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!TO(e),a;if(s)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let l=s?e:new hu(Ds(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let O=(s?u:this.parentInjector).get(Kn,null);O&&(o=O)}let h=Ds(l.componentType??{}),g=XC(this._lContainer,h?.id??null),w=g?.firstChild??null,E=l.create(u,i,w,o);return this.insertImpl(E.hostView,a,ZC(this._hostTNode,g)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(NO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[vn],u=new cS(l,l[yr],l[vn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return S2(s,i,o,r),e.attachToViewContainerRef(),ID(ey(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Cy(this._lContainer,n);r&&(kf(ey(this._lContainer),n),kT(r[ke],r))}detach(e){let n=this._adjustIndex(e,-1),r=Cy(this._lContainer,n);return r&&kf(ey(this._lContainer),n)!=null?new Ms(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oD(t){return t[Lf]}function ey(t){return t[Lf]||(t[Lf]=[])}function uV(t,e){let n,r=e[t.index];return xi(r)?n=r:(n=WT(r,e,null,t),e[t.index]=n,gp(e,n)),hV(n,e,t,r),new cS(n,t,e)}function dV(t,e){let n=t[Mt],r=n.createComment(""),i=Qn(e,t),o=fw(n,i);return Hf(n,o,r,$F(n,i),!1),r}var hV=gV,fV=()=>!1;function pV(t,e,n){return fV(t,e,n)}function gV(t,e,n,r){if(t[Ts])return;let i;n.type&8?i=$r(r):i=dV(e,n),t[Ts]=i}function mV(t){return typeof t=="function"&&t[yv]!==void 0}function uS(t){return mV(t)&&typeof t.set=="function"}function vV(t){return Object.getPrototypeOf(t.prototype).constructor}function kn(t){let e=vV(t.type),n=!0,r=[t];for(;e;){let i;if(fo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ge(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Df(t.inputs),s.inputTransforms=Df(t.inputTransforms),s.declaredInputs=Df(t.declaredInputs),s.outputs=Df(t.outputs);let a=i.hostBindings;a&&bV(t,a);let l=i.viewQuery,u=i.contentQueries;if(l&&_V(t,l),u&&EV(t,u),yV(t,i),Rk(t.outputs,i.outputs),fo(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===kn&&(n=!1)}}e=Object.getPrototypeOf(e)}wV(r)}function yV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function wV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=au(i.hostAttrs,n=au(n,i.hostAttrs))}}function Df(t){return t===al?{}:t===zn?[]:t}function _V(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function EV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function bV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var mo=class{},fu=class{};var Oy=class extends mo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Kf(this);let i=RD(e);this._bootstrapComponents=MT(i.bootstrap),this._r3Injector=_T(e,n,[{provide:mo,useValue:this},{provide:ml,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Fy=class extends fu{constructor(e){super(),this.moduleType=e}create(e){return new Oy(this.moduleType,e,[])}};var Qf=class extends mo{constructor(e){super(),this.componentFactoryResolver=new Kf(this),this.instance=null;let n=new lu([...e.providers,{provide:mo,useValue:this},{provide:ml,useValue:this.componentFactoryResolver}],e.parent||Jy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cw(t,e,n=null){return new Qf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function dS(t){return CV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function IV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function CV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Rs(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function DV(t,e,n,r){let i=Rs(t,e,n);return Rs(t,e+1,r)||i}function TV(t){return(t.flags&32)===32}function SV(t,e,n,r,i,o,s,a,l){let u=e.consts,h=yu(e,t,4,s||null,a||null);ww(e,n,h,pl(u,l)),cp(e,h);let g=h.tView=yw(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function AV(t,e,n,r,i,o,s,a,l,u){let h=n+Ii,g=e.firstCreatePass?SV(h,e,t,r,i,o,s,a,l):e.data[h];Ps(g,!1);let w=xV(e,t,g,n);ap()&&hp(e,t,w,g),go(w,t);let E=WT(w,t,w,g);return t[h]=E,gp(t,E),pV(E,g,t),ip(g)&&mw(e,t,g),l!=null&&vw(t,g,u),g}function le(t,e,n,r,i,o,s,a){let l=tt(),u=yn(),h=pl(u.consts,o);return AV(l,u,t,e,n,r,i,h,s,a),le}var xV=MV;function MV(t,e,n,r){return lp(!0),e[Mt].createComment("")}function vp(t,e,n,r){let i=tt(),o=sp();if(Rs(i,o,e)){let s=yn(),a=ow();v2(a,i,t,e,n,r)}return vp}function RV(t,e,n,r){return Rs(t,sp(),n)?e+ou(n)+r:yo}function NV(t,e,n,r,i,o){let s=$O(),a=DV(t,s,n,i);return nT(2),a?e+ou(n)+r+ou(i)+o:yo}function Tf(t,e){return t<<17|e<<2}function Ns(t){return t>>17&32767}function PV(t){return(t&2)==2}function kV(t,e){return t&131071|e<<17}function Vy(t){return t|2}function yl(t){return(t&131068)>>2}function ty(t,e){return t&-131069|e<<2}function OV(t){return(t&1)===1}function Ly(t){return t|1}function FV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ns(s),l=yl(s);t[r]=n;let u=!1,h;if(Array.isArray(n)){let g=n;h=g[1],(h===null||vu(g,h)>0)&&(u=!0)}else h=n;if(i)if(l!==0){let w=Ns(t[a+1]);t[r+1]=Tf(w,a),w!==0&&(t[w+1]=ty(t[w+1],r)),t[a+1]=kV(t[a+1],r)}else t[r+1]=Tf(a,0),a!==0&&(t[a+1]=ty(t[a+1],r)),a=r;else t[r+1]=Tf(l,0),a===0?a=r:t[l+1]=ty(t[l+1],r),l=r;u&&(t[r+1]=Vy(t[r+1])),sD(t,h,r,!0),sD(t,h,r,!1),VV(e,h,t,r,o),s=Tf(a,l),o?e.classBindings=s:e.styleBindings=s}function VV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&vu(o,e)>=0&&(n[r+1]=Ly(n[r+1]))}function sD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ns(i):yl(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],u=t[s+1];LV(l,e)&&(a=!0,t[s+1]=r?Ly(u):Vy(u)),s=r?Ns(u):yl(u)}a&&(t[n+1]=r?Vy(i):Ly(i))}function LV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?vu(t,e)>=0:!1}function z(t,e,n){let r=tt(),i=sp();if(Rs(r,i,e)){let o=yn(),s=ow();HT(o,s,r,t,e,r[Mt],n,!1)}return z}function aD(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";_w(t,n,o[s],s,r)}function yp(t,e){return jV(t,e,null,!0),yp}function jV(t,e,n,r){let i=tt(),o=yn(),s=nT(2);if(o.firstUpdatePass&&UV(o,t,s,r),e!==yo&&Rs(i,s,e)){let a=o.data[ks()];GV(o,a,i,i[Mt],t,i[s+1]=WV(e,n),r,s)}}function BV(t,e){return e>=t.expandoStartIndex}function UV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ks()],s=BV(t,n);KV(o,r)&&e===null&&!s&&(e=!1),e=$V(i,o,e,r),FV(i,o,e,n,s,r)}}function $V(t,e,n,r){let i=WO(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ny(null,t,e,n,r),n=pu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ny(i,t,e,n,r),o===null){let l=qV(t,e,r);l!==void 0&&Array.isArray(l)&&(l=ny(null,t,e,l[1],r),l=pu(l,e.attrs,r),HV(t,e,r,l))}else o=zV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(yl(r)!==0)return t[Ns(r)]}function HV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ns(i)]=r}function zV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=pu(r,s,n)}return pu(r,e.attrs,n)}function ny(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=pu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function pu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Zk(t,s,n?!0:e[++o]))}return t===void 0?null:t}function GV(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],h=OV(u)?lD(l,e,n,i,yl(u),s):void 0;if(!Yf(h)){Yf(o)||PV(u)&&(o=lD(l,null,n,i,a,s));let g=HD(ks(),n);QF(r,s,g,i,o)}}function lD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],u=Array.isArray(l),h=u?l[1]:l,g=h===null,w=n[i+1];w===yo&&(w=g?zn:void 0);let E=g?Gv(w,r):h===r?w:void 0;if(u&&!Yf(E)&&(E=Gv(l,r)),Yf(E)&&(a=E,s))return a;let A=t[i+1];i=s?Ns(A):yl(A)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Gv(l,r))}return a}function Yf(t){return t!==void 0}function WV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=mn(uw(t)))),t}function KV(t,e){return(t.flags&(e?8:16))!==0}function QV(t,e,n,r,i,o){let s=e.consts,a=pl(s,i),l=yu(e,t,2,r,a);return ww(e,n,l,pl(s,o)),l.attrs!==null&&Wf(l,l.attrs,!1),l.mergedAttrs!==null&&Wf(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function x(t,e,n,r){let i=tt(),o=yn(),s=Ii+t,a=i[Mt],l=o.firstCreatePass?QV(s,o,i,e,n,r):o.data[s],u=YV(o,i,l,a,e,t);i[s]=u;let h=ip(l);return Ps(l,!0),LT(a,u,l),!TV(l)&&ap()&&hp(o,i,u,l),OO()===0&&go(u,i),FO(),h&&(mw(o,i,l),gw(o,l,i)),r!==null&&vw(i,l),x}function T(){let t=wn();nw()?eT():(t=t.parent,Ps(t,!1));let e=t;jO(e)&&BO(),VO();let n=yn();return n.firstCreatePass&&(cp(n,t),ew(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eF(e)&&aD(n,e,tt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tF(e)&&aD(n,e,tt(),e.stylesWithoutHost,!1),T}function Ie(t,e,n,r){return x(t,e,n,r),T(),Ie}var YV=(t,e,n,r,i,o)=>(lp(!0),RT(r,i,YO()));function ZV(t,e,n,r,i){let o=e.consts,s=pl(o,r),a=yu(e,t,8,"ng-container",s);s!==null&&Wf(a,s,!0);let l=pl(o,i);return ww(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function wu(t,e,n){let r=tt(),i=yn(),o=t+Ii,s=i.firstCreatePass?ZV(o,i,r,e,n):i.data[o];Ps(s,!0);let a=XV(i,r,s,t);return r[o]=a,ap()&&hp(i,r,a,s),go(a,r),ip(s)&&(mw(i,r,s),gw(i,s,r)),n!=null&&vw(r,s),wu}function _u(){let t=wn(),e=yn();return nw()?eT():(t=t.parent,Ps(t,!1)),e.firstCreatePass&&(cp(e,t),ew(t)&&e.queries.elementEnd(t)),_u}var XV=(t,e,n,r)=>(lp(!0),NF(e[Mt],""));function hS(){return tt()}var Zf="en-US";var JV=Zf;function eL(t){typeof t=="string"&&(JV=t.toLowerCase().replace(/_/g,"-"))}var tL=(t,e,n)=>{};function Ce(t,e,n,r){let i=tt(),o=yn(),s=wn();return fS(o,i,i[Mt],s,t,e,r),Ce}function nL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Vf],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function fS(t,e,n,r,i,o,s){let a=ip(r),u=t.firstCreatePass&&b2(t),h=e[mr],g=E2(e),w=!0;if(r.type&3||s){let O=Qn(r,e),P=s?s(O):O,W=g.length,Z=s?X=>s($r(X[r.index])):r.index,H=null;if(!s&&a&&(H=nL(t,e,i,r.index)),H!==null){let X=H.__ngLastListenerFn__||H;X.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,w=!1}else{o=uD(r,e,h,o),tL(O,i,o);let X=n.listen(P,i,o);g.push(o,X),u&&u.push(i,Z,W,W+1)}}else o=uD(r,e,h,o);let E=r.outputs,A;if(w&&E!==null&&(A=E[i])){let O=A.length;if(O)for(let P=0;P<O;P+=2){let W=A[P],Z=A[P+1],ce=e[W][Z].subscribe(o),ae=g.length;g.push(o,ce),u&&u.push(i,r.index,ae,-(ae+1))}}}function cD(t,e,n,r){let i=We(null);try{return Vr(6,e,n),n(r)!==!1}catch(o){return QT(t,o),!1}finally{Vr(7,e,n),We(i)}}function uD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?vo(t.index,e):e;bw(s,5);let a=cD(e,n,r,o),l=i.__ngNextListenerFn__;for(;l;)a=cD(e,n,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function ze(t=1){return QO(t)}function L(t,e=""){let n=tt(),r=yn(),i=t+Ii,o=r.firstCreatePass?yu(r,i,1,e,null):r.data[i],s=rL(r,n,o,e,t);n[i]=s,ap()&&hp(r,n,s,o),Ps(o,!1)}var rL=(t,e,n,r,i)=>(lp(!0),MF(e[Mt],r));function Eu(t){return xn("",t,""),Eu}function xn(t,e,n){let r=tt(),i=RV(r,t,e,n);return i!==yo&&YT(r,ks(),i),xn}function bu(t,e,n,r,i){let o=tt(),s=NV(o,t,e,n,r,i);return s!==yo&&YT(o,ks(),s),bu}function wp(t,e,n){uS(e)&&(e=e());let r=tt(),i=sp();if(Rs(r,i,e)){let o=yn(),s=ow();HT(o,s,r,t,e,r[Mt],n,!1)}return wp}function Dw(t,e){let n=uS(t);return n&&t.set(e),n}function _p(t,e){let n=tt(),r=yn(),i=wn();return fS(r,n,n[Mt],i,t,e),_p}function iL(t,e,n){let r=yn();if(r.firstCreatePass){let i=fo(t);jy(n,r.data,r.blueprint,i,!0),jy(e,r.data,r.blueprint,i,!1)}}function jy(t,e,n,r,i){if(t=gn(t),Array.isArray(t))for(let o=0;o<t.length;o++)jy(t[o],e,n,r,i);else{let o=yn(),s=tt(),a=wn(),l=ul(t)?t:gn(t.provide),u=VD(t),h=a.providerIndexes&1048575,g=a.directiveStart,w=a.providerIndexes>>20;if(ul(t)||!t.multi){let E=new xs(u,i,se),A=iy(l,e,i?h:h+w,g);A===-1?(yy(qf(a,s),o,l),ry(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[A]=E,s[A]=E)}else{let E=iy(l,e,h+w,g),A=iy(l,e,h,h+w),O=E>=0&&n[E],P=A>=0&&n[A];if(i&&!P||!i&&!O){yy(qf(a,s),o,l);let W=aL(i?sL:oL,n.length,i,r,u);!i&&P&&(n[A].providerFactory=W),ry(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(W),s.push(W)}else{let W=pS(n[i?A:E],u,!i&&r);ry(o,t,E>-1?E:A,W)}!i&&r&&P&&n[A].componentProviders++}}}function ry(t,e,n,r){let i=ul(e),o=yO(e);if(i||o){let l=(o?gn(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[r,l]):u[h+1].push(r,l)}else u.push(n,l)}}}function pS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function iy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oL(t,e,n,r){return By(this.multi,[])}function sL(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=gl(n,n[ke],this.providerFactory.index,r);o=a.slice(0,s),By(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],By(i,o);return o}function By(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function aL(t,e,n,r,i){let o=new xs(t,n,se);return o.multi=[],o.index=e,o.componentProviders=0,pS(o,i,r&&!n),o}function Pi(t,e=[]){return n=>{n.providersResolver=(r,i)=>iL(r,i?i(t):t,e)}}var lL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kD(!1,r.type),o=i.length>0?Cw([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ue({token:e,providedIn:"environment",factory:()=>new e(Q(Kn))});let t=e;return t})();function dt(t){oS("NgStandalone"),t.getStandaloneInjector=e=>e.get(lL).getOrCreateStandaloneInjector(t)}var Ti=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gS=new Ti("18.0.3");var Ep=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Tw=new oe(""),Iu=new oe(""),bp=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Sw||(cL(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(Q(qe),Q(Ip),Q(Iu))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),Ip=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Sw?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function cL(t){Sw=t}var Sw;function Os(t){return!!t&&typeof t.then=="function"}function mS(t){return!!t&&typeof t.subscribe=="function"}var vS=new oe(""),yS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=re(vS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Os(s))r.push(s);else if(mS(s)){let a=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Aw=new oe("");function uL(){sC(()=>{throw new ge(600,!1)})}function dL(t){return t.isBoundToModule}var hL=10;function fL(t,e,n){try{let r=n();return Os(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Fs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=re(ET),this.afterRenderEffectManager=re(lS),this.zonelessEnabled=re(rS),this.externalTestViews=new Set,this.beforeRender=new rt,this.afterTick=new rt,this.componentTypes=[],this.components=[],this.isStable=re(_l).hasPendingTasks.pipe(fe(r=>!r)),this._injector=re(Kn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Gf;if(!this._injector.get(yS).done){let E=!o&&MD(r),A=!1;throw new ge(405,A)}let a;o?a=r:a=this._injector.get(ml).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=dL(a)?void 0:this._injector.get(mo),u=i||a.selector,h=a.create(po.NULL,[],u,l),g=h.location.nativeElement,w=h.injector.get(Tw,null);return w?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),oy(this.components,h),w?.unregisterApplication(g)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ge(101,!1);let i=We(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,We(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(vl,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<hL;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:u}of this._views)pL(l,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>uu(l))&&(s.execute(),!this.allViews.some(({_lView:l})=>uu(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;oy(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Aw,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>oy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ge(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function pL(t,e,n,r){if(!n&&!uu(t))return;JT(t,e,n&&!r?0:1)}var Uy=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},xw=(()=>{let e=class e{compileModuleSync(r){return new Fy(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=RD(r),s=MT(o.declarations).reduce((a,l)=>{let u=Ds(l);return u&&a.push(new hu(u)),a},[]);return new Uy(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gL=(()=>{let e=class e{constructor(){this.zone=re(qe),this.changeDetectionScheduler=re(du),this.applicationRef=re(Fs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mL({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new qe(yL()),[{provide:qe,useFactory:t},{provide:ll,multi:!0,useFactory:()=>{let n=re(gL,{optional:!0});return()=>n.initialize()}},{provide:ll,multi:!0,useFactory:()=>{let n=re(wL);return()=>{n.initialize()}}},{provide:ET,useFactory:vL},e===!0?{provide:iS,useValue:!0}:[]]}function vL(){let t=re(qe),e=re(Ci);return n=>t.runOutsideAngular(()=>e.handleError(n))}function yL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var wL=(()=>{let e=class e{constructor(){this.subscription=new wt,this.initialized=!1,this.zone=re(qe),this.pendingTasks=re(_l)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _L=(()=>{let e=class e{constructor(){this.appRef=re(Fs),this.taskService=re(_l),this.ngZone=re(qe),this.zonelessEnabled=re(rS),this.disableScheduling=re(iS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new wt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ny||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?eD:sS;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&qe.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EL(){return typeof $localize<"u"&&$localize.locale||Zf}var Mw=new oe("",{providedIn:"root",factory:()=>re(Mw,Se.Optional|Se.SkipSelf)||EL()});var wS=new oe("");var Rf=null;function bL(t=[],e){return po.create({name:e,providers:[{provide:tp,useValue:"platform"},{provide:wS,useValue:new Set([()=>Rf=null])},...t]})}function IL(t=[]){if(Rf)return Rf;let e=bL(t);return Rf=e,uL(),CL(e),e}function CL(t){t.get(aw,null)?.forEach(n=>n())}function Rw(){return!1}var _o=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DL;let t=e;return t})();function DL(t){return TL(wn(),tt(),(t&16)===16)}function TL(t,e,n){if(rp(t)&&!n){let r=vo(t.index,e);return new Ms(r,r)}else if(t.type&47){let r=e[Ur];return new Ms(r,e)}return null}var $y=class{constructor(){}supports(e){return dS(e)}create(e){return new qy(e)}},SL=(t,e)=>e,qy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||SL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<dD(r,i,o)?n:r,a=dD(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=l-i;if(u!=h){for(let w=0;w<u;w++){let E=w<o.length?o[w]:o[w]=0,A=E+w;h<=A&&A<u&&(o[w]=E+1)}let g=s.previousIndex;o[g]=h-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!dS(e))throw new ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,IV(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Hy(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Xf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new zy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hD(){return new Nw([new $y])}var Nw=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hD()),deps:[[e,new bD,new mu]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new ge(901,!1)}};e.\u0275prov=ue({token:e,providedIn:"root",factory:hD});let t=e;return t})();var _S=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(Q(Fs))},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({});let t=e;return t})();function ES(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=IL(r),o=[mL({}),{provide:du,useExisting:_L},...n||[]],a=new Qf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(qe);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ci,null),h;l.runOutsideAngular(()=>{h=l.onError.subscribe({next:E=>{u.handleError(E)}})});let g=()=>a.destroy(),w=i.get(wS);return w.add(g),a.onDestroy(()=>{h.unsubscribe(),w.delete(g)}),fL(u,l,()=>{let E=a.get(yS);return E.runInitializers(),E.donePromise.then(()=>{let A=a.get(Mw,Zf);eL(A||Zf);let O=a.get(Fs);return e!==void 0&&O.bootstrap(e),O})})})}catch(e){return Promise.reject(e)}}function Cu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var TS=null;function qr(){return TS}function SS(t){TS??=t}var Cp=class{};var Yn=new oe(""),AS=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(RL),providedIn:"platform"});let t=e;return t})();var RL=(()=>{let e=class e extends AS{constructor(){super(),this._doc=re(Yn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qr().getBaseHref(this._doc)}onPopState(r){let i=qr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=qr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function xS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function bS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Vs(t){return t&&t[0]!=="?"?"?"+t:t}var Tp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(MS),providedIn:"root"});let t=e;return t})(),NL=new oe(""),MS=(()=>{let e=class e extends Tp{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??re(Yn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return xS(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Vs(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Vs(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Vs(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Q(AS),Q(NL,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Du=(()=>{let e=class e{constructor(r){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=OL(bS(IS(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Vs(i))}normalize(r){return e.stripTrailingSlash(kL(this._basePath,IS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vs(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vs(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Vs,e.joinWithSlash=xS,e.stripTrailingSlash=bS,e.\u0275fac=function(i){return new(i||e)(Q(Tp))},e.\u0275prov=ue({token:e,factory:()=>PL(),providedIn:"root"});let t=e;return t})();function PL(){return new Du(Q(Tp))}function kL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function IS(t){return t.replace(/\/index.html$/,"")}function OL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function RS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kw=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Sp=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new kw(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let l=i.get(s);i.move(l,a),CS(l,o)}});for(let o=0,s=i.length;o<s;o++){let l=i.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);CS(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(se(El),se(mp),se(Nw))},e.\u0275dir=_t({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function CS(t,e){t.context.$implicit=e.item}var Hr=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ow,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){DS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){DS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(se(El),se(mp))},e.\u0275dir=_t({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ow=class{constructor(){this.$implicit=null,this.ngIf=null}};function DS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${mn(e)}'.`)}var NS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({});let t=e;return t})(),PS="browser",FL="server";function Ls(t){return t===FL}var Dp=class{};var Lw=class extends Cp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jw=class t extends Lw{static makeCurrent(){SS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=VL();return n==null?null:LL(n)}resetBaseElement(){Tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return RS(document.cookie,e)}},Tu=null;function VL(){return Tu=Tu||document.querySelector("base"),Tu?Tu.getAttribute("href"):null}function LL(t){return new URL(t,document.baseURI).pathname}var Bw=class{addToWindow(e){jr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ge(5103,!1);return o},jr.getAllAngularTestabilities=()=>e.getAllTestabilities(),jr.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=jr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};jr.frameworkStabilizers||(jr.frameworkStabilizers=[]),jr.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?qr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},jL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),Uw=new oe(""),VS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new ge(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Q(Uw),Q(qe))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),Ap=class{constructor(e){this._doc=e}},Fw="ng-app-id",LS=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ls(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Fw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Fw),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Fw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Q(Yn),Q(dp),Q(lw,8),Q(An))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),Vw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qw=/%COMP%/g,jS="%COMP%",BL=`_nghost-${jS}`,UL=`_ngcontent-${jS}`,$L=!0,qL=new oe("",{providedIn:"root",factory:()=>$L});function HL(t){return UL.replace(qw,t)}function zL(t){return BL.replace(qw,t)}function BS(t,e){return e.map(n=>n.replace(qw,t))}var kS=(()=>{let e=class e{constructor(r,i,o,s,a,l,u,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Ls(l),this.defaultRenderer=new Su(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Br.ShadowDom&&(i=Ve(J({},i),{encapsulation:Br.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof xp?o.applyToHost(r):o instanceof Au&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case Br.Emulated:s=new xp(u,h,i,this.appId,g,a,l,w);break;case Br.ShadowDom:return new $w(u,h,r,i,a,l,this.nonce,w);default:s=new Au(u,h,i,g,a,l,w);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Q(VS),Q(LS),Q(dp),Q(qL),Q(Yn),Q(An),Q(qe),Q(lw))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),Su=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(OS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(OS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ge(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Vw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Di.DashCase|Di.Important)?e.style.setProperty(n,r,i&Di.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Di.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function OS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $w=class extends Su{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=BS(i.id,i.styles);for(let h of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Au=class extends Su{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?BS(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xp=class extends Au{constructor(e,n,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,n,r,o,s,a,l,u),this.contentAttr=HL(u),this.hostAttr=zL(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},GL=(()=>{let e=class e extends Ap{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(Q(Yn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})(),FS=["alt","control","meta","shift"],WL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},QL=(()=>{let e=class e extends Ap{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),FS.forEach(h=>{let g=i.indexOf(h);g>-1&&(i.splice(g,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=WL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),FS.forEach(a=>{if(a!==o){let l=KL[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Q(Yn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac});let t=e;return t})();function US(t,e){return ES(J({rootComponent:t},YL(e)))}function YL(t){return{appProviders:[...$S,...t?.providers??[]],platformProviders:ej}}function ZL(){jw.makeCurrent()}function XL(){return new Ci}function JL(){return AT(document),document}var ej=[{provide:An,useValue:PS},{provide:aw,useValue:ZL,multi:!0},{provide:Yn,useFactory:JL,deps:[]}];var tj=new oe(""),nj=[{provide:Iu,useClass:Bw,deps:[]},{provide:Tw,useClass:bp,deps:[qe,Ip,Iu]},{provide:bp,useClass:bp,deps:[qe,Ip,Iu]}],$S=[{provide:tp,useValue:"root"},{provide:Ci,useFactory:XL,deps:[]},{provide:Uw,useClass:GL,multi:!0,deps:[Yn,qe,An]},{provide:Uw,useClass:QL,multi:!0,deps:[Yn]},kS,LS,VS,{provide:vl,useExisting:kS},{provide:Dp,useClass:jL,deps:[]},[]],qS=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:dp,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(Q(tj,12))},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({providers:[...$S,...nj],imports:[NS,_S]});let t=e;return t})();var HS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Q(Yn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var De="primary",zu=Symbol("RouteTitle"),Kw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Sl(t){return new Kw(t)}function ij(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function oj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zr(t[n],e[n]))return!1;return!0}function zr(t,e){let n=t?Qw(t):void 0,r=e?Qw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!XS(t[i],e[i]))return!1;return!0}function Qw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function XS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function JS(t){return t.length>0?t[t.length-1]:null}function bo(t){return Vv(t)?t:Os(t)?Pe(Promise.resolve(t)):pe(t)}var sj={exact:tA,subset:nA},eA={exact:aj,subset:lj,ignored:()=>!0};function zS(t,e,n){return sj[n.paths](t.root,e.root,n.matrixParams)&&eA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function aj(t,e){return zr(t,e)}function tA(t,e,n){if(!Bs(t.segments,e.segments)||!Np(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!tA(t.children[r],e.children[r],n))return!1;return!0}function lj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>XS(t[n],e[n]))}function nA(t,e,n){return rA(t,e,e.segments,n)}function rA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Bs(i,n)||e.hasChildren()||!Np(i,n,r))}else if(t.segments.length===n.length){if(!Bs(t.segments,n)||!Np(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!nA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Bs(t.segments,i)||!Np(t.segments,i,r)||!t.children[De]?!1:rA(t.children[De],e,o,r)}}function Np(t,e,n){return e.every((r,i)=>eA[n](t[i].parameters,r.parameters))}var Eo=class{constructor(e=new Qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Sl(this.queryParams),this._queryParamMap}toString(){return dj.serialize(this)}},Qe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pp(this)}},js=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Sl(this.parameters),this._parameterMap}toString(){return oA(this)}};function cj(t,e){return Bs(t,e)&&t.every((n,r)=>zr(n.parameters,e[r].parameters))}function Bs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function uj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===De&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==De&&(n=n.concat(e(i,r)))}),n}var E_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>new Ou,providedIn:"root"});let t=e;return t})(),Ou=class{parse(e){let n=new Zw(e);return new Eo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${xu(e.root,!0)}`,r=pj(e.queryParams),i=typeof e.fragment=="string"?`#${hj(e.fragment)}`:"";return`${n}${r}${i}`}},dj=new Ou;function Pp(t){return t.segments.map(e=>oA(e)).join("/")}function xu(t,e){if(!t.hasChildren())return Pp(t);if(e){let n=t.children[De]?xu(t.children[De],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==De&&r.push(`${i}:${xu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=uj(t,(r,i)=>i===De?[xu(t.children[De],!1)]:[`${i}:${xu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[De]!=null?`${Pp(t)}/${n[0]}`:`${Pp(t)}/(${n.join("//")})`}}function iA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mp(t){return iA(t).replace(/%3B/gi,";")}function hj(t){return encodeURI(t)}function Yw(t){return iA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kp(t){return decodeURIComponent(t)}function GS(t){return kp(t.replace(/\+/g,"%20"))}function oA(t){return`${Yw(t.path)}${fj(t.parameters)}`}function fj(t){return Object.entries(t).map(([e,n])=>`;${Yw(e)}=${Yw(n)}`).join("")}function pj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Mp(n)}=${Mp(i)}`).join("&"):`${Mp(n)}=${Mp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var gj=/^[^\/()?;#]+/;function Hw(t){let e=t.match(gj);return e?e[0]:""}var mj=/^[^\/()?;=#]+/;function vj(t){let e=t.match(mj);return e?e[0]:""}var yj=/^[^=?&#]+/;function wj(t){let e=t.match(yj);return e?e[0]:""}var _j=/^[^&#]+/;function Ej(t){let e=t.match(_j);return e?e[0]:""}var Zw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[De]=new Qe(e,n)),r}parseSegment(){let e=Hw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ge(4009,!1);return this.capture(e),new js(kp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=vj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Hw(this.remaining);i&&(r=i,this.capture(r))}e[kp(n)]=kp(r)}parseQueryParam(e){let n=wj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Ej(this.remaining);s&&(r=s,this.capture(r))}let i=GS(n),o=GS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ge(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[De]:new Qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ge(4011,!1)}};function sA(t){return t.segments.length>0?new Qe([],{[De]:t}):t}function aA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=aA(i);if(r===De&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Qe(t.segments,e);return bj(n)}function bj(t){if(t.numberOfChildren===1&&t.children[De]){let e=t.children[De];return new Qe(t.segments.concat(e.segments),e.children)}return t}function Fu(t){return t instanceof Eo}function Ij(t,e,n=null,r=null){let i=lA(t);return cA(i,e,n,r)}function lA(t){let e;function n(o){let s={};for(let l of o.children){let u=n(l);s[l.outlet]=u}let a=new Qe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=sA(r);return e??i}function cA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return zw(i,i,i,n,r);let o=Cj(e);if(o.toRoot())return zw(i,i,new Qe([],{}),n,r);let s=Dj(o,i,t),a=s.processChildren?Nu(s.segmentGroup,s.index,o.commands):dA(s.segmentGroup,s.index,o.commands);return zw(i,s.segmentGroup,a,n,r)}function Op(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Vu(t){return typeof t=="object"&&t!=null&&t.outlets}function zw(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=uA(t,e,n);let a=sA(aA(s));return new Eo(a,o,i)}function uA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uA(o,e,n)}),new Qe(t.segments,r)}var Fp=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Op(r[0]))throw new ge(4003,!1);let i=r.find(Vu);if(i&&i!==JS(r))throw new ge(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Cj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fp(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fp(n,e,r)}var Cl=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Dj(t,e,n){if(t.isAbsolute)return new Cl(e,!0,0);if(!n)return new Cl(e,!1,NaN);if(n.parent===null)return new Cl(n,!0,0);let r=Op(t.commands[0])?0:1,i=n.segments.length-1+r;return Tj(n,i,t.numberOfDoubleDots)}function Tj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ge(4005,!1);i=r.segments.length}return new Cl(r,!1,i-o)}function Sj(t){return Vu(t[0])?t[0].outlets:{[De]:t}}function dA(t,e,n){if(t??=new Qe([],{}),t.segments.length===0&&t.hasChildren())return Nu(t,e,n);let r=Aj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Qe(t.segments.slice(0,r.pathIndex),{});return o.children[De]=new Qe(t.segments.slice(r.pathIndex),t.children),Nu(o,0,i)}else return r.match&&i.length===0?new Qe(t.segments,{}):r.match&&!t.hasChildren()?Xw(t,e,n):r.match?Nu(t,0,i):Xw(t,e,n)}function Nu(t,e,n){if(n.length===0)return new Qe(t.segments,{});{let r=Sj(n),i={};if(Object.keys(r).some(o=>o!==De)&&t.children[De]&&t.numberOfChildren===1&&t.children[De].segments.length===0){let o=Nu(t.children[De],e,n);return new Qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Qe(t.segments,i)}}function Aj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Vu(a))break;let l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!KS(l,u,s))return o;r+=2}else{if(!KS(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Vu(o)){let l=xj(o.outlets);return new Qe(r,l)}if(i===0&&Op(n[0])){let l=t.segments[e];r.push(new js(l.path,WS(n[0]))),i++;continue}let s=Vu(o)?o.outlets[De]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Op(a)?(r.push(new js(s,WS(a))),i+=2):(r.push(new js(s,{})),i++)}return new Qe(r,{})}function xj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Xw(new Qe([],{}),0,r))}),e}function WS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function KS(t,e,n){return t==n.path&&zr(e,n.parameters)}var Pu="imperative",Qt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Qt||{}),Zn=class{constructor(e,n){this.id=e,this.url=n}},Lu=class extends Zn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Qt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Us=class extends Zn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Qt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Fn||{}),Jw=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Jw||{}),ki=class extends Zn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$s=class extends Zn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qt.NavigationSkipped}},ju=class extends Zn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Qt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vp=class extends Zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},e_=class extends Zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},t_=class extends Zn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Qt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},n_=class extends Zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},r_=class extends Zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},i_=class{constructor(e){this.route=e,this.type=Qt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},o_=class{constructor(e){this.route=e,this.type=Qt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},s_=class{constructor(e){this.snapshot=e,this.type=Qt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a_=class{constructor(e){this.snapshot=e,this.type=Qt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},l_=class{constructor(e){this.snapshot=e,this.type=Qt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},c_=class{constructor(e){this.snapshot=e,this.type=Qt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Bu=class{},Al=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var u_=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Hp(this.injector),this.attachRef=null}},Hp=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new u_(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(Q(Kn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=d_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=d_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=h_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return h_(e,this._root).map(n=>n.value)}};function d_(t,e){if(t===e.value)return e;for(let n of e.children){let r=d_(t,n);if(r)return r}return null}function h_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=h_(t,n);if(r.length)return r.unshift(e),r}return[]}var On=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Il(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jp=class extends Lp{constructor(e,n){super(e),this.snapshot=n,b_(this,e)}toString(){return this.snapshot.toString()}};function hA(t){let e=Mj(t),n=new Gt([new js("",{})]),r=new Gt({}),i=new Gt({}),o=new Gt({}),s=new Gt(""),a=new xl(n,r,o,s,i,De,t,e.root);return a.snapshot=e.root,new jp(new On(a,[]),e)}function Mj(t){let e={},n={},r={},i="",o=new Dl([],e,r,i,n,De,t,null,{});return new Up("",new On(o,[]))}var xl=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(fe(u=>u[zu]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>Sl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>Sl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:J(J({},e.params),t.params),data:J(J({},e.data),t.data),resolve:J(J(J(J({},t.data),e.data),i?.data),t._resolvedData)}:r={params:J({},t.params),data:J({},t.data),resolve:J(J({},t.data),t._resolvedData??{})},i&&pA(i)&&(r.resolve[zu]=i.title),r}var Dl=class{get title(){return this.data?.[zu]}constructor(e,n,r,i,o,s,a,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Up=class extends Lp{constructor(e,n){super(n),this.url=e,b_(this,n)}toString(){return fA(this._root)}};function b_(t,e){e.value._routerState=t,e.children.forEach(n=>b_(t,n))}function fA(t){let e=t.children.length>0?` { ${t.children.map(fA).join(", ")} } `:"";return`${t.value}${e}`}function Gw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zr(e.params,n.params)||t.paramsSubject.next(n.params),oj(e.url,n.url)||t.urlSubject.next(n.url),zr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function f_(t,e){let n=zr(t.params,e.params)&&cj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||f_(t.parent,e.parent))}function pA(t){return typeof t.title=="string"||t.title===null}var I_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=De,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=re(Hp),this.location=re(El),this.changeDetector=re(_o),this.inputBinder=re(C_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ge(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ge(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new p_(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_t({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mi]});let t=e;return t})(),p_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===xl?this.route:e===Hp?this.childContexts:this.parent.get(e,n)}},C_=new oe("");function Rj(t,e,n){let r=Uu(t,e._root,n?n._root:void 0);return new jp(r,e)}function Uu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Nj(t,e,n);return new On(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Uu(t,a)),s}}let r=Pj(e.value),i=e.children.map(o=>Uu(t,o));return new On(r,i)}}function Nj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Uu(t,r,i);return Uu(t,r)})}function Pj(t){return new xl(new Gt(t.url),new Gt(t.params),new Gt(t.queryParams),new Gt(t.fragment),new Gt(t.data),t.outlet,t.component,t)}var $u=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},gA="ngNavigationCancelingError";function $p(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mA(!1,Fn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[gA]=!0,n.cancellationCode=e,n}function kj(t){return vA(t)&&Fu(t.url)}function vA(t){return!!t&&t[gA]}var Oj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["ng-component"]],standalone:!0,features:[dt],decls:1,vars:0,template:function(i,o){i&1&&Ie(0,"router-outlet")},dependencies:[I_],encapsulation:2});let t=e;return t})();function Fj(t,e){return t.providers&&!t._injector&&(t._injector=Cw(t.providers,e,`Route: ${t.path}`)),t._injector??e}function D_(t){let e=t.children&&t.children.map(D_),n=e?Ve(J({},t),{children:e}):J({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==De&&(n.component=Oj),n}function wr(t){return t.outlet||De}function Vj(t,e){let n=t.filter(r=>wr(r)===e);return n.push(...t.filter(r=>wr(r)!==e)),n}function Gu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Lj=(t,e,n,r)=>fe(i=>(new g_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),g_=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Il(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Il(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Il(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Il(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new c_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new a_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Gw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gw(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Gu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},qp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Tl=class{constructor(e,n){this.component=e,this.route=n}};function jj(t,e,n){let r=t._root,i=e?e._root:null;return Mu(r,i,n,[r.value])}function Bj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Rl(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!gD(t)?t:e.get(t):r}function Mu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Il(e);return t.children.forEach(s=>{Uj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ku(a,n.getContext(s),i)),i}function Uj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=$j(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new qp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mu(t,e,a?a.children:null,r,i):Mu(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Tl(a.outlet.component,s))}else s&&ku(e,a,i),i.canActivateChecks.push(new qp(r)),o.component?Mu(t,null,a?a.children:null,r,i):Mu(t,null,n,r,i);return i}function $j(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Bs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bs(t.url,e.url)||!zr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!f_(t,e)||!zr(t.queryParams,e.queryParams);case"paramsChange":default:return!f_(t,e)}}function ku(t,e,n){let r=Il(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ku(s,e.children.getContext(o),n):ku(s,null,n):ku(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Tl(e.outlet.component,i)):n.canDeactivateChecks.push(new Tl(null,i)):n.canDeactivateChecks.push(new Tl(null,i))}function Wu(t){return typeof t=="function"}function qj(t){return typeof t=="boolean"}function Hj(t){return t&&Wu(t.canLoad)}function zj(t){return t&&Wu(t.canActivate)}function Gj(t){return t&&Wu(t.canActivateChild)}function Wj(t){return t&&Wu(t.canDeactivate)}function Kj(t){return t&&Wu(t.canMatch)}function yA(t){return t instanceof _i||t?.name==="EmptyError"}var Rp=Symbol("INITIAL_VALUE");function Ml(){return ct(t=>wf(t.map(e=>e.pipe(Ei(1),bs(Rp)))).pipe(fe(e=>{for(let n of e)if(n!==!0){if(n===Rp)return Rp;if(n===!1||Qj(n))return n}return!0}),on(e=>e!==Rp),Ei(1)))}function Qj(t){return Fu(t)||t instanceof $u}function Yj(t,e){return Bt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?pe(Ve(J({},n),{guardsResult:!0})):Zj(s,r,i,t).pipe(Bt(a=>a&&qj(a)?Xj(r,o,t,e):pe(a)),fe(a=>Ve(J({},n),{guardsResult:a})))})}function Zj(t,e,n,r){return Pe(t).pipe(Bt(i=>rB(i.component,i.route,n,e,r)),qn(i=>i!==!0,!0))}function Xj(t,e,n,r){return Pe(e).pipe(Ja(i=>Xa(eB(i.route.parent,r),Jj(i.route,r),nB(t,i.path,n),tB(t,i.route,n))),qn(i=>i!==!0,!0))}function Jj(t,e){return t!==null&&e&&e(new l_(t)),pe(!0)}function eB(t,e){return t!==null&&e&&e(new s_(t)),pe(!0)}function tB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>_f(()=>{let s=Gu(e)??n,a=Rl(o,s),l=zj(a)?a.canActivate(e,t):Si(s,()=>a(e,t));return bo(l).pipe(qn())}));return pe(i).pipe(Ml())}function nB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Bj(s)).filter(s=>s!==null).map(s=>_f(()=>{let a=s.guards.map(l=>{let u=Gu(s.node)??n,h=Rl(l,u),g=Gj(h)?h.canActivateChild(r,t):Si(u,()=>h(r,t));return bo(g).pipe(qn())});return pe(a).pipe(Ml())}));return pe(o).pipe(Ml())}function rB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(a=>{let l=Gu(e)??i,u=Rl(a,l),h=Wj(u)?u.canDeactivate(t,e,n,r):Si(l,()=>u(t,e,n,r));return bo(h).pipe(qn())});return pe(s).pipe(Ml())}function iB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(s=>{let a=Rl(s,t),l=Hj(a)?a.canLoad(e,n):Si(t,()=>a(e,n));return bo(l)});return pe(o).pipe(Ml(),wA(r))}function wA(t){return Rv(xt(e=>{if(typeof e!="boolean")throw $p(t,e)}),fe(e=>e===!0))}function oB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let a=Rl(s,t),l=Kj(a)?a.canMatch(e,n):Si(t,()=>a(e,n));return bo(l)});return pe(o).pipe(Ml(),wA(r))}var qu=class{constructor(e){this.segmentGroup=e||null}},Hu=class extends Error{constructor(e){super(),this.urlTree=e}};function bl(t){return Za(new qu(t))}function sB(t){return Za(new ge(4e3,!1))}function aB(t){return Za(mA(!1,Fn.GuardRejected))}var m_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[De])return sB(`${e.redirectTo}`);i=i.children[De]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:u,routeConfig:h,url:g,outlet:w,params:E,data:A,title:O}=i,P=Si(o,()=>a({params:E,data:A,queryParams:l,fragment:u,routeConfig:h,url:g,outlet:w,title:O}));if(P instanceof Eo)throw new Hu(P);n=P}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Hu(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Eo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Qe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ge(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},v_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lB(t,e,n,r,i){let o=T_(t,e,n);return o.matched?(r=Fj(e,r),oB(r,e,n,i).pipe(fe(s=>s===!0?o:J({},v_)))):pe(o)}function T_(t,e,n){if(e.path==="**")return cB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?J({},v_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ij)(n,t,e);if(!i)return J({},v_);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?J(J({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function cB(t){return{matched:!0,parameters:t.length>0?JS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function QS(t,e,n,r){return n.length>0&&hB(t,n,r)?{segmentGroup:new Qe(e,dB(r,new Qe(n,t.children))),slicedSegments:[]}:n.length===0&&fB(t,n,r)?{segmentGroup:new Qe(t.segments,uB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Qe(t.segments,t.children),slicedSegments:n}}function uB(t,e,n,r){let i={};for(let o of n)if(zp(t,e,o)&&!r[wr(o)]){let s=new Qe([],{});i[wr(o)]=s}return J(J({},r),i)}function dB(t,e){let n={};n[De]=e;for(let r of t)if(r.path===""&&wr(r)!==De){let i=new Qe([],{});n[wr(r)]=i}return n}function hB(t,e,n){return n.some(r=>zp(t,e,r)&&wr(r)!==De)}function fB(t,e,n){return n.some(r=>zp(t,e,r))}function zp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pB(t,e,n,r){return wr(t)!==r&&(r===De||!zp(e,n,t))?!1:T_(e,t,n).matched}function gB(t,e,n){return e.length===0&&!t.children[n]}var y_=class{};function mB(t,e,n,r,i,o,s="emptyOnly"){return new w_(t,e,n,r,i,s,o).recognize()}var vB=31,w_=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new m_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ge(4002,`'${e.segmentGroup}'`)}recognize(){let e=QS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(({children:n,rootSnapshot:r})=>{let i=new On(r,n),o=new Up("",i),s=Ij(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Dl([],Object.freeze({}),Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,n).pipe(fe(r=>({children:r,rootSnapshot:n})),ao(r=>{if(r instanceof Hu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(fe(s=>s instanceof On?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(Ja(s=>{let a=r.children[s],l=Vj(n,s);return this.processSegmentGroup(e,l,a,s,i)}),Es((s,a)=>(s.push(...a),s)),lo(null),qv(),Bt(s=>{if(s===null)return bl(r);let a=_A(s);return yB(a),pe(a)}))}processSegment(e,n,r,i,o,s,a){return Pe(n).pipe(Ja(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,o,s,a).pipe(ao(u=>{if(u instanceof qu)return pe(null);throw u}))),qn(l=>!!l),ao(l=>{if(yA(l))return gB(r,i,o)?pe(new y_):bl(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,l){return pB(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,l):bl(i):bl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:g,remainingSegments:w}=T_(n,i,o);if(!l)return bl(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vB&&(this.allowRedirects=!1));let E=new Dl(o,u,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,YS(i),wr(i),i.component??i._loadedComponent??null,i,ZS(i)),A=Bp(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(Bt(P=>this.processSegment(e,r,n,P.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=lB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ct(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ct(({routes:u})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:w,remainingSegments:E}=l,A=new Dl(w,g,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,YS(r),wr(r),r.component??r._loadedComponent??null,r,ZS(r)),O=Bp(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(O.params),A.data=Object.freeze(O.data);let{segmentGroup:P,slicedSegments:W}=QS(n,w,E,u);if(W.length===0&&P.hasChildren())return this.processChildren(h,u,P,A).pipe(fe(H=>new On(A,H)));if(u.length===0&&W.length===0)return pe(new On(A,[]));let Z=wr(r)===o;return this.processSegment(h,u,P,W,Z?De:o,!0,A).pipe(fe(H=>new On(A,H instanceof On?[H]:[])))}))):bl(n)))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):iB(e,n,r,this.urlSerializer).pipe(Bt(i=>i?this.configLoader.loadChildren(e,n).pipe(xt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):aB(n))):pe({routes:[],injector:e})}};function yB(t){t.sort((e,n)=>e.value.outlet===De?-1:n.value.outlet===De?1:e.value.outlet.localeCompare(n.value.outlet))}function wB(t){let e=t.value.routeConfig;return e&&e.path===""}function _A(t){let e=[],n=new Set;for(let r of t){if(!wB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_A(r.children);e.push(new On(r.value,i))}return e.filter(r=>!n.has(r))}function YS(t){return t.data||{}}function ZS(t){return t.resolve||{}}function _B(t,e,n,r,i,o){return Bt(s=>mB(t,e,n,r,s.extractedUrl,i,o).pipe(fe(({state:a,tree:l})=>Ve(J({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function EB(t,e){return Bt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of EA(l))s.add(u);let a=0;return Pe(s).pipe(Ja(l=>o.has(l)?bB(l,r,t,e):(l.data=Bp(l,l.parent,t).resolve,pe(void 0))),xt(()=>a++),el(1),Bt(l=>a===s.size?pe(n):pn))})}function EA(t){let e=t.children.map(n=>EA(n)).flat();return[t,...e]}function bB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!pA(i)&&(o[zu]=i.title),IB(o,t,e,r).pipe(fe(s=>(t._resolvedData=s,t.data=Bp(t,t.parent,n).resolve,null)))}function IB(t,e,n,r){let i=Qw(t);if(i.length===0)return pe({});let o={};return Pe(i).pipe(Bt(s=>CB(t[s],e,n,r).pipe(qn(),xt(a=>{if(a instanceof $u)throw $p(new Ou,a);o[s]=a}))),el(1),Uv(o),ao(s=>yA(s)?pn:Za(s)))}function CB(t,e,n,r){let i=Gu(e)??r,o=Rl(t,i),s=o.resolve?o.resolve(e,n):Si(i,()=>o(e,n));return bo(s)}function Ww(t){return ct(e=>{let n=t(e);return n?Pe(n).pipe(fe(()=>e)):pe(e)})}var bA=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===De);return i}getResolvedTitleForRoute(r){return r.data[zu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(DB),providedIn:"root"});let t=e;return t})(),DB=(()=>{let e=class e extends bA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Q(HS))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),S_=new oe("",{providedIn:"root",factory:()=>({})}),A_=new oe(""),TB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=re(xw)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=bo(r.loadComponent()).pipe(fe(IA),xt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),nu(()=>{this.componentLoaders.delete(r)})),o=new Wa(i,()=>new rt).pipe(Ga());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=SB(i,this.compiler,r,this.onLoadEndListener).pipe(nu(()=>{this.childrenLoaders.delete(i)})),a=new Wa(s,()=>new rt).pipe(Ga());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SB(t,e,n,r){return bo(t.loadChildren()).pipe(fe(IA),Bt(i=>i instanceof fu||Array.isArray(i)?pe(i):Pe(e.compileModuleAsync(i))),fe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(A_,[],{optional:!0,self:!0}).flat()),{routes:s.map(D_),injector:o}}))}function AB(t){return t&&typeof t=="object"&&"default"in t}function IA(t){return AB(t)?t.default:t}var x_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(xB),providedIn:"root"});let t=e;return t})(),xB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),MB=new oe("");var RB=new oe(""),NB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rt,this.transitionAbortSubject=new rt,this.configLoader=re(TB),this.environmentInjector=re(Kn),this.urlSerializer=re(E_),this.rootContexts=re(Hp),this.location=re(Du),this.inputBindingEnabled=re(C_,{optional:!0})!==null,this.titleStrategy=re(bA),this.options=re(S_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=re(x_),this.createViewTransition=re(MB,{optional:!0}),this.navigationErrorHandler=re(RB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let r=o=>this.events.next(new i_(o)),i=o=>this.events.next(new o_(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ve(J(J({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(on(s=>s.id!==0),fe(s=>Ve(J({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ct(s=>{let a=!1,l=!1;return pe(s).pipe(ct(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Fn.SupersededByNewNavigation),pn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ve(J({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&g!=="reload"){let w="";return this.events.next(new $s(u.id,this.urlSerializer.serialize(u.rawUrl),w,Jw.IgnoredSameUrlNavigation)),u.resolve(!1),pn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return pe(u).pipe(ct(w=>{let E=this.transitions?.getValue();return this.events.next(new Lu(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?pn:Promise.resolve(w)}),_B(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),xt(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=Ve(J({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new Vp(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:w,extractedUrl:E,source:A,restoredState:O,extras:P}=u,W=new Lu(w,this.urlSerializer.serialize(E),A,O);this.events.next(W);let Z=hA(this.rootComponentType).snapshot;return this.currentTransition=s=Ve(J({},u),{targetSnapshot:Z,urlAfterRedirects:E,extras:Ve(J({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,pe(s)}else{let w="";return this.events.next(new $s(u.id,this.urlSerializer.serialize(u.extractedUrl),w,Jw.IgnoredByUrlHandlingStrategy)),u.resolve(!1),pn}}),xt(u=>{let h=new e_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),fe(u=>(this.currentTransition=s=Ve(J({},u),{guards:jj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Yj(this.environmentInjector,u=>this.events.next(u)),xt(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw $p(this.urlSerializer,u.guardsResult);let h=new t_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),on(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Fn.GuardRejected),!1)),Ww(u=>{if(u.guards.canActivateChecks.length)return pe(u).pipe(xt(h=>{let g=new n_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),ct(h=>{let g=!1;return pe(h).pipe(EB(this.paramsInheritanceStrategy,this.environmentInjector),xt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(h,"",Fn.NoDataFromResolver)}}))}),xt(h=>{let g=new r_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Ww(u=>{let h=g=>{let w=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(g.routeConfig).pipe(xt(E=>{g.component=E}),fe(()=>{})));for(let E of g.children)w.push(...h(E));return w};return wf(h(u.targetSnapshot.root)).pipe(lo(null),Ei(1))}),Ww(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,g=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return g?Pe(g).pipe(fe(()=>s)):pe(s)}),fe(u=>{let h=Rj(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ve(J({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),xt(()=>{this.events.next(new Bu)}),Lj(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ei(1),xt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Us(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),zv(this.transitionAbortSubject.pipe(xt(u=>{throw u}))),nu(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Fn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ao(u=>{if(l=!0,vA(u))this.events.next(new ki(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),kj(u)?this.events.next(new Al(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new ju(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let g=Si(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(g instanceof $u){let{message:w,cancellationCode:E}=$p(this.urlSerializer,g);this.events.next(new ki(s.id,this.urlSerializer.serialize(s.extractedUrl),w,E)),this.events.next(new Al(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(h);let w=r.errorHandler(u);s.resolve(!!w)}}catch(g){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(g)}}return pn}))}))}cancelNavigationTransition(r,i,o){let s=new ki(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PB(t){return t!==Pu}var kB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(OB),providedIn:"root"});let t=e;return t})(),__=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},OB=(()=>{let e=class e extends __{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:()=>re(FB),providedIn:"root"});let t=e;return t})(),FB=(()=>{let e=class e extends CA{constructor(){super(...arguments),this.location=re(Du),this.urlSerializer=re(E_),this.options=re(S_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=re(x_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Eo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=hA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Lu)this.stateMemento=this.createStateMemento();else if(r instanceof $s)this.rawUrlTree=i.initialUrl;else if(r instanceof Vp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Bu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ki&&(r.code===Fn.GuardRejected||r.code===Fn.NoDataFromResolver)?this.restoreHistory(i):r instanceof ju?this.restoreHistory(i,!0):r instanceof Us&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=J(J({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=J(J({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ru=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ru||{});function VB(t,e){t.events.pipe(on(n=>n instanceof Us||n instanceof ki||n instanceof ju||n instanceof $s),fe(n=>n instanceof Us||n instanceof $s?Ru.COMPLETE:(n instanceof ki?n.code===Fn.Redirect||n.code===Fn.SupersededByNewNavigation:!1)?Ru.REDIRECTING:Ru.FAILED),on(n=>n!==Ru.REDIRECTING),Ei(1)).subscribe(()=>{e()})}function LB(t){throw t}var jB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},sn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=re(Ep),this.stateManager=re(CA),this.options=re(S_,{optional:!0})||{},this.pendingTasks=re(_l),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=re(NB),this.urlSerializer=re(E_),this.location=re(Du),this.urlHandlingStrategy=re(x_),this._events=new rt,this.errorHandler=this.options.errorHandler||LB,this.navigated=!1,this.routeReuseStrategy=re(kB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=re(A_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!re(C_,{optional:!0}),this.eventsSubscription=new wt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof ki&&i.code!==Fn.Redirect&&i.code!==Fn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Us)this.navigated=!0;else if(i instanceof Al){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u=J({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||PB(o.source)},a);this.scheduleNavigation(l,Pu,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}$B(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=J({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(D_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,h=u?this.currentUrlTree.fragment:a,g=null;switch(l){case"merge":g=J(J({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=lA(E)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),w=this.currentUrlTree.root}return cA(w,r,g,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Fu(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Pu,null,i)}navigate(r,i={skipLocationChange:!1}){return UB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=J({},jB):i===!1?o=J({},BB):o=i,Fu(r))return zS(this.currentUrlTree,r,o);let s=this.parseUrl(r);return zS(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,h;a?(l=a.resolve,u=a.reject,h=a.promise):h=new Promise((w,E)=>{l=w,u=E});let g=this.pendingTasks.add();return VB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(w=>Promise.reject(w))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ge(4008,!1)}function $B(t){return!(t instanceof Bu)&&!(t instanceof Al)}var qB=new oe("");function DA(t,...e){return Yy([{provide:A_,multi:!0,useValue:t},[],{provide:xl,useFactory:HB,deps:[sn]},{provide:Aw,multi:!0,useFactory:zB},e.map(n=>n.\u0275providers)])}function HB(t){return t.routerState.root}function zB(){let t=re(po);return e=>{let n=t.get(Fs);if(e!==n.components[0])return;let r=t.get(sn),i=t.get(GB);t.get(WB)===1&&r.initialNavigation(),t.get(KB,null,Se.Optional)?.setUpPreloading(),t.get(qB,null,Se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GB=new oe("",{factory:()=>new rt}),WB=new oe("",{providedIn:"root",factory:()=>1});var KB=new oe("");var TA='body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:66.9vh;padding:50px}.title[_ngcontent-%COMP%]{font-size:2rem;color:#2e4c6d;margin-bottom:20px;font-family:Dune,sans-serif}.description[_ngcontent-%COMP%]{font-size:2rem;color:#2e4c6d;font-family:Dune,sans-serif}.footer[_ngcontent-%COMP%]{background-color:#2e4c6d;color:#d2691e;text-align:center;padding:20px 0;bottom:0;width:100%}',SA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-bienvenida"]],standalone:!0,features:[dt],decls:14,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container"],[1,"title"],[1,"description"],[1,"footer"],[1,"footer-content"]],template:function(i,o){i&1&&(x(0,"html",0)(1,"head"),Ie(2,"meta",1)(3,"meta",2),T(),x(4,"body")(5,"div",3)(6,"h1",4),L(7,"Bienvenido a la cl\xEDnica de Paul Atreides"),T(),x(8,"p",5),L(9,"Trataremos tus heridas de batalla, no te preocupes"),T()(),x(10,"footer",6)(11,"div",7)(12,"p"),L(13,"No desperdicies agua, en Arrakis es un recurso muy preciado"),T()()()()())},styles:[TA,TA]});let t=e;return t})();var ba=$h(Ku());var VA=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(se(wo),se(Ni))},e.\u0275dir=_t({type:e});let t=e;return t})(),tg=(()=>{let e=class e extends VA{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275dir=_t({type:e,features:[kn]});let t=e;return t})(),Ol=new oe("");var QB={provide:Ol,useExisting:vr(()=>Xn),multi:!0};function YB(){let t=qr()?qr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var ZB=new oe(""),Xn=(()=>{let e=class e extends VA{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!YB())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(se(wo),se(Ni),se(ZB,8))},e.\u0275dir=_t({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Ce("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Pi([QB]),kn]});let t=e;return t})();function Io(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function LA(t){return t!=null&&typeof t.length=="number"}var ng=new oe(""),V_=new oe(""),XB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Oe=class{static min(e){return JB(e)}static max(e){return eU(e)}static required(e){return jA(e)}static requiredTrue(e){return tU(e)}static email(e){return nU(e)}static minLength(e){return rU(e)}static maxLength(e){return iU(e)}static pattern(e){return oU(e)}static nullValidator(e){return Wp(e)}static compose(e){return zA(e)}static composeAsync(e){return WA(e)}};function JB(t){return e=>{if(Io(e.value)||Io(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function eU(t){return e=>{if(Io(e.value)||Io(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function jA(t){return Io(t.value)?{required:!0}:null}function tU(t){return t.value===!0?null:{required:!0}}function nU(t){return Io(t.value)||XB.test(t.value)?null:{email:!0}}function rU(t){return e=>Io(e.value)||!LA(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function iU(t){return e=>LA(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function oU(t){if(!t)return Wp;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Io(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Wp(t){return null}function BA(t){return t!=null}function UA(t){return Os(t)?Pe(t):t}function $A(t){let e={};return t.forEach(n=>{e=n!=null?J(J({},e),n):e}),Object.keys(e).length===0?null:e}function qA(t,e){return e.map(n=>n(t))}function sU(t){return!t.validate}function HA(t){return t.map(e=>sU(e)?e:n=>e.validate(n))}function zA(t){if(!t)return null;let e=t.filter(BA);return e.length==0?null:function(n){return $A(qA(n,e))}}function GA(t){return t!=null?zA(HA(t)):null}function WA(t){if(!t)return null;let e=t.filter(BA);return e.length==0?null:function(n){let r=qA(n,e).map(UA);return Lv(r).pipe(fe($A))}}function KA(t){return t!=null?WA(HA(t)):null}function AA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function QA(t){return t._rawValidators}function YA(t){return t._rawAsyncValidators}function R_(t){return t?Array.isArray(t)?t:[t]:[]}function Kp(t,e){return Array.isArray(t)?t.includes(e):t===e}function xA(t,e){let n=R_(e);return R_(t).forEach(i=>{Kp(n,i)||n.push(i)}),n}function MA(t,e){return R_(e).filter(n=>!Kp(t,n))}var Qp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Hs=class extends Qp{get formDirective(){return null}get path(){return null}},zs=class extends Qp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Yp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},aU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yQ=Ve(J({},aU),{"[class.ng-submitted]":"isSubmitted"}),Wr=(()=>{let e=class e extends Yp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(se(zs,2))},e.\u0275dir=_t({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&yp("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[kn]});let t=e;return t})(),Do=(()=>{let e=class e extends Yp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(se(Hs,10))},e.\u0275dir=_t({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&yp("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[kn]});let t=e;return t})();var Qu="VALID",Gp="INVALID",Nl="PENDING",Yu="DISABLED",Co=class{},Zp=class extends Co{constructor(e,n){super(),this.value=e,this.source=n}},Zu=class extends Co{constructor(e,n){super(),this.pristine=e,this.source=n}},Xu=class extends Co{constructor(e,n){super(),this.touched=e,this.source=n}},Pl=class extends Co{constructor(e,n){super(),this.status=e,this.source=n}},N_=class extends Co{constructor(e){super(),this.source=e}},P_=class extends Co{constructor(e){super(),this.source=e}};function L_(t){return(rg(t)?t.validators:t)||null}function lU(t){return Array.isArray(t)?GA(t):t||null}function j_(t,e){return(rg(e)?e.asyncValidators:t)||null}function cU(t){return Array.isArray(t)?KA(t):t||null}function rg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function ZA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ge(1e3,"");if(!r[n])throw new ge(1001,"")}function XA(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ge(1002,"")})}var kl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new rt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qu}get invalid(){return this.status===Gp}get pending(){return this.status==Nl}get disabled(){return this.status===Yu}get enabled(){return this.status!==Yu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MA(e,this._rawAsyncValidators))}hasValidator(e){return Kp(this._rawValidators,e)}hasAsyncValidator(e){return Kp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ve(J({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Xu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Xu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ve(J({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Zu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Zu(!0,r))}markAsPending(e={}){this.status=Nl;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pl(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ve(J({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Yu,this.errors=null,this._forEachChild(i=>{i.disable(Ve(J({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zp(this.value,r)),this._events.next(new Pl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ve(J({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qu,this._forEachChild(r=>{r.enable(Ve(J({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ve(J({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qu||this.status===Nl)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zp(this.value,n)),this._events.next(new Pl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ve(J({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yu:Qu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Nl,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=UA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Pl(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Yu:this.errors?Gp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nl)?Nl:this._anyControlsHaveStatus(Gp)?Gp:Qu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Zu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Xu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cU(this._rawAsyncValidators)}},Xp=class extends kl{constructor(e,n,r){super(L_(n),j_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){XA(this,!0,e),Object.keys(e).forEach(r=>{ZA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var k_=class extends Xp{};var ig=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>og}),og="always";function JA(t,e){return[...e.path,t]}function O_(t,e,n=og){B_(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),dU(t,e),fU(t,e),hU(t,e),uU(t,e)}function RA(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),eg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Jp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function uU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function B_(t,e){let n=QA(t);e.validator!==null?t.setValidators(AA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=YA(t);e.asyncValidator!==null?t.setAsyncValidators(AA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Jp(e._rawValidators,i),Jp(e._rawAsyncValidators,i)}function eg(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=QA(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=YA(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Jp(e._rawValidators,r),Jp(e._rawAsyncValidators,r),n}function dU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ex(t,e)})}function hU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ex(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ex(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function fU(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function pU(t,e){t==null,B_(t,e)}function gU(t,e){return eg(t,e)}function tx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function mU(t){return Object.getPrototypeOf(t.constructor)===tg}function vU(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nx(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Xn?n=o:mU(o)?r=o:i=o}),i||r||n||null}function yU(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function NA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function PA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ju=class extends kl{constructor(e=null,n,r){super(L_(n),j_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(PA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){PA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wU=t=>t instanceof Ju;var _U={provide:zs,useExisting:vr(()=>U_)},kA=Promise.resolve(),U_=(()=>{let e=class e extends zs{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Ju,this._registered=!1,this.name="",this.update=new ot,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=nx(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),tx(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){O_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){kA.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Cu(i);kA.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?JA(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(se(Hs,9),se(ng,10),se(V_,10),se(Ol,10),se(_o,8),se(ig,8))},e.\u0275dir=_t({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Pi([_U]),kn,Mi]});let t=e;return t})(),To=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_t({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),EU={provide:Ol,useExisting:vr(()=>Gs),multi:!0},Gs=(()=>{let e=class e extends tg{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275dir=_t({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&Ce("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[Pi([EU]),kn]});let t=e;return t})();var rx=new oe("");var bU={provide:Hs,useExisting:vr(()=>Oi)},Oi=(()=>{let e=class e extends Hs{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ot,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(eg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return O_(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){RA(r.control||null,r,!1),yU(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,vU(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new N_(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1,this.form._events.next(new P_(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(RA(i||null,r),wU(o)&&(O_(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);pU(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&gU(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){B_(this.form,this),this._oldForm&&eg(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(se(ng,10),se(V_,10),se(ig,8))},e.\u0275dir=_t({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&Ce("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Pi([bU]),kn,Mi]});let t=e;return t})();var IU={provide:zs,useExisting:vr(()=>Fi)},Fi=(()=>{let e=class e extends zs{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ot,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=nx(this,s)}ngOnChanges(r){this._added||this._setUpControl(),tx(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return JA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(se(Hs,13),se(ng,10),se(V_,10),se(Ol,10),se(rx,8))},e.\u0275dir=_t({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Pi([IU]),kn,Mi]});let t=e;return t})(),CU={provide:Ol,useExisting:vr(()=>sg),multi:!0};function ix(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function DU(t){return t.split(":")[0]}var sg=(()=>{let e=class e extends tg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=ix(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=DU(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275dir=_t({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&Ce("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Pi([CU]),kn]});let t=e;return t})(),ox=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(ix(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(se(Ni),se(wo),se(sg,9))},e.\u0275dir=_t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),TU={provide:Ol,useExisting:vr(()=>sx),multi:!0};function OA(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function SU(t){return t.split(":")[0]}var sx=(()=>{let e=class e extends tg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let u=a[l],h=this._getOptionValue(u.value);o.push(h)}}else{let a=i.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let h=this._getOptionValue(u.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=SU(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275dir=_t({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&Ce("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Pi([TU]),kn]});let t=e;return t})(),ax=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(OA(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(OA(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(se(Ni),se(wo),se(sx,9))},e.\u0275dir=_t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var AU=(()=>{let e=class e{constructor(){this._validator=Wp}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Wp,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_t({type:e,features:[Mi]});let t=e;return t})();var xU={provide:ng,useExisting:vr(()=>Vi),multi:!0};var Vi=(()=>{let e=class e extends AU{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Cu,this.createValidator=r=>jA}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ri(e)))(o||e)}})(),e.\u0275dir=_t({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&vp("required",o._enabled?"":null)},inputs:{required:"required"},features:[Pi([xU]),kn]});let t=e;return t})();var lx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({});let t=e;return t})(),F_=class extends kl{constructor(e,n,r){super(L_(n),j_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){XA(this,!1,e),e.forEach((r,i)=>{ZA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function FA(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Kr=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return FA(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Xp(o,s)}record(r,i=null){let o=this._reduceControls(r);return new k_(o,i)}control(r,i,o){let s={};return this.useNonNullable?(FA(i)?s=i:(s.validators=i,s.asyncValidators=o),new Ju(r,Ve(J({},s),{nonNullable:!0}))):new Ju(r,i,o)}array(r,i,o){let s=r.map(a=>this._createControl(a));return new F_(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof Ju)return r;if(r instanceof kl)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jn=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ig,useValue:r.callSetDisabledState??og}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({imports:[lx]});let t=e;return t})(),Qr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:rx,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:ig,useValue:r.callSetDisabledState??og}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Kt({type:e}),e.\u0275inj=Wt({imports:[lx]});let t=e;return t})();var ag=(()=>{let e=class e{constructor(){this.credencialesSeleccionadas=new ot}seleccionarCredenciales(r,i){let o={email:r,password:i};this.credencialesSeleccionadas.emit(o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-botones-inicio"]],outputs:{credencialesSeleccionadas:"credencialesSeleccionadas"},standalone:!0,features:[dt],decls:14,vars:0,consts:[[1,"container"],[1,"ingreso-rapido-container","d-flex","flex-column","align-items-center","mb-4"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnAdmin",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnEsp1",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnEsp2",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac1",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac2",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac3",3,"click"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1)(2,"button",2),Ce("click",function(){return o.seleccionarCredenciales("paul.atreides@gmail.com","111111")}),L(3,"(admin)"),T(),x(4,"button",3),Ce("click",function(){return o.seleccionarCredenciales("Chani.fremen@gmail.com","chani123")}),L(5,"(especialista)"),T(),x(6,"button",4),Ce("click",function(){return o.seleccionarCredenciales("stilgar.lisanalgaib@gmail.com","stilgar123")}),L(7,"(especialista)"),T(),x(8,"button",5),Ce("click",function(){return o.seleccionarCredenciales("feyd.rautha@gmail.com","feyd123")}),L(9,"(paciente)"),T(),x(10,"button",6),Ce("click",function(){return o.seleccionarCredenciales("glosu.rabban@gmail.com","rabban123")}),L(11,"(paciente)"),T(),x(12,"button",7),Ce("click",function(){return o.seleccionarCredenciales("Vladimir.harkonnen@gmail.com","harkonnen123")}),L(13,"(paciente)"),T()()())},styles:['.btnIngreso[_ngcontent-%COMP%]{margin-bottom:15px;background-size:cover;background-position:center;width:90px;height:90px;border:none;border-radius:10px;color:#d2691e;font-weight:700;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;text-shadow:2px 2px 4px rgba(0,0,0,.9);position:relative;display:flex;flex-direction:column;justify-content:flex-end;padding:5px}.btnIngreso[_ngcontent-%COMP%]:hover{filter:brightness(.7);cursor:pointer;transform:scale(1.09)}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:90vh}.ingreso-rapido-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{margin-bottom:3px;margin-left:10px}.btnAdmin[_ngcontent-%COMP%]{background-image:url("./media/paul-TOTLTP7V.jpg")}.btnPac1[_ngcontent-%COMP%]{background-image:url("./media/feyd-PPCNG5RK.jpg")}.btnPac2[_ngcontent-%COMP%]{background-image:url("./media/rabban-SKHYYKXC.jpg")}.btnPac3[_ngcontent-%COMP%]{background-image:url("./media/harkonnen-WZNTQZTQ.jpg")}.btnEsp1[_ngcontent-%COMP%]{background-image:url("./media/chani-MDD6D4RA.jpg")}.btnEsp2[_ngcontent-%COMP%]{background-image:url("./media/stilgar-JGY2FHP7.jpg")}']});let t=e;return t})();var MU="firebase",RU="10.12.2";dr(MU,RU,"app");var So=new Ti("ANGULARFIRE2_VERSION");var NU=(t,e)=>{let n=e?[e]:rC(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Li=class{constructor(){return NU(PU)}},PU="app-check";function $_(){}var lg=class{zone;delegate;constructor(e,n=Ov){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},q_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$_,{},$_,$_)),n.pipe(xt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Vl=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new lg(Zone.current)),this.insideAngular=n.run(()=>new lg(Zone.current,_s)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Q(qe))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cx(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function H_(t){return t.pipe(Pn(cx().outsideAngular))}function Yt(t){return kU(cx())(t)}function kU(t){return function(n){return n=n.lift(new q_(t.ngZone)),n.pipe(fr(t.outsideAngular),Pn(t.insideAngular))}}var OU=new Map,FU={activated:!1,tokenObservers:[]},VU={initialized:!1,enabled:!1};function _r(t){return OU.get(t)||Object.assign({},FU)}function mx(){return VU}var LU="https://content-firebaseappcheck.googleapis.com/v1";var jU="exchangeDebugToken",ux={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UQ=24*60*60*1e3;var W_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return k(this,null,function*(){this.stop();try{this.pending=new fv,this.pending.promise.catch(n=>{}),yield BU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new fv,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function BU(t){return new Promise(e=>{setTimeout(e,t)})}var UU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ao=new nC("appCheck","AppCheck",UU);function vx(t){if(!_r(t).activated)throw Ao.create("use-before-activation",{appName:t.name})}function yx(r,i){return k(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(t,a)}catch(E){throw Ao.create("fetch-network-error",{originalErrorMessage:E?.message})}if(l.status!==200)throw Ao.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(E){throw Ao.create("fetch-parse-error",{originalErrorMessage:E?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ao.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let g=Number(h[1])*1e3,w=Date.now();return{token:u.token,expireTimeMillis:w+g,issuedAtTimeMillis:w}})}function wx(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${LU}/projects/${n}/apps/${r}:${jU}?key=${i}`,body:{debug_token:e}}}var $U="firebase-app-check-database",qU=1,K_="firebase-app-check-store";var cg=null;function HU(){return cg||(cg=new Promise((t,e)=>{try{let n=indexedDB.open($U,qU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ao.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(K_,{keyPath:"compositeKey"})}}}catch(n){e(Ao.create("storage-open",{originalErrorMessage:n?.message}))}}),cg)}function zU(t,e){return GU(WU(t),e)}function GU(t,e){return k(this,null,function*(){let r=(yield HU()).transaction(K_,"readwrite"),o=r.objectStore(K_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(Ao.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function WU(t){return`${t.options.appId}-${t.name}`}var Q_=new Wh("@firebase/app-check");function G_(t,e){return zh()?zU(t,e).catch(n=>{Q_.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _x(){return mx().enabled}function Ex(){return k(this,null,function*(){let t=mx();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var KU={error:"UNKNOWN_ERROR"};function QU(t){return tC.encodeString(JSON.stringify(t),!1)}function Y_(t,e=!1){return k(this,null,function*(){let n=t.app;vx(n);let r=_r(n),i=r.token,o;if(i&&!ed(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(ed(l)?i=l:yield G_(n,void 0))}if(!e&&i&&ed(i))return{token:i.token};let s=!1;if(_x()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yx(wx(n,yield Ex()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let l=yield r.exchangeTokenPromise;return yield G_(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield _r(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Q_.warn(l.message):Q_.error(l),o=l}let a;return i?o?ed(i)?a={token:i.token,internalError:o}:a=hx(o):(a={token:i.token},r.token=i,yield G_(n,i)):a=hx(o),s&&JU(n,a),a})}function YU(t){return k(this,null,function*(){let e=t.app;vx(e);let{provider:n}=_r(e);if(_x()){let r=yield Ex(),{token:i}=yield yx(wx(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function ZU(t,e,n,r){let{app:i}=t,o=_r(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ed(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),dx(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>dx(t))}function bx(t,e){let n=_r(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dx(t){let{app:e}=t,n=_r(e),r=n.tokenRefresher;r||(r=XU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function XU(t){let{app:e}=t;return new W_(()=>k(this,null,function*(){let n=_r(e),r;if(n.token?r=yield Y_(t,!0):r=yield Y_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=_r(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ux.RETRIAL_MIN_WAIT,ux.RETRIAL_MAX_WAIT)}function JU(t,e){let n=_r(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ed(t){return t.expireTimeMillis-Date.now()>0}function hx(t){return{token:QU(KU),error:t}}var Z_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=_r(this.app);for(let n of e)bx(this.app,n.next);return Promise.resolve()}};function e$(t,e){return new Z_(t,e)}function t$(t){return{getToken:e=>Y_(t,e),getLimitedUseToken:()=>YU(t),addTokenListener:e=>ZU(t,"INTERNAL",e),removeTokenListener:e=>bx(t.app,e)}}var n$="@firebase/app-check",r$="0.8.4";var i$="app-check",fx="app-check-internal";function o$(){ms(new ur(i$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return e$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(fx).initialize()})),ms(new ur(fx,t=>{let e=t.getProvider("app-check").getImmediate();return t$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),dr(n$,r$)}o$();var s$=["localhost","0.0.0.0","127.0.0.1"],JQ=typeof window<"u"&&s$.includes(window.location.hostname);var a$="firebase",l$="10.12.2";qt.registerVersion(a$,l$,"app-compat");var c$=["ngOnDestroy"],Cx=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(c$.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>n.run(()=>u)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,u)=>s.then(h=>{let g=h?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,g),g})})})});var ug=class{constructor(e){return e}},xo=new oe("angularfire2.app.options"),Mo=new oe("angularfire2.app.name");function Ws(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=qt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;u$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ug(s)}var u$=(t,...e)=>{Rw()&&typeof console<"u"&&console[t](...e)},d$={provide:ug,useFactory:Ws,deps:[xo,qe,[new mu,Mo]]},Dx=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:xo,useValue:n},{provide:Mo,useValue:r}]}}constructor(n){qt.registerVersion("angularfire",So.full,"core"),qt.registerVersion("angularfire",So.full,"app-compat"),qt.registerVersion("angular",gS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(Q(An))};static \u0275mod=Kt({type:t});static \u0275inj=Wt({providers:[d$]})}return t})();function Ll(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return h$(i,s)||(Ix("error",`${e} was already initialized on the ${n} Firebase App with different settings.${f$?" You may need to reload as Firebase is not HMR aware.":""}`),Ix("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function h$(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var f$=typeof module<"u"&&!!module.hot,Ix=(t,...e)=>{Rw()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var J_=new oe("angularfire2.auth.use-emulator"),e0=new oe("angularfire2.auth.settings"),t0=new oe("angularfire2.auth.tenant-id"),n0=new oe("angularfire2.auth.langugage-code"),r0=new oe("angularfire2.auth.use-device-language"),i0=new oe("angularfire.auth.persistence"),o0=(t,e,n,r,i,o,s,a)=>Ll(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(let[u,h]of Object.entries(s))l.settings[u]=h;return a&&l.setPersistence(a),l},[n,r,i,o,s,a]),td=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,l,u,h,g,w,E){let A=new rt,O=pe(void 0).pipe(Pn(s.outsideAngular),ct(()=>o.runOutsideAngular(()=>import("./chunk-RLD7N4AI.js"))),fe(()=>Ws(n,o,r)),fe(P=>o0(P,o,a,u,h,g,l,w)),bf({bufferSize:1,refCount:!1}));if(Ls(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pe(null);else{O.pipe(qn()).subscribe();let P=O.pipe(ct(H=>H.getRedirectResult().then(X=>X,()=>null)),Yt,bf({bufferSize:1,refCount:!1})),W=O.pipe(ct(H=>new Te(X=>({unsubscribe:o.runOutsideAngular(()=>H.onAuthStateChanged(ce=>X.next(ce),ce=>X.error(ce),()=>X.complete()))})))),Z=O.pipe(ct(H=>new Te(X=>({unsubscribe:o.runOutsideAngular(()=>H.onIdTokenChanged(ce=>X.next(ce),ce=>X.error(ce),()=>X.complete()))}))));this.authState=P.pipe(If(W),fr(s.outsideAngular),Pn(s.insideAngular)),this.user=P.pipe(If(Z),fr(s.outsideAngular),Pn(s.insideAngular)),this.idToken=this.user.pipe(ct(H=>H?Pe(H.getIdToken()):pe(null))),this.idTokenResult=this.user.pipe(ct(H=>H?Pe(H.getIdTokenResult()):pe(null))),this.credential=jv(P,A,this.authState.pipe(on(H=>!H))).pipe(fe(H=>H?.user?H:null),fr(s.outsideAngular),Pn(s.insideAngular))}return Cx(this,O,o,{spy:{apply:(P,W,Z)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&Z.then(H=>A.next(H))}}})}static \u0275fac=function(r){return new(r||t)(Q(xo),Q(Mo,8),Q(An),Q(qe),Q(Vl),Q(J_,8),Q(e0,8),Q(t0,8),Q(n0,8),Q(r0,8),Q(i0,8),Q(Li,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Tx=(()=>{class t{constructor(){qt.registerVersion("angularfire",So.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Kt({type:t});static \u0275inj=Wt({providers:[td]})}return t})();var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xx={};var Ro,s0;(function(){var t;function e(S,b){function D(){}D.prototype=b.prototype,S.D=b.prototype,S.prototype=new D,S.prototype.constructor=S,S.C=function(M,R,F){for(var C=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)C[Bn-2]=arguments[Bn];return b.prototype[R].apply(M,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,b,D){D||(D=0);var M=Array(16);if(typeof b=="string")for(var R=0;16>R;++R)M[R]=b.charCodeAt(D++)|b.charCodeAt(D++)<<8|b.charCodeAt(D++)<<16|b.charCodeAt(D++)<<24;else for(R=0;16>R;++R)M[R]=b[D++]|b[D++]<<8|b[D++]<<16|b[D++]<<24;b=S.g[0],D=S.g[1],R=S.g[2];var F=S.g[3],C=b+(F^D&(R^F))+M[0]+3614090360&4294967295;b=D+(C<<7&4294967295|C>>>25),C=F+(R^b&(D^R))+M[1]+3905402710&4294967295,F=b+(C<<12&4294967295|C>>>20),C=R+(D^F&(b^D))+M[2]+606105819&4294967295,R=F+(C<<17&4294967295|C>>>15),C=D+(b^R&(F^b))+M[3]+3250441966&4294967295,D=R+(C<<22&4294967295|C>>>10),C=b+(F^D&(R^F))+M[4]+4118548399&4294967295,b=D+(C<<7&4294967295|C>>>25),C=F+(R^b&(D^R))+M[5]+1200080426&4294967295,F=b+(C<<12&4294967295|C>>>20),C=R+(D^F&(b^D))+M[6]+2821735955&4294967295,R=F+(C<<17&4294967295|C>>>15),C=D+(b^R&(F^b))+M[7]+4249261313&4294967295,D=R+(C<<22&4294967295|C>>>10),C=b+(F^D&(R^F))+M[8]+1770035416&4294967295,b=D+(C<<7&4294967295|C>>>25),C=F+(R^b&(D^R))+M[9]+2336552879&4294967295,F=b+(C<<12&4294967295|C>>>20),C=R+(D^F&(b^D))+M[10]+4294925233&4294967295,R=F+(C<<17&4294967295|C>>>15),C=D+(b^R&(F^b))+M[11]+2304563134&4294967295,D=R+(C<<22&4294967295|C>>>10),C=b+(F^D&(R^F))+M[12]+1804603682&4294967295,b=D+(C<<7&4294967295|C>>>25),C=F+(R^b&(D^R))+M[13]+4254626195&4294967295,F=b+(C<<12&4294967295|C>>>20),C=R+(D^F&(b^D))+M[14]+2792965006&4294967295,R=F+(C<<17&4294967295|C>>>15),C=D+(b^R&(F^b))+M[15]+1236535329&4294967295,D=R+(C<<22&4294967295|C>>>10),C=b+(R^F&(D^R))+M[1]+4129170786&4294967295,b=D+(C<<5&4294967295|C>>>27),C=F+(D^R&(b^D))+M[6]+3225465664&4294967295,F=b+(C<<9&4294967295|C>>>23),C=R+(b^D&(F^b))+M[11]+643717713&4294967295,R=F+(C<<14&4294967295|C>>>18),C=D+(F^b&(R^F))+M[0]+3921069994&4294967295,D=R+(C<<20&4294967295|C>>>12),C=b+(R^F&(D^R))+M[5]+3593408605&4294967295,b=D+(C<<5&4294967295|C>>>27),C=F+(D^R&(b^D))+M[10]+38016083&4294967295,F=b+(C<<9&4294967295|C>>>23),C=R+(b^D&(F^b))+M[15]+3634488961&4294967295,R=F+(C<<14&4294967295|C>>>18),C=D+(F^b&(R^F))+M[4]+3889429448&4294967295,D=R+(C<<20&4294967295|C>>>12),C=b+(R^F&(D^R))+M[9]+568446438&4294967295,b=D+(C<<5&4294967295|C>>>27),C=F+(D^R&(b^D))+M[14]+3275163606&4294967295,F=b+(C<<9&4294967295|C>>>23),C=R+(b^D&(F^b))+M[3]+4107603335&4294967295,R=F+(C<<14&4294967295|C>>>18),C=D+(F^b&(R^F))+M[8]+1163531501&4294967295,D=R+(C<<20&4294967295|C>>>12),C=b+(R^F&(D^R))+M[13]+2850285829&4294967295,b=D+(C<<5&4294967295|C>>>27),C=F+(D^R&(b^D))+M[2]+4243563512&4294967295,F=b+(C<<9&4294967295|C>>>23),C=R+(b^D&(F^b))+M[7]+1735328473&4294967295,R=F+(C<<14&4294967295|C>>>18),C=D+(F^b&(R^F))+M[12]+2368359562&4294967295,D=R+(C<<20&4294967295|C>>>12),C=b+(D^R^F)+M[5]+4294588738&4294967295,b=D+(C<<4&4294967295|C>>>28),C=F+(b^D^R)+M[8]+2272392833&4294967295,F=b+(C<<11&4294967295|C>>>21),C=R+(F^b^D)+M[11]+1839030562&4294967295,R=F+(C<<16&4294967295|C>>>16),C=D+(R^F^b)+M[14]+4259657740&4294967295,D=R+(C<<23&4294967295|C>>>9),C=b+(D^R^F)+M[1]+2763975236&4294967295,b=D+(C<<4&4294967295|C>>>28),C=F+(b^D^R)+M[4]+1272893353&4294967295,F=b+(C<<11&4294967295|C>>>21),C=R+(F^b^D)+M[7]+4139469664&4294967295,R=F+(C<<16&4294967295|C>>>16),C=D+(R^F^b)+M[10]+3200236656&4294967295,D=R+(C<<23&4294967295|C>>>9),C=b+(D^R^F)+M[13]+681279174&4294967295,b=D+(C<<4&4294967295|C>>>28),C=F+(b^D^R)+M[0]+3936430074&4294967295,F=b+(C<<11&4294967295|C>>>21),C=R+(F^b^D)+M[3]+3572445317&4294967295,R=F+(C<<16&4294967295|C>>>16),C=D+(R^F^b)+M[6]+76029189&4294967295,D=R+(C<<23&4294967295|C>>>9),C=b+(D^R^F)+M[9]+3654602809&4294967295,b=D+(C<<4&4294967295|C>>>28),C=F+(b^D^R)+M[12]+3873151461&4294967295,F=b+(C<<11&4294967295|C>>>21),C=R+(F^b^D)+M[15]+530742520&4294967295,R=F+(C<<16&4294967295|C>>>16),C=D+(R^F^b)+M[2]+3299628645&4294967295,D=R+(C<<23&4294967295|C>>>9),C=b+(R^(D|~F))+M[0]+4096336452&4294967295,b=D+(C<<6&4294967295|C>>>26),C=F+(D^(b|~R))+M[7]+1126891415&4294967295,F=b+(C<<10&4294967295|C>>>22),C=R+(b^(F|~D))+M[14]+2878612391&4294967295,R=F+(C<<15&4294967295|C>>>17),C=D+(F^(R|~b))+M[5]+4237533241&4294967295,D=R+(C<<21&4294967295|C>>>11),C=b+(R^(D|~F))+M[12]+1700485571&4294967295,b=D+(C<<6&4294967295|C>>>26),C=F+(D^(b|~R))+M[3]+2399980690&4294967295,F=b+(C<<10&4294967295|C>>>22),C=R+(b^(F|~D))+M[10]+4293915773&4294967295,R=F+(C<<15&4294967295|C>>>17),C=D+(F^(R|~b))+M[1]+2240044497&4294967295,D=R+(C<<21&4294967295|C>>>11),C=b+(R^(D|~F))+M[8]+1873313359&4294967295,b=D+(C<<6&4294967295|C>>>26),C=F+(D^(b|~R))+M[15]+4264355552&4294967295,F=b+(C<<10&4294967295|C>>>22),C=R+(b^(F|~D))+M[6]+2734768916&4294967295,R=F+(C<<15&4294967295|C>>>17),C=D+(F^(R|~b))+M[13]+1309151649&4294967295,D=R+(C<<21&4294967295|C>>>11),C=b+(R^(D|~F))+M[4]+4149444226&4294967295,b=D+(C<<6&4294967295|C>>>26),C=F+(D^(b|~R))+M[11]+3174756917&4294967295,F=b+(C<<10&4294967295|C>>>22),C=R+(b^(F|~D))+M[2]+718787259&4294967295,R=F+(C<<15&4294967295|C>>>17),C=D+(F^(R|~b))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+F&4294967295}r.prototype.u=function(S,b){b===void 0&&(b=S.length);for(var D=b-this.blockSize,M=this.B,R=this.h,F=0;F<b;){if(R==0)for(;F<=D;)i(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<b;)if(M[R++]=S.charCodeAt(F++),R==this.blockSize){i(this,M),R=0;break}}else for(;F<b;)if(M[R++]=S[F++],R==this.blockSize){i(this,M),R=0;break}}this.h=R,this.o+=b},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;var D=8*this.o;for(b=S.length-8;b<S.length;++b)S[b]=D&255,D/=256;for(this.u(S),S=Array(16),b=D=0;4>b;++b)for(var M=0;32>M;M+=8)S[D++]=this.g[b]>>>M&255;return S};function o(S,b){var D=a;return Object.prototype.hasOwnProperty.call(D,S)?D[S]:D[S]=b(S)}function s(S,b){this.h=b;for(var D=[],M=!0,R=S.length-1;0<=R;R--){var F=S[R]|0;M&&F==b||(D[R]=F,M=!1)}this.g=D}var a={};function l(S){return-128<=S&&128>S?o(S,function(b){return new s([b|0],0>b?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return g;if(0>S)return P(u(-S));for(var b=[],D=1,M=0;S>=D;M++)b[M]=S/D|0,D*=4294967296;return new s(b,0)}function h(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return P(h(S.substring(1),b));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(b,8)),M=g,R=0;R<S.length;R+=8){var F=Math.min(8,S.length-R),C=parseInt(S.substring(R,R+F),b);8>F?(F=u(Math.pow(b,F)),M=M.j(F).add(u(C))):(M=M.j(D),M=M.add(u(C)))}return M}var g=l(0),w=l(1),E=l(16777216);t=s.prototype,t.m=function(){if(O(this))return-P(this).m();for(var S=0,b=1,D=0;D<this.g.length;D++){var M=this.i(D);S+=(0<=M?M:4294967296+M)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(A(this))return"0";if(O(this))return"-"+P(this).toString(S);for(var b=u(Math.pow(S,6)),D=this,M="";;){var R=X(D,b).g;D=W(D,R.j(b));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(S);if(D=R,A(D))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function A(S){if(S.h!=0)return!1;for(var b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function O(S){return S.h==-1}t.l=function(S){return S=W(this,S),O(S)?-1:A(S)?0:1};function P(S){for(var b=S.g.length,D=[],M=0;M<b;M++)D[M]=~S.g[M];return new s(D,~S.h).add(w)}t.abs=function(){return O(this)?P(this):this},t.add=function(S){for(var b=Math.max(this.g.length,S.g.length),D=[],M=0,R=0;R<=b;R++){var F=M+(this.i(R)&65535)+(S.i(R)&65535),C=(F>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);M=C>>>16,F&=65535,C&=65535,D[R]=C<<16|F}return new s(D,D[D.length-1]&-2147483648?-1:0)};function W(S,b){return S.add(P(b))}t.j=function(S){if(A(this)||A(S))return g;if(O(this))return O(S)?P(this).j(P(S)):P(P(this).j(S));if(O(S))return P(this.j(P(S)));if(0>this.l(E)&&0>S.l(E))return u(this.m()*S.m());for(var b=this.g.length+S.g.length,D=[],M=0;M<2*b;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<S.g.length;R++){var F=this.i(M)>>>16,C=this.i(M)&65535,Bn=S.i(R)>>>16,Xo=S.i(R)&65535;D[2*M+2*R]+=C*Xo,Z(D,2*M+2*R),D[2*M+2*R+1]+=F*Xo,Z(D,2*M+2*R+1),D[2*M+2*R+1]+=C*Bn,Z(D,2*M+2*R+1),D[2*M+2*R+2]+=F*Bn,Z(D,2*M+2*R+2)}for(M=0;M<b;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=b;M<2*b;M++)D[M]=0;return new s(D,0)};function Z(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function H(S,b){this.g=S,this.h=b}function X(S,b){if(A(b))throw Error("division by zero");if(A(S))return new H(g,g);if(O(S))return b=X(P(S),b),new H(P(b.g),P(b.h));if(O(b))return b=X(S,P(b)),new H(P(b.g),b.h);if(30<S.g.length){if(O(S)||O(b))throw Error("slowDivide_ only works with positive integers.");for(var D=w,M=b;0>=M.l(S);)D=ce(D),M=ce(M);var R=ae(D,1),F=ae(M,1);for(M=ae(M,2),D=ae(D,2);!A(M);){var C=F.add(M);0>=C.l(S)&&(R=R.add(D),F=C),M=ae(M,1),D=ae(D,1)}return b=W(S,R.j(b)),new H(R,b)}for(R=g;0<=S.l(b);){for(D=Math.max(1,Math.floor(S.m()/b.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=u(D),C=F.j(b);O(C)||0<C.l(S);)D-=M,F=u(D),C=F.j(b);A(F)&&(F=w),R=R.add(F),S=W(S,C)}return new H(R,S)}t.A=function(S){return X(this,S).h},t.and=function(S){for(var b=Math.max(this.g.length,S.g.length),D=[],M=0;M<b;M++)D[M]=this.i(M)&S.i(M);return new s(D,this.h&S.h)},t.or=function(S){for(var b=Math.max(this.g.length,S.g.length),D=[],M=0;M<b;M++)D[M]=this.i(M)|S.i(M);return new s(D,this.h|S.h)},t.xor=function(S){for(var b=Math.max(this.g.length,S.g.length),D=[],M=0;M<b;M++)D[M]=this.i(M)^S.i(M);return new s(D,this.h^S.h)};function ce(S){for(var b=S.g.length+1,D=[],M=0;M<b;M++)D[M]=S.i(M)<<1|S.i(M-1)>>>31;return new s(D,S.h)}function ae(S,b){var D=b>>5;b%=32;for(var M=S.g.length-D,R=[],F=0;F<M;F++)R[F]=0<b?S.i(F+D)>>>b|S.i(F+D+1)<<32-b:S.i(F+D);return new s(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s0=xx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Ro=xx.Integer=s}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={};var a0,l0,jl,c0,nd,hg,u0,d0,h0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,m){return c==Array.prototype||c==Object.prototype||(c[p]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dg=="object"&&dg];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var m=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in m))break e;m=m[N]}c=c[c.length-1],_=m[c],p=p(_),p!=_&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}function o(c,p){c instanceof String&&(c+="");var m=0,_=!1,N={next:function(){if(!_&&m<c.length){var j=m++;return{value:p(j,c[j]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(c){return c||function(){return o(this,function(p,m){return m})}});var s=s||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,m){return c.call.apply(c.bind,arguments)}function g(c,p,m){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(p,N)}}return function(){return c.apply(p,arguments)}}function w(c,p,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,w.apply(null,arguments)}function E(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function A(c,p){function m(){}m.prototype=p.prototype,c.aa=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(_,N,j){for(var Y=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Y[Ke-2]=arguments[Ke];return p.prototype[N].apply(_,Y)}}function O(c){let p=c.length;if(0<p){let m=Array(p);for(let _=0;_<p;_++)m[_]=c[_];return m}return[]}function P(c,p){for(let m=1;m<arguments.length;m++){let _=arguments[m];if(l(_)){let N=c.length||0,j=_.length||0;c.length=N+j;for(let Y=0;Y<j;Y++)c[N+Y]=_[Y]}else c.push(_)}}class W{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var ce=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ae(c,p,m){for(let _ in c)p.call(m,c[_],_,c)}function S(c,p){for(let m in c)p.call(void 0,c[m],m,c)}function b(c){let p={};for(let m in c)p[m]=c[m];return p}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,p){let m,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(m in _)c[m]=_[m];for(let j=0;j<D.length;j++)m=D[j],Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])}}function R(c){var p=1;c=c.split(":");let m=[];for(;0<p&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function F(c){a.setTimeout(()=>{throw c},0)}function C(){var c=Ia;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Bn{constructor(){this.h=this.g=null}add(p,m){let _=Xo.get();_.set(p,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Xo=new W(()=>new be,c=>c.reset());class be{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Jo,es=!1,Ia=new Bn,Zd=()=>{let c=a.Promise.resolve(void 0);Jo=()=>{c.then(U)}};var U=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(m){F(m)}var p=Xo;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}es=!1};function Tr(){this.s=this.s,this.C=this.C}Tr.prototype.s=!1,Tr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var Xd=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return c}();function li(c,p){if(Ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(ce){e:{try{X(p.nodeName);var N=!0;break e}catch{}N=!1}N||(p=null)}}else m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Jt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&li.aa.h.call(this)}}A(li,Ct);var Jt={2:"touch",3:"pen",4:"mouse"};li.prototype.h=function(){li.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Rn="closure_listenable_"+(1e6*Math.random()|0),Jd=0;function Qm(c,p,m,_,N){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!_,this.ha=N,this.key=++Jd,this.da=this.fa=!1}function Ca(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ci(c){this.src=c,this.g={},this.h=0}ci.prototype.add=function(c,p,m,_,N){var j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);var Y=ui(c,p,_,N);return-1<Y?(p=c[Y],m||(p.fa=!1)):(p=new Qm(p,this.src,j,!!_,N),p.fa=m,c.push(p)),p};function ts(c,p){var m=p.type;if(m in c.g){var _=c.g[m],N=Array.prototype.indexOf.call(_,p,void 0),j;(j=0<=N)&&Array.prototype.splice.call(_,N,1),j&&(Ca(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ui(c,p,m,_){for(var N=0;N<c.length;++N){var j=c[N];if(!j.da&&j.listener==p&&j.capture==!!m&&j.ha==_)return N}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),$t={};function Qi(c,p,m,_,N){if(_&&_.once)return Yi(c,p,m,_,N);if(Array.isArray(p)){for(var j=0;j<p.length;j++)Qi(c,p[j],m,_,N);return null}return m=Cn(m),c&&c[Rn]?c.K(p,m,u(_)?!!_.capture:!!_,N):en(c,p,m,!1,_,N)}function en(c,p,m,_,N,j){if(!p)throw Error("Invalid event type");var Y=u(N)?!!N.capture:!!N,Ke=rs(c);if(Ke||(c[ns]=Ke=new ci(c)),m=Ke.add(p,m,_,Y,j),m.proxy)return m;if(_=Ge(),m.proxy=_,_.src=c,_.listener=m,c.addEventListener)Xd||(N=Y),N===void 0&&(N=!1),c.addEventListener(p.toString(),_,N);else if(c.attachEvent)c.attachEvent(Ta(p.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ge(){function c(m){return p.call(c.src,c.listener,m)}let p=th;return c}function Yi(c,p,m,_,N){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Yi(c,p[j],m,_,N);return null}return m=Cn(m),c&&c[Rn]?c.L(p,m,u(_)?!!_.capture:!!_,N):en(c,p,m,!0,_,N)}function eh(c,p,m,_,N){if(Array.isArray(p))for(var j=0;j<p.length;j++)eh(c,p[j],m,_,N);else _=u(_)?!!_.capture:!!_,m=Cn(m),c&&c[Rn]?(c=c.i,p=String(p).toString(),p in c.g&&(j=c.g[p],m=ui(j,m,_,N),-1<m&&(Ca(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete c.g[p],c.h--)))):c&&(c=rs(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ui(p,m,_,N)),(m=-1<c?p[c]:null)&&Da(m))}function Da(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Rn])ts(p.i,c);else{var m=c.type,_=c.proxy;p.removeEventListener?p.removeEventListener(m,_,c.capture):p.detachEvent?p.detachEvent(Ta(m),_):p.addListener&&p.removeListener&&p.removeListener(_),(m=rs(p))?(ts(m,c),m.h==0&&(m.src=null,p[ns]=null)):Ca(c)}}}function Ta(c){return c in $t?$t[c]:$t[c]="on"+c}function th(c,p){if(c.da)c=!0;else{p=new li(p,this);var m=c.listener,_=c.ha||c.src;c.fa&&Da(c),c=m.call(_,p)}return c}function rs(c){return c=c[ns],c instanceof ci?c:null}var Zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(c){return typeof c=="function"?c:(c[Zi]||(c[Zi]=function(p){return c.handleEvent(p)}),c[Zi])}function pt(){Tr.call(this),this.i=new ci(this),this.M=this,this.F=null}A(pt,Tr),pt.prototype[Rn]=!0,pt.prototype.removeEventListener=function(c,p,m,_){eh(this,c,p,m,_)};function gt(c,p){var m,_=c.F;if(_)for(m=[];_;_=_.F)m.push(_);if(c=c.M,_=p.type||p,typeof p=="string")p=new Ct(p,c);else if(p instanceof Ct)p.target=p.target||c;else{var N=p;p=new Ct(_,c),M(p,N)}if(N=!0,m)for(var j=m.length-1;0<=j;j--){var Y=p.g=m[j];N=Sa(Y,_,!0,p)&&N}if(Y=p.g=c,N=Sa(Y,_,!0,p)&&N,N=Sa(Y,_,!1,p)&&N,m)for(j=0;j<m.length;j++)Y=p.g=m[j],N=Sa(Y,_,!1,p)&&N}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var m=c.g[p],_=0;_<m.length;_++)Ca(m[_]);delete c.g[p],c.h--}}this.F=null},pt.prototype.K=function(c,p,m,_){return this.i.add(String(c),p,!1,m,_)},pt.prototype.L=function(c,p,m,_){return this.i.add(String(c),p,!0,m,_)};function Sa(c,p,m,_){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var N=!0,j=0;j<p.length;++j){var Y=p[j];if(Y&&!Y.da&&Y.capture==m){var Ke=Y.listener,Vt=Y.ha||Y.src;Y.fa&&ts(c.i,Y),N=Ke.call(Vt,_)!==!1&&N}}return N&&!_.defaultPrevented}function di(c,p,m){if(typeof c=="function")m&&(c=w(c,m));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Xi(c){c.g=di(()=>{c.g=null,c.i&&(c.i=!1,Xi(c))},c.l);let p=c.h;c.h=null,c.m.apply(null,p)}class nh extends Tr{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Xi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(c){Tr.call(this),this.h=c,this.g={}}A(Sr,Tr);var Aa=[];function rh(c){ae(c.g,function(p,m){this.g.hasOwnProperty(m)&&Da(p)},c),c.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),rh(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=a.JSON.stringify,Oc=a.JSON.parse,xa=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Fc(){}Fc.prototype.h=null;function tn(c){return c.h||(c.h=c.i())}function Un(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){Ct.call(this,"d")}A(nn,Ct);function Ji(){Ct.call(this,"c")}A(Ji,Ct);var Ar={},Vc=null;function Ae(){return Vc=Vc||new pt}Ar.La="serverreachability";function Nn(c){Ct.call(this,Ar.La,c)}A(Nn,Ct);function Dn(c){let p=Ae();gt(p,new Nn(p))}Ar.STAT_EVENT="statevent";function xr(c,p){Ct.call(this,Ar.STAT_EVENT,c),this.stat=p}A(xr,Ct);function je(c){let p=Ae();gt(p,new xr(p,c))}Ar.Ma="timingevent";function Ft(c,p){Ct.call(this,Ar.Ma,c),this.size=p}A(Ft,Ct);function hi(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function eo(){this.g=!0}eo.prototype.xa=function(){this.g=!1};function ss(c,p,m,_,N,j){c.info(function(){if(c.g)if(j)for(var Y="",Ke=j.split("&"),Vt=0;Vt<Ke.length;Vt++){var Re=Ke[Vt].split("=");if(1<Re.length){var Lt=Re[0];Re=Re[1];var jt=Lt.split("_");Y=2<=jt.length&&jt[1]=="type"?Y+(Lt+"="+Re+"&"):Y+(Lt+"=redacted&")}}else Y=null;else Y=j;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+p+`
`+m+`
`+Y})}function un(c,p,m,_,N,j,Y){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+p+`
`+m+`
`+j+" "+Y})}function to(c,p,m,_){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+oh(c,m)+(_?" "+_:"")})}function ih(c,p){c.info(function(){return"TIMEOUT: "+p})}eo.prototype.info=function(){};function oh(c,p){if(!c.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var _=m[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var j=N[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Y=1;Y<N.length;Y++)N[Y]=""}}}}return is(m)}catch{return p}}var no={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function Ra(){}A(Ra,Fc),Ra.prototype.g=function(){return new XMLHttpRequest},Ra.prototype.i=function(){return{}},Ma=new Ra;function Mr(c,p,m,_){this.j=c,this.i=p,this.l=m,this.R=_||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var ah={},Lc={};function jc(c,p,m){c.L=1,c.v=Pa(dn(p)),c.m=m,c.P=!0,lh(c,null)}function lh(c,p){c.F=Date.now(),Na(c),c.A=dn(c.v);var m=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),bh(m.i,"t",_),c.C=0,m=c.j.J,c.h=new Rr,c.g=Oh(c.j,m?p:null,!c.m),0<c.O&&(c.M=new nh(w(c.Y,c,c.g),c.O)),p=c.U,m=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(Aa[0]=N.toString()),N=Aa);for(var j=0;j<N.length;j++){var Y=Qi(m,N[j],_||p.handleEvent,!1,p.h||p);if(!Y)break;p.g[Y.key]=Y}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Dn(),ss(c.i,c.u,c.A,c.l,c.R,c.m)}Mr.prototype.ca=function(c){c=c.target;let p=this.M;p&&lr(c)==3?p.j():this.Y(c)},Mr.prototype.Y=function(c){try{if(c==this.g)e:{let jt=lr(this.g);var p=this.g.Ba();let Pr=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Ah(this.g)))){this.J||jt!=4||p==7||(p==8||0>=Pr?Dn(3):Dn(2)),or(this);var m=this.g.Z();this.X=m;t:if(ch(this)){var _=Ah(this.g);c="";var N=_.length,j=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),as(this);var Y="";break t}this.h.i=new a.TextDecoder}for(p=0;p<N;p++)this.h.h=!0,c+=this.h.i.decode(_[p],{stream:!(j&&p==N-1)});_.length=0,this.h.g+=c,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,un(this.i,this.u,this.A,this.l,this.R,jt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Ke)){var Re=Ke;break t}}Re=null}if(m=Re)to(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uc(this,m);else{this.o=!1,this.s=3,je(12),fi(this),as(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<Y.length;)if(rn=Bc(this,Y),rn==Lc){jt==4&&(this.s=4,je(14),m=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==ah){this.s=4,je(15),to(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else to(this.i,this.l,rn,null),Uc(this,rn);if(ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||Y.length!=0||this.h.h||(this.s=1,je(16),m=!1),this.o=this.o&&m,!m)to(this.i,this.l,Y,"[Invalid Chunked Response]"),fi(this),as(this);else if(0<Y.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),yi(Lt),Lt.M=!0,je(11))}}else to(this.i,this.l,Y,null),Uc(this,Y);jt==4&&fi(this),this.o&&!this.J&&(jt==4?Nh(this.j,this):(this.o=!1,Na(this)))}else lv(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),fi(this),as(this)}}}catch{}finally{}};function ch(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Bc(c,p){var m=c.C,_=p.indexOf(`
`,m);return _==-1?Lc:(m=Number(p.substring(m,_)),isNaN(m)?ah:(_+=1,_+m>p.length?Lc:(p=p.slice(_,_+m),c.C=_+m,p)))}Mr.prototype.cancel=function(){this.J=!0,fi(this)};function Na(c){c.S=Date.now()+c.I,uh(c,c.I)}function uh(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=hi(w(c.ba,c),p)}function or(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(ih(this.i,this.A),this.L!=2&&(Dn(),je(17)),fi(this),this.s=2,as(this)):uh(this,this.S-c)};function as(c){c.j.G==0||c.J||Nh(c.j,c)}function fi(c){or(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,rh(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Uc(c,p){try{var m=c.j;if(m.G!=0&&(m.g==c||qc(m.h,c))){if(!c.K&&qc(m.h,c)&&m.G==3){try{var _=m.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Va(m),ka(m);else break e;Fa(m),je(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=hi(w(m.Za,m),6e3));if(1>=fh(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Tn(m,11)}else if((c.K||m.g==c)&&Va(m),!Z(p))for(N=m.Da.g.parse(p),p=0;p<N.length;p++){let Re=N[p];if(m.T=Re[0],Re=Re[1],m.G==2)if(Re[0]=="c"){m.K=Re[1],m.ia=Re[2];let Lt=Re[3];Lt!=null&&(m.la=Lt,m.j.info("VER="+m.la));let jt=Re[4];jt!=null&&(m.Aa=jt,m.j.info("SVER="+m.Aa));let Pr=Re[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(_=1.5*Pr,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let rn=c.g;if(rn){let ja=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var j=_.h;j.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Hc(j,j.h),j.h=null))}if(_.D){let Ba=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(_.ya=Ba,Xe(_.I,_.D,Ba))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var Y=c;if(_.qa=kh(_,_.J?_.ia:null,_.W),Y.K){Ye(_.h,Y);var Ke=Y,Vt=_.L;Vt&&(Ke.I=Vt),Ke.B&&(or(Ke),Na(Ke)),_.g=Y}else Mh(_);0<m.i.length&&Oa(m)}else Re[0]!="stop"&&Re[0]!="close"||Tn(m,7);else m.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Tn(m,7):Wc(m):Re[0]!="noop"&&m.l&&m.l.ta(Re),m.v=0)}}Dn(4)}catch{}}var $c=class{constructor(c,p){this.g=c,this.map=p}};function dh(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hh(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fh(c){return c.h?1:c.g?c.g.size:0}function qc(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Hc(c,p){c.g?c.g.add(p):c.h=p}function Ye(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}dh.prototype.cancel=function(){if(this.i=ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function ph(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(let m of c.g.values())p=p.concat(m.D);return p}return O(c.i)}function Ym(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],m=c.length,_=0;_<m;_++)p.push(c[_]);return p}p=[],m=0;for(_ in c)p[m++]=c[_];return p}function Zm(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var m=0;m<c;m++)p.push(m);return p}p=[],m=0;for(let _ in c)p[m++]=_;return p}}}function gh(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var m=Zm(c),_=Ym(c),N=_.length,j=0;j<N;j++)p.call(void 0,_[j],m&&m[j],c)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xm(c,p){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var _=c[m].indexOf("="),N=null;if(0<=_){var j=c[m].substring(0,_);N=c[m].substring(_+1)}else j=c[m];p(j,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function sr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof sr){this.h=c.h,ls(this,c.j),this.o=c.o,this.g=c.g,pi(this,c.s),this.l=c.l;var p=c.i,m=new us;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),at(this,m),this.m=c.m}else c&&(p=String(c).match(mh))?(this.h=!1,ls(this,p[1]||"",!0),this.o=cs(p[2]||""),this.g=cs(p[3]||"",!0),pi(this,p[4]),this.l=cs(p[5]||"",!0),at(this,p[6]||"",!0),this.m=cs(p[7]||"")):(this.h=!1,this.i=new us(null,this.h))}sr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(ro(p,vh,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ro(p,vh,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(ro(m,m.charAt(0)=="/"?yh:ev,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",ro(m,wh)),c.join("")};function dn(c){return new sr(c)}function ls(c,p,m){c.j=m?cs(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function pi(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function at(c,p,m){p instanceof us?(c.i=p,nv(c.i,c.h)):(m||(p=ro(p,tv)),c.i=new us(p,c.h))}function Xe(c,p,m){c.i.set(p,m)}function Pa(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function cs(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ro(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,Jm),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Jm(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vh=/[#\/\?@]/g,ev=/[#\?:]/g,yh=/[#\?]/g,tv=/[#\?@]/g,wh=/#/g;function us(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Nr(c){c.g||(c.g=new Map,c.h=0,c.i&&Xm(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=us.prototype,t.add=function(c,p){Nr(this),this.i=null,c=io(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function _h(c,p){Nr(c),p=io(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Eh(c,p){return Nr(c),p=io(c,p),c.g.has(p)}t.forEach=function(c,p){Nr(this),this.g.forEach(function(m,_){m.forEach(function(N){c.call(p,N,_,this)},this)},this)},t.na=function(){Nr(this);let c=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let _=0;_<p.length;_++){let N=c[_];for(let j=0;j<N.length;j++)m.push(p[_])}return m},t.V=function(c){Nr(this);let p=[];if(typeof c=="string")Eh(this,c)&&(p=p.concat(this.g.get(io(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)p=p.concat(c[m])}return p},t.set=function(c,p){return Nr(this),this.i=null,c=io(this,c),Eh(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function bh(c,p,m){_h(c,p),0<m.length&&(c.i=null,c.g.set(io(c,p),O(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var _=p[m];let j=encodeURIComponent(String(_)),Y=this.V(_);for(_=0;_<Y.length;_++){var N=j;Y[_]!==""&&(N+="="+encodeURIComponent(String(Y[_]))),c.push(N)}}return this.i=c.join("&")};function io(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function nv(c,p){p&&!c.j&&(Nr(c),c.i=null,c.g.forEach(function(m,_){var N=_.toLowerCase();_!=N&&(_h(this,_),bh(this,N,m))},c)),c.j=p}function Ih(c,p){let m=new eo;if(a.Image){let _=new Image;_.onload=E(ar,m,"TestLoadImage: loaded",!0,p,_),_.onerror=E(ar,m,"TestLoadImage: error",!1,p,_),_.onabort=E(ar,m,"TestLoadImage: abort",!1,p,_),_.ontimeout=E(ar,m,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else p(!1)}function rv(c,p){let m=new eo,_=new AbortController,N=setTimeout(()=>{_.abort(),ar(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:_.signal}).then(j=>{clearTimeout(N),j.ok?ar(m,"TestPingServer: ok",!0,p):ar(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),ar(m,"TestPingServer: error",!1,p)})}function ar(c,p,m,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(m)}catch{}}function iv(){this.g=new xa}function ov(c,p,m){let _=m||"";try{gh(c,function(N,j){let Y=N;u(N)&&(Y=is(N)),p.push(_+j+"="+encodeURIComponent(Y))})}catch(N){throw p.push(_+"type="+encodeURIComponent("_badmap")),N}}function $n(c){this.l=c.Ub||null,this.j=c.eb||!1}A($n,Fc),$n.prototype.g=function(){return new ds(this.l,this.j)},$n.prototype.i=function(c){return function(){return c}}({});function ds(c,p){pt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ds,pt),t=ds.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,oo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ch(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ch(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?gi(this):oo(this),this.readyState==3&&Ch(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,gi(this))},t.Qa=function(c){this.g&&(this.response=c,gi(this))},t.ga=function(){this.g&&gi(this)};function gi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,oo(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function oo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Dh(c){let p="";return ae(c,function(m,_){p+=_,p+=":",p+=m,p+=`\r
`}),p}function zc(c,p,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Dh(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Xe(c,p,m))}function lt(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(lt,pt);var sv=/^https?$/i,av=["POST","PUT"];t=lt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?tn(this.o):tn(Ma),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(j){Th(this,j);return}if(c=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)m.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let j of _.keys())m.set(j,_.get(j));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(av,p,void 0))||_||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,Y]of m)this.g.setRequestHeader(j,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gc(this),this.u=!0,this.g.send(c),this.u=!1}catch(j){Th(this,j)}};function Th(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,mi(c),hs(c)}function mi(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Sh(this):this.bb())},t.bb=function(){Sh(this)};function Sh(c){if(c.h&&typeof s<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)di(c.Ea,0,c);else if(gt(c,"readystatechange"),lr(c)==4){c.h=!1;try{let Y=c.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var _;if(_=Y===0){var N=String(c.D).match(mh)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!sv.test(N?N.toLowerCase():"")}m=_}if(m)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var j=2<lr(c)?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.Z()+"]",mi(c)}}finally{hs(c)}}}}function hs(c,p){if(c.g){Gc(c);let m=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||gt(c,"ready");try{m.onreadystatechange=_}catch{}}}function Gc(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Oc(p)}};function Ah(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lv(c){let p={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(Z(c[_]))continue;var m=R(c[_]);let N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let j=p[N]||[];p[N]=j,j.push(m)}S(p,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function xh(c){this.Aa=0,this.i=[],this.j=new eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fs("baseRetryDelayMs",5e3,c),this.cb=fs("retryDelaySeedMs",1e4,c),this.Wa=fs("forwardChannelMaxRetries",2,c),this.wa=fs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dh(c&&c.concurrentRequestLimit),this.Da=new iv,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xh.prototype,t.la=8,t.G=1,t.connect=function(c,p,m,_){je(0),this.W=c,this.H=p||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=kh(this,null,this.W),Oa(this)};function Wc(c){if(vi(c),c.G==3){var p=c.U++,m=dn(c.I);if(Xe(m,"SID",c.K),Xe(m,"RID",p),Xe(m,"TYPE","terminate"),ps(c,m),p=new Mr(c,c.j,p),p.L=2,p.v=Pa(dn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=Oh(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Na(p)}Ph(c)}function ka(c){c.g&&(yi(c),c.g.cancel(),c.g=null)}function vi(c){ka(c),c.u&&(a.clearTimeout(c.u),c.u=null),Va(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Oa(c){if(!hh(c.h)&&!c.s){c.s=!0;var p=c.Ga;Jo||Zd(),es||(Jo(),es=!0),Ia.add(p,c),c.B=0}}function cv(c,p){return fh(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=hi(w(c.Ga,c,p),Qc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let N=new Mr(this,this.j,c),j=this.o;if(this.S&&(j?(j=b(j),M(j,this.S)):j=this.S),this.m!==null||this.O||(N.H=j,j=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=cr(this,N,p),m=dn(this.I),Xe(m,"RID",c),Xe(m,"CVER",22),this.D&&Xe(m,"X-HTTP-Session-Id",this.D),ps(this,m),j&&(this.O?p="headers="+encodeURIComponent(String(Dh(j)))+"&"+p:this.m&&zc(m,this.m,j)),Hc(this.h,N),this.Ua&&Xe(m,"TYPE","init"),this.P?(Xe(m,"$req",p),Xe(m,"SID","null"),N.T=!0,jc(N,m,null)):jc(N,m,p),this.G=2}}else this.G==3&&(c?Kc(this,c):this.i.length==0||hh(this.h)||Kc(this))};function Kc(c,p){var m;p?m=p.l:m=c.U++;let _=dn(c.I);Xe(_,"SID",c.K),Xe(_,"RID",m),Xe(_,"AID",c.T),ps(c,_),c.m&&c.o&&zc(_,c.m,c.o),m=new Mr(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),p&&(c.i=p.D.concat(c.i)),p=cr(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hc(c.h,m),jc(m,_,p)}function ps(c,p){c.H&&ae(c.H,function(m,_){Xe(p,_,m)}),c.l&&gh({},function(m,_){Xe(p,_,m)})}function cr(c,p,m){m=Math.min(c.i.length,m);var _=c.l?w(c.l.Na,c.l,c):null;e:{var N=c.i;let j=-1;for(;;){let Y=["count="+m];j==-1?0<m?(j=N[0].g,Y.push("ofs="+j)):j=0:Y.push("ofs="+j);let Ke=!0;for(let Vt=0;Vt<m;Vt++){let Re=N[Vt].g,Lt=N[Vt].map;if(Re-=j,0>Re)j=Math.max(0,N[Vt].g-100),Ke=!1;else try{ov(Lt,Y,"req"+Re+"_")}catch{_&&_(Lt)}}if(Ke){_=Y.join("&");break e}}}return c=c.i.splice(0,m),p.D=c,_}function Mh(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Jo||Zd(),es||(Jo(),es=!0),Ia.add(p,c),c.v=0}}function Fa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=hi(w(c.Fa,c),Qc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Rh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=hi(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),ka(this),Rh(this))};function yi(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Rh(c){c.g=new Mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=dn(c.qa);Xe(p,"RID","rpc"),Xe(p,"SID",c.K),Xe(p,"AID",c.T),Xe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(p,"TO",c.ja),Xe(p,"TYPE","xmlhttp"),ps(c,p),c.m&&c.o&&zc(p,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=Pa(dn(p)),m.m=null,m.P=!0,lh(m,c)}t.Za=function(){this.C!=null&&(this.C=null,ka(this),Fa(this),je(19))};function Va(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Nh(c,p){var m=null;if(c.g==p){Va(c),yi(c),c.g=null;var _=2}else if(qc(c.h,p))m=p.D,Ye(c.h,p),_=1;else return;if(c.G!=0){if(p.o)if(_==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var N=c.B;_=Ae(),gt(_,new Ft(_,m)),Oa(c)}else Mh(c);else if(N=p.s,N==3||N==0&&0<p.X||!(_==1&&cv(c,p)||_==2&&Fa(c)))switch(m&&0<m.length&&(p=c.h,p.i=p.i.concat(m)),N){case 1:Tn(c,5);break;case 4:Tn(c,10);break;case 3:Tn(c,6);break;default:Tn(c,2)}}}function Qc(c,p){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*p}function Tn(c,p){if(c.j.info("Error code "+p),p==2){var m=w(c.fb,c),_=c.Xa;let N=!_;_=new sr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ls(_,"https"),Pa(_),N?Ih(_.toString(),m):rv(_.toString(),m)}else je(2);c.G=0,c.l&&c.l.sa(p),Ph(c),vi(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function Ph(c){if(c.G=0,c.ka=[],c.l){let p=ph(c.h);(p.length!=0||c.i.length!=0)&&(P(c.ka,p),P(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function kh(c,p,m){var _=m instanceof sr?dn(m):new sr(m);if(_.g!="")p&&(_.g=p+"."+_.g),pi(_,_.s);else{var N=a.location;_=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;var j=new sr(null);_&&ls(j,_),p&&(j.g=p),N&&pi(j,N),m&&(j.l=m),_=j}return m=c.D,p=c.ya,m&&p&&Xe(_,m,p),Xe(_,"VER",c.la),ps(c,_),_}function Oh(c,p,m){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new lt(new $n({eb:m})):new lt(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fh(){}t=Fh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(c,p){return new hn(c,p)};function hn(c,p){pt.call(this),this.g=new xh(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!Z(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Z(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new so(this)}A(hn,pt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Wc(this.g)},hn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=is(c),c=m);p.i.push(new $c(p.Ya++,c)),p.G==3&&Oa(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,hn.aa.N.call(this)};function Vh(c){nn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(let m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}A(Vh,nn);function Lh(){Ji.call(this),this.status=1}A(Lh,Ji);function so(c){this.g=c}A(so,Fh),so.prototype.ua=function(){gt(this.g,"a")},so.prototype.ta=function(c){gt(this.g,new Vh(c))},so.prototype.sa=function(c){gt(this.g,new Lh)},so.prototype.ra=function(){gt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,h0=ji.createWebChannelTransport=function(){return new La},d0=ji.getStatEventTarget=function(){return Ae()},u0=ji.Event=Ar,hg=ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,nd=ji.ErrorCode=no,sh.COMPLETE="complete",c0=ji.EventType=sh,Un.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",pt.prototype.listen=pt.prototype.K,jl=ji.WebChannel=Un,l0=ji.FetchXmlHttpFactory=$n,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,a0=ji.XhrIo=lt}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});var Mx="@firebase/firestore";var Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var mc="10.12.1";var Lo=new Wh("@firebase/firestore");function Hl(){return Lo.logLevel}function MM(t){Lo.setLogLevel(t)}function K(t,...e){if(Lo.logLevel<=Or.DEBUG){let n=e.map(gb);Lo.debug(`Firestore (${mc}): ${t}`,...n)}}function Tt(t,...e){if(Lo.logLevel<=Or.ERROR){let n=e.map(gb);Lo.error(`Firestore (${mc}): ${t}`,...n)}}function tr(t,...e){if(Lo.logLevel<=Or.WARN){let n=e.map(gb);Lo.warn(`Firestore (${mc}): ${t}`,...n)}}function gb(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ie(t="Unexpected state"){let e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+t;throw Tt(e),new Error(e)}function de(t,e){t||ie()}function RM(t,e){t||ie()}function te(t,e){return t}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Gh{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ig=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},v0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}},y0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},w0=class{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),o=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>k(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new Ig(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Pt(e)}},_0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},E0=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},b0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},I0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new b0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function g$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=g$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function NM(t){return t+"\0"}var mt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new mt(0,0))}static max(){return new t(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Dg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ue=class t extends Dg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},m$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class t extends Dg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return m$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ee=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ue.fromString(e))}static fromName(e){return new t(Ue.fromString(e).popFirst(5))}static empty(){return new t(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ue(e.slice()))}};var ec=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function C0(t){return t.fields.find(e=>e.kind===2)}function Qs(t){return t.fields.filter(e=>e.kind!==2)}ec.UNKNOWN_ID=-1;var Yl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var pd=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,nr.min())}};function PM(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new nr(i,ee.empty(),e)}function kM(t){return new nr(t.readTime,t.key,-1)}var nr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(he.min(),ee.empty(),-1)}static max(){return new t(he.max(),ee.empty(),-1)}};function mb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var OM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ko(t){return k(this,null,function*(){if(t.code!==B.FAILED_PRECONDITION||t.message!==OM)throw t;K("LocalStore","Unexpectedly lost primary lease")})}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Sg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new kt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ta(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=vb(r.target.error);this.V.reject(new ta(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new ta(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(K("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new T0(n)}},jo=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Zc())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return K("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!zh())return!1;if(t.C())return!0;let e=Zc(),n=t.S(e),r=0<n&&n<10,i=FM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return k(this,null,function*(){return this.db||(K("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new ta(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ta(e,s))},i.onupgradeneeded=o=>{K("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{K("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return k(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Sg.open(this.db,e,o?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&s<3;if(K("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function FM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var D0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ys(this.B.delete())}},ta=class extends G{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Qo(t){return t.name==="IndexedDbTransactionError"}var T0=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(K("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ys(r)}add(e){return K("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),K("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return K("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return K("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new V((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){K("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new V((r,i)=>{n.onerror=o=>{let s=vb(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let l=new D0(a),u=n(a.primaryKey,a.value,l);if(u instanceof V){let h=u.catch(g=>(l.done(),V.reject(g)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ys(t){return new V((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=vb(r.target.error);n(i)}})}var Rx=!1;function vb(t){let e=jo.S(Zc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rx||(Rx=!0,setTimeout(()=>{throw r},0)),r}}return t}var S0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){K("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>k(this,null,function*(){this.task=null;try{K("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Qo(n)?K("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Ko(n)}yield this.X(6e4)}))}},A0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return k(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return V.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return K("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(K("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=kM(o);mb(s,r)>0&&(r=s)}),new nr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Vn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Fd(t){return t==null}function gd(t){return t===0&&1/t==-1/0}function VM(t){return typeof t=="number"&&Number.isInteger(t)&&!gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nx(e)),e=v$(t.get(n),e);return Nx(e)}function v$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Nx(t){return t+""}function Yr(t){let e=t.length;if(de(e>=2),e===2)return de(t.charAt(0)===""&&t.charAt(1)===""),Ue.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&ie(),t.charAt(s+1)){case"":let a=t.substring(o,s),l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ie()}o=s+2}return new Ue(r)}var Px=["userId","batchId"];function vg(t,e){return[t,_n(e)]}function LM(t,e,n){return[t,_n(e),n]}var y$={},w$=["prefixPath","collectionGroup","readTime","documentId"],_$=["prefixPath","collectionGroup","documentId"],E$=["collectionGroup","readTime","prefixPath","documentId"],b$=["canonicalId","targetId"],I$=["targetId","path"],C$=["path","targetId"],D$=["collectionId","parent"],T$=["indexId","uid"],S$=["uid","sequenceNumber"],A$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x$=["indexId","uid","orderedDocumentKey"],M$=["userId","collectionPath","documentId"],R$=["userId","collectionPath","largestBatchId"],N$=["userId","collectionGroup","largestBatchId"],jM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],P$=[...jM,"documentOverlays"],BM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UM=BM,$M=[...UM,"indexConfiguration","indexState","indexEntries"],k$=$M;var md=class extends Tg{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function zt(t,e){let n=te(t);return jo.F(n._e,e)}function kx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var st=class t{constructor(e,n){this.comparator=e,this.root=n||Xr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}},Ql=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var et=class t{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ag=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Bl(t){return t.hasNext()?t.getNext():void 0}var Ln=class t{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new t([])}unionWith(e){let n=new et(St.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function HM(){return typeof atob<"u"}var Ht=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xg("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ht.EMPTY_BYTE_STRING=new Ht("");var O$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(de(!!t),typeof t=="string"){let e=0,n=O$.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bo(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}function wm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yb(t){let e=t.mapValue.fields.__previous_value__;return wm(e)?yb(e):e}function vd(t){let e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}var x0=class{constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Uo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Fo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yg={nullValue:"NULL_VALUE"};function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wm(t)?4:zM(t)?9007199254740991:10:ie()}function ti(t,e){if(t===e)return!0;let n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vd(t).isEqual(vd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$i(i.timestampValue),a=$i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Bo(i.bytesValue).isEqual(Bo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return bt(i.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bt(i.integerValue)===bt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=bt(i.doubleValue),a=bt(o.doubleValue);return s===a?gd(s)===gd(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(kx(s)!==kx(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ti(s[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function yd(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function $o(t,e){if(t===e)return 0;let n=na(t),r=na(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=bt(o.integerValue||o.doubleValue),l=bt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ox(t.timestampValue,e.timestampValue);case 4:return Ox(vd(t),vd(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Bo(o),l=Bo(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=ye(a[u],l[u]);if(h!==0)return h}return ye(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ye(bt(o.latitude),bt(s.latitude));return a!==0?a:ye(bt(o.longitude),bt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],l=s.values||[];for(let u=0;u<a.length&&u<l.length;++u){let h=$o(a[u],l[u]);if(h)return h}return ye(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Fo.mapValue&&s===Fo.mapValue)return 0;if(o===Fo.mapValue)return 1;if(s===Fo.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){let w=ye(l[g],h[g]);if(w!==0)return w;let E=$o(a[l[g]],u[h[g]]);if(E!==0)return E}return ye(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Ox(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=$i(t),r=$i(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function tc(t){return M0(t)}function M0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=$i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=M0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${M0(n.fields[s])}`;return i+"}"}(t.mapValue):ie()}function ra(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function R0(t){return!!t&&"integerValue"in t}function wd(t){return!!t&&"arrayValue"in t}function Fx(t){return!!t&&"nullValue"in t}function Vx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wg(t){return!!t&&"mapValue"in t}function cd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return fa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cd(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function F$(t){return"nullValue"in t?yg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ra(Uo.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ie()}function V$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ra(Uo.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Fo:ie()}function Lx(t,e){let n=$o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jx(t,e){let n=$o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ln=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cd(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=cd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());wg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fa(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(cd(this.value))}};function GM(t){let e=[];return fa(t.fields,(n,r)=>{let i=new St([n]);if(wg(r)){let o=GM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ln(e)}var Ot=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,he.min(),he.min(),he.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,he.min(),he.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,he.min(),he.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ni=class{constructor(e,n){this.position=e,this.inclusive=n}};function Bx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),n.key):r=$o(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ux(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}var ia=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function L$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Mg=class{},Fe=class t extends Mg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k0(e,n,r):n==="array-contains"?new V0(e,r):n==="in"?new Rg(e,r):n==="not-in"?new L0(e,r):n==="array-contains-any"?new j0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O0(e,r):new F0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($o(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ze=class t extends Mg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return nc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function nc(t){return t.op==="and"}function N0(t){return t.op==="or"}function wb(t){return WM(t)&&nc(t)}function WM(t){for(let e of t.filters)if(e instanceof Ze)return!1;return!0}function P0(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+tc(t.value);if(wb(t))return t.filters.map(e=>P0(e)).join(",");{let e=t.filters.map(n=>P0(n)).join(",");return`${t.op}(${e})`}}function KM(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&ti(r.value,i.value)}(t,e):t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&KM(s,i.filters[a]),!0):!1}(t,e):void ie()}function QM(t,e){let n=t.filters.concat(e);return Ze.create(n,t.op)}function YM(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${tc(n.value)}`}(t):t instanceof Ze?function(n){return n.op.toString()+" {"+n.getFilters().map(YM).join(" ,")+"}"}(t):"Filter"}var k0=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){let n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}},O0=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=ZM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},F0=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=ZM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ZM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}var V0=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return wd(n)&&yd(n.arrayValue,this.value)}},Rg=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&yd(this.value.arrayValue,n)}},L0=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!yd(this.value.arrayValue,n)}},j0=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yd(this.value.arrayValue,r))}};var B0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function U0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new B0(t,e,n,r,i,o,s)}function oa(t){let e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>P0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tc(r)).join(",")),e.ue=n}return e.ue}function Vd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ux(t.startAt,e.startAt)&&Ux(t.endAt,e.endAt)}function Ng(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Pg(t,e){return t.filters.filter(n=>n instanceof Fe&&n.field.isEqual(e))}function $x(t,e,n){let r=yg,i=!0;for(let o of Pg(t,e)){let s=yg,a=!0;switch(o.op){case"<":case"<=":s=F$(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=yg}Lx({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];Lx({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function qx(t,e,n){let r=Fo,i=!0;for(let o of Pg(t,e)){let s=Fo,a=!0;switch(o.op){case">=":case">":s=V$(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Fo}jx({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];jx({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Er=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function XM(t,e,n,r,i,o,s,a){return new Er(t,e,n,r,i,o,s,a)}function vc(t){return new Er(t)}function Hx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _b(t){return t.collectionGroup!==null}function Zl(t){let e=te(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new et(St.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ia(o,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new ia(St.keyField(),r))}return e.ce}function En(t){let e=te(t);return e.le||(e.le=j$(e,Zl(t))),e.le}function j$(t,e){if(t.limitType==="F")return U0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ia(i.field,o)});let n=t.endAt?new ni(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ni(t.startAt.position,t.startAt.inclusive):null;return U0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $0(t,e){let n=t.filters.concat([e]);return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kg(t,e,n){return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Vd(En(t),En(e))&&t.limitType===e.limitType}function JM(t){return`${oa(En(t))}|lt:${t.limitType}`}function zl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YM(i)).join(", ")}]`),Fd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>tc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>tc(i)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Zl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=Bx(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Zl(r),i)||r.endAt&&!function(s,a,l){let u=Bx(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Zl(r),i))}(t,e)}function eR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tR(t){return(e,n)=>{let r=!1;for(let i of Zl(t)){let o=B$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function B$(t,e,n){let r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?$o(l,u):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var ri=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return qM(this.inner)}size(){return this.innerSize}};var U$=new st(ee.comparator);function Mn(){return U$}var nR=new st(ee.comparator);function ad(...t){let e=nR;for(let n of t)e=e.insert(n.key,n);return e}function rR(t){let e=nR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return ud()}function iR(){return ud()}function ud(){return new ri(t=>t.toString(),(t,e)=>t.isEqual(e))}var $$=new st(ee.comparator),q$=new et(ee.comparator);function Ee(...t){let e=q$;for(let n of t)e=e.add(n);return e}var H$=new et(ye);function Eb(){return H$}function oR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function sR(t){return{integerValue:""+t}}function aR(t,e){return VM(e)?sR(e):oR(t,e)}var rc=class{constructor(){this._=void 0}};function z$(t,e,n){return t instanceof qo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wm(o)&&(o=yb(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof qi?cR(t,e):t instanceof Hi?uR(t,e):function(i,o){let s=lR(i,o),a=zx(s)+zx(i.Pe);return R0(s)&&R0(i.Pe)?sR(a):oR(i.serializer,a)}(t,e)}function G$(t,e,n){return t instanceof qi?cR(t,e):t instanceof Hi?uR(t,e):n}function lR(t,e){return t instanceof Ho?function(r){return R0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var qo=class extends rc{},qi=class extends rc{constructor(e){super(),this.elements=e}};function cR(t,e){let n=dR(e);for(let r of t.elements)n.some(i=>ti(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hi=class extends rc{constructor(e){super(),this.elements=e}};function uR(t,e){let n=dR(e);for(let r of t.elements)n=n.filter(i=>!ti(i,r));return{arrayValue:{values:n}}}var Ho=class extends rc{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function zx(t){return bt(t.integerValue||t.doubleValue)}function dR(t){return wd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var sa=class{constructor(e,n){this.field=e,this.transform=n}};function W$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qi&&i instanceof qi||r instanceof Hi&&i instanceof Hi?Jl(r.elements,i.elements,ti):r instanceof Ho&&i instanceof Ho?ti(r.Pe,i.Pe):r instanceof qo&&i instanceof qo}(t.transform,e.transform)}var q0=class{constructor(e,n){this.version=e,this.transformResults=n}},It=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ic=class{};function hR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Go(t.key,It.none()):new zo(t.key,t.data,It.none());{let n=t.data,r=ln.empty(),i=new et(St.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new br(t.key,r,new Ln(i.toArray()),It.none())}}function K$(t,e,n){t instanceof zo?function(i,o,s){let a=i.value.clone(),l=Wx(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof br?function(i,o,s){if(!_g(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Wx(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(fR(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function dd(t,e,n,r){return t instanceof zo?function(o,s,a,l){if(!_g(o.precondition,s))return a;let u=o.value.clone(),h=Kx(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof br?function(o,s,a,l){if(!_g(o.precondition,s))return a;let u=Kx(o.fieldTransforms,l,s),h=s.data;return h.setAll(fR(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(o,s,a){return _g(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Q$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=lR(r.transform,i||null);o!=null&&(n===null&&(n=ln.empty()),n.set(r.field,o))}return n||null}function Gx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jl(r,i,(o,s)=>W$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zo=class extends ic{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},br=class extends ic{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function fR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Wx(t,e,n){let r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,G$(s,a,n[i]))}return r}function Kx(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,z$(o,s,e))}return r}var Go=class extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_d=class extends ic{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ed=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&K$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=iR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let l=hR(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>Gx(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>Gx(n,r))}},H0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return $$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var bd=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var z0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Rt,Be;function pR(t){switch(t){default:return ie();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function gR(t){if(t===void 0)return Tt("GRPC error has no .code"),B.UNKNOWN;switch(t){case Rt.OK:return B.OK;case Rt.CANCELLED:return B.CANCELLED;case Rt.UNKNOWN:return B.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return B.INTERNAL;case Rt.UNAVAILABLE:return B.UNAVAILABLE;case Rt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Rt.NOT_FOUND:return B.NOT_FOUND;case Rt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Rt.ABORTED:return B.ABORTED;case Rt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Rt.DATA_LOSS:return B.DATA_LOSS;default:return ie()}}(Be=Rt||(Rt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";var Qx=null;function mR(){return new TextEncoder}var Y$=new Ro([4294967295,4294967295],0);function Yx(t){let e=mR().encode(t),n=new s0;return n.update(e),new Uint8Array(n.digest())}function Zx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ro([n,r],0),new Ro([i,o],0)]}var G0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ro.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ro.fromNumber(r)));return i.compare(Y$)===1&&(i=new Ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Yx(e),[r,i]=Zx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=Yx(e),[r,i]=Zx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ea=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Id=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(he.min(),i,new st(ye),Mn(),Ee())}},Cd=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ee(),Ee(),Ee())}};var Xl=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Og=class{constructor(e,n){this.targetId=e,this.me=n}},Fg=class{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Vg=class{constructor(){this.fe=0,this.ge=Jx(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new Cd(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Jx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},W0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=Xx(),this.Qe=new st(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(Ng(o))if(r===0){let s=new ee(o.path);this.Ue(n,s,Ot.newNoDocument(s,he.min()))}else de(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}Qx?.et(function(h,g,w,E,A){var O,P,W,Z,H,X;let ce={localCacheCount:h,existenceFilterCount:g.count,databaseId:w.database,projectId:w.projectId},ae=g.unchangedNames;return ae&&(ce.bloomFilter={applied:A===0,hashCount:(O=ae?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Z=(W=(P=ae?.bits)===null||P===void 0?void 0:P.bitmap)===null||W===void 0?void 0:W.length)!==null&&Z!==void 0?Z:0,padding:(X=(H=ae?.bits)===null||H===void 0?void 0:H.padding)!==null&&X!==void 0?X:0,mightContain:S=>{var b;return(b=E?.mightContain(S))!==null&&b!==void 0&&b}}),ce}(s,e.me,this.Le.tt(),a,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Bo(r).toUint8Array()}catch(l){if(l instanceof xg)return tr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new G0(s,i,o)}catch(l){return tr(l instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Ng(a.target)){let l=new ee(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,Ot.newNoDocument(l,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=Ee();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Id(e,n,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=Xx(),this.Qe=new st(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Xx(){return new st(ee.comparator)}function Jx(){return new st(ee.comparator)}var Z$={asc:"ASCENDING",desc:"DESCENDING"},X$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J$={and:"AND",or:"OR"},K0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Q0(t,e){return t.useProto3Json||Fd(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e4(t,e){return oc(t,e.toTimestamp())}function At(t){return de(!!t),he.fromTimestamp(function(n){let r=$i(n);return new mt(r.seconds,r.nanos)}(t))}function bb(t,e){return Y0(t,e).canonicalString()}function Y0(t,e){let n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){let e=Ue.fromString(t);return de(AR(e)),e}function Dd(t,e){return bb(t.databaseId,e.path)}function Jr(t,e){let n=yR(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(ER(n))}function wR(t,e){return bb(t.databaseId,e)}function _R(t){let e=yR(t);return e.length===4?Ue.emptyPath():ER(e)}function Z0(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ER(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eM(t,e,n){return{name:Dd(t,e),fields:n.value.mapValue.fields}}function bR(t,e,n){let r=Jr(t,e.name),i=At(e.updateTime),o=e.createTime?At(e.createTime):he.min(),s=new ln({mapValue:{fields:e.fields}}),a=Ot.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function t4(t,e){return"found"in e?function(r,i){de(!!i.found),i.found.name,i.found.updateTime;let o=Jr(r,i.found.name),s=At(i.found.updateTime),a=i.found.createTime?At(i.found.createTime):he.min(),l=new ln({mapValue:{fields:i.found.fields}});return Ot.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(r,i){de(!!i.missing),de(!!i.readTime);let o=Jr(r,i.missing),s=At(i.readTime);return Ot.newNoDocument(o,s)}(t,e):ie()}function n4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(de(h===void 0||typeof h=="string"),Ht.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?B.UNKNOWN:gR(u.code);return new G(h,u.message||"")}(s);n=new Fg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jr(t,r.document.name),o=At(r.document.updateTime),s=r.document.createTime?At(r.document.createTime):he.min(),a=new ln({mapValue:{fields:r.document.fields}}),l=Ot.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Xl(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jr(t,r.document),o=r.readTime?At(r.readTime):he.min(),s=Ot.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Xl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jr(t,r.document),o=r.removedTargetIds||[];n=new Xl([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new z0(i,o),a=r.targetId;n=new Og(a,s)}}return n}function Td(t,e){let n;if(e instanceof zo)n={update:eM(t,e.key,e.value)};else if(e instanceof Go)n={delete:Dd(t,e.key)};else if(e instanceof br)n={update:eM(t,e.key,e.data),updateMask:l4(e.fieldMask)};else{if(!(e instanceof _d))return ie();n={verify:Dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof qo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ho)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:e4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(t,e.precondition)),n}function X0(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?It.updateTime(At(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()}(e.currentDocument):It.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let l=null;if("setToServerValue"in a)de(a.setToServerValue==="REQUEST_TIME"),l=new qo;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];l=new qi(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];l=new Hi(h)}else"increment"in a?l=new Ho(s,a.increment):ie();let u=St.fromServerFormat(a.fieldPath);return new sa(u,l)}(t,i)):[];if(e.update){e.update.name;let i=Jr(t,e.update.name),o=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(l){let u=l.fieldPaths||[];return new Ln(u.map(h=>St.fromServerFormat(h)))}(e.updateMask);return new br(i,o,s,n,r)}return new zo(i,o,n,r)}if(e.delete){let i=Jr(t,e.delete);return new Go(i,n)}if(e.verify){let i=Jr(t,e.verify);return new _d(i,n)}return ie()}function r4(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?At(i.updateTime):At(o);return s.isEqual(he.min())&&(s=At(o)),new q0(s,i.transformResults||[])}(n,e))):[]}function IR(t,e){return{documents:[wR(t,e.path)]}}function CR(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wR(t,i);let o=function(u){if(u.length!==0)return SR(Ze.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(w){return{field:Gl(w.field),direction:o4(w.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Q0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function DR(t){let e=_R(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){let w=TR(g);return w instanceof Ze&&wb(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(g){return g.map(w=>function(A){return new ia(Wl(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(g){let w;return w=typeof g=="object"?g.value:g,Fd(w)?null:w}(n.limit));let l=null;n.startAt&&(l=function(g){let w=!!g.before,E=g.values||[];return new ni(E,w)}(n.startAt));let u=null;return n.endAt&&(u=function(g){let w=!g.before,E=g.values||[];return new ni(E,w)}(n.endAt)),XM(e,i,s,o,a,"F",l,u)}function i4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wl(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wl(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Wl(n.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Wl(n.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Wl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ze.create(n.compositeFilter.filters.map(r=>TR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function o4(t){return Z$[t]}function s4(t){return X$[t]}function a4(t){return J$[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function Wl(t){return St.fromServerFormat(t.fieldPath)}function SR(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Vx(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(Fx(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vx(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(Fx(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:s4(n.op),value:n.value}}}(t):t instanceof Ze?function(n){let r=n.getFilters().map(i=>SR(i));return r.length===1?r[0]:{compositeFilter:{op:a4(n.op),filters:r}}}(t):ie()}function l4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var sc=class t{constructor(e,n,r,i,o=he.min(),s=he.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Lg=class{constructor(e){this.ct=e}};function c4(t,e){let n;if(e.document)n=bR(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ee.fromSegments(e.noDocument.path),i=la(e.noDocument.readTime);n=Ot.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let r=ee.fromSegments(e.unknownDocument.path),i=la(e.unknownDocument.version);n=Ot.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new mt(i[0],i[1]);return he.fromTimestamp(o)}(e.readTime)),n}function tM(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Dd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:oc(o,s.version.toTimestamp()),createTime:oc(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:aa(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:n.path.toArray(),version:aa(e.version)}}return r}function jg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function aa(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function la(t){let e=new mt(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function Zs(t,e){let n=(e.baseMutations||[]).map(o=>X0(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>X0(t.ct,o)),i=mt.fromMillis(e.localWriteTimeMs);return new Ed(e.batchId,i,n,r)}function ld(t){let e=la(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?la(t.lastLimboFreeSnapshotVersion):he.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return de(o.documents.length===1),En(vc(_R(o.documents[0])))}(t.query):function(o){return En(DR(o))}(t.query),new sc(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ht.fromBase64String(t.resumeToken))}function xR(t,e){let n=aa(e.snapshotVersion),r=aa(e.lastLimboFreeSnapshotVersion),i;i=Ng(e.target)?IR(t.ct,e.target):CR(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oa(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ib(t){let e=DR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kg(e,e.limit,"L"):e}function f0(t,e){return new bd(e.largestBatchId,X0(t.ct,e.overlayMutation))}function nM(t,e){let n=e.path.lastSegment();return[t,_n(e.path.popLast()),n]}function rM(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:aa(r.readTime),documentKey:_n(r.documentKey.path),largestBatchId:r.largestBatchId}}var J0=class{getBundleMetadata(e,n){return iM(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:la(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return iM(e).put(function(i){return{bundleId:i.id,createTime:aa(At(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return oM(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Ib(o.bundledQuery),readTime:la(o.readTime)}}(r)})}saveNamedQuery(e,n){return oM(e).put(function(i){return{name:i.name,readTime:aa(At(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function iM(t){return zt(t,"bundles")}function oM(t){return zt(t,"namedQueries")}var Bg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return rd(e).get(nM(this.userId,n)).next(r=>r?f0(this.serializer,r):null)}getOverlays(e,n){let r=Zr();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new bd(n,s);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(_n(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(rd(e).j("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Zr(),o=_n(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return rd(e).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let u=f0(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Zr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return rd(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{let g=f0(this.serializer,u);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return rd(e).put(function(i,o,s){let[a,l,u]=nM(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Td(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function rd(t){return zt(t,"documentOverlays")}var Bi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(bt(e.integerValue));else if("doubleValue"in e){let r=bt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),gd(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=$i(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Bo(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?zM(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ie()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ee.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bi.bt=new Bi;function u4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function sM(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=u4(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var eE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=sM(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=sM(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},tE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},nE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Xs=class{constructor(){this.Gt=new eE,this.zt=new tE(this.Gt),this.jt=new nE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Js=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function No(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=aM(t.arrayValue,e.arrayValue),n!==0?n:(n=aM(t.directionalValue,e.directionalValue),n!==0?n:ee.comparator(t.documentKey,e.documentKey)))}function aM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Ug=class{constructor(e){this.Yt=new et((n,r)=>St.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(de(e.collectionGroup===this.collectionId),this.en)return!1;let n=C0(e);if(n!==void 0&&!this.nn(n))return!1;let r=Qs(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let l=r[o];if(!this.rn(a,l)||!this.sn(this.Zt[s++],l))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new et(St.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Yl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Yl(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Yl(r.field,r.dir==="asc"?0:1)));return new ec(ec.UNKNOWN_ID,this.collectionId,n,pd.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function MR(t){var e,n;if(de(t instanceof Fe||t instanceof Ze),t instanceof Fe){if(t instanceof Rg){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Fe.create(t.field,"==",o)))||[];return Ze.create(i,"or")}return t}let r=t.filters.map(i=>MR(i));return Ze.create(r,t.op)}function d4(t){if(t.getFilters().length===0)return[];let e=oE(MR(t));return de(RR(e)),rE(e)||iE(e)?[e]:e.getFilters()}function rE(t){return t instanceof Fe}function iE(t){return t instanceof Ze&&wb(t)}function RR(t){return rE(t)||iE(t)||function(n){if(n instanceof Ze&&N0(n)){for(let r of n.getFilters())if(!rE(r)&&!iE(r))return!1;return!0}return!1}(t)}function oE(t){if(de(t instanceof Fe||t instanceof Ze),t instanceof Fe)return t;if(t.filters.length===1)return oE(t.filters[0]);let e=t.filters.map(r=>oE(r)),n=Ze.create(e,t.op);return n=$g(n),RR(n)?n:(de(n instanceof Ze),de(nc(n)),de(n.filters.length>1),n.filters.reduce((r,i)=>Cb(r,i)))}function Cb(t,e){let n;return de(t instanceof Fe||t instanceof Ze),de(e instanceof Fe||e instanceof Ze),n=t instanceof Fe?e instanceof Fe?function(i,o){return Ze.create([i,o],"and")}(t,e):lM(t,e):e instanceof Fe?lM(e,t):function(i,o){if(de(i.filters.length>0&&o.filters.length>0),nc(i)&&nc(o))return QM(i,o.getFilters());let s=N0(i)?i:o,a=N0(i)?o:i,l=s.filters.map(u=>Cb(u,a));return Ze.create(l,"or")}(t,e),$g(n)}function lM(t,e){if(nc(e))return QM(e,t.getFilters());{let n=e.filters.map(r=>Cb(t,r));return Ze.create(n,"or")}}function $g(t){if(de(t instanceof Fe||t instanceof Ze),t instanceof Fe)return t;let e=t.getFilters();if(e.length===1)return $g(e[0]);if(WM(t))return t;let n=e.map(i=>$g(i)),r=[];return n.forEach(i=>{i instanceof Fe?r.push(i):i instanceof Ze&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ze.create(r,t.op)}var sE=class{constructor(){this._n=new Sd}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(nr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},Sd=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Ue.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Ue.comparator)).toArray()}};var fg=new Uint8Array(0),aE=class{constructor(e,n){this.databaseId=n,this.an=new Sd,this.un=new ri(r=>oa(r),(r,i)=>Vd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:_n(i)};return cM(e).put(o)}return V.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[NM(n),""],!1,!0);return cM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Yr(s.parent))}return r})}addFieldIndex(e,n){let r=id(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=$l(e);return o.next(a=>{s.put(rM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=id(e),i=$l(e),o=Ul(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=id(e),r=Ul(e),i=$l(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return V.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ug(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Ul(e),i=!0,o=new Map;return V.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ee(),a=[];return V.forEach(o,(l,u)=>{K("IndexedDbIndexManager",`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(l)} to execute ${oa(n)}`);let h=function(H,X){let ce=C0(X);if(ce===void 0)return null;for(let ae of Pg(H,ce.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null}(u,l),g=function(H,X){let ce=new Map;for(let ae of Qs(X))for(let S of Pg(H,ae.fieldPath))switch(S.op){case"==":case"in":ce.set(ae.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return ce.set(ae.fieldPath.canonicalString(),S.value),Array.from(ce.values())}return null}(u,l),w=function(H,X){let ce=[],ae=!0;for(let S of Qs(X)){let b=S.kind===0?$x(H,S.fieldPath,H.startAt):qx(H,S.fieldPath,H.startAt);ce.push(b.value),ae&&(ae=b.inclusive)}return new ni(ce,ae)}(u,l),E=function(H,X){let ce=[],ae=!0;for(let S of Qs(X)){let b=S.kind===0?qx(H,S.fieldPath,H.endAt):$x(H,S.fieldPath,H.endAt);ce.push(b.value),ae&&(ae=b.inclusive)}return new ni(ce,ae)}(u,l),A=this.hn(l,u,w),O=this.hn(l,u,E),P=this.Pn(l,u,g),W=this.In(l.indexId,h,A,w.inclusive,O,E.inclusive,P);return V.forEach(W,Z=>r.G(Z,n.limit).next(H=>{H.forEach(X=>{let ce=ee.fromSegments(X.documentKey);s.has(ce)||(s=s.add(ce),a.push(ce))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=d4(Ze.create(e.filters,"and")).map(r=>U0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let l=(n!=null?n.length:1)*Math.max(r.length,o.length),u=l/(n!=null?n.length:1),h=[];for(let g=0;g<l;++g){let w=n?this.Tn(n[g/u]):fg,E=this.En(e,w,r[g%u],i),A=this.dn(e,w,o[g%u],s),O=a.map(P=>this.En(e,w,P,!0));h.push(...this.createRange(E,A,O))}return h}En(e,n,r,i){let o=new Js(e,ee.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Js(e,ee.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new Ug(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return V.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(l){let u=new et(St.comparator),h=!1;for(let g of l.filters)for(let w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?h=!0:u=u.add(w.field));for(let g of l.orderBy)g.field.isKeyField()||(u=u.add(g.field));return u.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Xs;for(let i of Qs(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Bi.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Xs;return Bi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Xs;return Bi.bt.Pt(ra(this.databaseId,n),r.Ht(function(o){let s=Qs(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Xs);let o=0;for(let s of Qs(e)){let a=r[o++];for(let l of i)if(this.Vn(n,s.fieldPath)&&wd(a))i=this.mn(i,s,a);else{let u=l.Ht(s.kind);Bi.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let l=new Xs;l.seed(a.Wt()),Bi.bt.Pt(s,l.Ht(n.kind)),o.push(l)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=id(e),i=$l(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(l=>{s.push(function(h,g){let w=g?new pd(g.sequenceNumber,new nr(la(g.readTime),new ee(Yr(g.documentKey)),g.largestBatchId)):pd.empty(),E=h.fields.map(([A,O])=>new Yl(St.fromServerFormat(A),O));return new ec(h.indexId,h.collectionGroup,E,w)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ye(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=id(e),o=$l(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>o.put(rM(l.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return V.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,l=>this.pn(e,i,l).next(u=>{let h=this.yn(o,l);return u.isEqual(h)?V.resolve():this.wn(e,o,l,u,h)}))))})}Sn(e,n,r,i){return Ul(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ul(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Ul(e),o=new et(No);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Js(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new et(No),i=this.An(n,e);if(i==null)return r;let o=C0(n);if(o!=null){let s=e.data.field(o.fieldPath);if(wd(s))for(let a of s.arrayValue.values||[])r=r.add(new Js(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Js(n.indexId,e.key,fg,i));return r}wn(e,n,r,i,o){K("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(l,u,h,g,w){let E=l.getIterator(),A=u.getIterator(),O=Bl(E),P=Bl(A);for(;O||P;){let W=!1,Z=!1;if(O&&P){let H=h(O,P);H<0?Z=!0:H>0&&(W=!0)}else O!=null?Z=!0:W=!0;W?(g(P),P=Bl(A)):Z?(w(O),O=Bl(E)):(O=Bl(E),P=Bl(A))}}(i,o,No,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),V.waitFor(s)}gn(e){let n=1;return $l(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>No(s,a)).filter((s,a,l)=>!a||No(s,l[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=No(s,e),l=No(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(s),i.push(s.Jt());else if(l>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,fg,[]],l=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,fg,[]];o.push(IDBKeyRange.bound(a,l))}return o}Dn(e,n){return No(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(uM)}getMinOffset(e,n){return V.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ie())).next(uM)}};function cM(t){return zt(t,"collectionParents")}function Ul(t){return zt(t,"indexEntries")}function id(t){return zt(t,"indexConfiguration")}function $l(t){return zt(t,"indexState")}function uM(t){de(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;mb(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new nr(e.readTime,e.documentKey,n)}var dM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},er=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function NR(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=r.J({range:s},(h,g,w)=>(a++,w.delete()));o.push(l.next(()=>{de(a===1)}));let u=[];for(let h of n.mutations){let g=LM(e,h.key.path,n.batchId);o.push(i.delete(g)),u.push(h.key)}return V.waitFor(o).next(()=>u)}function qg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);var Hg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){de(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Po(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Kl(e),s=Po(e);return s.add({}).next(a=>{de(typeof a=="number");let l=new Ed(a,n,r,i),u=function(E,A,O){let P=O.baseMutations.map(Z=>Td(E.ct,Z)),W=O.mutations.map(Z=>Td(E.ct,Z));return{userId:A,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:P,mutations:W}}(this.serializer,this.userId,l),h=[],g=new et((w,E)=>ye(w.canonicalString(),E.canonicalString()));for(let w of i){let E=LM(this.userId,w.key.path,a);g=g.add(w.key.path.popLast()),h.push(s.put(u)),h.push(o.put(E,y$))}return g.forEach(w=>{h.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),V.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Po(e).get(n).next(r=>r?(de(r.userId===this.userId),Zs(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?V.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Po(e).J({index:"userMutationsIndex",range:i},(s,a,l)=>{a.userId===this.userId&&(de(a.batchId>=r),o=Zs(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Po(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Po(e).U("userMutationsIndex",n).next(r=>r.map(i=>Zs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=vg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Kl(e).J({range:i},(s,a,l)=>{let[u,h,g]=s,w=Yr(h);if(u===this.userId&&n.path.isEqual(w))return Po(e).get(g).next(E=>{if(!E)throw ie();de(E.userId===this.userId),o.push(Zs(this.serializer,E))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ye),i=[];return n.forEach(o=>{let s=vg(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Kl(e).J({range:a},(u,h,g)=>{let[w,E,A]=u,O=Yr(E);w===this.userId&&o.path.isEqual(O)?r=r.add(A):g.done()});i.push(l)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=vg(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new et(ye);return Kl(e).J({range:s},(l,u,h)=>{let[g,w,E]=l,A=Yr(w);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(E)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Po(e).get(o).next(s=>{if(s===null)throw ie();de(s.userId===this.userId),r.push(Zs(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return NR(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Kl(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let l=Yr(o[1]);i.push(l)}else a.done()}).next(()=>{de(i.length===0)})})}containsKey(e,n){return PR(e,this.userId,n)}xn(e){return kR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function PR(t,e,n){let r=vg(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kl(t).J({range:o,H:!0},(a,l,u)=>{let[h,g,w]=a;h===e&&g===i&&(s=!0),u.done()}).next(()=>s)}function Po(t){return zt(t,"mutations")}function Kl(t){return zt(t,"documentMutations")}function kR(t){return zt(t,"mutationQueues")}var ac=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var lE=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new ac(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>he.fromTimestamp(new mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ql(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(de(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ql(e).J((s,a)=>{let l=ld(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,o.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ql(e).J((r,i)=>{let o=ld(i);n(o)})}Bn(e){return hM(e).get("targetGlobalKey").next(n=>(de(n!==null),n))}kn(e,n){return hM(e).put("targetGlobalKey",n)}qn(e,n){return ql(e).put(xR(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=oa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ql(e).J({range:i,index:"queryTargetsIndex"},(s,a,l)=>{let u=ld(a);Vd(n,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=ko(e);return n.forEach(s=>{let a=_n(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,n,r){let i=ko(e);return V.forEach(n,o=>{let s=_n(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=ko(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ko(e),o=Ee();return i.J({range:r,H:!0},(s,a,l)=>{let u=Yr(s[1]),h=new ee(u);o=o.add(h)}).next(()=>o)}containsKey(e,n){let r=_n(n.path),i=IDBKeyRange.bound([r],[NM(r)],!1,!0),o=0;return ko(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return ql(e).get(n).next(r=>r?ld(r):null)}};function ql(t){return zt(t,"targets")}function hM(t){return zt(t,"targetGlobal")}function ko(t){return zt(t,"targetDocuments")}function fM([t,e],[n,r]){let i=ye(t,n);return i===0?ye(e,r):i}var cE=class{constructor(e){this.Kn=e,this.buffer=new et(fM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();fM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},uE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>k(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qo(n)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Ko(n)}yield this.zn(3e5)}))}},dE=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Vn.oe);let r=new cE(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(dM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),Hl()<=Or.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${g} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function h4(t,e){return new dE(t,e)}var hE=class{constructor(e,n){this.db=e,this.garbageCollector=h4(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return pg(e,r)}removeReference(e,n,r){return pg(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pg(e,n)}er(e,n){return function(i,o){let s=!1;return kR(i).Y(a=>PR(i,a,o).next(l=>(l&&(s=!0),V.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let l=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,he.min()),ko(e).delete(function(g){return[0,_n(g.path)]}(s))))});i.push(l)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pg(e,n)}Xn(e,n){let r=ko(e),i,o=Vn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==Vn.oe&&n(new ee(Yr(i)),o),o=u,i=l):o=Vn.oe}).next(()=>{o!==Vn.oe&&n(new ee(Yr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function pg(t,e){return ko(t).put(function(r,i){return{targetId:0,path:_n(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var zg=class{constructor(){this.changes=new ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ks(e).put(r)}removeEntry(e,n,r){return Ks(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Ot.newInvalidDocument(n);return Ks(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(od(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Ot.newInvalidDocument(n)};return Ks(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(od(n))},(i,o)=>{r={document:this.nr(n,o),size:qg(o)}}).next(()=>r)}getEntries(e,n){let r=Mn();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Mn(),i=new st(ee.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,qg(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return V.resolve();let i=new et(mM);n.forEach(l=>i=i.add(l));let o=IDBKeyRange.bound(od(i.first()),od(i.last())),s=i.getIterator(),a=s.getNext();return Ks(e).J({index:"documentKeyIndex",range:o},(l,u,h)=>{let g=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&mM(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?h.$(od(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),jg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ks(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let h=Mn();for(let g of u){let w=this.nr(ee.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(jd(n,w)||i.has(w.key))&&(h=h.insert(w.key,w))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Mn(),s=gM(n,r),a=gM(n,nr.max());return Ks(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,h)=>{let g=this.nr(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new pE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return pM(e).get("remoteDocumentGlobalKey").next(n=>(de(!!n),n))}tr(e,n){return pM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=c4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return Ot.newInvalidDocument(e)}};function OR(t){return new fE(t)}var pE=class extends zg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ri(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new et((o,s)=>ye(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let l=tM(this.ar.serializer,s);i=i.add(o.path.popLast());let u=qg(l);r+=u-a.size,n.push(this.ar.addEntry(e,o,l))}else if(r-=a.size,this.trackRemovals){let l=tM(this.ar.serializer,s.convertToNoDocument(he.min()));n.push(this.ar.addEntry(e,o,l))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function pM(t){return zt(t,"remoteDocumentGlobal")}function Ks(t){return zt(t,"remoteDocumentsV14")}function od(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gM(t,e){let n=e.documentKey.path.toArray();return[t,jg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mM(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ye(n[o],r[o]),i)return i;return i=ye(n.length,r.length),i||(i=ye(n[n.length-2],r[r.length-2]),i||ye(n[n.length-1],r[r.length-1]))}var gE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Gg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&dd(r.mutation,i,Ln.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){let i=Zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ad();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Mn(),s=ud(),a=function(){return ud()}();return n.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof br)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),dd(h.mutation,u,h.mutation.getFieldMask(),mt.now())):s.set(u.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var g;return a.set(u,new gE(h,(g=s.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ud(),i=new st((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=n.get(l);if(u===null)return;let h=r.get(l)||Ln.empty();h=a.applyToLocalView(u,h),r.set(l,h);let g=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,g=iR();h.forEach(w=>{if(!o.has(w)){let E=hR(n.get(w),r.get(w));E!==null&&g.set(w,E),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_b(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(Zr()),a=-1,l=o;return s.next(u=>V.forEach(u,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(w=>{l=l.insert(h,w)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ee())).next(h=>({batchId:a,changes:rR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=ad();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ad();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,l=>{let u=function(g,w){return new Er(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((g,w)=>{s=s.insert(g,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Ot.newInvalidDocument(h)))});let a=ad();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&dd(h.mutation,u,Ln.empty(),mt.now()),jd(n,u)&&(a=a.insert(l,u))}),a})}};var mE=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:At(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Ib(i.bundledQuery),readTime:At(i.readTime)}}(n)),V.resolve()}};var vE=class{constructor(){this.overlays=new st(ee.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zr();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){let i=Zr(),o=n.length+1,s=new ee(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new st((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Zr(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Zr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new bd(n,r));let o=this.hr.get(n);o===void 0&&(o=Ee(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Ad=class{constructor(){this.Pr=new et(Nt.Ir),this.Tr=new et(Nt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Nt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Nt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new ee(new Ue([])),r=new Nt(n,e),i=new Nt(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ee(new Ue([])),r=new Nt(n,e),i=new Nt(n,e+1),o=Ee();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Nt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Nt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ee.comparator(e.key,n.key)||ye(e.pr,n.pr)}static Er(e,n){return ye(e.pr,n.pr)||ee.comparator(e.key,n.key)}};var yE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new et(Nt.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ed(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Nt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Nt(n,0),i=new Nt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ye);return n.forEach(i=>{let o=new Nt(i,0),s=new Nt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new Nt(new ee(o),0),a=new et(ye);return this.wr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},s),V.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,i=>{let o=new Nt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Nt(n,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var wE=class{constructor(e){this.vr=e,this.docs=function(){return new st(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ot.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Mn(),s=n.path,a=new ee(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||mb(kM(h),r)<=0||(i.has(h.key)||jd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ie()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _E(this)}getSize(e){return V.resolve(this.size)}},_E=class extends zg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var EE=class{constructor(e){this.persistence=e,this.Mr=new ri(n=>oa(n),Vd),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ad,this.targetCount=0,this.Lr=ac.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ac(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}};var Wg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Vn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new EE(this),this.indexManager=new sE,this.remoteDocumentCache=function(i){return new wE(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Lg(n),this.$r=new mE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new yE(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);let i=new bE(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},bE=class extends Tg{constructor(e){super(),this.currentSequenceNumber=e}},Kg=class t{constructor(e){this.persistence=e,this.zr=new Ad,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{let i=ee.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,he.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var IE=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Sg("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0}),l.createObjectStore("documentMutations")}(e),vM(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),vM(e)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0});let g=u.store("mutations"),w=h.map(E=>g.put(E));return V.waitFor(w)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:M$});u.createIndex("collectionPathOverlayIndex",R$,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",N$,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:w$});u.createIndex("documentKeyIndex",_$),u.createIndex("collectionGroupIndex",E$)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:T$}).createIndex("sequenceNumberIndex",S$,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:A$}).createIndex("documentKeyIndex",x$,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=qg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>V.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>V.forEach(a,l=>{de(l.userId===o.userId);let u=Zs(this.serializer,l);return NR(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let l=new Ue(s),u=function(g){return[0,_n(g)]}(l);o.push(n.get(u).next(h=>h?V.resolve():(g=>n.put({targetId:0,path:_n(g),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:D$});let r=n.store("collectionParents"),i=new Sd,o=s=>{if(i.add(s)){let a=s.lastSegment(),l=s.popLast();return r.put({collectionId:a,parent:_n(l)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new Ue(s);return o(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,l],u)=>{let h=Yr(a);return o(h.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=ld(i),s=xR(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),l=function(g){return g.document?new ee(Ue.fromString(g.document.name).popFirst(5)):g.noDocument?ee.fromSegments(g.noDocument.path):g.unknownDocument?ee.fromSegments(g.unknownDocument.path):ie()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>V.waitFor(i))}si(e,n){let r=n.store("mutations"),i=OR(this.serializer),o=new Wg(Kg.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:Ee();Zs(this.serializer,l).keys().forEach(g=>h=h.add(g)),a.set(l.userId,h)}),V.forEach(a,(l,u)=>{let h=new Pt(u),g=Bg.lt(this.serializer,h),w=o.getIndexManager(h),E=Hg.lt(h,this.serializer,w,o.referenceDelegate);return new Gg(i,E,g,w).recalculateAndSaveOverlaysForDocumentKeys(new md(n,Vn.oe),l).next()})})}};function vM(t){t.createObjectStore("targetDocuments",{keyPath:I$}).createIndex("documentTargetsIndex",C$,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",b$,{unique:!0}),t.createObjectStore("targetGlobal")}var p0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CE=class t{constructor(e,n,r,i,o,s,a,l,u,h,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=h,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hE(this,i),this.Ti=n+"main",this.serializer=new Lg(l),this.Ei=new jo(this.Ti,this.ui,new IE(this.serializer)),this.Qr=new lE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OR(this.serializer),this.$r=new J0,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&Tt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,p0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Vn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>k(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>k(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>k(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Qo(e))return K("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return sd(e).get("owner").next(n=>V.resolve(this.Si(n)))}bi(e){return gg(e).delete(this.clientId)}Di(){return k(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=zt(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):sd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,p0);return!1}}return!(!this.networkEnabled||!this.inForeground)||gg(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return k(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new md(e,Vn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>gg(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Hg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){K("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(l){return l===16?k$:l===15?$M:l===14?UM:l===13?BM:l===12?P$:l===11?jM:void ie()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new md(a,this.kr?this.kr.next():Vn.oe),n==="readwrite-primary"?this.gi(s).next(l=>!!l||this.pi(s)).next(l=>{if(!l)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G(B.FAILED_PRECONDITION,OM);return r(s)}).next(l=>this.wi(s).next(()=>l)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return sd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,p0)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sd(e).put("owner",n)}static D(){return jo.D()}yi(e){let n=sd(e);return n.get("owner").next(r=>this.Si(r)?(K("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;pv()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return K("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function sd(t){return zt(t,"owner")}function gg(t){return zt(t,"clientMetadata")}function Db(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var DE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ee(),i=Ee();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var TE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return pv()?8:FM(Zc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new TE;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Hl()<=Or.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(Hl()<=Or.DEBUG&&K("QueryEngine","Query:",zl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Hl()<=Or.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):V.resolve())}ji(e,n){if(Hx(n))return V.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kg(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.Zi(n,a);return this.Xi(n,u,s,l.readTime)?this.ji(e,kg(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,i){return Hx(n)||i.isEqual(he.min())?V.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?V.resolve(null):(Hl()<=Or.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(n)),this.es(e,s,n,PM(i,-1)).next(a=>a))})}Zi(e,n){let r=new et(tR(e));return n.forEach((i,o)=>{jd(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Hl()<=Or.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",zl(n)),this.zi.getDocumentsMatchingQuery(e,n,nr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var SE=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new st(ye),this.rs=new ri(o=>oa(o),Vd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function FR(t,e,n,r){return new SE(t,e,n,r)}function VR(t,e){return k(this,null,function*(){let n=te(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Ee();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function f4(t,e){let n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let g=u.batch,w=g.keys(),E=V.resolve();return w.forEach(A=>{E=E.next(()=>h.getEntry(l,A)).next(O=>{let P=u.docVersions.get(A);de(P!==null),O.version.compareTo(P)<0&&(g.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),h.addEntry(O)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function LR(t){let e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function p4(t,e){let n=te(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,g)=>{let w=i.get(g);if(!w)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,g)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Ht.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),function(O,P,W){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(w,E,h)&&a.push(n.Qr.updateTargetData(o,E))});let l=Mn(),u=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(jR(o,s,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!r.isEqual(he.min())){let h=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.ns=i,o))}function jR(t,e,n){let r=Ee(),i=Ee();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Mn();return n.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:s,ls:i}})}function g4(t,e){let n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lc(t,e){let n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new sc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function cc(t,e,n){return k(this,null,function*(){let r=te(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Qo(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Yg(t,e,n){let r=te(t),i=he.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let g=te(l),w=g.rs.get(h);return w!==void 0?V.resolve(g.ns.get(w)):g.Qr.getTargetData(u,h)}(r,s,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:he.min(),n?o:Ee())).next(a=>($R(r,eR(e),a),{documents:a,hs:o})))}function BR(t,e){let n=te(t),r=te(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function UR(t,e){let n=te(t),r=n.ss.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,PM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($R(n,e,i),i))}function $R(t,e,n){let r=t.ss.get(e)||he.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function m4(t,e,n,r){return k(this,null,function*(){let i=te(t),o=Ee(),s=Mn();for(let u of n){let h=e.Ps(u.metadata.name);u.document&&(o=o.add(h));let g=e.Is(u);g.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(h,g)}let a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield lc(i,function(h){return En(vc(Ue.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>jR(u,a,s).next(h=>(a.apply(u),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Qr.addMatchingKeys(u,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.cs,h.ls)).next(()=>h.cs)))})}function v4(r,i){return k(this,arguments,function*(t,e,n=Ee()){let o=yield lc(t,En(Ib(e.bundledQuery))),s=te(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=At(e.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(Ht.EMPTY_BYTE_STRING,l);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function yM(t,e){return`firestore_clients_${t}_${e}`}function wM(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function g0(t,e){return`firestore_targets_${t}_${e}`}var Zg=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new G(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Tt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hd=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new G(r.error.code,r.error.message))),o?new t(e,r.state,i):(Tt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Xg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Eb();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=VM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Tt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},AE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Tt("SharedClientState",`Failed to parse online state: ${e}`),null)}},xd=class{constructor(){this.activeTargetIds=Eb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fd=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new st(ye),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=yM(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new xd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return k(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(yM(this.persistenceKey,r));if(i){let o=Xg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(g0(this.persistenceKey,e));if(r){let i=hd.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(g0(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return K("SharedClientState","READ",e,n),n}setItem(e,n){K("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){K("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(K("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>k(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Vn.oe;if(o!=null)try{let a=JSON.parse(o);de(typeof a=="number"),s=a}catch(a){Tt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Vn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Zg(this.currentUser,e,n,r),o=wM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=wM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=g0(this.persistenceKey,e),o=new hd(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Xg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Zg.Es(new Pt(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return hd.Es(i,n)}xs(e){return AE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return k(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);K("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Eb();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Jg=class{constructor(){this.no=new xd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new xd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var xE=class{io(e){}shutdown(){}};var em=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mg=null;function m0(){return mg===null?mg=function(){return 268435456+Math.round(2147483648*Math.random())}():mg++,"0x"+mg.toString(16)}var y4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ME=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var an="WebChannelConnection",RE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=m0(),l=this.vo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,o,s),this.Mo(n,l,u,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw tr("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=y4[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=m0();return new Promise((s,a)=>{let l=new a0;l.setWithCredentials(!0),l.listenOnce(c0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nd.NO_ERROR:let h=l.getResponseJson();K(an,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nd.TIMEOUT:K(an,`RPC '${e}' ${o} timed out`),a(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:let g=l.getStatus();if(K(an,`RPC '${e}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let A=function(P){let W=P.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(W)>=0?W:B.UNKNOWN}(E.status);a(new G(A,E.message))}else a(new G(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(B.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{K(an,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);K(an,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}Oo(e,n,r){let i=m0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=h0(),a=d0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new l0({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;let h=o.join("");K(an,`Creating RPC '${e}' stream ${i}: ${h}`,l);let g=s.createWebChannel(h,l),w=!1,E=!1,A=new ME({lo:P=>{E?K(an,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(w||(K(an,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),K(an,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},ho:()=>g.close()}),O=(P,W,Z)=>{P.listen(W,H=>{try{Z(H)}catch(X){setTimeout(()=>{throw X},0)}})};return O(g,jl.EventType.OPEN,()=>{E||(K(an,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),O(g,jl.EventType.CLOSE,()=>{E||(E=!0,K(an,`RPC '${e}' stream ${i} transport closed`),A.po())}),O(g,jl.EventType.ERROR,P=>{E||(E=!0,tr(an,`RPC '${e}' stream ${i} transport errored:`,P),A.po(new G(B.UNAVAILABLE,"The operation could not be completed")))}),O(g,jl.EventType.MESSAGE,P=>{var W;if(!E){let Z=P.data[0];de(!!Z);let H=Z,X=H.error||((W=H[0])===null||W===void 0?void 0:W.error);if(X){K(an,`RPC '${e}' stream ${i} received error:`,X);let ce=X.status,ae=function(D){let M=Rt[D];if(M!==void 0)return gR(M)}(ce),S=X.message;ae===void 0&&(ae=B.INTERNAL,S="Unknown error status: "+ce+" with message "+X.message),E=!0,A.po(new G(ae,S)),g.close()}else K(an,`RPC '${e}' stream ${i} received:`,Z),A.yo(Z)}}),O(a,u0.STAT_EVENT,P=>{P.stat===hg.PROXY?K(an,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===hg.NOPROXY&&K(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function qR(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}function Bd(t){return new K0(t,!0)}var Md=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var tm=class{constructor(e,n,r,i,o,s,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Md(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return k(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return k(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return k(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Tt(n.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new G(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>k(this,null,function*(){this.state=0,this.start()}))}c_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},NE=class extends tm{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=n4(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?At(s.readTime):he.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Z0(this.serializer),n.addTarget=function(o,s){let a,l=s.target;if(a=Ng(l)?{documents:IR(o,l)}:{query:CR(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=vR(o,s.resumeToken);let u=Q0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=oc(o,s.snapshotVersion.toTimestamp());let u=Q0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=i4(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Z0(this.serializer),n.removeTarget=e,this.i_(n)}},PE=class extends tm{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=r4(e.writeResults,e.commitTime),r=At(e.commitTime);return this.listener.A_(r,n)}return de(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Z0(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Td(this.serializer,r))};this.i_(n)}};var kE=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Y0(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Y0(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},OE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tt(n),this.y_=!1):K("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var FE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>k(this,null,function*(){Yo(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(l){return k(this,null,function*(){let u=te(l);u.M_.add(4),yield yc(u),u.N_.set("Unknown"),u.M_.delete(4),yield Ud(u)})}(this))}))}),this.N_=new OE(r,i)}};function Ud(t){return k(this,null,function*(){if(Yo(t))for(let e of t.x_)yield e(!0)})}function yc(t){return k(this,null,function*(){for(let e of t.x_)yield e(!1)})}function _m(t,e){let n=te(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ab(n)?Sb(n):_c(n).Xo()&&Tb(n,e))}function uc(t,e){let n=te(t),r=_c(n);n.F_.delete(e),r.Xo()&&HR(n,e),n.F_.size===0&&(r.Xo()?r.n_():Yo(n)&&n.N_.set("Unknown"))}function Tb(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_c(t).P_(e)}function HR(t,e){t.L_.xe(e),_c(t).I_(e)}function Sb(t){t.L_=new W0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_c(t).start(),t.N_.w_()}function Ab(t){return Yo(t)&&!_c(t).Zo()&&t.F_.size>0}function Yo(t){return te(t).M_.size===0}function zR(t){t.L_=void 0}function w4(t){return k(this,null,function*(){t.N_.set("Online")})}function _4(t){return k(this,null,function*(){t.F_.forEach((e,n)=>{Tb(t,e)})})}function E4(t,e){return k(this,null,function*(){zR(t),Ab(t)?(t.N_.D_(e),Sb(t)):t.N_.set("Unknown")})}function b4(t,e,n){return k(this,null,function*(){if(t.N_.set("Online"),e instanceof Fg&&e.state===2&&e.cause)try{yield function(i,o){return k(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nm(t,r)}else if(e instanceof Xl?t.L_.Ke(e):e instanceof Og?t.L_.He(e):t.L_.We(e),!n.isEqual(he.min()))try{let r=yield LR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.F_.get(u);h&&o.F_.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.F_.get(l);if(!h)return;o.F_.set(l,h.withResumeToken(Ht.EMPTY_BYTE_STRING,h.snapshotVersion)),HR(o,l);let g=new sc(h.target,l,u,h.sequenceNumber);Tb(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield nm(t,r)}})}function nm(t,e,n){return k(this,null,function*(){if(!Qo(e))throw e;t.M_.add(1),yield yc(t),t.N_.set("Offline"),n||(n=()=>LR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>k(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Ud(t)}))})}function GR(t,e){return e().catch(n=>nm(t,n,e))}function wc(t){return k(this,null,function*(){let e=te(t),n=Wo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;I4(e);)try{let i=yield g4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,C4(e,i)}catch(i){yield nm(e,i)}WR(e)&&KR(e)})}function I4(t){return Yo(t)&&t.v_.length<10}function C4(t,e){t.v_.push(e);let n=Wo(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function WR(t){return Yo(t)&&!Wo(t).Zo()&&t.v_.length>0}function KR(t){Wo(t).start()}function D4(t){return k(this,null,function*(){Wo(t).V_()})}function T4(t){return k(this,null,function*(){let e=Wo(t);for(let n of t.v_)e.d_(n.mutations)})}function S4(t,e,n){return k(this,null,function*(){let r=t.v_.shift(),i=H0.from(r,e,n);yield GR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield wc(t)})}function A4(t,e){return k(this,null,function*(){e&&Wo(t).E_&&(yield function(r,i){return k(this,null,function*(){if(function(s){return pR(s)&&s!==B.ABORTED}(i.code)){let o=r.v_.shift();Wo(r).t_(),yield GR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield wc(r)}})}(t,e)),WR(t)&&KR(t)})}function _M(t,e){return k(this,null,function*(){let n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=Yo(n);n.M_.add(3),yield yc(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Ud(n)})}function VE(t,e){return k(this,null,function*(){let n=te(t);e?(n.M_.delete(2),yield Ud(n)):e||(n.M_.add(2),yield yc(n),n.N_.set("Unknown"))})}function _c(t){return t.B_||(t.B_=function(n,r,i){let o=te(n);return o.f_(),new NE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:w4.bind(null,t),To:_4.bind(null,t),Ao:E4.bind(null,t),h_:b4.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.B_.t_(),Ab(t)?Sb(t):t.N_.set("Unknown")):(yield t.B_.stop(),zR(t))}))),t.B_}function Wo(t){return t.k_||(t.k_=function(n,r,i){let o=te(n);return o.f_(),new PE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:D4.bind(null,t),Ao:A4.bind(null,t),R_:T4.bind(null,t),A_:S4.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.k_.t_(),yield wc(t)):(yield t.k_.stop(),t.v_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var LE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ec(t,e){if(Tt("AsyncQueue",`${e}: ${t}`),Qo(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}var rm=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ad(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var im=class{constructor(){this.q_=new st(ee.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ie():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},dc=class t{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,rm.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var jE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},BE=class{constructor(){this.queries=new ri(e=>JM(e),Ld),this.onlineState="Unknown",this.z_=new Set}};function xb(t,e){return k(this,null,function*(){let n=te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new jE,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Ec(s,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&Rb(n)})}function Mb(t,e){return k(this,null,function*(){let n=te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function x4(t,e){let n=te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&Rb(n)}function M4(t,e,n){let r=te(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function Rb(t){t.z_.forEach(e=>{e.next()})}var UE,EM;(EM=UE||(UE={})).J_="default",EM.Cache="cache";var Rd=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==UE.Cache}};var $E=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var om=class{constructor(e){this.serializer=e}Ps(e){return Jr(this.serializer,e)}Is(e){return e.metadata.exists?bR(this.serializer,e.document,!1):Ot.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return At(e)}},qE=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=Ue.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new om(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Ee()).add(o);n.set(s,a)}}return n}complete(){return k(this,null,function*(){let e=yield m4(this.localStore,new om(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield v4(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function QR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var sm=class{constructor(e){this.key=e}},am=class{constructor(e){this.key=e}},lm=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ee(),this.mutatedKeys=Ee(),this.Ia=tR(e),this.Ta=new rm(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new im,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let w=i.get(h),E=jd(this.query,g)?g:null,A=!!w&&this.mutatedKeys.has(w.key),O=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),P=!1;w&&E?w.data.isEqual(E.data)?A!==O&&(r.track({type:3,doc:E}),P=!0):this.Ra(w,E)||(r.track({type:2,doc:E}),P=!0,(l&&this.Ia(E,l)>0||u&&this.Ia(E,u)<0)&&(a=!0)):!w&&E?(r.track({type:0,doc:E}),P=!0):w&&!E&&(r.track({type:1,doc:w}),P=!0,(l||u)&&(a=!0)),P&&(E?(s=s.add(E),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((h,g)=>function(E,A){let O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return O(E)-O(A)}(h.type,g.type)||this.Ia(h.doc,g.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,u=l!==this.ha;return this.ha=l,s.length!==0||u?{snapshot:new dc(this.query,e.Ta,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new im,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ee(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new am(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new sm(r))}),n}pa(e){this.la=e.hs,this.Pa=Ee();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return dc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},HE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},zE=class{constructor(e){this.key=e,this.wa=!1}},GE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new ri(a=>JM(a),Ld),this.Da=new Map,this.Ca=new Set,this.va=new st(ee.comparator),this.Fa=new Map,this.Ma=new Ad,this.xa={},this.Oa=new Map,this.Na=ac.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function R4(t,e,n=!0){return k(this,null,function*(){let r=Em(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield YR(r,e,n,!0),i})}function N4(t,e){return k(this,null,function*(){let n=Em(t);yield YR(n,e,!0,!1)})}function YR(t,e,n,r){return k(this,null,function*(){let i=yield lc(t.localStore,En(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Nb(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&_m(t.remoteStore,i),a})}function Nb(t,e,n,r,i){return k(this,null,function*(){t.Ba=(g,w,E)=>function(O,P,W,Z){return k(this,null,function*(){let H=P.view.da(W);H.Xi&&(H=yield Yg(O.localStore,P.query,!1).then(({documents:S})=>P.view.da(S,H)));let X=Z&&Z.targetChanges.get(P.targetId),ce=Z&&Z.targetMismatches.get(P.targetId)!=null,ae=P.view.applyChanges(H,O.isPrimaryClient,X,ce);return WE(O,P.targetId,ae.fa),ae.snapshot})}(t,g,w,E);let o=yield Yg(t.localStore,e,!0),s=new lm(e,o.hs),a=s.da(o.documents),l=Cd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);WE(t,n,u.fa);let h=new HE(e,n,s);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function P4(t,e,n){return k(this,null,function*(){let r=te(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Ld(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uc(r.remoteStore,i.targetId),hc(r,i.targetId)}).catch(Ko))):(hc(r,i.targetId),yield cc(r.localStore,i.targetId,!0))})}function k4(t,e){return k(this,null,function*(){let n=te(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uc(n.remoteStore,r.targetId))})}function O4(t,e,n){return k(this,null,function*(){let r=Fb(t);try{let i=yield function(s,a){let l=te(s),u=mt.now(),h=a.reduce((E,A)=>E.add(A.key),Ee()),g,w;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=Mn(),O=Ee();return l.os.getEntries(E,h).next(P=>{A=P,A.forEach((W,Z)=>{Z.isValidDocument()||(O=O.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,A)).next(P=>{g=P;let W=[];for(let Z of a){let H=Q$(Z,g.get(Z.key).overlayedDocument);H!=null&&W.push(new br(Z.key,H,GM(H.value.mapValue),It.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,W,a)}).next(P=>{w=P;let W=P.applyToLocalDocumentSet(g,O);return l.documentOverlayCache.saveOverlays(E,P.batchId,W)})}).then(()=>({batchId:w.batchId,changes:rR(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.xa[s.currentUser.toKey()];u||(u=new st(ye)),u=u.insert(a,l),s.xa[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Wi(r,i.changes),yield wc(r.remoteStore)}catch(i){let o=Ec(i,"Failed to persist write");n.reject(o)}})}function ZR(t,e){return k(this,null,function*(){let n=te(t);try{let r=yield p4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?de(s.wa):i.removedDocuments.size>0&&(de(s.wa),s.wa=!1))}),yield Wi(n,r,e)}catch(r){yield Ko(r)}})}function bM(t,e,n){let r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=te(s);l.onlineState=a;let u=!1;l.queries.forEach((h,g)=>{for(let w of g.U_)w.j_(a)&&(u=!0)}),u&&Rb(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F4(t,e,n){return k(this,null,function*(){let r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new st(ee.comparator);s=s.insert(o,Ot.newNoDocument(o,he.min()));let a=Ee().add(o),l=new Id(he.min(),new Map,new st(ye),s,a);yield ZR(r,l),r.va=r.va.remove(o),r.Fa.delete(e),Ob(r)}else yield cc(r.localStore,e,!1).then(()=>hc(r,e,n)).catch(Ko)})}function V4(t,e){return k(this,null,function*(){let n=te(t),r=e.batch.batchId;try{let i=yield f4(n.localStore,e);kb(n,r,null),Pb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Wi(n,i)}catch(i){yield Ko(i)}})}function L4(t,e,n){return k(this,null,function*(){let r=te(t);try{let i=yield function(s,a){let l=te(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(de(g!==null),h=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);kb(r,e,n),Pb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Wi(r,i)}catch(i){yield Ko(i)}})}function j4(t,e){return k(this,null,function*(){let n=te(t);Yo(n.remoteStore)||K("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=te(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Ec(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Pb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function kb(t,e,n){let r=te(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function hc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||XR(t,r)})}function XR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(uc(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Ob(t))}function WE(t,e,n){for(let r of n)r instanceof sm?(t.Ma.addReference(r.key,e),B4(t,r)):r instanceof am?(K("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||XR(t,r.key)):ie()}function B4(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(K("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Ob(t))}function Ob(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new ee(Ue.fromString(e)),r=t.Na.next();t.Fa.set(r,new zE(n)),t.va=t.va.insert(n,r),_m(t.remoteStore,new sc(En(vc(n.path)),r,"TargetPurposeLimboResolution",Vn.oe))}}function Wi(t,e,n){return k(this,null,function*(){let r=te(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{s.push(r.Ba(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient){let h=u&&!u.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);let h=DE.Ki(l.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(l,u){return k(this,null,function*(){let h=te(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>V.forEach(u,w=>V.forEach(w.qi,E=>h.persistence.referenceDelegate.addReference(g,w.targetId,E)).next(()=>V.forEach(w.Qi,E=>h.persistence.referenceDelegate.removeReference(g,w.targetId,E)))))}catch(g){if(!Qo(g))throw g;K("LocalStore","Failed to update sequence numbers: "+g)}for(let g of u){let w=g.targetId;if(!g.fromCache){let E=h.ns.get(w),A=E.snapshotVersion,O=E.withLastLimboFreeSnapshotVersion(A);h.ns=h.ns.insert(w,O)}}})}(r.localStore,o))})}function U4(t,e){return k(this,null,function*(){let n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield VR(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(l=>{l.reject(new G(B.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wi(n,r.us)}})}function $4(t,e){let n=te(t),r=n.Fa.get(e);if(r&&r.wa)return Ee().add(r.key);{let i=Ee(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function q4(t,e){return k(this,null,function*(){let n=te(t),r=yield Yg(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&WE(n,e.targetId,i.fa),i})}function H4(t,e){return k(this,null,function*(){let n=te(t);return UR(n.localStore,e).then(r=>Wi(n,r))})}function z4(t,e,n,r){return k(this,null,function*(){let i=te(t),o=yield function(a,l){let u=te(a),h=te(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.vn(g,l).next(w=>w?u.localDocuments.getDocuments(g,w):V.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield wc(i.remoteStore):n==="acknowledged"||n==="rejected"?(kb(i,e,r||null),Pb(i,e),function(a,l){te(te(a).mutationQueue).Mn(l)}(i.localStore,e)):ie(),yield Wi(i,o)):K("SyncEngine","Cannot apply mutation batch with id: "+e)})}function G4(t,e){return k(this,null,function*(){let n=te(t);if(Em(n),Fb(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield IM(n,r.toArray());n.La=!0,yield VE(n.remoteStore,!0);for(let o of i)_m(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(hc(n,s),cc(n.localStore,s,!0))),uc(n.remoteStore,s)}),yield i,yield IM(n,r),function(s){let a=te(s);a.Fa.forEach((l,u)=>{uc(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new st(ee.comparator)}(n),n.La=!1,yield VE(n.remoteStore,!1)}})}function IM(t,e,n){return k(this,null,function*(){let r=te(t),i=[],o=[];for(let s of e){let a,l=r.Da.get(s);if(l&&l.length!==0){a=yield lc(r.localStore,En(l[0]));for(let u of l){let h=r.ba.get(u),g=yield q4(r,h);g.snapshot&&o.push(g.snapshot)}}else{let u=yield BR(r.localStore,s);a=yield lc(r.localStore,u),yield Nb(r,JR(u),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function JR(t){return XM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function W4(t){return function(n){return te(te(n).persistence).Bi()}(te(t).localStore)}function K4(t,e,n,r){return k(this,null,function*(){let i=te(t);if(i.La)return void K("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield UR(i.localStore,eR(o[0])),a=Id.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ht.EMPTY_BYTE_STRING);yield Wi(i,s,a);break}case"rejected":yield cc(i.localStore,e,!0),hc(i,e,r);break;default:ie()}})}function Q4(t,e,n){return k(this,null,function*(){let r=Em(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){K("SyncEngine","Adding an already active target "+i);continue}let o=yield BR(r.localStore,i),s=yield lc(r.localStore,o);yield Nb(r,JR(o),s.targetId,!1,s.resumeToken),_m(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield cc(r.localStore,i,!1).then(()=>{uc(r.remoteStore,i),hc(r,i)}).catch(Ko))}})}function Em(t){let e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F4.bind(null,e),e.Sa.h_=x4.bind(null,e.eventManager),e.Sa.ka=M4.bind(null,e.eventManager),e}function Fb(t){let e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L4.bind(null,e),e}function Y4(t,e,n){let r=te(t);(function(o,s,a){return k(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(E,A){let O=te(E),P=At(A.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",W=>O.$r.getBundleMetadata(W,A.id)).then(W=>!!W&&W.createTime.compareTo(P)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(QR(l));let u=new qE(l,o.localStore,s.serializer),h=yield s.qa();for(;h;){let w=yield u._a(h);w&&a._updateProgress(w),h=yield s.qa()}let g=yield u.complete();return yield Wi(o,g.ca,void 0),yield function(E,A){let O=te(E);return O.persistence.runTransaction("Save bundle","readwrite",P=>O.$r.saveBundleMetadata(P,A))}(o.localStore,l),a._completeWith(g.progress),Promise.resolve(g.ua)}catch(l){return tr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Nd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return FR(this.persistence,new Qg,e.initialUser,this.serializer)}createPersistence(e){return new Wg(Kg.Hr,this.serializer)}createSharedClientState(e){return new Jg}terminate(){return k(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cm=class t extends Nd{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){yield hv(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield Fb(this.Qa.syncEngine),yield wc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return FR(this.persistence,new Qg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new uE(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new A0(n,this.persistence);return new S0(e.asyncQueue,r)}createPersistence(e){let n=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new CE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qR(),Eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jg}},KE=class t extends cm{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return k(this,null,function*(){yield hv(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof fd&&(this.sharedClientState.syncEngine={Zs:z4.bind(null,n),Xs:K4.bind(null,n),eo:Q4.bind(null,n),Bi:W4.bind(null,n),Ys:H4.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>k(this,null,function*(){yield G4(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=qR();if(!fd.D(n))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fd(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Pd=class{initialize(e,n){return k(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),yield VE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new BE}()}createDatastore(e){let n=Bd(e.databaseInfo.databaseId),r=function(o){return new RE(o)}(e.databaseInfo);return function(o,s,a,l){return new kE(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new FE(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bM(this.syncEngine,n,0),function(){return em.D()?new em:new xE}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,h){let g=new GE(i,o,s,a,l,u);return h&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return k(this,null,function*(){var e;yield function(r){return k(this,null,function*(){let i=te(r);K("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield yc(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function CM(t,e=10240){let n=0;return{read(){return k(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return k(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var fc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var QE=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new kt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return k(this,null,function*(){return this.metadata.promise})}qa(){return k(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return k(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new $E(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return k(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return k(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return k(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var YE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return k(this,null,function*(){let s=te(i),a={documents:o.map(g=>Dd(s.serializer,g))},l=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Ue.emptyPath(),a,o.length),u=new Map;l.forEach(g=>{let w=t4(s.serializer,g);u.set(w.key.toString(),w)});let h=[];return o.forEach(g=>{let w=u.get(g.toString());de(!!w),h.push(w)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Go(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=ee.fromPath(r);this.mutations.push(new _d(i,this.precondition(i)))}),yield function(r,i){return k(this,null,function*(){let o=te(r),s={writes:i.map(a=>Td(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Ue.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=he.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new G(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(he.min())?It.exists(!1):It.updateTime(n):It.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(he.min()))throw new G(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(n)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ZE=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new Md(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>k(this,null,function*(){let e=new YE(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Fd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pR(n)}return!1}};var XE=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=Cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>k(this,null,function*(){K("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ec(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function bg(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>k(this,null,function*(){r.isEqual(i)||(yield VR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function JE(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Vb(t);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_M(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_M(e.remoteStore,i)),t._onlineComponents=e})}function e1(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Vb(t){return k(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!e1(n))throw n;tr("Error using user provided cache. Falling back to memory cache: "+n),yield bg(t,new Nd)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield bg(t,new Nd);return t._offlineComponents})}function bm(t){return k(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield JE(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield JE(t,new Pd))),t._onlineComponents})}function t1(t){return Vb(t).then(e=>e.persistence)}function Lb(t){return Vb(t).then(e=>e.localStore)}function n1(t){return bm(t).then(e=>e.remoteStore)}function jb(t){return bm(t).then(e=>e.syncEngine)}function Z4(t){return bm(t).then(e=>e.datastore)}function pc(t){return k(this,null,function*(){let e=yield bm(t),n=e.eventManager;return n.onListen=R4.bind(null,e.syncEngine),n.onUnlisten=P4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k4.bind(null,e.syncEngine),n})}function X4(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield t1(t),n=yield n1(t);return e.setNetworkEnabled(!0),function(i){let o=te(i);return o.M_.delete(0),Ud(o)}(n)}))}function J4(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield t1(t),n=yield n1(t);return e.setNetworkEnabled(!1),function(i){return k(this,null,function*(){let o=te(i);o.M_.add(0),yield yc(o),o.N_.set("Offline")})}(n)}))}function e5(t,e){let n=new kt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield function(u,h){let g=te(u);return g.persistence.runTransaction("read document","readonly",w=>g.localDocuments.getDocument(w,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Ec(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield Lb(t),e,n)})),n.promise}function r1(t,e,n={}){let r=new kt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,l,u){let h=new fc({next:w=>{s.enqueueAndForget(()=>Mb(o,g));let E=w.docs.has(a);!E&&w.fromCache?u.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&l&&l.source==="server"?u.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(w)},error:w=>u.reject(w)}),g=new Rd(vc(a.path),h,{includeMetadataChanges:!0,ra:!0});return xb(o,g)}(yield pc(t),t.asyncQueue,e,n,r)})),r.promise}function t5(t,e){let n=new kt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield Yg(i,o,!0),l=new lm(o,a.hs),u=l.da(a.documents),h=l.applyChanges(u,!1);s.resolve(h.snapshot)}catch(a){let l=Ec(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield Lb(t),e,n)})),n.promise}function i1(t,e,n={}){let r=new kt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,l,u){let h=new fc({next:w=>{s.enqueueAndForget(()=>Mb(o,g)),w.fromCache&&l.source==="server"?u.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(w)},error:w=>u.reject(w)}),g=new Rd(a,h,{includeMetadataChanges:!0,ra:!0});return xb(o,g)}(yield pc(t),t.asyncQueue,e,n,r)})),r.promise}function n5(t,e){let n=new fc(e);return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){te(i).z_.add(o),o.next()}(yield pc(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){te(i).z_.delete(o)}(yield pc(t),n)}))}}function r5(t,e,n,r){let i=function(s,a){let l;return l=typeof s=="string"?mR().encode(s):s,function(h,g){return new QE(h,g)}(function(h,g){if(h instanceof Uint8Array)return CM(h,g);if(h instanceof ArrayBuffer)return CM(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Bd(e));t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){Y4(yield jb(t),i,r)}))}function i5(t,e){return t.asyncQueue.enqueue(()=>k(this,null,function*(){return function(r,i){let o=te(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Lb(t),e)}))}function o1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var DM=new Map;function Bb(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ub(t,e,n,r){if(e===!0&&r===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TM(t){if(!ee.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SM(t){if(ee.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function $e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Im(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function s1(t,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var um=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ub("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ca=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new v0;switch(r.type){case"firstParty":return new E0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=DM.get(n);r&&(K("ComponentProvider","Removing Datastore"),DM.delete(n),r.terminate())}(this),Promise.resolve()}};function a1(t,e,n,r={}){var i;let o=(t=$e(t,ca))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pt.MOCK_USER;else{a=Hh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(u)}t._authCredentials=new y0(new Ig(a,l))}}var Zt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ei=class t extends Zt{constructor(e,n,r){super(e,n,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new ee(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function $b(t,e,...n){if(t=He(t),Bb("collection","path",e),t instanceof ca){let r=Ue.fromString(e,...n);return SM(r),new ei(t,null,r)}{if(!(t instanceof nt||t instanceof ei))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return SM(r),new ei(t.firestore,null,r)}}function l1(t,e){if(t=$e(t,ca),Bb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(t,null,function(r){return new Er(Ue.emptyPath(),r)}(e))}function $d(t,e,...n){if(t=He(t),arguments.length===1&&(e=Cg.newId()),Bb("doc","path",e),t instanceof ca){let r=Ue.fromString(e,...n);return TM(r),new nt(t,null,new ee(r))}{if(!(t instanceof nt||t instanceof ei))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return TM(r),new nt(t.firestore,t instanceof ei?t.converter:null,new ee(r))}}function qb(t,e){return t=He(t),e=He(e),(t instanceof nt||t instanceof ei)&&(e instanceof nt||e instanceof ei)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Hb(t,e){return t=He(t),e=He(e),t instanceof Zt&&e instanceof Zt&&t.firestore===e.firestore&&Ld(t._query,e._query)&&t.converter===e.converter}var eb=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Md(this,"async_queue_retry"),this.hu=()=>{let n=Eg();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Eg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new kt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return k(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Qo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Tt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=LE.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&ie()}verifyOperationInProgress(){}du(){return k(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function tb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var nb=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new kt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var c1=-1,ht=class extends ca{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new eb}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||u1(this),this._firestoreClient.terminate()}};function Ut(t){return t._firestoreClient||u1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function u1(t){var e,n,r;let i=t._freezeSettings(),o=function(a,l,u,h){return new x0(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,o1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new XE(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function d1(t,e){_1(t=$e(t,ht));let n=Ut(t);if(n._uninitializedComponentsProvider)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Pd;return f1(n,i,new cm(i,r.cacheSizeBytes,e?.forceOwnership))}function h1(t){_1(t=$e(t,ht));let e=Ut(t);if(e._uninitializedComponentsProvider)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");tr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Pd;return f1(e,r,new KE(r,n.cacheSizeBytes))}function f1(t,e,n){let r=new kt;return t.asyncQueue.enqueue(()=>k(this,null,function*(){try{yield bg(t,n),yield JE(t,e),r.resolve()}catch(i){let o=i;if(!e1(o))throw o;tr("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function p1(t){if(t._initialized&&!t._terminated)throw new G(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new kt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{yield function(r){return k(this,null,function*(){if(!jo.D())return Promise.resolve();let i=r+"main";yield jo.delete(i)})}(Db(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function g1(t){return function(n){let r=new kt;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return j4(yield jb(n),r)})),r.promise}(Ut(t=$e(t,ht)))}function m1(t){return X4(Ut(t=$e(t,ht)))}function v1(t){return J4(Ut(t=$e(t,ht)))}function y1(t,e){let n=Ut(t=$e(t,ht)),r=new nb;return r5(n,t._databaseId,e,r),r}function w1(t,e){return i5(Ut(t=$e(t,ht)),e).then(n=>n?new Zt(t,null,n.query):null)}function _1(t){if(t._initialized||t._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ii=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ht.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zi=class{constructor(e){this._methodName=e}};var ua=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var o5=/^__.*__$/,rb=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new br(e,this.data,this.fieldMask,n,this.fieldTransforms):new zo(e,this.data,n,this.fieldTransforms)}},dm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new br(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function E1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var hm=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return fm(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(E1(this.fu)&&o5.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},ib=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bd(e)}Fu(e,n,r,i=!1){return new hm({fu:e,methodName:n,vu:r,path:St.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function pa(t){let e=t._freezeSettings(),n=Bd(t._databaseId);return new ib(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cm(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);Wb("Data must be an object, but it was:",s,r);let a=C1(r,s),l,u;if(o.merge)l=new Ln(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let w=cb(e,g,n);if(!s.contains(w))throw new G(B.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);T1(h,w)||h.push(w)}l=new Ln(h),u=s.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=s.fieldTransforms;return new rb(new ln(a),l,u)}var kd=class t extends zi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function b1(t,e,n){return new hm({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var ob=class t extends zi{_toFieldTransform(e){return new sa(e.path,new qo)}isEqual(e){return e instanceof t}},sb=class t extends zi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=b1(this,e,!0),r=this.Mu.map(o=>ga(o,n)),i=new qi(r);return new sa(e.path,i)}isEqual(e){return e instanceof t&&gv(this.Mu,e.Mu)}},ab=class t extends zi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=b1(this,e,!0),r=this.Mu.map(o=>ga(o,n)),i=new Hi(r);return new sa(e.path,i)}isEqual(e){return e instanceof t&&gv(this.Mu,e.Mu)}},lb=class t extends zi{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Ho(e.serializer,aR(e.serializer,this.xu));return new sa(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function zb(t,e,n,r){let i=t.Fu(1,e,n);Wb("Data must be an object, but it was:",i,r);let o=[],s=ln.empty();fa(r,(l,u)=>{let h=Kb(e,l,n);u=He(u);let g=i.Su(h);if(u instanceof kd)o.push(h);else{let w=ga(u,g);w!=null&&(o.push(h),s.set(h,w))}});let a=new Ln(o);return new dm(s,a,i.fieldTransforms)}function Gb(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[cb(e,r,n)],l=[i];if(o.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(cb(e,o[w])),l.push(o[w+1]);let u=[],h=ln.empty();for(let w=a.length-1;w>=0;--w)if(!T1(u,a[w])){let E=a[w],A=l[w];A=He(A);let O=s.Su(E);if(A instanceof kd)u.push(E);else{let P=ga(A,O);P!=null&&(u.push(E),h.set(E,P))}}let g=new Ln(u);return new dm(h,g,s.fieldTransforms)}function I1(t,e,n,r=!1){return ga(n,t.Fu(r?4:3,e))}function ga(t,e){if(D1(t=He(t)))return Wb("Unsupported field value:",e,t),C1(t,e);if(t instanceof zi)return function(r,i){if(!E1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=ga(a,i.bu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=mt.fromDate(r);return{timestampValue:oc(i.serializer,o)}}if(r instanceof mt){let o=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(i.serializer,o)}}if(r instanceof ua)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ii)return{bytesValue:vR(i.serializer,r._byteString)};if(r instanceof nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Im(r)}`)}(t,e)}function C1(t,e){let n={};return qM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(t,(r,i)=>{let o=ga(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function D1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof ua||t instanceof ii||t instanceof nt||t instanceof zi)}function Wb(t,e,n){if(!D1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Im(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function cb(t,e,n){if((e=He(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return Kb(t,e);throw fm("Field path arguments must be of type string or ",t,!1,void 0,n)}var s5=new RegExp("[~\\*/\\[\\]]");function Kb(t,e,n){if(e.search(s5)>=0)throw fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ir(...e.split("."))._internalPath}catch{throw fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fm(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(B.INVALID_ARGUMENT,a+t+l)}function T1(t,e){return t.some(n=>n.isEqual(e))}var da=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ub(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Dm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ub=class extends da{data(){return super.data()}};function Dm(t,e){return typeof e=="string"?Kb(t,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}function S1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Od=class{},ha=class extends Od{};function Ki(t,e,...n){let r=[];e instanceof Od&&r.push(e),r=r.concat(n),function(o){let s=o.filter(l=>l instanceof db).length,a=o.filter(l=>l instanceof pm).length;if(s>1||s>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var pm=class t extends ha{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return V1(e._query,n),new Zt(e.firestore,e.converter,$0(e._query,n))}_parse(e){let n=pa(e.firestore);return function(o,s,a,l,u,h,g){let w;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xM(g,h);let E=[];for(let A of g)E.push(AM(l,o,A));w={arrayValue:{values:E}}}else w=AM(l,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xM(g,h),w=I1(a,s,g,h==="in"||h==="not-in");return Fe.create(u,h,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function A1(t,e,n){let r=e,i=Dm("where",t);return pm._create(i,r,n)}var db=class t extends Od{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ze.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)V1(s,l),s=$0(s,l)}(e._query,n),new Zt(e.firestore,e.converter,$0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hb=class t extends ha{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ia(o,s)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Er(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function x1(t,e="asc"){let n=e,r=Dm("orderBy",t);return hb._create(r,n)}var gm=class t extends ha{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Zt(e.firestore,e.converter,kg(e._query,this._limit,this._limitType))}};function M1(t){return s1("limit",t),gm._create("limit",t,"F")}function R1(t){return s1("limitToLast",t),gm._create("limitToLast",t,"L")}var mm=class t extends ha{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=F1(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,o){return new Er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function N1(...t){return mm._create("startAt",t,!0)}function P1(...t){return mm._create("startAfter",t,!1)}var vm=class t extends ha{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=F1(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,o){return new Er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function k1(...t){return vm._create("endBefore",t,!1)}function O1(...t){return vm._create("endAt",t,!0)}function F1(t,e,n,r){if(n[0]=He(n[0]),n[0]instanceof da)return function(o,s,a,l,u){if(!l)throw new G(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let g of Zl(o))if(g.field.isKeyField())h.push(ra(s,l.key));else{let w=l.data.field(g.field);if(wm(w))throw new G(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=g.field.canonicalString();throw new G(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(w)}return new ni(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=pa(t.firestore);return function(s,a,l,u,h,g){let w=s.explicitOrderBy;if(h.length>w.length)throw new G(B.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let A=0;A<h.length;A++){let O=h[A];if(w[A].field.isKeyField()){if(typeof O!="string")throw new G(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof O}`);if(!_b(s)&&O.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${O}' contains a slash.`);let P=s.path.child(Ue.fromString(O));if(!ee.isDocumentKey(P))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);let W=new ee(P);E.push(ra(a,W))}else{let P=I1(l,u,O);E.push(P)}}return new ni(E,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function AM(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_b(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ue.fromString(n));if(!ee.isDocumentKey(r))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ra(t,new ee(r))}if(n instanceof nt)return ra(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Im(n)}.`)}function xM(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V1(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var gc=class{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return fa(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ua(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=yb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vd(e));default:return null}}convertTimestamp(e){let n=$i(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ue.fromString(e);de(AR(r));let i=new Uo(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(n)||Tt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Tm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var fb=class extends gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};var Ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rr=class extends da{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Vo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Vo=class extends rr{data(e={}){return super.data(e)}},Cr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ui(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vo(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Vo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Vo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:a5(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function a5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function Qb(t,e){return t instanceof rr&&e instanceof rr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Cr&&e instanceof Cr&&t._firestore===e._firestore&&Hb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function L1(t){t=$e(t,nt);let e=$e(t.firestore,ht);return r1(Ut(e),t._key).then(n=>Jb(e,t,n))}var Gi=class extends gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};function j1(t){t=$e(t,nt);let e=$e(t.firestore,ht),n=Ut(e),r=new Gi(e);return e5(n,t._key).then(i=>new rr(e,r,t._key,i,new Ui(i!==null&&i.hasLocalMutations,!0),t.converter))}function B1(t){t=$e(t,nt);let e=$e(t.firestore,ht);return r1(Ut(e),t._key,{source:"server"}).then(n=>Jb(e,t,n))}function U1(t){t=$e(t,Zt);let e=$e(t.firestore,ht),n=Ut(e),r=new Gi(e);return S1(t._query),i1(n,t._query).then(i=>new Cr(e,r,t,i))}function $1(t){t=$e(t,Zt);let e=$e(t.firestore,ht),n=Ut(e),r=new Gi(e);return t5(n,t._query).then(i=>new Cr(e,r,t,i))}function q1(t){t=$e(t,Zt);let e=$e(t.firestore,ht),n=Ut(e),r=new Gi(e);return i1(n,t._query,{source:"server"}).then(i=>new Cr(e,r,t,i))}function Yb(t,e,n){t=$e(t,nt);let r=$e(t.firestore,ht),i=Tm(t.converter,e,n);return bc(r,[Cm(pa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,It.none())])}function Zb(t,e,n,...r){t=$e(t,nt);let i=$e(t.firestore,ht),o=pa(i),s;return s=typeof(e=He(e))=="string"||e instanceof Ir?Gb(o,"updateDoc",t._key,e,n,r):zb(o,"updateDoc",t._key,e),bc(i,[s.toMutation(t._key,It.exists(!0))])}function H1(t){return bc($e(t.firestore,ht),[new Go(t._key,It.none())])}function z1(t,e){let n=$e(t.firestore,ht),r=$d(t),i=Tm(t.converter,e);return bc(n,[Cm(pa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,It.exists(!1))]).then(()=>r)}function Xb(t,...e){var n,r,i;t=He(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||tb(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(tb(e[s])){let g=e[s];e[s]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[s+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let l,u,h;if(t instanceof nt)u=$e(t.firestore,ht),h=vc(t._key.path),l={next:g=>{e[s]&&e[s](Jb(u,t,g))},error:e[s+1],complete:e[s+2]};else{let g=$e(t,Zt);u=$e(g.firestore,ht),h=g._query;let w=new Gi(u);l={next:E=>{e[s]&&e[s](new Cr(u,w,g,E))},error:e[s+1],complete:e[s+2]},S1(t._query)}return function(w,E,A,O){let P=new fc(O),W=new Rd(E,P,A);return w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return xb(yield pc(w),W)})),()=>{P.$a(),w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return Mb(yield pc(w),W)}))}}(Ut(u),h,a,l)}function G1(t,e){return n5(Ut(t=$e(t,ht)),tb(e)?e:{next:e})}function bc(t,e){return function(r,i){let o=new kt;return r.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return O4(yield jb(r),i,o)})),o.promise}(Ut(t),e)}function Jb(t,e,n){let r=n.docs.get(e._key),i=new Gi(t);return new rr(t,i,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}var l5={maxAttempts:5};var ym=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pa(e)}set(e,n,r){this._verifyNotCommitted();let i=Oo(e,this._firestore),o=Tm(i.converter,n,r),s=Cm(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,It.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Oo(e,this._firestore),s;return s=typeof(n=He(n))=="string"||n instanceof Ir?Gb(this._dataReader,"WriteBatch.update",o._key,n,r,i):zb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Oo(e,this._firestore);return this._mutations=this._mutations.concat(new Go(n._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oo(t,e){if((t=He(t)).firestore!==e)throw new G(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pb=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=pa(n)}get(n){let r=Oo(n,this._firestore),i=new fb(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ie();let s=o[0];if(s.isFoundDocument())return new da(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new da(this._firestore,i,r._key,null,r.converter);throw ie()})}set(n,r,i){let o=Oo(n,this._firestore),s=Tm(o.converter,r,i),a=Cm(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Oo(n,this._firestore),a;return a=typeof(r=He(r))=="string"||r instanceof Ir?Gb(this._dataReader,"Transaction.update",s._key,r,i,o):zb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Oo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Oo(e,this._firestore),r=new Gi(this._firestore);return super.get(e).then(i=>new rr(this._firestore,r,n._key,i._document,new Ui(!1,!1),n.converter))}};function W1(t,e,n){t=$e(t,ht);let r=Object.assign(Object.assign({},l5),n);return function(o){if(o.maxAttempts<1)throw new G(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let l=new kt;return o.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){let u=yield Z4(o);new ZE(o.asyncQueue,u,a,s,l).Xa()})),l.promise}(Ut(t),i=>e(new pb(t,i)),r)}function K1(){return new kd("deleteField")}function Q1(){return new ob("serverTimestamp")}function Y1(...t){return new sb("arrayUnion",t)}function Z1(...t){return new ab("arrayRemove",t)}function X1(t){return new lb("increment",t)}(function(e,n=!0){(function(i){mc=i})(Kh),ms(new ur("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ht(new w0(r.getProvider("auth-internal")),new I0(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dr(Mx,"4.6.3",e),dr(Mx,"4.6.3","esm2017")})();var c5="@firebase/firestore-compat",u5="0.3.32";function oI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function J1(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function eN(){if(!HM())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sm=class t{constructor(e){this._delegate=e}static fromBase64String(e){return eN(),new t(ii.fromBase64String(e))}static fromUint8Array(e){return J1(),new t(ii.fromUint8Array(e))}toBase64(){return eN(),this._delegate.toBase64()}toUint8Array(){return J1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eI(t){return d5(t,["next","error","complete"])}function d5(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var tI=class{enableIndexedDbPersistence(e,n){return d1(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return h1(e._delegate)}clearIndexedDbPersistence(e){return p1(e._delegate)}},Am=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Uo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&tr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){a1(this._delegate,e,n,r)}enableNetwork(){return m1(this._delegate)}disableNetwork(){return v1(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ub("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return g1(this._delegate)}onSnapshotsInSync(e){return G1(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dc(this,$b(this._delegate,e))}catch(n){throw bn(n,"collection()","Firestore.collection()")}}doc(e){try{return new oi(this,$d(this._delegate,e))}catch(n){throw bn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wa(this,l1(this._delegate,e))}catch(n){throw bn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return W1(this._delegate,n=>e(new xm(this,n)))}batch(){return Ut(this._delegate),new Mm(new ym(this._delegate,e=>bc(this._delegate,e)))}loadBundle(e){return y1(this._delegate,e)}namedQuery(e){return w1(this._delegate,e).then(n=>n?new wa(this,n):null)}},Ic=class extends gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sm(new ii(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return oi.forKey(n,this.firestore,null)}};function h5(t){MM(t)}var xm=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ic(e)}get(e){let n=ma(e);return this._delegate.get(n).then(r=>new va(this._firestore,new rr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ma(e);return r?(oI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ma(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ma(e);return this._delegate.delete(n),this}},Mm=class{constructor(e){this._delegate=e}set(e,n,r){let i=ma(e);return r?(oI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ma(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ma(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Cc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Vo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ya(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Ic(e),n),i.set(n,o)),o}};Cc.INSTANCES=new WeakMap;var oi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ic(e)}static forPath(e,n,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new nt(n._delegate,r,new ee(e)))}static forKey(e,n,r){return new t(n,new nt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dc(this.firestore,$b(this._delegate,e))}catch(n){throw bn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=He(e),e instanceof nt?qb(this._delegate,e):!1}set(e,n){n=oI("DocumentReference.set",n);try{return n?Yb(this._delegate,e,n):Yb(this._delegate,e)}catch(r){throw bn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Zb(this._delegate,e):Zb(this._delegate,e,n,...r)}catch(i){throw bn(i,"updateDoc()","DocumentReference.update()")}}delete(){return H1(this._delegate)}onSnapshot(...e){let n=tN(e),r=nN(e,i=>new va(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Xb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=j1(this._delegate):e?.source==="server"?n=B1(this._delegate):n=L1(this._delegate),n.then(r=>new va(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function bn(t,e,n){return t.message=t.message.replace(e,n),t}function tN(t){for(let e of t)if(typeof e=="object"&&!eI(e))return e;return{}}function nN(t,e){var n,r;let i;return eI(t[0])?i=t[0]:eI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var va=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new oi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Qb(this._delegate,e._delegate)}},ya=class extends va{data(e){let n=this._delegate.data(e);return this._delegate._converter||RM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},wa=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ic(e)}where(e,n,r){try{return new t(this.firestore,Ki(this._delegate,A1(e,n,r)))}catch(i){throw bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Ki(this._delegate,x1(e,n)))}catch(r){throw bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Ki(this._delegate,M1(e)))}catch(n){throw bn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Ki(this._delegate,R1(e)))}catch(n){throw bn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Ki(this._delegate,N1(...e)))}catch(n){throw bn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Ki(this._delegate,P1(...e)))}catch(n){throw bn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Ki(this._delegate,k1(...e)))}catch(n){throw bn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Ki(this._delegate,O1(...e)))}catch(n){throw bn(n,"endAt()","Query.endAt()")}}isEqual(e){return Hb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=$1(this._delegate):e?.source==="server"?n=q1(this._delegate):n=U1(this._delegate),n.then(r=>new qd(this.firestore,new Cr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=tN(e),r=nN(e,i=>new qd(this.firestore,new Cr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Xb(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},nI=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ya(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},qd=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new wa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ya(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new nI(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ya(this._firestore,r))})}isEqual(e){return Qb(this._delegate,e._delegate)}},Dc=class t extends wa{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new oi(this.firestore,e):null}doc(e){try{return e===void 0?new oi(this.firestore,$d(this._delegate)):new oi(this.firestore,$d(this._delegate,e))}catch(n){throw bn(n,"doc()","CollectionReference.doc()")}}add(e){return z1(this._delegate,e).then(n=>new oi(this.firestore,n))}isEqual(e){return qb(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Cc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ma(t){return $e(t,nt)}var rI=class t{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new t(St.keyField().canonicalString())}isEqual(e){return e=He(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var iI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Q1();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=K1();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Y1(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Z1(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=X1(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var f5={Firestore:Am,GeoPoint:ua,Timestamp:mt,Blob:Sm,Transaction:xm,WriteBatch:Mm,DocumentReference:oi,DocumentSnapshot:va,Query:wa,QueryDocumentSnapshot:ya,QuerySnapshot:qd,CollectionReference:Dc,FieldPath:rI,FieldValue:iI,setLogLevel:h5,CACHE_SIZE_UNLIMITED:c1};function p5(t,e){t.INTERNAL.registerComponent(new ur("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f5)))}function g5(t){p5(t,(e,n)=>new Am(e,n,new tI)),t.registerVersion(c5,u5)}g5(qt);function m5(t,e=_s){return new Te(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function rN(t,e){return m5(t,e)}function v5(t,e){return rN(t,e).pipe(bs(void 0),ru(),fe(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function lI(t,e){return rN(t,e).pipe(fe(n=>({payload:n,type:"query"})))}var Rm=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=lN(r,n);return new Pm(i,o,this.afs)}snapshotChanges(){return v5(this.ref,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return this.snapshotChanges().pipe(fe(({payload:n})=>e.idField?Ve(J({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Pe(this.ref.get(e)).pipe(Yt)}};function Nm(t,e){return lI(t,e).pipe(bs(void 0),ru(),fe(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{let u=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function iN(t,e,n){return Nm(t,n).pipe(Es((r,i)=>y5(r,i.map(o=>o.payload),e),[]),$v(),fe(r=>r.map(i=>({type:i.type,payload:i}))))}function y5(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=w5(t,r))}),t}function sI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function w5(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return sI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return sI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sI(t,e.oldIndex,1);break}return t}function oN(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Pm=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Nm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(fe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(bs(void 0),ru(),on(([r,i])=>i.length>0||!r),fe(([,r])=>r),Yt)}auditTrail(e){return this.stateChanges(e).pipe(Es((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=oN(e);return iN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return lI(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.payload.docs.map(r=>e.idField?Ve(J({},r.data()),{[e.idField]:r.id}):r.data())),Yt)}get(e){return Pe(this.query.get(e)).pipe(Yt)}add(e){return this.ref.add(e)}doc(e){return new Rm(this.ref.doc(e),this.afs)}},aI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Nm(this.query,this.afs.schedulers.outsideAngular).pipe(Yt):Nm(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.filter(r=>e.indexOf(r.type)>-1)),on(n=>n.length>0),Yt)}auditTrail(e){return this.stateChanges(e).pipe(Es((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=oN(e);return iN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Yt)}valueChanges(e={}){return lI(this.query,this.afs.schedulers.outsideAngular).pipe(fe(r=>r.payload.docs.map(i=>e.idField?J({[e.idField]:i.id},i.data()):i.data())),Yt)}get(e){return Pe(this.query.get(e)).pipe(Yt)}},sN=new oe("angularfire2.enableFirestorePersistence"),aN=new oe("angularfire2.firestore.persistenceSettings"),_5=new oe("angularfire2.firestore.settings"),E5=new oe("angularfire2.firestore.use-emulator");function lN(t,e=n=>n){return{query:e(t),ref:t}}var Hd=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,l,u,h,g,w,E,A,O,P,W,Z){this.schedulers=l;let H=Ws(n,a,r),X=h;g&&o0(H,a,w,A,O,P,E,W),[this.firestore,this.persistenceEnabled$]=Ll(`${H.name}.firestore`,"AngularFirestore",H.name,()=>{let ce=a.runOutsideAngular(()=>H.firestore());if(o&&ce.settings(o),X&&ce.useEmulator(...X),i&&!Ls(s)){let ae=()=>{try{return Pe(ce.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),pe(!1)}};return[ce,a.runOutsideAngular(ae)]}else return[ce,pe(!1)]},[o,X,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=lN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Pm(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new aI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Rm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(Q(xo),Q(Mo,8),Q(sN,8),Q(_5,8),Q(An),Q(qe),Q(Vl),Q(aN,8),Q(E5,8),Q(td,8),Q(J_,8),Q(e0,8),Q(t0,8),Q(n0,8),Q(r0,8),Q(i0,8),Q(Li,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),cN=(()=>{class t{constructor(){qt.registerVersion("angularfire",So.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:sN,useValue:!0},{provide:aN,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Kt({type:t});static \u0275inj=Wt({providers:[Hd]})}return t})();var wN="firebasestorage.googleapis.com",_N="storageBucket",b5=2*60*1e3,I5=10*60*1e3,C5=1e3;var vt=class t extends Gh{constructor(e,n,r=0){super(cI(e),`Firebase Storage: ${n} (${cI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ft=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ft||{});function cI(t){return"storage/"+t}function vI(){let t="An unknown error occurred, please check the error payload for server response.";return new vt(ft.UNKNOWN,t)}function D5(t){return new vt(ft.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function T5(t){return new vt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S5(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(ft.UNAUTHENTICATED,t)}function A5(){return new vt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function x5(t){return new vt(ft.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function EN(){return new vt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bN(){return new vt(ft.CANCELED,"User canceled the upload/download.")}function M5(t){return new vt(ft.INVALID_URL,"Invalid URL '"+t+"'.")}function R5(t){return new vt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function N5(){return new vt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_N+"' property when initializing the app?")}function IN(){return new vt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function P5(){return new vt(ft.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function k5(){return new vt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function O5(t){return new vt(ft.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _a(t){return new vt(ft.INVALID_ARGUMENT,t)}function CN(){return new vt(ft.APP_DELETED,"The Firebase app was deleted.")}function yI(t){return new vt(ft.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gd(t,e){return new vt(ft.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zd(t){throw new vt(ft.INTERNAL_ERROR,"Internal error: "+t)}var In=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw R5(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function u(X){X.path_=decodeURIComponent(X.path)}let h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${h}/b/${i}/o${w}`,"i"),A={bucket:1,path:3},O=n===wN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",W=new RegExp(`^https?://${O}/${i}/${P}`,"i"),H=[{regex:a,indices:l,postModify:o},{regex:E,indices:A,postModify:u},{regex:W,indices:{bucket:1,path:2},postModify:u}];for(let X=0;X<H.length;X++){let ce=H[X],ae=ce.regex.exec(e);if(ae){let S=ae[ce.indices.bucket],b=ae[ce.indices.path];b||(b=""),r=new t(S,b),ce.postModify(r);break}}if(r==null)throw M5(e);return r}},dI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function F5(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function g(P){i=setTimeout(()=>{i=null,t(E,l())},P)}function w(){o&&clearTimeout(o)}function E(P,...W){if(u){w();return}if(P){w(),h.call(null,P,...W);return}if(l()||s){w(),h.call(null,P,...W);return}r<64&&(r*=2);let H;a===1?(a=2,H=0):H=(r+Math.random())*1e3,g(H)}let A=!1;function O(P){A||(A=!0,w(),!u&&(i!==null?(P||(a=2),clearTimeout(i),g(0)):P||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,O(!0)},n),O}function V5(t){t(!1)}function L5(t){return t!==void 0}function j5(t){return typeof t=="function"}function B5(t){return typeof t=="object"&&!Array.isArray(t)}function Fm(t){return typeof t=="string"||t instanceof String}function dN(t){return wI()&&t instanceof Blob}function wI(){return typeof Blob<"u"}function hI(t,e,n,r){if(r<e)throw _a(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _a(`Invalid value for '${t}'. Expected ${n} or less.`)}function Zo(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function DN(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ac=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Ac||{});function TN(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var fI=class{constructor(e,n,r,i,o,s,a,l,u,h,g,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,A)=>{this.resolve_=E,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Sc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Ac.NO_ERROR,l=o.getStatus();if(!a||TN(l,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Ac.ABORT;r(!1,new Sc(!1,null,h));return}let u=this.successCodes_.indexOf(l)!==-1;r(!0,new Sc(u,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());L5(l)?o(l):o()}catch(l){s(l)}else if(a!==null){let l=vI();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){let l=this.appDelete_?CN():bN();s(l)}else{let l=EN();s(l)}};this.canceled_?n(!1,new Sc(!1,null,!0)):this.backoffId_=F5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&V5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Sc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function U5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function q5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function H5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function z5(t,e,n,r,i,o,s=!0){let a=DN(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return q5(u,e),U5(u,n),$5(u,o),H5(u,r),new fI(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function G5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function W5(...t){let e=G5();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(wI())return new Blob(t);throw new vt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function K5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Q5(t){if(typeof atob>"u")throw O5("base-64");return atob(t)}var jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Wd=class{constructor(e,n){this.data=e,this.contentType=n||null}};function _I(t,e){switch(t){case jn.RAW:return new Wd(SN(e));case jn.BASE64:case jn.BASE64URL:return new Wd(AN(t,e));case jn.DATA_URL:return new Wd(Z5(e),X5(e))}throw vI()}function SN(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Y5(t){let e;try{e=decodeURIComponent(t)}catch{throw Gd(jn.DATA_URL,"Malformed data URL.")}return SN(e)}function AN(t,e){switch(t){case jn.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Gd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jn.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Gd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Q5(e)}catch(i){throw i.message.includes("polyfill")?i:Gd(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Om=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gd(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=J5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Z5(t){let e=new Om(t);return e.base64?AN(jn.BASE64,e.rest):Y5(e.rest)}function X5(t){return new Om(t).contentType}function J5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var xc=class t{constructor(e,n){let r=0,i="";dN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(dN(this.data_)){let r=this.data_,i=K5(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(wI()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(W5.apply(null,n))}else{let n=e.map(s=>Fm(s)?_I(jn.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function EI(t){let e;try{e=JSON.parse(t)}catch{return null}return B5(e)?e:null}function eq(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tq(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function xN(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function nq(t,e){return e}var Xt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||nq}},km=null;function rq(t){return!Fm(t)||t.length<2?t:xN(t)}function Vm(){if(km)return km;let t=[];t.push(new Xt("bucket")),t.push(new Xt("generation")),t.push(new Xt("metageneration")),t.push(new Xt("name","fullPath",!0));function e(o,s){return rq(s)}let n=new Xt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Xt("size");return i.xform=r,t.push(i),t.push(new Xt("timeCreated")),t.push(new Xt("updated")),t.push(new Xt("md5Hash",null,!0)),t.push(new Xt("cacheControl",null,!0)),t.push(new Xt("contentDisposition",null,!0)),t.push(new Xt("contentEncoding",null,!0)),t.push(new Xt("contentLanguage",null,!0)),t.push(new Xt("contentType",null,!0)),t.push(new Xt("metadata","customMetadata",!0)),km=t,km}function iq(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new In(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function oq(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return iq(r,t),r}function MN(t,e,n){let r=EI(e);return r===null?null:oq(t,r,n)}function sq(t,e,n,r){let i=EI(e);if(i===null||!Fm(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=t.bucket,g=t.fullPath,w="/b/"+s(h)+"/o/"+s(g),E=Zo(w,n,r),A=DN({alt:"media",token:u});return E+A})[0]}function bI(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var hN="prefixes",fN="items";function aq(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[hN])for(let i of n[hN]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new In(e,o));r.prefixes.push(s)}if(n[fN])for(let i of n[fN]){let o=t._makeStorageReference(new In(e,i.name));r.items.push(o)}return r}function lq(t,e,n){let r=EI(n);return r===null?null:aq(t,e,r)}var Dr=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function ai(t){if(!t)throw vI()}function Lm(t,e){function n(r,i){let o=MN(t,i,e);return ai(o!==null),o}return n}function cq(t,e){function n(r,i){let o=lq(t,e,i);return ai(o!==null),o}return n}function uq(t,e){function n(r,i){let o=MN(t,i,e);return ai(o!==null),sq(o,i,t.host,t._protocol)}return n}function Nc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=A5():i=S5():n.getStatus()===402?i=T5(t.bucket):n.getStatus()===403?i=x5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function jm(t){let e=Nc(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=D5(t.path)),o.serverResponse=i.serverResponse,o}return n}function RN(t,e,n){let r=e.fullServerUrl(),i=Zo(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Dr(i,o,Lm(t,n),s);return a.errorHandler=jm(e),a}function dq(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=Zo(s,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new Dr(a,l,cq(t,e.bucket),u);return h.urlParams=o,h.errorHandler=Nc(e),h}function hq(t,e,n){let r=e.fullServerUrl(),i=Zo(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Dr(i,o,uq(t,n),s);return a.errorHandler=jm(e),a}function fq(t,e,n,r){let i=e.fullServerUrl(),o=Zo(i,t.host,t._protocol),s="PATCH",a=bI(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new Dr(o,s,Lm(t,r),u);return h.headers=l,h.body=a,h.errorHandler=jm(e),h}function pq(t,e){let n=e.fullServerUrl(),r=Zo(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(l,u){}let a=new Dr(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=jm(e),a}function gq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function NN(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=gq(null,e)),r}function mq(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let H="";for(let X=0;X<2;X++)H=H+Math.random().toString().slice(2);return H}let l=a();s["Content-Type"]="multipart/related; boundary="+l;let u=NN(e,r,i),h=bI(u,n),g="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,w=`\r
--`+l+"--",E=xc.getBlob(g,r,w);if(E===null)throw IN();let A={name:u.fullPath},O=Zo(o,t.host,t._protocol),P="POST",W=t.maxUploadRetryTime,Z=new Dr(O,P,Lm(t,n),W);return Z.urlParams=A,Z.headers=s,Z.body=E.uploadData(),Z.errorHandler=Nc(e),Z}var Mc=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function II(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ai(!1)}return ai(!!n&&(e||["active"]).indexOf(n)!==-1),n}function vq(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=NN(e,r,i),a={name:s.fullPath},l=Zo(o,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},g=bI(s,n),w=t.maxUploadRetryTime;function E(O){II(O);let P;try{P=O.getResponseHeader("X-Goog-Upload-URL")}catch{ai(!1)}return ai(Fm(P)),P}let A=new Dr(l,u,E,w);return A.urlParams=a,A.headers=h,A.body=g,A.errorHandler=Nc(e),A}function yq(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(u){let h=II(u,["active","final"]),g=null;try{g=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ai(!1)}g||ai(!1);let w=Number(g);return ai(!isNaN(w)),new Mc(w,r.size(),h==="final")}let s="POST",a=t.maxUploadRetryTime,l=new Dr(n,s,o,a);return l.headers=i,l.errorHandler=Nc(e),l}var pN=256*1024;function wq(t,e,n,r,i,o,s,a){let l=new Mc(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw P5();let u=l.total-l.current,h=u;i>0&&(h=Math.min(h,i));let g=l.current,w=g+h,E="";h===0?E="finalize":u===h?E="upload, finalize":E="upload";let A={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${l.current}`},O=r.slice(g,w);if(O===null)throw IN();function P(X,ce){let ae=II(X,["active","final"]),S=l.current+h,b=r.size(),D;return ae==="final"?D=Lm(e,o)(X,ce):D=null,new Mc(S,b,ae==="final",D)}let W="POST",Z=e.maxUploadRetryTime,H=new Dr(n,W,P,Z);return H.headers=A,H.body=O.uploadData(),H.progressCallback=a||null,H.errorHandler=Nc(t),H}var PN={STATE_CHANGED:"state_changed"},cn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uI(t){switch(t){case"running":case"pausing":case"canceling":return cn.RUNNING;case"paused":return cn.PAUSED;case"success":return cn.SUCCESS;case"canceled":return cn.CANCELED;case"error":return cn.ERROR;default:return cn.ERROR}}var pI=class{constructor(e,n,r){if(j5(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Tc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var gN=null,gI=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ac.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ac.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ac.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw zd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},mI=class extends gI{initXhr(){this.xhr_.responseType="text"}};function si(){return gN?gN():new mI}var Kd=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Vm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ft.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(TN(i.status,[]))if(o)i=EN();else{this.sleepTime=Math.max(this.sleepTime*2,C5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ft.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=vq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,si,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=yq(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,si,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=pN*this._chunkMultiplier,n=new Mc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=wq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(s,si,i,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){pN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=RN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,si,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=mq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,si,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=uI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new pI(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(uI(this._state)){case cn.SUCCESS:Tc(this._resolve.bind(null,this.snapshot))();break;case cn.CANCELED:case cn.ERROR:let n=this._reject;Tc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(uI(this._state)){case cn.RUNNING:case cn.PAUSED:e.next&&Tc(e.next.bind(e,this.snapshot))();break;case cn.SUCCESS:e.complete&&Tc(e.complete.bind(e))();break;case cn.CANCELED:case cn.ERROR:e.error&&Tc(e.error.bind(e,this._error))();break;default:e.error&&Tc(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Rc=class t{constructor(e,n){this._service=e,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new In(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xN(this._location.path)}get storage(){return this._service}get parent(){let e=eq(this._location.path);if(e===null)return null;let n=new In(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yI(e)}};function _q(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Kd(t,new xc(e),n)}function Eq(t){let e={prefixes:[],items:[]};return kN(t,e).then(()=>e)}function kN(t,e,n){return k(this,null,function*(){let i=yield ON(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield kN(t,e,i.nextPageToken))})}function ON(t,e){e!=null&&typeof e.maxResults=="number"&&hI("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=dq(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,si)}function bq(t){t._throwIfRoot("getMetadata");let e=RN(t.storage,t._location,Vm());return t.storage.makeRequestWithTokens(e,si)}function Iq(t,e){t._throwIfRoot("updateMetadata");let n=fq(t.storage,t._location,e,Vm());return t.storage.makeRequestWithTokens(n,si)}function Cq(t){t._throwIfRoot("getDownloadURL");let e=hq(t.storage,t._location,Vm());return t.storage.makeRequestWithTokens(e,si).then(n=>{if(n===null)throw k5();return n})}function Dq(t){t._throwIfRoot("deleteObject");let e=pq(t.storage,t._location);return t.storage.makeRequestWithTokens(e,si)}function FN(t,e){let n=tq(t._location.path,e),r=new In(t._location.bucket,n);return new Rc(t.storage,r)}function Tq(t){return/^[A-Za-z]+:\/\//.test(t)}function Sq(t,e){return new Rc(t,e)}function VN(t,e){if(t instanceof Qd){let n=t;if(n._bucket==null)throw N5();let r=new Rc(n,n._bucket);return e!=null?VN(r,e):r}else return e!==void 0?FN(t,e):t}function Aq(t,e){if(e&&Tq(e)){if(t instanceof Qd)return Sq(t,e);throw _a("To use ref(service, url), the first argument must be a Storage instance.")}else return VN(t,e)}function mN(t,e){let n=e?.[_N];return n==null?null:In.makeFromBucketSpec(n,t)}function xq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Hh(i,t.app.options.projectId))}var Qd=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=wN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=b5,this._maxUploadRetryTime=I5,this._requests=new Set,i!=null?this._bucket=In.makeFromBucketSpec(i,this._host):this._bucket=mN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,e):this._bucket=mN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return k(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return k(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new dI(CN());{let s=z5(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return k(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},vN="@firebase/storage",yN="0.12.5";var Mq="storage";function LN(t,e,n){return t=He(t),_q(t,e,n)}function jN(t){return t=He(t),bq(t)}function BN(t,e){return t=He(t),Iq(t,e)}function UN(t,e){return t=He(t),ON(t,e)}function $N(t){return t=He(t),Eq(t)}function qN(t){return t=He(t),Cq(t)}function HN(t){return t=He(t),Dq(t)}function CI(t,e){return t=He(t),Aq(t,e)}function zN(t,e){return FN(t,e)}function GN(t,e,n,r={}){xq(t,e,n,r)}function Rq(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Qd(n,r,i,e,Kh)}function Nq(){ms(new ur(Mq,Rq,"PUBLIC").setMultipleInstances(!0)),dr(vN,yN,""),dr(vN,yN,"esm2017")}Nq();var Pc=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Bm=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Pc(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Pc(s,this,this._ref)):o={next:n.next?s=>n.next(new Pc(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},Um=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ea(e,this._service))}get items(){return this._delegate.items.map(e=>new Ea(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Ea=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=zN(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Bm(LN(this._delegate,e,n),this)}putString(e,n=jn.RAW,r){this._throwIfRoot("putString");let i=_I(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Bm(new Kd(this._delegate,new xc(i.data,!0),o),this)}listAll(){return $N(this._delegate).then(e=>new Um(e,this.storage))}list(e){return UN(this._delegate,e||void 0).then(n=>new Um(n,this.storage))}getMetadata(){return jN(this._delegate)}updateMetadata(e){return BN(this._delegate,e)}getDownloadURL(){return qN(this._delegate)}delete(){return this._throwIfRoot("delete"),HN(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw yI(e)}};var $m=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WN(e))throw _a("ref() expected a child path but got a URL, use refFromURL instead.");return new Ea(CI(this._delegate,e),this)}refFromURL(e){if(!WN(e))throw _a("refFromURL() expected a full URL but got a child path, use ref() instead.");try{In.makeFromUrl(e,this._delegate.host)}catch{throw _a("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ea(CI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){GN(this._delegate,e,n,r)}};function WN(t){return/^[A-Za-z]+:\/\//.test(t)}var Pq="@firebase/storage-compat",kq="0.3.8";var Oq="storage-compat";function Fq(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new $m(n,r)}function Vq(t){let e={TaskState:cn,TaskEvent:PN,StringFormat:jn,Storage:$m,Reference:Ea};t.INTERNAL.registerComponent(new ur(Oq,Fq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Pq,kq)}Vq(qt);function Lq(t){return new Te(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(Bv(0))}function KN(t){let e=Lq(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(fe(n=>n.bytesTransferred/n.totalBytes*100))}}function qm(t){return{getDownloadURL:()=>pe(void 0).pipe(H_,ct(()=>t.getDownloadURL()),Yt),getMetadata:()=>pe(void 0).pipe(H_,ct(()=>t.getMetadata()),Yt),delete:()=>Pe(t.delete()),child:e=>qm(t.child(e)),updateMetadata:e=>Pe(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return KN(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return KN(i)},list:e=>Pe(t.list(e)),listAll:()=>Pe(t.listAll())}}var jq=new oe("angularfire2.storageBucket"),Bq=new oe("angularfire2.storage.maxUploadRetryTime"),Uq=new oe("angularfire2.storage.maxOperationRetryTime"),$q=new oe("angularfire2.storage.use-emulator"),QN=(()=>{class t{storage;constructor(n,r,i,o,s,a,l,u,h,g){let w=Ws(n,s,r);this.storage=Ll(`${w.name}.storage.${i}`,"AngularFireStorage",w.name,()=>{let E=s.runOutsideAngular(()=>w.storage(i||void 0)),A=h;return A&&E.useEmulator(...A),l&&E.setMaxUploadRetryTime(l),u&&E.setMaxOperationRetryTime(u),E},[l,u])}ref(n){return qm(this.storage.ref(n))}refFromURL(n){return qm(this.storage.refFromURL(n))}upload(n,r,i){let o=this.storage.ref(n);return qm(o).put(r,i)}static \u0275fac=function(r){return new(r||t)(Q(xo),Q(Mo,8),Q(jq,8),Q(An),Q(qe),Q(Vl),Q(Bq,8),Q(Uq,8),Q($q,8),Q(Li,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var ir=(()=>{let e=class e{constructor(r,i,o,s){this.afAuth=r,this.afs=i,this.afStorage=o,this.router=s,this.usuarioLogueado=null,this.esAdmin=!1,this.esEspecialista=!1,this.esPaciente=!1,this.uid="",this.usuariosChanged=new rt,this.mailSinConfirmar="",this.isLoading=!1}guardarPaciente(r,i){return k(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r.mail,i);if(o&&o.user){let s=yield this.uploadFileAndGetUrl(r.foto1,o.user.uid,"foto1"),a=yield this.uploadFileAndGetUrl(r.foto2,o.user.uid,"foto2");return yield this.afs.collection("pacientes").doc(o.user.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",obraSocial:r.obraSocial||"",mail:r.mail||"",foto1:s||"",foto2:a||""}),o.user.uid}else throw new Error("No se pudo crear el usuario")}catch(o){throw console.error("Error al guardar el paciente en Firestore:",o),o}})}guardarEspecialista(r,i){return k(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r.mail,i);if(o&&o.user){let s=yield this.uploadFileAndGetUrl(r.foto1,o.user.uid,"foto1");return yield this.afs.collection("especialistas").doc(o.user.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",especialidad:r.especialidad||"",mail:r.mail||"",foto1:s||"",habilitado:!1}),o.user.uid}else throw new Error("No se pudo crear el usuario")}catch(o){throw console.error("Error al guardar el especialista en Firestore:",o),o}})}guardarAdmin(r,i){return k(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r.mail,i);if(o&&o.user){let s=yield this.uploadFileAndGetUrl(r.foto1,o.user.uid,"foto1");return yield this.afs.collection("administradores").doc(o.user.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",mail:r.mail||"",foto1:s||""}),o.user.uid}else throw new Error("No se pudo crear el usuario")}catch(o){throw console.error("Error al guardar el admin en Firestore:",o),o}})}login(r,i){return k(this,null,function*(){try{yield this.afAuth.signInWithEmailAndPassword(r,i),this.router.navigate(["/"])}catch(o){throw console.error("Error al iniciar sesi\xF3n:",o),o}})}logout(){return k(this,null,function*(){try{yield this.afAuth.signOut(),this.router.navigate(["/login"])}catch(r){throw console.error("Error al cerrar sesi\xF3n:",r),r}})}uploadFileAndGetUrl(r,i,o){return k(this,null,function*(){try{if(!r||!(r instanceof Blob))throw new Error("El archivo no es v\xE1lido");let s=this.afStorage.storage.ref(`users/${i}/${o}`);return yield s.put(r),yield s.getDownloadURL()}catch(s){throw console.error("Error al subir archivo a Firebase Storage:",s),s}})}getCurrentUser(){return this.afAuth.currentUser}getEspecialistaData(r){return k(this,null,function*(){try{let i=yield this.afs.collection("especialistas").doc(r).ref.get();return i.exists?i.data():null}catch(i){throw console.error("Error al obtener datos del especialista:",i),i}})}getAllPacientes(){return k(this,null,function*(){try{let r=yield this.afs.collection("pacientes").get().toPromise();if(!r)throw new Error('No se encontraron documentos en la colecci\xF3n "pacientes"');return r.docs.map(i=>{let o=i.data();return J({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los pacientes:",r),r}})}getAllAdmin(){return k(this,null,function*(){try{let r=yield this.afs.collection("administradores").get().toPromise();if(!r)throw new Error("No se obtuvo ning\xFAn snapshot de admin");return r.docs.map(i=>{let o=i.data();return J({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los admins:",r),r}})}getAllEspecialistas(){return k(this,null,function*(){try{let r=yield this.afs.collection("especialistas").get().toPromise();if(!r)throw new Error("No se obtuvo ning\xFAn snapshot de especialistas");return r.docs.map(i=>{let o=i.data();return J({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los especialistas:",r),r}})}toggleHabilitadoEspecialista(r,i){return k(this,null,function*(){try{yield this.afs.collection("especialistas").doc(r).update({habilitado:i})}catch(o){throw console.error("Error al cambiar la habilitaci\xF3n del especialista:",o),o}})}};e.\u0275fac=function(i){return new(i||e)(Q(td),Q(Hd),Q(QN),Q(sn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Hq(t,e){t&1&&(x(0,"div"),L(1,"Correo electr\xF3nico es requerido."),T())}function zq(t,e){t&1&&(x(0,"div"),L(1,"Correo electr\xF3nico no v\xE1lido."),T())}function Gq(t,e){if(t&1&&(x(0,"div"),le(1,Hq,2,0,"div",5)(2,zq,2,0,"div",5),T()),t&2){let n,r,i=ze();q(),z("ngIf",(n=i.loginForm.get("email"))==null?null:n.hasError("required")),q(),z("ngIf",(r=i.loginForm.get("email"))==null?null:r.hasError("email"))}}function Wq(t,e){t&1&&(x(0,"div"),L(1,"Contrase\xF1a es requerida."),T())}function Kq(t,e){if(t&1&&(x(0,"div"),le(1,Wq,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.loginForm.get("password"))==null?null:n.hasError("required"))}}function Qq(t,e){if(t&1&&(x(0,"div",11),L(1),T()),t&2){let n=ze();q(),Eu(n.errorMessage)}}var YN=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.fb=i,this.router=o,this.errorMessage="",this.loginForm=this.fb.group({email:["",[Oe.required,Oe.email]],password:["",[Oe.required]]})}onSubmit(){return k(this,null,function*(){if(this.loginForm.valid){let{email:r,password:i}=this.loginForm.value;try{yield this.authService.login(r,i);let o=yield this.authService.getCurrentUser();if(o){let s=yield this.authService.getEspecialistaData(o.uid);if(s)if(s.habilitado===!0)ba.default.fire({position:"top-right",icon:"success",title:"Bienvenido especialista",showConfirmButton:!1,timer:1500}),this.router.navigate(["/inicio-especialista"]);else throw ba.default.fire({position:"top-left",icon:"error",title:"Todav\xEDa no ha sido verificado",showConfirmButton:!1,timer:1500}),new Error("Especialista no verificado");else ba.default.fire({position:"top-right",icon:"success",title:"Bienvenido",showConfirmButton:!1,timer:1500}),this.router.navigate(["/bienvenida"])}else ba.default.fire({position:"top-left",icon:"error",title:"Usuario no encontrado",showConfirmButton:!1,timer:1500})}catch(o){console.error("Error al iniciar sesi\xF3n:",o),o.message==="Especialista no verificado"?ba.default.fire({position:"top-left",icon:"error",title:"Especialista no verificado",text:"Por favor, espere a que su cuenta sea habilitada.",showConfirmButton:!0}):ba.default.fire({position:"top-left",icon:"error",title:"Credenciales incorrectas",showConfirmButton:!1,timer:1500})}}})}ingresoRapido(r,i){this.loginForm.patchValue({email:r,password:i})}manejarCredencialesSeleccionadas(r){this.loginForm.patchValue({email:r.email,password:r.password})}};e.\u0275fac=function(i){return new(i||e)(se(ir),se(Kr),se(sn))},e.\u0275cmp=ut({type:e,selectors:[["app-login"]],standalone:!0,features:[dt],decls:19,vars:5,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],[4,"ngIf"],["for","pass"],["type","password","id","password","name","password","formControlName","password","required",""],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[3,"credencialesSeleccionadas"],[1,"error-message"]],template:function(i,o){if(i&1&&(x(0,"body")(1,"div",0)(2,"h2"),L(3,"Iniciar Sesi\xF3n"),T(),x(4,"form",1),Ce("ngSubmit",function(){return o.onSubmit()}),x(5,"div",2)(6,"label",3),L(7,"Correo Electr\xF3nico"),T(),Ie(8,"input",4),le(9,Gq,3,2,"div",5),T(),x(10,"div",2)(11,"label",6),L(12,"Contrase\xF1a"),T(),Ie(13,"input",7),le(14,Kq,2,1,"div",5),T(),x(15,"button",8),L(16,"Iniciar Sesi\xF3n"),T(),le(17,Qq,2,1,"div",9),T()(),x(18,"app-botones-inicio",10),Ce("credencialesSeleccionadas",function(a){return o.manejarCredencialesSeleccionadas(a)}),T()()),i&2){let s,a;q(4),z("formGroup",o.loginForm),q(5),z("ngIf",((s=o.loginForm.get("email"))==null?null:s.invalid)&&(((s=o.loginForm.get("email"))==null?null:s.dirty)||((s=o.loginForm.get("email"))==null?null:s.touched))),q(5),z("ngIf",((a=o.loginForm.get("password"))==null?null:a.invalid)&&(((a=o.loginForm.get("password"))==null?null:a.dirty)||((a=o.loginForm.get("password"))==null?null:a.touched))),q(),z("disabled",o.loginForm.invalid),q(2),z("ngIf",o.errorMessage)}},dependencies:[Hr,Jn,To,Xn,Wr,Do,Vi,Qr,Oi,Fi,ag],styles:['body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:90vh;margin:0;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.login-container[_ngcontent-%COMP%]{background-color:#d1a054;width:300px;padding:20px;border-radius:8px;box-shadow:0 0 10px #2e4c6d;text-align:center}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e4c6d;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 20px);padding:10px;font-size:14px;border:1px solid #2e4c6d;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#2e4c6d;color:#d2691e;border:none;padding:10px 20px;font-size:16px;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#d2691e;color:#2e4c6d}']});let t=e;return t})();var ZN='body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune;display:flex;justify-content:center;align-items:center;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:90vh;background:none}.button1[_ngcontent-%COMP%]{width:30%;padding:150px;margin:20px;font-size:25px;text-align:center;font-family:Dune,sans-serif;color:#2e4c6d;border:none;border-radius:10px;cursor:pointer;background-image:url("./media/paciente-CAD7PT2O.jpg");background-size:cover;background-position:center}.button2[_ngcontent-%COMP%]{width:30%;padding:150px;margin:20px;font-size:25px;text-align:center;font-family:Dune,sans-serif;color:#2e4c6d;border:none;border-radius:10px;cursor:pointer;background-image:url("./media/especialista-3RG2A3G3.jpg");background-size:cover;background-position:center}',XN=(()=>{let e=class e{constructor(r,i){this.formBuilder=r,this.router=i}navegarPacientes(){this.router.navigateByUrl("/registro_pacientes")}navegarEspecialistas(){this.router.navigateByUrl("/registro_especialistas")}};e.\u0275fac=function(i){return new(i||e)(se(Kr),se(sn))},e.\u0275cmp=ut({type:e,selectors:[["app-registro"]],standalone:!0,features:[dt],decls:10,vars:0,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container"],[1,"button1",3,"click"],[1,"button2",3,"click"]],template:function(i,o){i&1&&(x(0,"html",0)(1,"head"),Ie(2,"meta",1)(3,"meta",2),T(),x(4,"body")(5,"div",3)(6,"button",4),Ce("click",function(){return o.navegarPacientes()}),L(7,"Pacientes"),T(),x(8,"button",5),Ce("click",function(){return o.navegarEspecialistas()}),L(9,"Especialistas"),T()()()())},styles:[ZN,ZN]});let t=e;return t})();var Le=class{static onlyLetters(e){let n=/^[a-zA-Z]*$/;return e.value&&!n.test(e.value)?{onlyLetters:!0}:null}static onlyNumbers(e){let n=/^[0-9]*$/;return e.value&&!n.test(e.value)?{onlyNumbers:!0}:null}static minLength(e){return n=>n.value&&n.value.length<e?{minLength:!0}:null}static maxLength(e){return n=>n.value&&n.value.length>e?{maxLength:!0}:null}};var TI=$h(Ku());function Yq(t,e){if(t&1&&(x(0,"option"),L(1),T()),t&2){let n=e.$implicit;q(),Eu(n)}}var Hm=(()=>{let e=class e{constructor(){this.especialidad="Dermat\xF3logo",this.nuevaEspecialidad="",this.especialidades=["Dermat\xF3logo","Kinesi\xF3logo","Cardi\xF3logo","Neur\xF3logo"],this.agregandoEspecialidad=!1,this.especilidadSeleccionada=new ot}mostrarInput(){this.agregandoEspecialidad=!0}agregarEspecialidad(){this.nuevaEspecialidad.trim()!=""&&this.especialidades.indexOf(this.nuevaEspecialidad)==-1&&(this.especialidades.push(this.nuevaEspecialidad),this.especialidad=this.nuevaEspecialidad,this.nuevaEspecialidad="",this.agregandoEspecialidad=!1)}cancelarAgregado(){this.agregandoEspecialidad=!1,this.nuevaEspecialidad=""}enviarEspecialidad(){this.especilidadSeleccionada.emit(this.especialidad)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-especialidades"]],outputs:{especilidadSeleccionada:"especilidadSeleccionada"},standalone:!0,features:[dt],decls:9,vars:3,consts:[[1,"login__field"],[2,"width","100%","margin-right","20px","flex","1"],[1,"login-input",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-between","align-items","center","flex","1"],["type","text","placeholder","Otra","name","otraEspecialidad",1,"login-input",2,"margin-right","20px",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1)(2,"select",2),_p("ngModelChange",function(a){return Dw(o.especialidad,a)||(o.especialidad=a),a}),Ce("ngModelChange",function(){return o.enviarEspecialidad()}),le(3,Yq,2,1,"option",3),T()(),x(4,"div",4)(5,"input",5),_p("ngModelChange",function(a){return Dw(o.nuevaEspecialidad,a)||(o.nuevaEspecialidad=a),a}),T(),x(6,"button",6),Ce("click",function(){return o.agregarEspecialidad()}),x(7,"i"),L(8,"\u2795"),T()()()()),i&2&&(q(2),wp("ngModel",o.especialidad),q(),z("ngForOf",o.especialidades),q(2),wp("ngModel",o.nuevaEspecialidad))},dependencies:[Jn,ox,ax,Xn,sg,Wr,U_,Sp],styles:[".login__field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.login-input[_ngcontent-%COMP%]{border:none;padding:10px;border:1px solid #2e4c6D;outline:none;border-radius:5px;background:none;margin-bottom:10px;width:100%}button[_ngcontent-%COMP%]{border:1px solid #2e4c6D;background-color:#2e4c6d;width:50px;height:35px;border:none;border-radius:4px;cursor:pointer;margin-bottom:10px}"]});let t=e;return t})();var kc=(()=>{let e=class e{constructor(r){this.firestore=r}};e.\u0275fac=function(i){return new(i||e)(Q(Hd))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zq(t,e){t&1&&(x(0,"div"),L(1,"Nombre es requerido."),T())}function Xq(t,e){t&1&&(x(0,"div"),L(1,"El nombre no debe contener n\xFAmeros."),T())}function Jq(t,e){t&1&&(x(0,"div"),L(1,"El nombre debe tener m\xEDnimo 3 caracteres"),T())}function eH(t,e){if(t&1&&(x(0,"div"),le(1,Zq,2,0,"div",5)(2,Xq,2,0,"div",5)(3,Jq,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function tH(t,e){t&1&&(x(0,"div"),L(1,"Apellido es requerido."),T())}function nH(t,e){t&1&&(x(0,"div"),L(1,"El apellido no debe contener n\xFAmeros."),T())}function rH(t,e){t&1&&(x(0,"div"),L(1,"El apellido debe tener m\xEDnimo 3 caracteres"),T())}function iH(t,e){if(t&1&&(x(0,"div"),le(1,tH,2,0,"div",5)(2,nH,2,0,"div",5)(3,rH,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function oH(t,e){t&1&&(x(0,"div"),L(1,"Edad es requerida."),T())}function sH(t,e){t&1&&(x(0,"div"),L(1,"La edad no debe contener letras."),T())}function aH(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function lH(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function cH(t,e){if(t&1&&(x(0,"div"),le(1,oH,2,0,"div",5)(2,sH,2,0,"div",5)(3,aH,2,0,"div",5)(4,lH,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function uH(t,e){t&1&&(x(0,"div"),L(1,"DNI es requerido."),T())}function dH(t,e){t&1&&(x(0,"div"),L(1,"El DNI no debe contener letras."),T())}function hH(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function fH(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function pH(t,e){if(t&1&&(x(0,"div"),le(1,uH,2,0,"div",5)(2,dH,2,0,"div",5)(3,hH,2,0,"div",5)(4,fH,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function gH(t,e){t&1&&(x(0,"div"),L(1,"Correo es requerido."),T())}function mH(t,e){t&1&&(x(0,"div"),L(1,"Correo no v\xE1lido."),T())}function vH(t,e){if(t&1&&(x(0,"div"),le(1,gH,2,0,"div",5)(2,mH,2,0,"div",5),T()),t&2){let n,r,i=ze();q(),z("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),q(),z("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function yH(t,e){t&1&&(x(0,"div"),L(1,"Contrase\xF1a es requerida."),T())}function wH(t,e){if(t&1&&(x(0,"div"),le(1,yH,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function _H(t,e){t&1&&(x(0,"div"),L(1,"Imagen de perfil 1 es requerida."),T())}function EH(t,e){if(t&1&&(x(0,"div"),le(1,_H,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}var zm=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImage=null,this.registerForm=this.formBuilder.group({nombre:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],apellido:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],dni:["",[Oe.required,Le.onlyNumbers,Le.maxLength(8),Le.minLength(8)]],edad:["",[Oe.required,Le.onlyNumbers,Le.maxLength(1),Le.minLength(2)]],especialidad:["",Oe.required],mail:["",[Oe.required,Oe.email]],password:["",Oe.required],foto1:["",Oe.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password;try{let o=yield this.auth.guardarEspecialista(r,i);console.log("Especialista registrado con ID: ",o),TI.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch(o){console.error("Error al registrar el especialista:",o),TI.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r){let i=r.target.files[0];i&&this.registerForm.patchValue({foto1:i})}recibirEspecialidad(r){this.registerForm.controls.especialidad.setValue(r)}};e.\u0275fac=function(i){return new(i||e)(se(Kr),se(sn),se(ir),se(kc))},e.\u0275cmp=ut({type:e,selectors:[["app-registro-especialistas"]],standalone:!0,features:[dt],decls:45,vars:8,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],[3,"especilidadSeleccionada"],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage"],["type","file","id","profileImage","name","profileImage","required","",3,"change"],["type","submit"]],template:function(i,o){if(i&1&&(x(0,"body")(1,"div",0)(2,"h2"),L(3,"Registro de especialistas"),T(),x(4,"form",1),Ce("ngSubmit",function(){return o.onSubmit()}),x(5,"div",2)(6,"label",3),L(7,"Nombre"),T(),Ie(8,"input",4),le(9,eH,4,3,"div",5),T(),x(10,"div",2)(11,"label",6),L(12,"Apellido"),T(),Ie(13,"input",7),le(14,iH,4,3,"div",5),T(),x(15,"div",2)(16,"label",8),L(17,"Edad"),T(),Ie(18,"input",9),le(19,cH,5,4,"div",5),T(),x(20,"div",2)(21,"label",10),L(22,"DNI"),T(),Ie(23,"input",11),le(24,pH,5,4,"div",5),T(),x(25,"label"),L(26,"Especialidad"),T(),x(27,"app-especialidades",12),Ce("especilidadSeleccionada",function(a){return o.recibirEspecialidad(a)}),T(),x(28,"div",2)(29,"label",13),L(30,"Correo"),T(),Ie(31,"input",14),le(32,vH,3,2,"div",5),T(),x(33,"div",2)(34,"label",15),L(35,"Contrase\xF1a"),T(),Ie(36,"input",16),le(37,wH,2,1,"div",5),T(),x(38,"div",2)(39,"label",17),L(40,"Imagen de Perfil"),T(),x(41,"input",18),Ce("change",function(a){return o.onFileChange(a)}),T(),le(42,EH,2,1,"div",5),T(),x(43,"button",19),L(44,"Registrarse"),T()()()()),i&2){let s,a,l,u,h,g,w;q(4),z("formGroup",o.registerForm),q(5),z("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),q(5),z("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),q(5),z("ngIf",((l=o.registerForm.get("edad"))==null?null:l.invalid)&&(((l=o.registerForm.get("edad"))==null?null:l.dirty)||((l=o.registerForm.get("edad"))==null?null:l.touched))),q(5),z("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),q(8),z("ngIf",((h=o.registerForm.get("mail"))==null?null:h.invalid)&&(((h=o.registerForm.get("mail"))==null?null:h.dirty)||((h=o.registerForm.get("mail"))==null?null:h.touched))),q(5),z("ngIf",((g=o.registerForm.get("password"))==null?null:g.invalid)&&(((g=o.registerForm.get("password"))==null?null:g.dirty)||((g=o.registerForm.get("password"))==null?null:g.touched))),q(5),z("ngIf",((w=o.registerForm.get("foto1"))==null?null:w.invalid)&&(((w=o.registerForm.get("foto1"))==null?null:w.dirty)||((w=o.registerForm.get("foto1"))==null?null:w.touched)))}},dependencies:[Jn,To,Xn,Gs,Wr,Do,Vi,Hr,Qr,Oi,Fi,Hm],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondoRegistro2-YAPGI55K.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}input[type=file][_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin-top:5px;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();var SI=$h(Ku());function bH(t,e){t&1&&(x(0,"div"),L(1,"Nombre es requerido."),T())}function IH(t,e){t&1&&(x(0,"div"),L(1,"El nombre no debe contener n\xFAmeros."),T())}function CH(t,e){t&1&&(x(0,"div"),L(1,"El nombre debe tener m\xEDnimo 3 caracteres"),T())}function DH(t,e){if(t&1&&(x(0,"div"),le(1,bH,2,0,"div",5)(2,IH,2,0,"div",5)(3,CH,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function TH(t,e){t&1&&(x(0,"div"),L(1,"Apellido es requerido."),T())}function SH(t,e){t&1&&(x(0,"div"),L(1,"El apellido no debe contener n\xFAmeros."),T())}function AH(t,e){t&1&&(x(0,"div"),L(1,"El apellido debe tener m\xEDnimo 3 caracteres"),T())}function xH(t,e){if(t&1&&(x(0,"div"),le(1,TH,2,0,"div",5)(2,SH,2,0,"div",5)(3,AH,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function MH(t,e){t&1&&(x(0,"div"),L(1,"Edad es requerida."),T())}function RH(t,e){t&1&&(x(0,"div"),L(1,"La edad no debe contener letras."),T())}function NH(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function PH(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function kH(t,e){if(t&1&&(x(0,"div"),le(1,MH,2,0,"div",5)(2,RH,2,0,"div",5)(3,NH,2,0,"div",5)(4,PH,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function OH(t,e){t&1&&(x(0,"div"),L(1,"DNI es requerido."),T())}function FH(t,e){t&1&&(x(0,"div"),L(1,"El DNI no debe contener letras."),T())}function VH(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function LH(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function jH(t,e){if(t&1&&(x(0,"div"),le(1,OH,2,0,"div",5)(2,FH,2,0,"div",5)(3,VH,2,0,"div",5)(4,LH,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function BH(t,e){t&1&&(x(0,"div"),L(1,"Obra Social es requerida."),T())}function UH(t,e){if(t&1&&(x(0,"div"),le(1,BH,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("obraSocial"))==null?null:n.hasError("required"))}}function $H(t,e){t&1&&(x(0,"div"),L(1,"Correo es requerido."),T())}function qH(t,e){t&1&&(x(0,"div"),L(1,"Correo no v\xE1lido."),T())}function HH(t,e){if(t&1&&(x(0,"div"),le(1,$H,2,0,"div",5)(2,qH,2,0,"div",5),T()),t&2){let n,r,i=ze();q(),z("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),q(),z("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function zH(t,e){t&1&&(x(0,"div"),L(1,"Contrase\xF1a es requerida."),T())}function GH(t,e){if(t&1&&(x(0,"div"),le(1,zH,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function WH(t,e){t&1&&(x(0,"div"),L(1,"Imagen de perfil 1 es requerida."),T())}function KH(t,e){if(t&1&&(x(0,"div"),le(1,WH,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}function QH(t,e){t&1&&(x(0,"div"),L(1,"Imagen de perfil 2 es requerida."),T())}function YH(t,e){if(t&1&&(x(0,"div"),le(1,QH,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("foto2"))==null?null:n.hasError("required"))}}var Gm=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImages=[],this.vieneDeRegistro=!1,this.registerForm=this.formBuilder.group({nombre:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],apellido:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],dni:["",[Oe.required,Le.onlyNumbers,Le.maxLength(8),Le.minLength(8)]],edad:["",[Oe.required,Le.onlyNumbers,Le.maxLength(1),Le.minLength(2)]],obraSocial:["",Oe.required],mail:["",[Oe.required,Oe.email]],password:["",Oe.required],foto1:["",Oe.required],foto2:["",Oe.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password;try{let o=yield this.auth.guardarPaciente(r,i);console.log("Paciente registrado con ID: ",o),SI.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch{SI.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r,i){let o=r.target.files[0];o&&this.registerForm.patchValue({[`foto${i}`]:o})}};e.\u0275fac=function(i){return new(i||e)(se(Kr),se(sn),se(ir),se(kc))},e.\u0275cmp=ut({type:e,selectors:[["app-registro-pacientes"]],standalone:!0,features:[dt],decls:52,vars:11,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],["for","obraSocial"],["type","text","id","obraSocial","name","obraSocial","formControlName","obraSocial","required",""],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage1"],["type","file","id","profileImage1","name","profileImage1","required","",3,"change"],["for","profileImage2"],["type","file","id","profileImage2","name","profileImage2","required","",3,"change"],["type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(x(0,"body")(1,"div",0)(2,"h2"),L(3,"Registro de pacientes"),T(),x(4,"form",1),Ce("ngSubmit",function(){return o.onSubmit()}),x(5,"div",2)(6,"label",3),L(7,"Nombre"),T(),Ie(8,"input",4),le(9,DH,4,3,"div",5),T(),x(10,"div",2)(11,"label",6),L(12,"Apellido"),T(),Ie(13,"input",7),le(14,xH,4,3,"div",5),T(),x(15,"div",2)(16,"label",8),L(17,"Edad"),T(),Ie(18,"input",9),le(19,kH,5,4,"div",5),T(),x(20,"div",2)(21,"label",10),L(22,"DNI"),T(),Ie(23,"input",11),le(24,jH,5,4,"div",5),T(),x(25,"div",2)(26,"label",12),L(27,"Obra Social"),T(),Ie(28,"input",13),le(29,UH,2,1,"div",5),T(),x(30,"div",2)(31,"label",14),L(32,"Correo"),T(),Ie(33,"input",15),le(34,HH,3,2,"div",5),T(),x(35,"div",2)(36,"label",16),L(37,"Contrase\xF1a"),T(),Ie(38,"input",17),le(39,GH,2,1,"div",5),T(),x(40,"div",2)(41,"label",18),L(42,"Imagen de Perfil 1"),T(),x(43,"input",19),Ce("change",function(a){return o.onFileChange(a,1)}),T(),le(44,KH,2,1,"div",5),T(),x(45,"div",2)(46,"label",20),L(47,"Imagen de Perfil 2"),T(),x(48,"input",21),Ce("change",function(a){return o.onFileChange(a,2)}),T(),le(49,YH,2,1,"div",5),T(),x(50,"button",22),L(51,"Registrarse"),T()()()()),i&2){let s,a,l,u,h,g,w,E,A;q(4),z("formGroup",o.registerForm),q(5),z("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),q(5),z("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),q(5),z("ngIf",((l=o.registerForm.get("edad"))==null?null:l.invalid)&&(((l=o.registerForm.get("edad"))==null?null:l.dirty)||((l=o.registerForm.get("edad"))==null?null:l.touched))),q(5),z("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),q(5),z("ngIf",((h=o.registerForm.get("obraSocial"))==null?null:h.invalid)&&(((h=o.registerForm.get("obraSocial"))==null?null:h.dirty)||((h=o.registerForm.get("obraSocial"))==null?null:h.touched))),q(5),z("ngIf",((g=o.registerForm.get("mail"))==null?null:g.invalid)&&(((g=o.registerForm.get("mail"))==null?null:g.dirty)||((g=o.registerForm.get("mail"))==null?null:g.touched))),q(5),z("ngIf",((w=o.registerForm.get("password"))==null?null:w.invalid)&&(((w=o.registerForm.get("password"))==null?null:w.dirty)||((w=o.registerForm.get("password"))==null?null:w.touched))),q(5),z("ngIf",((E=o.registerForm.get("foto1"))==null?null:E.invalid)&&(((E=o.registerForm.get("foto1"))==null?null:E.dirty)||((E=o.registerForm.get("foto1"))==null?null:E.touched))),q(5),z("ngIf",((A=o.registerForm.get("foto2"))==null?null:A.invalid)&&(((A=o.registerForm.get("foto2"))==null?null:A.dirty)||((A=o.registerForm.get("foto2"))==null?null:A.touched))),q(),z("disabled",o.registerForm.invalid)}},dependencies:[Jn,To,Xn,Gs,Wr,Do,Vi,Hr,Qr,Oi,Fi],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondoRegistro-RX6QQ6QR.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();function ZH(t,e){if(t&1&&(x(0,"li")(1,"div")(2,"strong"),L(3),T(),x(4,"p"),L(5),T(),x(6,"p"),L(7),T(),x(8,"p"),L(9),T()()()),t&2){let n=e.$implicit;q(3),bu("",n.nombre," ",n.apellido,""),q(2),xn("Edad: ",n.edad,""),q(2),xn("DNI: ",n.DNI,""),q(2),xn("Mail: ",n.mail,"")}}function XH(t,e){if(t&1){let n=hS();x(0,"li")(1,"div")(2,"strong"),L(3),T(),x(4,"p"),L(5),T(),x(6,"p"),L(7),T(),x(8,"p"),L(9),T(),x(10,"p"),L(11),T(),x(12,"button",3),Ce("click",function(){let i=ZD(n).$implicit,o=ze();return XD(o.toggleHabilitado(i.id,i.habilitado))}),L(13),T()()()}if(t&2){let n=e.$implicit;q(3),bu("",n.nombre," ",n.apellido,""),q(2),xn("Edad: ",n.edad,""),q(2),xn("DNI: ",n.DNI,""),q(2),xn("Mail: ",n.mail,""),q(2),xn("Habilitado: ",n.habilitado?"S\xED":"No",""),q(),z("disabled",n.habilitado),q(),xn(" ",n.habilitado?"Habilitado":"Habilitar"," ")}}function JH(t,e){if(t&1&&(x(0,"li")(1,"div")(2,"strong"),L(3),T(),x(4,"p"),L(5),T(),x(6,"p"),L(7),T(),x(8,"p"),L(9),T()()()),t&2){let n=e.$implicit;q(3),bu("",n.nombre," ",n.apellido,""),q(2),xn("Edad: ",n.edad,""),q(2),xn("DNI: ",n.DNI,""),q(2),xn("Mail: ",n.mail,"")}}var Wm=(()=>{let e=class e{constructor(r){this.auth=r,this.especialistas=[],this.pacientes=[],this.administradores=[]}ngOnInit(){this.loadEspecialistas(),this.loadPacientes(),this.loadAdministradores()}loadEspecialistas(){return k(this,null,function*(){try{this.especialistas=yield this.auth.getAllEspecialistas()}catch(r){console.error("Error al obtener los especialistas:",r)}})}loadPacientes(){return k(this,null,function*(){try{this.pacientes=yield this.auth.getAllPacientes()}catch(r){console.error("Error al obtener los pacientes:",r)}})}loadAdministradores(){return k(this,null,function*(){try{this.administradores=yield this.auth.getAllAdmin()}catch(r){console.error("Error al obtener los administradores:",r)}})}toggleHabilitado(r,i){return k(this,null,function*(){let o=!i;try{yield this.auth.toggleHabilitadoEspecialista(r,o);let s=this.especialistas.findIndex(a=>a.id===r);s!==-1&&(this.especialistas[s].habilitado=o)}catch(s){console.error("Error al cambiar la habilitaci\xF3n del especialista:",s)}})}};e.\u0275fac=function(i){return new(i||e)(se(ir))},e.\u0275cmp=ut({type:e,selectors:[["app-habilitar-especialistas"]],standalone:!0,features:[dt],decls:16,vars:3,consts:[[1,"container"],[1,"especialistas-list"],[4,"ngFor","ngForOf"],[3,"click","disabled"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),L(4,"Listado de administradores"),T(),x(5,"ul"),le(6,ZH,10,5,"li",2),T()(),x(7,"h2"),L(8,"Listado de especialistas"),T(),x(9,"ul"),le(10,XH,14,8,"li",2),T(),x(11,"div")(12,"h2"),L(13,"Listado de pacientes"),T(),x(14,"ul"),le(15,JH,10,5,"li",2),T()()()()),i&2&&(q(6),z("ngForOf",o.administradores),q(4),z("ngForOf",o.especialistas),q(5),z("ngForOf",o.pacientes))},dependencies:[Sp],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-family:Arial,sans-serif}.especialistas-list[_ngcontent-%COMP%]{width:80%;max-width:800px;margin:20px;padding:20px;background-color:#f0f0f0;border-radius:5px;box-shadow:0 4px 8px #0000001a}.especialistas-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:15px;font-size:24px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.especialistas-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding:15px;background-color:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a;font-size:2px}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:2px;cursor:pointer;background-color:#007bff;color:#fff;transition:background-color .3s ease;font-family:Roboto,Arial,sans-serif}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#6c757d;cursor:not-allowed}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:3px 0;font-size:14px;font-family:Arial,sans-serif}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;font-weight:700;font-family:Tahoma,Geneva,Verdana,sans-serif}"]});let t=e;return t})();var AI=$h(Ku());function e3(t,e){t&1&&(x(0,"div"),L(1,"Nombre es requerido."),T())}function t3(t,e){t&1&&(x(0,"div"),L(1,"El nombre no debe contener n\xFAmeros."),T())}function n3(t,e){t&1&&(x(0,"div"),L(1,"El nombre debe tener m\xEDnimo 3 caracteres"),T())}function r3(t,e){if(t&1&&(x(0,"div"),le(1,e3,2,0,"div",5)(2,t3,2,0,"div",5)(3,n3,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function i3(t,e){t&1&&(x(0,"div"),L(1,"Apellido es requerido."),T())}function o3(t,e){t&1&&(x(0,"div"),L(1,"El apellido no debe contener n\xFAmeros."),T())}function s3(t,e){t&1&&(x(0,"div"),L(1,"El apellido debe tener m\xEDnimo 3 caracteres"),T())}function a3(t,e){if(t&1&&(x(0,"div"),le(1,i3,2,0,"div",5)(2,o3,2,0,"div",5)(3,s3,2,0,"div",5),T()),t&2){let n,r,i,o=ze();q(),z("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),q(),z("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),q(),z("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function l3(t,e){t&1&&(x(0,"div"),L(1,"Edad es requerida."),T())}function c3(t,e){t&1&&(x(0,"div"),L(1,"La edad no debe contener letras."),T())}function u3(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function d3(t,e){t&1&&(x(0,"div"),L(1,"Debe tener una edad entre 1-99"),T())}function h3(t,e){if(t&1&&(x(0,"div"),le(1,l3,2,0,"div",5)(2,c3,2,0,"div",5)(3,u3,2,0,"div",5)(4,d3,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function f3(t,e){t&1&&(x(0,"div"),L(1,"DNI es requerido."),T())}function p3(t,e){t&1&&(x(0,"div"),L(1,"El DNI no debe contener letras."),T())}function g3(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function m3(t,e){t&1&&(x(0,"div"),L(1,"Deben ser 8 d\xEDgitos"),T())}function v3(t,e){if(t&1&&(x(0,"div"),le(1,f3,2,0,"div",5)(2,p3,2,0,"div",5)(3,g3,2,0,"div",5)(4,m3,2,0,"div",5),T()),t&2){let n,r,i,o,s=ze();q(),z("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),q(),z("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),q(),z("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),q(),z("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function y3(t,e){t&1&&(x(0,"div"),L(1,"Correo es requerido."),T())}function w3(t,e){t&1&&(x(0,"div"),L(1,"Correo no v\xE1lido."),T())}function _3(t,e){if(t&1&&(x(0,"div"),le(1,y3,2,0,"div",5)(2,w3,2,0,"div",5),T()),t&2){let n,r,i=ze();q(),z("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),q(),z("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function E3(t,e){t&1&&(x(0,"div"),L(1,"Contrase\xF1a es requerida."),T())}function b3(t,e){if(t&1&&(x(0,"div"),le(1,E3,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function I3(t,e){t&1&&(x(0,"div"),L(1,"Imagen de perfil 1 es requerida."),T())}function C3(t,e){if(t&1&&(x(0,"div"),le(1,I3,2,0,"div",5),T()),t&2){let n,r=ze();q(),z("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}var Km=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImages=[],this.vieneDeRegistro=!1,this.registerForm=this.formBuilder.group({nombre:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],apellido:["",[Oe.required,Le.onlyLetters,Le.minLength(3)]],dni:["",[Oe.required,Le.onlyNumbers,Le.maxLength(8),Le.minLength(8)]],edad:["",[Oe.required,Le.onlyNumbers,Le.maxLength(1),Le.minLength(2)]],mail:["",[Oe.required,Oe.email]],password:["",Oe.required],foto1:["",Oe.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password;try{let o=yield this.auth.guardarAdmin(r,i);console.log("Admin registrado con ID: ",o),AI.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch(o){console.error("Error al registrar admin:",o),AI.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r,i){let o=r.target.files[0];o&&this.registerForm.patchValue({[`foto${i}`]:o})}};e.\u0275fac=function(i){return new(i||e)(se(Kr),se(sn),se(ir),se(kc))},e.\u0275cmp=ut({type:e,selectors:[["app-registro-admins"]],standalone:!0,features:[dt],decls:42,vars:9,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage1"],["type","file","id","profileImage1","name","profileImage1","required","",3,"change"],["type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(x(0,"body")(1,"div",0)(2,"h2"),L(3,"Registro de admin"),T(),x(4,"form",1),Ce("ngSubmit",function(){return o.onSubmit()}),x(5,"div",2)(6,"label",3),L(7,"Nombre"),T(),Ie(8,"input",4),le(9,r3,4,3,"div",5),T(),x(10,"div",2)(11,"label",6),L(12,"Apellido"),T(),Ie(13,"input",7),le(14,a3,4,3,"div",5),T(),x(15,"div",2)(16,"label",8),L(17,"Edad"),T(),Ie(18,"input",9),le(19,h3,5,4,"div",5),T(),x(20,"div",2)(21,"label",10),L(22,"DNI"),T(),Ie(23,"input",11),le(24,v3,5,4,"div",5),T(),x(25,"div",2)(26,"label",12),L(27,"Correo"),T(),Ie(28,"input",13),le(29,_3,3,2,"div",5),T(),x(30,"div",2)(31,"label",14),L(32,"Contrase\xF1a"),T(),Ie(33,"input",15),le(34,b3,2,1,"div",5),T(),x(35,"div",2)(36,"label",16),L(37,"Imagen de Perfil 1"),T(),x(38,"input",17),Ce("change",function(a){return o.onFileChange(a,1)}),T(),le(39,C3,2,1,"div",5),T(),x(40,"button",18),L(41,"Registrarse"),T()()()()),i&2){let s,a,l,u,h,g,w;q(4),z("formGroup",o.registerForm),q(5),z("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),q(5),z("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),q(5),z("ngIf",((l=o.registerForm.get("edad"))==null?null:l.invalid)&&(((l=o.registerForm.get("edad"))==null?null:l.dirty)||((l=o.registerForm.get("edad"))==null?null:l.touched))),q(5),z("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),q(5),z("ngIf",((h=o.registerForm.get("mail"))==null?null:h.invalid)&&(((h=o.registerForm.get("mail"))==null?null:h.dirty)||((h=o.registerForm.get("mail"))==null?null:h.touched))),q(5),z("ngIf",((g=o.registerForm.get("password"))==null?null:g.invalid)&&(((g=o.registerForm.get("password"))==null?null:g.dirty)||((g=o.registerForm.get("password"))==null?null:g.touched))),q(5),z("ngIf",((w=o.registerForm.get("foto1"))==null?null:w.invalid)&&(((w=o.registerForm.get("foto1"))==null?null:w.dirty)||((w=o.registerForm.get("foto1"))==null?null:w.touched))),q(),z("disabled",o.registerForm.invalid)}},dependencies:[Jn,To,Xn,Gs,Wr,Do,Vi,Hr,Qr,Oi,Fi],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondoRegistro-RX6QQ6QR.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();function D3(t,e){t&1&&(wu(0),Ie(1,"app-registro-admins"),_u())}function T3(t,e){t&1&&(wu(0),Ie(1,"app-registro-pacientes"),_u())}function S3(t,e){t&1&&(wu(0),Ie(1,"app-registro-especialistas"),_u())}var JN=(()=>{let e=class e{constructor(){this.registroSeleccionado="admin"}showRegistro(r){this.registroSeleccionado=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-seccion-usuarios"]],standalone:!0,features:[dt],decls:13,vars:3,consts:[[1,"container"],[1,"left-panel"],[1,"right-panel"],[3,"click"],[4,"ngIf"]],template:function(i,o){i&1&&(x(0,"div",0)(1,"div",1),Ie(2,"app-habilitar-especialistas"),T(),x(3,"div",2)(4,"button",3),Ce("click",function(){return o.showRegistro("admin")}),L(5,"Registrar Admin"),T(),x(6,"button",3),Ce("click",function(){return o.showRegistro("paciente")}),L(7,"Registrar Paciente"),T(),x(8,"button",3),Ce("click",function(){return o.showRegistro("especialista")}),L(9,"Registrar Especialista"),T(),le(10,D3,2,0,"ng-container",4)(11,T3,2,0,"ng-container",4)(12,S3,2,0,"ng-container",4),T()()),i&2&&(q(10),z("ngIf",o.registroSeleccionado==="admin"),q(),z("ngIf",o.registroSeleccionado==="paciente"),q(),z("ngIf",o.registroSeleccionado==="especialista"))},dependencies:[Wm,Km,zm,Gm,Hr],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.panel[_ngcontent-%COMP%]{width:50%;padding:10px;border:1px solid #ccc}"]});let t=e;return t})();var eP=[{path:"bienvenida",component:SA},{path:"",redirectTo:"/bienvenida",pathMatch:"full"},{path:"login",component:YN},{path:"registro",component:XN},{path:"registro_especialistas",component:zm},{path:"registro_pacientes",component:Gm},{path:"especialidades",component:Hm},{path:"botones",component:ag},{path:"seccion-usuarios",component:JN},{path:"registro_admins",component:Km},{path:"habilitar-especialistas",component:Wm}];var tP={providers:[DA(eP),Zy(Jn,Qr,Dx.initializeApp({apiKey:"AIzaSyDGif3NJXC7v7VKBGL1rhq_yiAQKG94WfU",authDomain:"tp02-ef411.firebaseapp.com",projectId:"tp02-ef411",storageBucket:"tp02-ef411.appspot.com",messagingSenderId:"1038947319102",appId:"1:1038947319102:web:c95224758351e20770806f"}),cN,Tx,qS,ir)]};var nP=(()=>{let e=class e{title(r){throw new Error("Method not implemented.")}constructor(r){this.router=r}ngOnInit(){return k(this,null,function*(){})}OnLogOutClick(){return k(this,null,function*(){this.router.navigateByUrl("home")})}onProfileClick(){this.router.navigateByUrl("profile")}onTurnosClick(){}};e.\u0275fac=function(i){return new(i||e)(se(sn))},e.\u0275cmp=ut({type:e,selectors:[["app-root"]],standalone:!0,features:[dt],decls:21,vars:0,consts:[[1,"app-container"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand"],["src","./../assets/icono.png",2,"width","50px"],[1,"title"],["id","navbarTogglerDemo02",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item","active"],["href","#",1,"nav-link"],[1,"nav-item"],["href","login",1,"nav-link"],["href","registro",1,"nav-link"],["href","seccion-usuarios",1,"nav-link"]],template:function(i,o){i&1&&(Ie(0,"div",0),x(1,"nav",1)(2,"a",2),Ie(3,"img",3),T(),x(4,"h1",4),L(5,"Lisan al-Clinic"),T(),x(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),L(10,"P\xE1gina principal"),T()(),x(11,"li",9)(12,"a",10),L(13,"Iniciar sesi\xF3n"),T()(),x(14,"li",9)(15,"a",11),L(16,"Registrarse"),T()(),x(17,"li",9)(18,"a",12),L(19,"Usuarios"),T()()()()(),Ie(20,"router-outlet"))},dependencies:[I_],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.navbar[_ngcontent-%COMP%]{background-color:#d1a054;display:flex;align-items:center;justify-content:space-between;padding:1rem}.title[_ngcontent-%COMP%]{margin:0;color:#2e4c6d;font-size:1.5rem;display:flex;align-items:center}.navbar-brand[_ngcontent-%COMP%]{display:flex}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;margin-right:1rem}.navbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1.5rem;margin-left:335px;padding:.5rem 0;font-family:Dune,sans-serif}.navbar-nav[_ngcontent-%COMP%]{display:flex;flex-grow:1}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.nav-item[_ngcontent-%COMP%]{margin:0 10px}.nav-link[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1rem;transition:color .3s}.nav-link[_ngcontent-%COMP%]:hover{color:#d2691e}.logout-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#d2691e;font-size:1.2rem;transition:color .3s}.logout-btn[_ngcontent-%COMP%]:hover{color:#d1a054}.navbar-toggler[_ngcontent-%COMP%]{border-color:#2e4c6d}.navbar-toggler-icon[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1.5rem}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{list-style-type:none}"]});let t=e;return t})();US(nP,tP).catch(t=>console.error(t));
