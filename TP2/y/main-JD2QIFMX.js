import{A as Xn,B as Zv,C as Wt,a as ee,b as je,c as MO,d as Tu,e as Wv,f as k,g as $C,h as mf,i as HC,j as qC,k as zC,l as Kv,m as gf,n as Su,o as Qv,p as vf,q as yf,r as GC,s as Yv,t as We,u as br,v as Gr,w as wf,x as Ls,y as _f,z as WC}from"./chunk-IGVMGRMO.js";var ol=MO((ii,g0)=>{"use strict";(function(t,e){typeof ii=="object"&&typeof g0<"u"?g0.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(ii,function(){"use strict";function t(y,d){(d==null||d>y.length)&&(d=y.length);for(var f=0,v=Array(d);f<d;f++)v[f]=y[f];return v}function e(y){if(Array.isArray(y))return y}function n(y){if(Array.isArray(y))return t(y)}function r(y,d,f){if(typeof y=="function"?y===d:y.has(d))return arguments.length<3?d:f;throw new TypeError("Private element is not present on this object")}function i(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function o(y,d,f){return d=V(d),ce(y,W()?Reflect.construct(d,f||[],V(y).constructor):d.apply(y,f))}function s(y,d){if(d.has(y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function c(y,d){return y.get(r(y,d))}function u(y,d,f){s(y,d),d.set(y,f)}function h(y,d,f){return y.set(r(y,d),f),f}function m(y,d,f){if(W())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,d);var D=new(y.bind.apply(y,v));return D}function w(y,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,L(v.key),v)}}function b(y,d,f){return d&&w(y.prototype,d),Object.defineProperty(y,"prototype",{writable:!1}),y}function A(){return A=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,d,f){var v=S(y,d);if(v){var D=Object.getOwnPropertyDescriptor(v,d);return D.get?D.get.call(arguments.length<3?y:f):D.value}},A.apply(null,arguments)}function V(y){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},V(y)}function F(y,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(d&&d.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),d&&x(y,d)}function W(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W=function(){return!!y})()}function Z(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function z(y,d){var f=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(f!=null){var v,D,q,ie,Me=[],ke=!0,Et=!1;try{if(q=(f=f.call(y)).next,d!==0)for(;!(ke=(v=q.call(f)).done)&&(Me.push(v.value),Me.length!==d);ke=!0);}catch(Du){Et=!0,D=Du}finally{try{if(!ke&&f.return!=null&&(ie=f.return(),Object(ie)!==ie))return}finally{if(Et)throw D}}return Me}}function J(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(y,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(y)}function x(y,d){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},x(y,d)}function I(y,d){return e(y)||z(y,d)||Qn(y,d)||J()}function S(y,d){for(;!{}.hasOwnProperty.call(y,d)&&(y=V(y))!==null;);return y}function M(y){return n(y)||Z(y)||Qn(y)||ue()}function N(y,d){if(typeof y!="object"||!y)return y;var f=y[Symbol.toPrimitive];if(f!==void 0){var v=f.call(y,d);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}function L(y){var d=N(y,"string");return typeof d=="symbol"?d:d+""}function T(y){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},T(y)}function Qn(y,d){if(y){if(typeof y=="string")return t(y,d);var f={}.toString.call(y).slice(8,-1);return f==="Object"&&y.constructor&&(f=y.constructor.name),f==="Map"||f==="Set"?Array.from(y):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?t(y,d):void 0}}var _s=100,De={},bs=function(){De.previousActiveElement instanceof HTMLElement?(De.previousActiveElement.focus(),De.previousActiveElement=null):document.body&&document.body.focus()},Es=function(d){return new Promise(function(f){if(!d)return f();var v=window.scrollX,D=window.scrollY;De.restoreFocusTimeout=setTimeout(function(){bs(),f()},_s),window.scrollTo(v,D)})},Qa="swal2-",Ih=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],H=Ih.reduce(function(y,d){return y[d]=Qa+d,y},{}),Vr=["success","warning","info","question","error"],xt=Vr.reduce(function(y,d){return y[d]=Qa+d,y},{}),Ch="SweetAlert2:",bi=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},on=function(d){console.warn("".concat(Ch," ").concat(T(d)==="object"?d.join(" "):d))},Un=function(d){console.error("".concat(Ch," ").concat(d))},Dh=[],Mv=function(d){Dh.includes(d)||(Dh.push(d),on(d))},Ya=function(d,f){Mv('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(f,'" instead.'))},Ei=function(d){return typeof d=="function"?d():d},Is=function(d){return d&&typeof d.toPromise=="function"},Ii=function(d){return Is(d)?d.toPromise():Promise.resolve(d)},Cs=function(d){return d&&Promise.resolve(d)===d},Gt=function(){return document.body.querySelector(".".concat(H.container))},fo=function(d){var f=Gt();return f?f.querySelector(d):null},sn=function(d){return fo(".".concat(d))},Ke=function(){return sn(H.popup)},po=function(){return sn(H.icon)},Th=function(){return sn(H["icon-content"])},Za=function(){return sn(H.title)},Xa=function(){return sn(H["html-container"])},Sh=function(){return sn(H.image)},Ds=function(){return sn(H["progress-steps"])},mo=function(){return sn(H["validation-message"])},Pn=function(){return fo(".".concat(H.actions," .").concat(H.confirm))},vt=function(){return fo(".".concat(H.actions," .").concat(H.cancel))},yt=function(){return fo(".".concat(H.actions," .").concat(H.deny))},Ja=function(){return sn(H["input-label"])},Ci=function(){return fo(".".concat(H.loader))},go=function(){return sn(H.actions)},xh=function(){return sn(H.footer)},Lr=function(){return sn(H["timer-progress-bar"])},ec=function(){return sn(H.close)},Ah=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ts=function(){var d=Ke();if(!d)return[];var f=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),v=Array.from(f).sort(function(ie,Me){var ke=parseInt(ie.getAttribute("tabindex")||"0"),Et=parseInt(Me.getAttribute("tabindex")||"0");return ke>Et?1:ke<Et?-1:0}),D=d.querySelectorAll(Ah),q=Array.from(D).filter(function(ie){return ie.getAttribute("tabindex")!=="-1"});return M(new Set(v.concat(q))).filter(function(ie){return wn(ie)})},uu=function(){return Yn(document.body,H.shown)&&!Yn(document.body,H["toast-shown"])&&!Yn(document.body,H["no-backdrop"])},tc=function(){var d=Ke();return d?Yn(d,H.toast):!1},du=function(){var d=Ke();return d?d.hasAttribute("data-loading"):!1},an=function(d,f){if(d.textContent="",f){var v=new DOMParser,D=v.parseFromString(f,"text/html"),q=D.querySelector("head");q&&Array.from(q.childNodes).forEach(function(Me){d.appendChild(Me)});var ie=D.querySelector("body");ie&&Array.from(ie.childNodes).forEach(function(Me){Me instanceof HTMLVideoElement||Me instanceof HTMLAudioElement?d.appendChild(Me.cloneNode(!0)):d.appendChild(Me)})}},Yn=function(d,f){if(!f)return!1;for(var v=f.split(/\s+/),D=0;D<v.length;D++)if(!d.classList.contains(v[D]))return!1;return!0},Ss=function(d,f){Array.from(d.classList).forEach(function(v){!Object.values(H).includes(v)&&!Object.values(xt).includes(v)&&!Object.values(f.showClass||{}).includes(v)&&d.classList.remove(v)})},cn=function(d,f,v){if(Ss(d,f),f.customClass&&f.customClass[v]){if(typeof f.customClass[v]!="string"&&!f.customClass[v].forEach){on("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(T(f.customClass[v]),'"'));return}Ae(d,f.customClass[v])}},vo=function(d,f){if(!f)return null;switch(f){case"select":case"textarea":case"file":return d.querySelector(".".concat(H.popup," > .").concat(H[f]));case"checkbox":return d.querySelector(".".concat(H.popup," > .").concat(H.checkbox," input"));case"radio":return d.querySelector(".".concat(H.popup," > .").concat(H.radio," input:checked"))||d.querySelector(".".concat(H.popup," > .").concat(H.radio," input:first-child"));case"range":return d.querySelector(".".concat(H.popup," > .").concat(H.range," input"));default:return d.querySelector(".".concat(H.popup," > .").concat(H.input))}},jr=function(d){if(d.focus(),d.type!=="file"){var f=d.value;d.value="",d.value=f}},hu=function(d,f,v){!d||!f||(typeof f=="string"&&(f=f.split(/\s+/).filter(Boolean)),f.forEach(function(D){Array.isArray(d)?d.forEach(function(q){v?q.classList.add(D):q.classList.remove(D)}):v?d.classList.add(D):d.classList.remove(D)}))},Ae=function(d,f){hu(d,f,!0)},$n=function(d,f){hu(d,f,!1)},Nn=function(d,f){for(var v=Array.from(d.children),D=0;D<v.length;D++){var q=v[D];if(q instanceof HTMLElement&&Yn(q,f))return q}},Br=function(d,f,v){v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?d.style.setProperty(f,typeof v=="number"?"".concat(v,"px"):v):d.style.removeProperty(f)},Ue=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=f)},jt=function(d){d&&(d.style.display="none")},Di=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){xs(d,d.innerHTML,f)}).observe(d,{childList:!0,subtree:!0})},yo=function(d,f,v,D){var q=d.querySelector(f);q&&q.style.setProperty(v,D)},xs=function(d,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";f?Ue(d,v):jt(d)},wn=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},wo=function(){return!wn(Pn())&&!wn(yt())&&!wn(vt())},Mh=function(d){return d.scrollHeight>d.clientHeight},Rh=function(d){var f=window.getComputedStyle(d),v=parseFloat(f.getPropertyValue("animation-duration")||"0"),D=parseFloat(f.getPropertyValue("transition-duration")||"0");return v>0||D>0},_o=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=Lr();v&&wn(v)&&(f&&(v.style.transition="none",v.style.width="100%"),setTimeout(function(){v.style.transition="width ".concat(d/1e3,"s linear"),v.style.width="0%"},10))},Ph=function(){var d=Lr();if(d){var f=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var v=parseInt(window.getComputedStyle(d).width),D=f/v*100;d.style.width="".concat(D,"%")}},nc=function(){return typeof window>"u"||typeof document>"u"},rc=`
 <div aria-labelledby="`.concat(H.title,'" aria-describedby="').concat(H["html-container"],'" class="').concat(H.popup,`" tabindex="-1">
   <button type="button" class="`).concat(H.close,`"></button>
   <ul class="`).concat(H["progress-steps"],`"></ul>
   <div class="`).concat(H.icon,`"></div>
   <img class="`).concat(H.image,`" />
   <h2 class="`).concat(H.title,'" id="').concat(H.title,`"></h2>
   <div class="`).concat(H["html-container"],'" id="').concat(H["html-container"],`"></div>
   <input class="`).concat(H.input,'" id="').concat(H.input,`" />
   <input type="file" class="`).concat(H.file,`" />
   <div class="`).concat(H.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(H.select,'" id="').concat(H.select,`"></select>
   <div class="`).concat(H.radio,`"></div>
   <label class="`).concat(H.checkbox,`">
     <input type="checkbox" id="`).concat(H.checkbox,`" />
     <span class="`).concat(H.label,`"></span>
   </label>
   <textarea class="`).concat(H.textarea,'" id="').concat(H.textarea,`"></textarea>
   <div class="`).concat(H["validation-message"],'" id="').concat(H["validation-message"],`"></div>
   <div class="`).concat(H.actions,`">
     <div class="`).concat(H.loader,`"></div>
     <button type="button" class="`).concat(H.confirm,`"></button>
     <button type="button" class="`).concat(H.deny,`"></button>
     <button type="button" class="`).concat(H.cancel,`"></button>
   </div>
   <div class="`).concat(H.footer,`"></div>
   <div class="`).concat(H["timer-progress-bar-container"],`">
     <div class="`).concat(H["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Ur=function(){var d=Gt();return d?(d.remove(),$n([document.documentElement,document.body],[H["no-backdrop"],H["toast-shown"],H["has-column"]]),!0):!1},$r=function(){De.currentInstance.resetValidationMessage()},Nh=function(){var d=Ke(),f=Nn(d,H.input),v=Nn(d,H.file),D=d.querySelector(".".concat(H.range," input")),q=d.querySelector(".".concat(H.range," output")),ie=Nn(d,H.select),Me=d.querySelector(".".concat(H.checkbox," input")),ke=Nn(d,H.textarea);f.oninput=$r,v.onchange=$r,ie.onchange=$r,Me.onchange=$r,ke.oninput=$r,D.oninput=function(){$r(),q.value=D.value},D.onchange=function(){$r(),q.value=D.value}},fu=function(d){return typeof d=="string"?document.querySelector(d):d},pu=function(d){var f=Ke();f.setAttribute("role",d.toast?"alert":"dialog"),f.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||f.setAttribute("aria-modal","true")},kh=function(d){window.getComputedStyle(d).direction==="rtl"&&Ae(Gt(),H.rtl)},Oh=function(d){var f=Ur();if(nc()){Un("SweetAlert2 requires document to initialize");return}var v=document.createElement("div");v.className=H.container,f&&Ae(v,H["no-transition"]),an(v,rc);var D=fu(d.target);D.appendChild(v),pu(d),kh(D),Nh()},mu=function(d,f){d instanceof HTMLElement?f.appendChild(d):T(d)==="object"?ic(d,f):d&&an(f,d)},ic=function(d,f){d.jquery?Fh(f,d):an(f,d.toString())},Fh=function(d,f){if(d.textContent="",0 in f)for(var v=0;v in f;v++)d.appendChild(f[v].cloneNode(!0));else d.appendChild(f.cloneNode(!0))},gr=function(){if(nc())return!1;var y=document.createElement("div");return typeof y.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof y.style.animation<"u"?"animationend":!1}(),As=function(d,f){var v=go(),D=Ci();!v||!D||(!f.showConfirmButton&&!f.showDenyButton&&!f.showCancelButton?jt(v):Ue(v),cn(v,f,"actions"),Ti(v,D,f),an(D,f.loaderHtml||""),cn(D,f,"loader"))};function Ti(y,d,f){var v=Pn(),D=yt(),q=vt();!v||!D||!q||(vu(v,"confirm",f),vu(D,"deny",f),vu(q,"cancel",f),gu(v,D,q,f),f.reverseButtons&&(f.toast?(y.insertBefore(q,v),y.insertBefore(D,v)):(y.insertBefore(q,d),y.insertBefore(D,d),y.insertBefore(v,d))))}function gu(y,d,f,v){if(!v.buttonsStyling){$n([y,d,f],H.styled);return}Ae([y,d,f],H.styled),v.confirmButtonColor&&(y.style.backgroundColor=v.confirmButtonColor,Ae(y,H["default-outline"])),v.denyButtonColor&&(d.style.backgroundColor=v.denyButtonColor,Ae(d,H["default-outline"])),v.cancelButtonColor&&(f.style.backgroundColor=v.cancelButtonColor,Ae(f,H["default-outline"]))}function vu(y,d,f){var v=bi(d);xs(y,f["show".concat(v,"Button")],"inline-block"),an(y,f["".concat(d,"ButtonText")]||""),y.setAttribute("aria-label",f["".concat(d,"ButtonAriaLabel")]||""),y.className=H[d],cn(y,f,"".concat(d,"Button"))}var Vh=function(d,f){var v=ec();v&&(an(v,f.closeButtonHtml||""),cn(v,f,"closeButton"),xs(v,f.showCloseButton),v.setAttribute("aria-label",f.closeButtonAriaLabel||""))},Lh=function(d,f){var v=Gt();v&&(jh(v,f.backdrop),yu(v,f.position),wu(v,f.grow),cn(v,f,"container"))};function jh(y,d){typeof d=="string"?y.style.background=d:d||Ae([document.documentElement,document.body],H["no-backdrop"])}function yu(y,d){d&&(d in H?Ae(y,H[d]):(on('The "position" parameter is not valid, defaulting to "center"'),Ae(y,H.center)))}function wu(y,d){d&&Ae(y,H["grow-".concat(d)])}var tt={innerParams:new WeakMap,domCache:new WeakMap},Bh=["input","file","range","select","radio","checkbox","textarea"],Rv=function(d,f){var v=Ke();if(v){var D=tt.innerParams.get(d),q=!D||f.input!==D.input;Bh.forEach(function(ie){var Me=Nn(v,H[ie]);Me&&($h(ie,f.inputAttributes),Me.className=H[ie],q&&jt(Me))}),f.input&&(q&&Pv(f),Nv(f))}},Pv=function(d){if(d.input){if(!ht[d.input]){Un("Unexpected type of input! Expected ".concat(Object.keys(ht).join(" | "),', got "').concat(d.input,'"'));return}var f=Ms(d.input),v=ht[d.input](f,d);Ue(f),d.inputAutoFocus&&setTimeout(function(){jr(v)})}},Uh=function(d){for(var f=0;f<d.attributes.length;f++){var v=d.attributes[f].name;["id","type","value","style"].includes(v)||d.removeAttribute(v)}},$h=function(d,f){var v=vo(Ke(),d);if(v){Uh(v);for(var D in f)v.setAttribute(D,f[D])}},Nv=function(d){var f=Ms(d.input);T(d.customClass)==="object"&&Ae(f,d.customClass.input)},vr=function(d,f){(!d.placeholder||f.inputPlaceholder)&&(d.placeholder=f.inputPlaceholder)},_n=function(d,f,v){if(v.inputLabel){var D=document.createElement("label"),q=H["input-label"];D.setAttribute("for",d.id),D.className=q,T(v.customClass)==="object"&&Ae(D,v.customClass.inputLabel),D.innerText=v.inputLabel,f.insertAdjacentElement("beforebegin",D)}},Ms=function(d){return Nn(Ke(),H[d]||H.input)},Si=function(d,f){["string","number"].includes(T(f))?d.value="".concat(f):Cs(f)||on('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(T(f),'"'))},ht={};ht.text=ht.email=ht.password=ht.number=ht.tel=ht.url=ht.search=ht.date=ht["datetime-local"]=ht.time=ht.week=ht.month=function(y,d){return Si(y,d.inputValue),_n(y,y,d),vr(y,d),y.type=d.input,y},ht.file=function(y,d){return _n(y,y,d),vr(y,d),y},ht.range=function(y,d){var f=y.querySelector("input"),v=y.querySelector("output");return Si(f,d.inputValue),f.type=d.input,Si(v,d.inputValue),_n(f,y,d),y},ht.select=function(y,d){if(y.textContent="",d.inputPlaceholder){var f=document.createElement("option");an(f,d.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,y.appendChild(f)}return _n(y,y,d),y},ht.radio=function(y){return y.textContent="",y},ht.checkbox=function(y,d){var f=vo(Ke(),"checkbox");f.value="1",f.checked=!!d.inputValue;var v=y.querySelector("span");return an(v,d.inputPlaceholder),f},ht.textarea=function(y,d){Si(y,d.inputValue),vr(y,d),_n(y,y,d);var f=function(D){return parseInt(window.getComputedStyle(D).marginLeft)+parseInt(window.getComputedStyle(D).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var v=parseInt(window.getComputedStyle(Ke()).width),D=function(){if(document.body.contains(y)){var ie=y.offsetWidth+f(y);ie>v?Ke().style.width="".concat(ie,"px"):Br(Ke(),"width",d.width)}};new MutationObserver(D).observe(y,{attributes:!0,attributeFilter:["style"]})}}),y};var ot=function(d,f){var v=Xa();v&&(Di(v),cn(v,f,"htmlContainer"),f.html?(mu(f.html,v),Ue(v,"block")):f.text?(v.textContent=f.text,Ue(v,"block")):jt(v),Rv(d,f))},oc=function(d,f){var v=xh();v&&(Di(v),xs(v,f.footer,"block"),f.footer&&mu(f.footer,v),cn(v,f,"footer"))},Rs=function(d,f){var v=tt.innerParams.get(d),D=po();if(D){if(v&&f.icon===v.icon){qh(D,f),bo(D,f);return}if(!f.icon&&!f.iconHtml){jt(D);return}if(f.icon&&Object.keys(xt).indexOf(f.icon)===-1){Un('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(f.icon,'"')),jt(D);return}Ue(D),qh(D,f),bo(D,f),Ae(D,f.showClass&&f.showClass.icon)}},bo=function(d,f){for(var v=0,D=Object.entries(xt);v<D.length;v++){var q=I(D[v],2),ie=q[0],Me=q[1];f.icon!==ie&&$n(d,Me)}Ae(d,f.icon&&xt[f.icon]),Fv(d,f),kv(),cn(d,f,"icon")},kv=function(){var d=Ke();if(d)for(var f=window.getComputedStyle(d).getPropertyValue("background-color"),v=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),D=0;D<v.length;D++)v[D].style.backgroundColor=f},Hh=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Ov=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,qh=function(d,f){if(!(!f.icon&&!f.iconHtml)){var v=d.innerHTML,D="";if(f.iconHtml)D=zh(f.iconHtml);else if(f.icon==="success")D=Hh,v=v.replace(/ style=".*?"/g,"");else if(f.icon==="error")D=Ov;else if(f.icon){var q={question:"?",warning:"!",info:"i"};D=zh(q[f.icon])}v.trim()!==D.trim()&&an(d,D)}},Fv=function(d,f){if(f.iconColor){d.style.color=f.iconColor,d.style.borderColor=f.iconColor;for(var v=0,D=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];v<D.length;v++){var q=D[v];yo(d,q,"background-color",f.iconColor)}yo(d,".swal2-success-ring","border-color",f.iconColor)}},zh=function(d){return'<div class="'.concat(H["icon-content"],'">').concat(d,"</div>")},Ps=function(d,f){var v=Sh();if(v){if(!f.imageUrl){jt(v);return}Ue(v,""),v.setAttribute("src",f.imageUrl),v.setAttribute("alt",f.imageAlt||""),Br(v,"width",f.imageWidth),Br(v,"height",f.imageHeight),v.className=H.image,cn(v,f,"image")}},Hr=function(d,f){var v=Gt(),D=Ke();if(!(!v||!D)){if(f.toast){Br(v,"width",f.width),D.style.width="100%";var q=Ci();q&&D.insertBefore(q,po())}else Br(D,"width",f.width);Br(D,"padding",f.padding),f.color&&(D.style.color=f.color),f.background&&(D.style.background=f.background),jt(mo()),Gh(D,f)}},Gh=function(d,f){var v=f.showClass||{};d.className="".concat(H.popup," ").concat(wn(d)?v.popup:""),f.toast?(Ae([document.documentElement,document.body],H["toast-shown"]),Ae(d,H.toast)):Ae(d,H.modal),cn(d,f,"popup"),typeof f.customClass=="string"&&Ae(d,f.customClass),f.icon&&Ae(d,H["icon-".concat(f.icon)])},Wh=function(d,f){var v=Ds();if(v){var D=f.progressSteps,q=f.currentProgressStep;if(!D||D.length===0||q===void 0){jt(v);return}Ue(v),v.textContent="",q>=D.length&&on("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),D.forEach(function(ie,Me){var ke=Kh(ie);if(v.appendChild(ke),Me===q&&Ae(ke,H["active-progress-step"]),Me!==D.length-1){var Et=Eo(f);v.appendChild(Et)}})}},Kh=function(d){var f=document.createElement("li");return Ae(f,H["progress-step"]),an(f,d),f},Eo=function(d){var f=document.createElement("li");return Ae(f,H["progress-step-line"]),d.progressStepsDistance&&Br(f,"width",d.progressStepsDistance),f},Vv=function(d,f){var v=Za();v&&(Di(v),xs(v,f.title||f.titleText,"block"),f.title&&mu(f.title,v),f.titleText&&(v.innerText=f.titleText),cn(v,f,"title"))},Qh=function(d,f){Hr(d,f),Lh(d,f),Wh(d,f),Rs(d,f),Ps(d,f),Vv(d,f),Vh(d,f),ot(d,f),As(d,f),oc(d,f);var v=Ke();typeof f.didRender=="function"&&v&&f.didRender(v)},Lv=function(){return wn(Ke())},yr=function(){var d;return(d=Pn())===null||d===void 0?void 0:d.click()},jv=function(){var d;return(d=yt())===null||d===void 0?void 0:d.click()},Bv=function(){var d;return(d=vt())===null||d===void 0?void 0:d.click()},Zn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ns=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},Yh=function(d,f,v){Ns(d),f.toast||(d.keydownHandler=function(D){return _u(f,D,v)},d.keydownTarget=f.keydownListenerCapture?window:Ke(),d.keydownListenerCapture=f.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},xi=function(d,f){var v,D=Ts();if(D.length){d=d+f,d===D.length?d=0:d===-1&&(d=D.length-1),D[d].focus();return}(v=Ke())===null||v===void 0||v.focus()},Io=["ArrowRight","ArrowDown"],Zh=["ArrowLeft","ArrowUp"],_u=function(d,f,v){d&&(f.isComposing||f.keyCode===229||(d.stopKeydownPropagation&&f.stopPropagation(),f.key==="Enter"?ft(f,d):f.key==="Tab"?Uv(f):[].concat(Io,Zh).includes(f.key)?$v(f.key):f.key==="Escape"&&Xh(f,d,v)))},ft=function(d,f){if(Ei(f.allowEnterKey)){var v=vo(Ke(),f.input);if(d.target&&v&&d.target instanceof HTMLElement&&d.target.outerHTML===v.outerHTML){if(["textarea","file"].includes(f.input))return;yr(),d.preventDefault()}}},Uv=function(d){for(var f=d.target,v=Ts(),D=-1,q=0;q<v.length;q++)if(f===v[q]){D=q;break}d.shiftKey?xi(D,-1):xi(D,1),d.stopPropagation(),d.preventDefault()},$v=function(d){var f=go(),v=Pn(),D=yt(),q=vt();if(!(!f||!v||!D||!q)){var ie=[v,D,q];if(!(document.activeElement instanceof HTMLElement&&!ie.includes(document.activeElement))){var Me=Io.includes(d)?"nextElementSibling":"previousElementSibling",ke=document.activeElement;if(ke){for(var Et=0;Et<f.children.length;Et++){if(ke=ke[Me],!ke)return;if(ke instanceof HTMLButtonElement&&wn(ke))break}ke instanceof HTMLButtonElement&&ke.focus()}}}},Xh=function(d,f,v){Ei(f.allowEscapeKey)&&(d.preventDefault(),v(Zn.esc))},Ai={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Jh=function(){var d=Gt(),f=Array.from(document.body.children);f.forEach(function(v){v.contains(d)||(v.hasAttribute("aria-hidden")&&v.setAttribute("data-previous-aria-hidden",v.getAttribute("aria-hidden")||""),v.setAttribute("aria-hidden","true"))})},ks=function(){var d=Array.from(document.body.children);d.forEach(function(f){f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")||""),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},bu=typeof window<"u"&&!!window.GestureEvent,wr=function(){if(bu&&!Yn(document.body,H.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),Ae(document.body,H.iosfix),ef()}},ef=function(){var d=Gt();if(d){var f;d.ontouchstart=function(v){f=Hv(v)},d.ontouchmove=function(v){f&&(v.preventDefault(),v.stopPropagation())}}},Hv=function(d){var f=d.target,v=Gt(),D=Xa();return!v||!D||Os(d)||tf(d)?!1:f===v||!Mh(v)&&f instanceof HTMLElement&&f.tagName!=="INPUT"&&f.tagName!=="TEXTAREA"&&!(Mh(D)&&D.contains(f))},Os=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},tf=function(d){return d.touches&&d.touches.length>1},Eu=function(){if(Yn(document.body,H.iosfix)){var d=parseInt(document.body.style.top,10);$n(document.body,H.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},sc=function(){var d=document.createElement("div");d.className=H["scrollbar-measure"],document.body.appendChild(d);var f=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),f},Mi=null,ac=function(d){Mi===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(Mi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Mi+sc(),"px"))},qv=function(){Mi!==null&&(document.body.style.paddingRight="".concat(Mi,"px"),Mi=null)};function Iu(y,d,f,v){tc()?Cu(y,v):(Es(f).then(function(){return Cu(y,v)}),Ns(De)),bu?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),uu()&&(qv(),Eu(),ks()),Fs()}function Fs(){$n([document.documentElement,document.body],[H.shown,H["height-auto"],H["no-backdrop"],H["toast-shown"]])}function _r(y){y=rf(y);var d=Ai.swalPromiseResolve.get(this),f=nf(this);this.isAwaitingPromise?y.isDismissed||(Ri(this),d(y)):f&&d(y)}var nf=function(d){var f=Ke();if(!f)return!1;var v=tt.innerParams.get(d);if(!v||Yn(f,v.hideClass.popup))return!1;$n(f,v.showClass.popup),Ae(f,v.hideClass.popup);var D=Gt();return $n(D,v.showClass.backdrop),Ae(D,v.hideClass.backdrop),lc(d,f,v),!0};function cc(y){var d=Ai.swalPromiseReject.get(this);Ri(this),d&&d(y)}var Ri=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,tt.innerParams.get(d)||d._destroy())},rf=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},lc=function(d,f,v){var D=Gt(),q=gr&&Rh(f);typeof v.willClose=="function"&&v.willClose(f),q?of(d,f,D,v.returnFocus,v.didClose):Iu(d,D,v.returnFocus,v.didClose)},of=function(d,f,v,D,q){gr&&(De.swalCloseEventFinishedCallback=Iu.bind(null,d,v,D,q),f.addEventListener(gr,function(ie){ie.target===f&&(De.swalCloseEventFinishedCallback(),delete De.swalCloseEventFinishedCallback)}))},Cu=function(d,f){setTimeout(function(){typeof f=="function"&&f.bind(d.params)(),d._destroy&&d._destroy()})},kn=function(d){var f=Ke();if(f||new pf,f=Ke(),!!f){var v=Ci();tc()?jt(po()):sf(f,d),Ue(v),f.setAttribute("data-loading","true"),f.setAttribute("aria-busy","true"),f.focus()}},sf=function(d,f){var v=go(),D=Ci();!v||!D||(!f&&wn(Pn())&&(f=Pn()),Ue(v),f&&(jt(f),D.setAttribute("data-button-to-replace",f.className),v.insertBefore(D,f)),Ae([d,v],H.loading))},af=function(d,f){f.input==="select"||f.input==="radio"?uf(d,f):["text","email","number","tel","textarea"].some(function(v){return v===f.input})&&(Is(f.inputValue)||Cs(f.inputValue))&&(kn(Pn()),df(d,f))},cf=function(d,f){var v=d.getInput();if(!v)return null;switch(f.input){case"checkbox":return lf(v);case"radio":return uc(v);case"file":return bn(v);default:return f.inputAutoTrim?v.value.trim():v.value}},lf=function(d){return d.checked?1:0},uc=function(d){return d.checked?d.value:null},bn=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},uf=function(d,f){var v=Ke();if(v){var D=function(ie){f.input==="select"?Co(v,p(ie),f):f.input==="radio"&&l(v,p(ie),f)};Is(f.inputOptions)||Cs(f.inputOptions)?(kn(Pn()),Ii(f.inputOptions).then(function(q){d.hideLoading(),D(q)})):T(f.inputOptions)==="object"?D(f.inputOptions):Un("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(T(f.inputOptions)))}},df=function(d,f){var v=d.getInput();v&&(jt(v),Ii(f.inputValue).then(function(D){v.value=f.input==="number"?"".concat(parseFloat(D)||0):"".concat(D),Ue(v),v.focus(),d.hideLoading()}).catch(function(D){Un("Error in inputValue promise: ".concat(D)),v.value="",Ue(v),v.focus(),d.hideLoading()}))};function Co(y,d,f){var v=Nn(y,H.select);if(v){var D=function(ie,Me,ke){var Et=document.createElement("option");Et.value=ke,an(Et,Me),Et.selected=g(ke,f.inputValue),ie.appendChild(Et)};d.forEach(function(q){var ie=q[0],Me=q[1];if(Array.isArray(Me)){var ke=document.createElement("optgroup");ke.label=ie,ke.disabled=!1,v.appendChild(ke),Me.forEach(function(Et){return D(ke,Et[1],Et[0])})}else D(v,Me,ie)}),v.focus()}}function l(y,d,f){var v=Nn(y,H.radio);if(v){d.forEach(function(q){var ie=q[0],Me=q[1],ke=document.createElement("input"),Et=document.createElement("label");ke.type="radio",ke.name=H.radio,ke.value=ie,g(ie,f.inputValue)&&(ke.checked=!0);var Du=document.createElement("span");an(Du,Me),Du.className=H.label,Et.appendChild(ke),Et.appendChild(Du),v.appendChild(Et)});var D=v.querySelectorAll("input");D.length&&D[0].focus()}}var p=function y(d){var f=[];return d instanceof Map?d.forEach(function(v,D){var q=v;T(q)==="object"&&(q=y(q)),f.push([D,q])}):Object.keys(d).forEach(function(v){var D=d[v];T(D)==="object"&&(D=y(D)),f.push([v,D])}),f},g=function(d,f){return!!f&&f.toString()===d.toString()},_=void 0,O=function(d){var f=tt.innerParams.get(d);d.disableButtons(),f.input?Xe(d,"confirm"):qr(d,!0)},B=function(d){var f=tt.innerParams.get(d);d.disableButtons(),f.returnInputValueOnDeny?Xe(d,"deny"):Ne(d,!1)},Y=function(d,f){d.disableButtons(),f(Zn.cancel)},Xe=function(d,f){var v=tt.innerParams.get(d);if(!v.input){Un('The "input" parameter is needed to be set when using returnInputValueOn'.concat(bi(f)));return}var D=d.getInput(),q=cf(d,v);v.inputValidator?Bt(d,q,f):D&&!D.checkValidity()?(d.enableButtons(),d.showValidationMessage(v.validationMessage||D.validationMessage)):f==="deny"?Ne(d,q):qr(d,q)},Bt=function(d,f,v){var D=tt.innerParams.get(d);d.disableInput();var q=Promise.resolve().then(function(){return Ii(D.inputValidator(f,D.validationMessage))});q.then(function(ie){d.enableButtons(),d.enableInput(),ie?d.showValidationMessage(ie):v==="deny"?Ne(d,f):qr(d,f)})},Ne=function(d,f){var v=tt.innerParams.get(d||_);if(v.showLoaderOnDeny&&kn(yt()),v.preDeny){d.isAwaitingPromise=!0;var D=Promise.resolve().then(function(){return Ii(v.preDeny(f,v.validationMessage))});D.then(function(q){q===!1?(d.hideLoading(),Ri(d)):d.close({isDenied:!0,value:typeof q>"u"?f:q})}).catch(function(q){return $t(d||_,q)})}else d.close({isDenied:!0,value:f})},Ut=function(d,f){d.close({isConfirmed:!0,value:f})},$t=function(d,f){d.rejectPromise(f)},qr=function(d,f){var v=tt.innerParams.get(d||_);if(v.showLoaderOnConfirm&&kn(),v.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var D=Promise.resolve().then(function(){return Ii(v.preConfirm(f,v.validationMessage))});D.then(function(q){wn(mo())||q===!1?(d.hideLoading(),Ri(d)):Ut(d,typeof q>"u"?f:q)}).catch(function(q){return $t(d||_,q)})}else Ut(d,f)};function ln(){var y=tt.innerParams.get(this);if(y){var d=tt.domCache.get(this);jt(d.loader),tc()?y.icon&&Ue(po()):dc(d),$n([d.popup,d.actions],H.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var dc=function(d){var f=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));f.length?Ue(f[0],"inline-block"):wo()&&jt(d.actions)};function hc(){var y=tt.innerParams.get(this),d=tt.domCache.get(this);return d?vo(d.popup,y.input):null}function wC(y,d,f){var v=tt.domCache.get(y);d.forEach(function(D){v[D].disabled=f})}function _C(y,d){var f=Ke();if(!(!f||!y))if(y.type==="radio")for(var v=f.querySelectorAll('[name="'.concat(H.radio,'"]')),D=0;D<v.length;D++)v[D].disabled=d;else y.disabled=d}function bC(){wC(this,["confirmButton","denyButton","cancelButton"],!1)}function EC(){wC(this,["confirmButton","denyButton","cancelButton"],!0)}function IC(){_C(this.getInput(),!1)}function CC(){_C(this.getInput(),!0)}function DC(y){var d=tt.domCache.get(this),f=tt.innerParams.get(this);an(d.validationMessage,y),d.validationMessage.className=H["validation-message"],f.customClass&&f.customClass.validationMessage&&Ae(d.validationMessage,f.customClass.validationMessage),Ue(d.validationMessage);var v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",H["validation-message"]),jr(v),Ae(v,H.inputerror))}function TC(){var y=tt.domCache.get(this);y.validationMessage&&jt(y.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),$n(d,H.inputerror))}var fc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Pk=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Nk={},kk=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],SC=function(d){return Object.prototype.hasOwnProperty.call(fc,d)},xC=function(d){return Pk.indexOf(d)!==-1},AC=function(d){return Nk[d]},Ok=function(d){SC(d)||on('Unknown parameter "'.concat(d,'"'))},Fk=function(d){kk.includes(d)&&on('The parameter "'.concat(d,'" is incompatible with toasts'))},Vk=function(d){var f=AC(d);f&&Ya(d,f)},Lk=function(d){d.backdrop===!1&&d.allowOutsideClick&&on('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var f in d)Ok(f),d.toast&&Fk(f),Vk(f)};function MC(y){var d=Ke(),f=tt.innerParams.get(this);if(!d||Yn(d,f.hideClass.popup)){on("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var v=jk(y),D=Object.assign({},f,v);Qh(this,D),tt.innerParams.set(this,D),Object.defineProperties(this,{params:{value:Object.assign({},this.params,y),writable:!1,enumerable:!0}})}var jk=function(d){var f={};return Object.keys(d).forEach(function(v){xC(v)?f[v]=d[v]:on("Invalid parameter to update: ".concat(v))}),f};function RC(){var y=tt.domCache.get(this),d=tt.innerParams.get(this);if(!d){PC(this);return}y.popup&&De.swalCloseEventFinishedCallback&&(De.swalCloseEventFinishedCallback(),delete De.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),Bk(this)}var Bk=function(d){PC(d),delete d.params,delete De.keydownHandler,delete De.keydownTarget,delete De.currentInstance},PC=function(d){d.isAwaitingPromise?(zv(tt,d),d.isAwaitingPromise=!0):(zv(Ai,d),zv(tt,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},zv=function(d,f){for(var v in d)d[v].delete(f)},Uk=Object.freeze({__proto__:null,_destroy:RC,close:_r,closeModal:_r,closePopup:_r,closeToast:_r,disableButtons:EC,disableInput:CC,disableLoading:ln,enableButtons:bC,enableInput:IC,getInput:hc,handleAwaitingPromise:Ri,hideLoading:ln,rejectPromise:cc,resetValidationMessage:TC,showValidationMessage:DC,update:MC}),$k=function(d,f,v){d.toast?Hk(d,f,v):(zk(f),Gk(f),Wk(d,f,v))},Hk=function(d,f,v){f.popup.onclick=function(){d&&(qk(d)||d.timer||d.input)||v(Zn.close)}},qk=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},hf=!1,zk=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(f){d.container.onmouseup=function(){},f.target===d.container&&(hf=!0)}}},Gk=function(d){d.container.onmousedown=function(f){f.target===d.container&&f.preventDefault(),d.popup.onmouseup=function(v){d.popup.onmouseup=function(){},(v.target===d.popup||v.target instanceof HTMLElement&&d.popup.contains(v.target))&&(hf=!0)}}},Wk=function(d,f,v){f.container.onclick=function(D){if(hf){hf=!1;return}D.target===f.container&&Ei(d.allowOutsideClick)&&v(Zn.backdrop)}},Kk=function(d){return T(d)==="object"&&d.jquery},NC=function(d){return d instanceof Element||Kk(d)},Qk=function(d){var f={};return T(d[0])==="object"&&!NC(d[0])?Object.assign(f,d[0]):["title","html","icon"].forEach(function(v,D){var q=d[D];typeof q=="string"||NC(q)?f[v]=q:q!==void 0&&Un("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(T(q)))}),f};function Yk(){for(var y=this,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return m(y,f)}function Zk(y){var d=function(f){function v(){return a(this,v),o(this,v,arguments)}return F(v,f),b(v,[{key:"_main",value:function(q,ie){return A(V(v.prototype),"_main",this).call(this,q,Object.assign({},y,ie))}}])}(this);return d}var Xk=function(){return De.timeout&&De.timeout.getTimerLeft()},kC=function(){if(De.timeout)return Ph(),De.timeout.stop()},OC=function(){if(De.timeout){var d=De.timeout.start();return _o(d),d}},Jk=function(){var d=De.timeout;return d&&(d.running?kC():OC())},eO=function(d){if(De.timeout){var f=De.timeout.increase(d);return _o(f,!0),f}},tO=function(){return!!(De.timeout&&De.timeout.isRunning())},FC=!1,Gv={};function nO(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Gv[y]=this,FC||(document.body.addEventListener("click",rO),FC=!0)}var rO=function(d){for(var f=d.target;f&&f!==document;f=f.parentNode)for(var v in Gv){var D=f.getAttribute(v);if(D){Gv[v].fire({template:D});return}}},iO=Object.freeze({__proto__:null,argsToParams:Qk,bindClickHandler:nO,clickCancel:Bv,clickConfirm:yr,clickDeny:jv,enableLoading:kn,fire:Yk,getActions:go,getCancelButton:vt,getCloseButton:ec,getConfirmButton:Pn,getContainer:Gt,getDenyButton:yt,getFocusableElements:Ts,getFooter:xh,getHtmlContainer:Xa,getIcon:po,getIconContent:Th,getImage:Sh,getInputLabel:Ja,getLoader:Ci,getPopup:Ke,getProgressSteps:Ds,getTimerLeft:Xk,getTimerProgressBar:Lr,getTitle:Za,getValidationMessage:mo,increaseTimer:eO,isDeprecatedParameter:AC,isLoading:du,isTimerRunning:tO,isUpdatableParameter:xC,isValidParameter:SC,isVisible:Lv,mixin:Zk,resumeTimer:OC,showLoading:kn,stopTimer:kC,toggleTimer:Jk}),oO=function(){function y(d,f){a(this,y),this.callback=d,this.remaining=f,this.running=!1,this.start()}return b(y,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(f){var v=this.running;return v&&this.stop(),this.remaining+=f,v&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),VC=["swal-title","swal-html","swal-footer"],sO=function(d){var f=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!f)return{};var v=f.content;pO(v);var D=Object.assign(aO(v),cO(v),lO(v),uO(v),dO(v),hO(v),fO(v,VC));return D},aO=function(d){var f={},v=Array.from(d.querySelectorAll("swal-param"));return v.forEach(function(D){Vs(D,["name","value"]);var q=D.getAttribute("name"),ie=D.getAttribute("value");typeof fc[q]=="boolean"?f[q]=ie!=="false":T(fc[q])==="object"?f[q]=JSON.parse(ie):f[q]=ie}),f},cO=function(d){var f={},v=Array.from(d.querySelectorAll("swal-function-param"));return v.forEach(function(D){var q=D.getAttribute("name"),ie=D.getAttribute("value");f[q]=new Function("return ".concat(ie))()}),f},lO=function(d){var f={},v=Array.from(d.querySelectorAll("swal-button"));return v.forEach(function(D){Vs(D,["type","color","aria-label"]);var q=D.getAttribute("type");f["".concat(q,"ButtonText")]=D.innerHTML,f["show".concat(bi(q),"Button")]=!0,D.hasAttribute("color")&&(f["".concat(q,"ButtonColor")]=D.getAttribute("color")),D.hasAttribute("aria-label")&&(f["".concat(q,"ButtonAriaLabel")]=D.getAttribute("aria-label"))}),f},uO=function(d){var f={},v=d.querySelector("swal-image");return v&&(Vs(v,["src","width","height","alt"]),v.hasAttribute("src")&&(f.imageUrl=v.getAttribute("src")||void 0),v.hasAttribute("width")&&(f.imageWidth=v.getAttribute("width")||void 0),v.hasAttribute("height")&&(f.imageHeight=v.getAttribute("height")||void 0),v.hasAttribute("alt")&&(f.imageAlt=v.getAttribute("alt")||void 0)),f},dO=function(d){var f={},v=d.querySelector("swal-icon");return v&&(Vs(v,["type","color"]),v.hasAttribute("type")&&(f.icon=v.getAttribute("type")),v.hasAttribute("color")&&(f.iconColor=v.getAttribute("color")),f.iconHtml=v.innerHTML),f},hO=function(d){var f={},v=d.querySelector("swal-input");v&&(Vs(v,["type","label","placeholder","value"]),f.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(f.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(f.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(f.inputValue=v.getAttribute("value")));var D=Array.from(d.querySelectorAll("swal-input-option"));return D.length&&(f.inputOptions={},D.forEach(function(q){Vs(q,["value"]);var ie=q.getAttribute("value"),Me=q.innerHTML;f.inputOptions[ie]=Me})),f},fO=function(d,f){var v={};for(var D in f){var q=f[D],ie=d.querySelector(q);ie&&(Vs(ie,[]),v[q.replace(/^swal-/,"")]=ie.innerHTML.trim())}return v},pO=function(d){var f=VC.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(v){var D=v.tagName.toLowerCase();f.includes(D)||on("Unrecognized element <".concat(D,">"))})},Vs=function(d,f){Array.from(d.attributes).forEach(function(v){f.indexOf(v.name)===-1&&on(['Unrecognized attribute "'.concat(v.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(f.length?"Allowed attributes are: ".concat(f.join(", ")):"To set the value, use HTML within the element.")])})},LC=10,mO=function(d){var f=Gt(),v=Ke();typeof d.willOpen=="function"&&d.willOpen(v);var D=window.getComputedStyle(document.body),q=D.overflowY;wO(f,v,d),setTimeout(function(){vO(f,v)},LC),uu()&&(yO(f,d.scrollbarPadding,q),Jh()),!tc()&&!De.previousActiveElement&&(De.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(v)}),$n(f,H["no-transition"])},gO=function y(d){var f=Ke();if(!(d.target!==f||!gr)){var v=Gt();f.removeEventListener(gr,y),v.style.overflowY="auto"}},vO=function(d,f){gr&&Rh(f)?(d.style.overflowY="hidden",f.addEventListener(gr,gO)):d.style.overflowY="auto"},yO=function(d,f,v){wr(),f&&v!=="hidden"&&ac(v),setTimeout(function(){d.scrollTop=0})},wO=function(d,f,v){Ae(d,v.showClass.backdrop),v.animation?(f.style.setProperty("opacity","0","important"),Ue(f,"grid"),setTimeout(function(){Ae(f,v.showClass.popup),f.style.removeProperty("opacity")},LC)):Ue(f,"grid"),Ae([document.documentElement,document.body],H.shown),v.heightAuto&&v.backdrop&&!v.toast&&Ae([document.documentElement,document.body],H["height-auto"])},jC={email:function(d,f){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid email address")},url:function(d,f){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid URL")}};function _O(y){y.inputValidator||(y.input==="email"&&(y.inputValidator=jC.email),y.input==="url"&&(y.inputValidator=jC.url))}function bO(y){(!y.target||typeof y.target=="string"&&!document.querySelector(y.target)||typeof y.target!="string"&&!y.target.appendChild)&&(on('Target parameter is not valid, defaulting to "body"'),y.target="body")}function EO(y){_O(y),y.showLoaderOnConfirm&&!y.preConfirm&&on(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),bO(y),typeof y.title=="string"&&(y.title=y.title.split(`
`).join("<br />")),Oh(y)}var zr,ff=new WeakMap,At=function(){function y(){if(a(this,y),u(this,ff,void 0),!(typeof window>"u")){zr=this;for(var d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];var D=Object.freeze(this.constructor.argsToParams(f));this.params=D,this.isAwaitingPromise=!1,h(ff,this,this._main(zr.params))}}return b(y,[{key:"_main",value:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Lk(Object.assign({},v,f)),De.currentInstance){var D=Ai.swalPromiseResolve.get(De.currentInstance),q=De.currentInstance.isAwaitingPromise;De.currentInstance._destroy(),q||D({isDismissed:!0}),uu()&&ks()}De.currentInstance=zr;var ie=CO(f,v);EO(ie),Object.freeze(ie),De.timeout&&(De.timeout.stop(),delete De.timeout),clearTimeout(De.restoreFocusTimeout);var Me=DO(zr);return Qh(zr,ie),tt.innerParams.set(zr,ie),IO(zr,Me,ie)}},{key:"then",value:function(f){return c(ff,this).then(f)}},{key:"finally",value:function(f){return c(ff,this).finally(f)}}])}(),IO=function(d,f,v){return new Promise(function(D,q){var ie=function(ke){d.close({isDismissed:!0,dismiss:ke})};Ai.swalPromiseResolve.set(d,D),Ai.swalPromiseReject.set(d,q),f.confirmButton.onclick=function(){O(d)},f.denyButton.onclick=function(){B(d)},f.cancelButton.onclick=function(){Y(d,ie)},f.closeButton.onclick=function(){ie(Zn.close)},$k(v,f,ie),Yh(De,v,ie),af(d,v),mO(v),TO(De,v,ie),SO(f,v),setTimeout(function(){f.container.scrollTop=0})})},CO=function(d,f){var v=sO(d),D=Object.assign({},fc,f,v,d);return D.showClass=Object.assign({},fc.showClass,D.showClass),D.hideClass=Object.assign({},fc.hideClass,D.hideClass),D.animation===!1&&(D.showClass={backdrop:"swal2-noanimation"},D.hideClass={}),D},DO=function(d){var f={popup:Ke(),container:Gt(),actions:go(),confirmButton:Pn(),denyButton:yt(),cancelButton:vt(),loader:Ci(),closeButton:ec(),validationMessage:mo(),progressSteps:Ds()};return tt.domCache.set(d,f),f},TO=function(d,f,v){var D=Lr();jt(D),f.timer&&(d.timeout=new oO(function(){v("timer"),delete d.timeout},f.timer),f.timerProgressBar&&(Ue(D),cn(D,f,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&_o(f.timer)})))},SO=function(d,f){if(!f.toast){if(!Ei(f.allowEnterKey)){AO();return}xO(d,f)||xi(-1,1)}},xO=function(d,f){return f.focusDeny&&wn(d.denyButton)?(d.denyButton.focus(),!0):f.focusCancel&&wn(d.cancelButton)?(d.cancelButton.focus(),!0):f.focusConfirm&&wn(d.confirmButton)?(d.confirmButton.focus(),!0):!1},AO=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var BC=new Date,UC=localStorage.getItem("swal-initiation");UC?(BC.getTime()-Date.parse(UC))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(function(){y.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(BC))}At.prototype.disableButtons=EC,At.prototype.enableButtons=bC,At.prototype.getInput=hc,At.prototype.disableInput=CC,At.prototype.enableInput=IC,At.prototype.hideLoading=ln,At.prototype.disableLoading=ln,At.prototype.showValidationMessage=DC,At.prototype.resetValidationMessage=TC,At.prototype.close=_r,At.prototype.closePopup=_r,At.prototype.closeModal=_r,At.prototype.closeToast=_r,At.prototype.rejectPromise=cc,At.prototype.update=MC,At.prototype._destroy=RC,Object.assign(At,iO),Object.keys(Uk).forEach(function(y){At[y]=function(){if(zr&&zr[y]){var d;return(d=zr)[y].apply(d,arguments)}return null}}),At.DismissReason=Zn,At.version="11.11.1";var pf=At;return pf.default=pf,pf});typeof ii<"u"&&ii.Sweetalert2&&(ii.swal=ii.sweetAlert=ii.Swal=ii.SweetAlert=ii.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var Jv=null;var Xv=1,ey=Symbol("SIGNAL");function ze(t){let e=Jv;return Jv=t,e}function KC(){return Jv}var ty={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function RO(t){if(!(sy(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Xv)){if(!t.producerMustRecompute(t)&&!ry(t)){t.dirty=!1,t.lastCleanEpoch=Xv;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Xv}}function ny(t){return t&&(t.nextProducerIndex=0),ze(t)}function QC(t,e){if(ze(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sy(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)oy(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ry(t){ay(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(RO(n),r!==n.version))return!0}return!1}function iy(t){if(ay(t),sy(t))for(let e=0;e<t.producerNode.length;e++)oy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function oy(t,e){if(PO(t),t.liveConsumerNode.length===1&&NO(t))for(let r=0;r<t.producerNode.length;r++)oy(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ay(i),i.producerIndexOfThis[r]=e}}function sy(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ay(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function PO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function NO(t){return t.producerNode!==void 0}function kO(){throw new Error}var OO=kO;function YC(t){OO=t}function we(t){return typeof t=="function"}function pc(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bf=pc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function js(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var It=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(we(r))try{r()}catch(o){e=o instanceof bf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ZC(o)}catch(s){e=e??[],s instanceof bf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ZC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&js(n,e)}remove(e){let{_finalizers:n}=this;n&&js(n,e),e instanceof t&&e._removeParent(this)}};It.EMPTY=(()=>{let t=new It;return t.closed=!0,t})();var cy=It.EMPTY;function Ef(t){return t instanceof It||t&&"closed"in t&&we(t.remove)&&we(t.add)&&we(t.unsubscribe)}function ZC(t){we(t)?t():t.unsubscribe()}var Er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mc={setTimeout(t,e,...n){let{delegate:r}=mc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=mc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function If(t){mc.setTimeout(()=>{let{onUnhandledError:e}=Er;if(e)e(t);else throw t})}function xu(){}var XC=ly("C",void 0,void 0);function JC(t){return ly("E",void 0,t)}function eD(t){return ly("N",t,void 0)}function ly(t,e,n){return{kind:t,value:e,error:n}}var Bs=null;function gc(t){if(Er.useDeprecatedSynchronousErrorHandling){let e=!Bs;if(e&&(Bs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bs;if(Bs=null,n)throw r}}else t()}function tD(t){Er.useDeprecatedSynchronousErrorHandling&&Bs&&(Bs.errorThrown=!0,Bs.error=t)}var Us=class extends It{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ef(e)&&e.add(this)):this.destination=LO}static create(e,n,r){return new Pi(e,n,r)}next(e){this.isStopped?dy(eD(e),this):this._next(e)}error(e){this.isStopped?dy(JC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dy(XC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FO=Function.prototype.bind;function uy(t,e){return FO.call(t,e)}var hy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Cf(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Cf(r)}else Cf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Cf(n)}}},Pi=class extends Us{constructor(e,n,r){super();let i;if(we(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Er.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&uy(e.next,o),error:e.error&&uy(e.error,o),complete:e.complete&&uy(e.complete,o)}):i=e}this.destination=new hy(i)}};function Cf(t){Er.useDeprecatedSynchronousErrorHandling?tD(t):If(t)}function VO(t){throw t}function dy(t,e){let{onStoppedNotification:n}=Er;n&&mc.setTimeout(()=>n(t,e))}var LO={closed:!0,next:xu,error:VO,complete:xu};var vc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function En(t){return t}function fy(...t){return py(t)}function py(t){return t.length===0?En:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=BO(n)?n:new Pi(n,r,i);return gc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=nD(r),new r((i,o)=>{let s=new Pi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vc](){return this}pipe(...n){return py(n)(this)}toPromise(n){return n=nD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function nD(t){var e;return(e=t??Er.Promise)!==null&&e!==void 0?e:Promise}function jO(t){return t&&we(t.next)&&we(t.error)&&we(t.complete)}function BO(t){return t&&t instanceof Us||jO(t)&&Ef(t)}function my(t){return we(t?.lift)}function Ee(t){return e=>{if(my(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(t,e,n,r,i){return new gy(t,e,n,r,i)}var gy=class extends Us{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yc(){return Ee((t,e)=>{let n=null;t._refCount++;let r=Ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var wc=class extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,my(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new It;let n=this.getSubject();e.add(this.source.subscribe(Ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=It.EMPTY)}return e}refCount(){return yc()(this)}};var rD=pc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var wt=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Df(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rD}next(n){gc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cy:(this.currentObservers=null,o.push(n),new It(()=>{this.currentObservers=null,js(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return t.create=(e,n)=>new Df(e,n),t})(),Df=class extends wt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:cy}};var Ht=class extends wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Au={now(){return(Au.delegate||Date).now()},delegate:void 0};var Tf=class extends wt{constructor(e=1/0,n=1/0,r=Au){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Sf=class extends It{constructor(e,n){super()}schedule(e,n=0){return this}};var Mu={setInterval(t,e,...n){let{delegate:r}=Mu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Mu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _c=class extends Sf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Mu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Mu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,js(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var bc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};bc.now=Au.now;var Ec=class extends bc{constructor(e,n=bc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var $s=new Ec(_c);var xf=class extends _c{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Af=class extends Ec{};var vy=new Af(xf);var In=new Te(t=>t.complete());function iD(t){return t&&we(t.schedule)}function yy(t){return t[t.length-1]}function Mf(t){return we(yy(t))?t.pop():void 0}function Wr(t){return iD(yy(t))?t.pop():void 0}function oD(t,e){return typeof yy(t)=="number"?t.pop():e}var Rf=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pf(t){return we(t?.then)}function Nf(t){return we(t[vc])}function kf(t){return Symbol.asyncIterator&&we(t?.[Symbol.asyncIterator])}function Of(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ff=UO();function Vf(t){return we(t?.[Ff])}function Lf(t){return HC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mf(n.read());if(i)return yield mf(void 0);yield yield mf(r)}}finally{n.releaseLock()}})}function jf(t){return we(t?.getReader)}function lt(t){if(t instanceof Te)return t;if(t!=null){if(Nf(t))return $O(t);if(Rf(t))return HO(t);if(Pf(t))return qO(t);if(kf(t))return sD(t);if(Vf(t))return zO(t);if(jf(t))return GO(t)}throw Of(t)}function $O(t){return new Te(e=>{let n=t[vc]();if(we(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function HO(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function qO(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,If)})}function zO(t){return new Te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function sD(t){return new Te(e=>{WO(t,e).catch(n=>e.error(n))})}function GO(t){return sD(Lf(t))}function WO(t,e){var n,r,i,o;return $C(this,void 0,void 0,function*(){try{for(n=qC(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function On(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Fn(t,e=0){return Ee((n,r)=>{n.subscribe(Ie(r,i=>On(r,t,()=>r.next(i),e),()=>On(r,t,()=>r.complete(),e),i=>On(r,t,()=>r.error(i),e)))})}function Jn(t,e=0){return Ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function aD(t,e){return lt(t).pipe(Jn(e),Fn(e))}function cD(t,e){return lt(t).pipe(Jn(e),Fn(e))}function lD(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function uD(t,e){return new Te(n=>{let r;return On(n,e,()=>{r=t[Ff](),On(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>we(r?.return)&&r.return()})}function Bf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{On(n,e,()=>{let r=t[Symbol.asyncIterator]();On(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function dD(t,e){return Bf(Lf(t),e)}function hD(t,e){if(t!=null){if(Nf(t))return aD(t,e);if(Rf(t))return lD(t,e);if(Pf(t))return cD(t,e);if(kf(t))return Bf(t,e);if(Vf(t))return uD(t,e);if(jf(t))return dD(t,e)}throw Of(t)}function Oe(t,e){return e?hD(t,e):lt(t)}function le(...t){let e=Wr(t);return Oe(t,e)}function Ic(t,e){let n=we(t)?t:()=>t,r=i=>i.error(n());return new Te(e?i=>e.schedule(r,0,i):r)}function wy(t){return!!t&&(t instanceof Te||we(t.lift)&&we(t.subscribe))}var Ni=pc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(t,e){return Ee((n,r)=>{let i=0;n.subscribe(Ie(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:KO}=Array;function QO(t,e){return KO(e)?t(...e):t(e)}function Uf(t){return pe(e=>QO(t,e))}var{isArray:YO}=Array,{getPrototypeOf:ZO,prototype:XO,keys:JO}=Object;function $f(t){if(t.length===1){let e=t[0];if(YO(e))return{args:e,keys:null};if(eF(e)){let n=JO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function eF(t){return t&&typeof t=="object"&&ZO(t)===XO}function Hf(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qf(...t){let e=Wr(t),n=Mf(t),{args:r,keys:i}=$f(t);if(r.length===0)return Oe([],e);let o=new Te(tF(r,e,i?s=>Hf(i,s):En));return n?o.pipe(Uf(n)):o}function tF(t,e,n=En){return r=>{fD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)fD(e,()=>{let u=Oe(t[c],e),h=!1;u.subscribe(Ie(r,m=>{o[c]=m,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fD(t,e,n){t?On(n,t,e):e()}function pD(t,e,n,r,i,o,s,a){let c=[],u=0,h=0,m=!1,w=()=>{m&&!c.length&&!u&&e.complete()},b=V=>u<r?A(V):c.push(V),A=V=>{o&&e.next(V),u++;let F=!1;lt(n(V,h++)).subscribe(Ie(e,W=>{i?.(W),o?b(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;c.length&&u<r;){let W=c.shift();s?On(e,s,()=>A(W)):A(W)}w()}catch(W){e.error(W)}}))};return t.subscribe(Ie(e,b,()=>{m=!0,w()})),()=>{a?.()}}function qt(t,e,n=1/0){return we(e)?qt((r,i)=>pe((o,s)=>e(r,o,i,s))(lt(t(r,i))),n):(typeof e=="number"&&(n=e),Ee((r,i)=>pD(r,i,t,n)))}function Ru(t=1/0){return qt(En,t)}function mD(){return Ru(1)}function Cc(...t){return mD()(Oe(t,Wr(t)))}function zf(t){return new Te(e=>{lt(t()).subscribe(e)})}function _y(...t){let e=Mf(t),{args:n,keys:r}=$f(t),i=new Te(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let m=!1;lt(n[h]).subscribe(Ie(o,w=>{m||(m=!0,u--),a[h]=w},()=>c--,void 0,()=>{(!c||!m)&&(u||o.next(r?Hf(r,a):a),o.complete())}))}});return e?i.pipe(Uf(e)):i}function by(...t){let e=Wr(t),n=oD(t,1/0),r=t;return r.length?r.length===1?lt(r[0]):Ru(n)(Oe(r,e)):In}function un(t,e){return Ee((n,r)=>{let i=0;n.subscribe(Ie(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Do(t){return Ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ie(n,void 0,void 0,s=>{o=lt(t(s,Do(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function gD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ie(s,h=>{let m=u++;c=a?t(c,h,m):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Dc(t,e){return we(e)?qt(t,e,1):qt(t,1)}function Ey(t,e=$s){return Ee((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function c(){let u=s+t,h=e.now();if(h<u){i=this.schedule(void 0,u-h),r.add(i);return}a()}n.subscribe(Ie(r,u=>{o=u,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function To(t){return Ee((e,n)=>{let r=!1;e.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ki(t){return t<=0?()=>In:Ee((e,n)=>{let r=0;e.subscribe(Ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Iy(t){return pe(()=>t)}function Cy(t,e=En){return t=t??nF,Ee((n,r)=>{let i,o=!0;n.subscribe(Ie(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function nF(t,e){return t===e}function Gf(t=rF){return Ee((e,n)=>{let r=!1;e.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rF(){return new Ni}function Pu(t){return Ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function er(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,o)=>t(i,o,r)):En,ki(1),n?To(e):Gf(()=>new Ni))}function Tc(t){return t<=0?()=>In:Ee((e,n)=>{let r=[];e.subscribe(Ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Dy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,o)=>t(i,o,r)):En,Tc(1),n?To(e):Gf(()=>new Ni))}function Nu(){return Ee((t,e)=>{let n,r=!1;t.subscribe(Ie(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Hs(t,e){return Ee(gD(t,e,arguments.length>=2,!0))}function vD(t={}){let{connector:e=()=>new wt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,h=!1,m=!1,w=()=>{a?.unsubscribe(),a=void 0},b=()=>{w(),s=c=void 0,h=m=!1},A=()=>{let V=s;b(),V?.unsubscribe()};return Ee((V,F)=>{u++,!m&&!h&&w();let W=c=c??e();F.add(()=>{u--,u===0&&!m&&!h&&(a=Ty(A,i))}),W.subscribe(F),!s&&u>0&&(s=new Pi({next:Z=>W.next(Z),error:Z=>{m=!0,w(),a=Ty(b,n,Z),W.error(Z)},complete:()=>{h=!0,w(),a=Ty(b,r),W.complete()}}),lt(V).subscribe(s))})(o)}}function Ty(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Pi({next:()=>{r.unsubscribe(),t()}});return lt(e(...n)).subscribe(r)}function Wf(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,vD({connector:()=>new Tf(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qs(...t){let e=Wr(t);return Ee((n,r)=>{(e?Cc(t,n,e):Cc(t,n)).subscribe(r)})}function Qe(t,e){return Ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ie(r,c=>{i?.unsubscribe();let u=0,h=o++;lt(t(c,h)).subscribe(i=Ie(r,m=>r.next(e?e(c,m,h,u++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Kf(t,e){return we(e)?Qe(()=>t,e):Qe(()=>t)}function Sy(t){return Ee((e,n)=>{lt(t).subscribe(Ie(n,()=>n.complete(),xu)),!n.closed&&e.subscribe(n)})}function Nt(t,e,n){let r=we(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ie(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):En}var nT="https://g.co/ng/security#xss",ve=class extends Error{constructor(e,n){super(Sw(e,n)),this.code=e}};function Sw(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function qu(t){return{toString:t}.toString()}var Qf="__parameters__";function iF(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rT(t,e,n){return qu(()=>{let r=iF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let m=c.hasOwnProperty(Qf)?c[Qf]:Object.defineProperty(c,Qf,{value:[]})[Qf];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Yr=globalThis;function st(t){for(let e in t)if(t[e]===st)return e;throw Error("Could not find renamed property on target object.")}function oF(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Dn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Dn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var sF=st({__forward_ref__:st});function Sr(t){return t.__forward_ref__=Sr,t.toString=function(){return Dn(this())},t}function Cn(t){return iT(t)?t():t}function iT(t){return typeof t=="function"&&t.hasOwnProperty(sF)&&t.__forward_ref__===Sr}function de(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tp(t){return wD(t,sT)||wD(t,aT)}function oT(t){return Tp(t)!==null}function wD(t,e){return t.hasOwnProperty(e)?t[e]:null}function aF(t){let e=t&&(t[sT]||t[aT]);return e||null}function _D(t){return t&&(t.hasOwnProperty(bD)||t.hasOwnProperty(cF))?t[bD]:null}var sT=st({\u0275prov:st}),bD=st({\u0275inj:st}),aT=st({ngInjectableDef:st}),cF=st({ngInjectorDef:st}),ae=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cT(t){return t&&!!t.\u0275providers}var lF=st({\u0275cmp:st}),uF=st({\u0275dir:st}),dF=st({\u0275pipe:st}),hF=st({\u0275mod:st}),rp=st({\u0275fac:st}),ku=st({__NG_ELEMENT_ID__:st}),ED=st({__NG_ENV_ID__:st});function Pc(t){return typeof t=="string"?t:t==null?"":String(t)}function fF(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Pc(t)}function pF(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ve(-200,t)}function xw(t,e){throw new ve(-201,!1)}var xe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(xe||{}),$y;function lT(){return $y}function Vn(t){let e=$y;return $y=t,e}function uT(t,e,n){let r=Tp(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&xe.Optional)return null;if(e!==void 0)return e;xw(t,"Injector")}var mF={},Ou=mF,Hy="__NG_DI_FLAG__",ip="ngTempTokenPath",gF="ngTokenPath",vF=/\n/gm,yF="\u0275",ID="__source",Mc;function wF(){return Mc}function So(t){let e=Mc;return Mc=t,e}function _F(t,e=xe.Default){if(Mc===void 0)throw new ve(-203,!1);return Mc===null?uT(t,void 0,e):Mc.get(t,e&xe.Optional?null:void 0,e)}function Q(t,e=xe.Default){return(lT()||_F)(Cn(t),e)}function oe(t,e=xe.Default){return Q(t,Sp(e))}function Sp(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qy(t){let e=[];for(let n=0;n<t.length;n++){let r=Cn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ve(900,!1);let i,o=xe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=bF(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Q(i,o))}else e.push(Q(r))}return e}function dT(t,e){return t[Hy]=e,t.prototype[Hy]=e,t}function bF(t){return t[Hy]}function EF(t,e,n,r){let i=t[ip];throw e[ID]&&i.unshift(e[ID]),t.message=IF(`
`+t.message,i,n,r),t[gF]=i,t[ip]=null,t}function IF(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==yF?t.slice(2):t;let i=Dn(e);if(Array.isArray(e))i=e.map(Dn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vF,`
  `)}`}var zu=dT(rT("Optional"),8);var hT=dT(rT("SkipSelf"),4);function Ws(t,e){let n=t.hasOwnProperty(rp);return n?t[rp]:null}function Aw(t,e){t.forEach(n=>Array.isArray(n)?Aw(n,e):e(n))}function fT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function op(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CF(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function DF(t,e,n){let r=Gu(t,e);return r>=0?t[r|1]=n:(r=~r,CF(t,r,e,n)),r}function xy(t,e){let n=Gu(t,e);if(n>=0)return t[n|1]}function Gu(t,e){return TF(t,e,1)}function TF(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Nc={},tr=[],kc=new ae(""),pT=new ae("",-1),mT=new ae(""),sp=class{get(e,n=Ou){if(n===Ou){let r=new Error(`NullInjectorError: No provider for ${Dn(e)}!`);throw r.name="NullInjectorError",r}return n}},gT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gT||{}),Zr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zr||{}),Oc=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Oc||{});function SF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function zy(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];AF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function xF(t){return t===3||t===4||t===6}function AF(t){return t.charCodeAt(0)===64}function Fu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?CD(t,n,i,null,e[++r]):CD(t,n,i,null,null))}}return t}function CD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var vT="ng-template";function MF(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Mw(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Mw(t){return t.type===4&&t.value!==vT}function RF(t,e,n){let r=t.type===4&&!n?vT:t.value;return e===r}function PF(t,e,n){let r=4,i=t.attrs,o=i!==null?OF(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ir(r)&&!Ir(c))return!1;if(s&&Ir(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!RF(t,c,n)||c===""&&e.length===1){if(Ir(r))return!1;s=!0}}else if(r&8){if(i===null||!MF(t,i,c,n)){if(Ir(r))return!1;s=!0}}else{let u=e[++a],h=NF(c,i,Mw(t),n);if(h===-1){if(Ir(r))return!1;s=!0;continue}if(u!==""){let m;if(h>o?m="":m=i[h+1].toLowerCase(),r&2&&u!==m){if(Ir(r))return!1;s=!0}}}}return Ir(r)||s}function Ir(t){return(t&1)===0}function NF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return FF(e,t)}function kF(t,e,n=!1){for(let r=0;r<e.length;r++)if(PF(t,e[r],n))return!0;return!1}function OF(t){for(let e=0;e<t.length;e++){let n=t[e];if(xF(n))return e}return t.length}function FF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function DD(t,e){return t?":not("+e.trim()+")":e}function VF(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ir(s)&&(e+=DD(o,i),i=""),r=s,o=o||!Ir(r);n++}return i!==""&&(e+=DD(o,i)),e}function LF(t){return t.map(VF).join(",")}function jF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ir(i))break;i=o}r++}return{attrs:e,classes:n}}function rt(t){return qu(()=>{let e=ET(t),n=je(ee({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zr.Emulated,styles:t.styles||tr,_:null,schemas:t.schemas||null,tView:null,id:""});IT(n);let r=t.dependencies;return n.directiveDefs=SD(r,!1),n.pipeDefs=SD(r,!0),n.id=$F(n),n})}function BF(t){return Ks(t)||yT(t)}function UF(t){return t!==null}function en(t){return qu(()=>({type:t.type,bootstrap:t.bootstrap||tr,declarations:t.declarations||tr,imports:t.imports||tr,exports:t.exports||tr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TD(t,e){if(t==null)return Nc;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Oc.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Oc.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Dt(t){return qu(()=>{let e=ET(t);return IT(e),e})}function Rw(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ks(t){return t[lF]||null}function yT(t){return t[uF]||null}function wT(t){return t[dF]||null}function _T(t){let e=Ks(t)||yT(t)||wT(t);return e!==null?e.standalone:!1}function bT(t,e){let n=t[hF]||null;if(!n&&e===!0)throw new Error(`Type ${Dn(t)} does not have '\u0275mod' property.`);return n}function ET(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Nc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||tr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TD(t.inputs,e),outputs:TD(t.outputs),debugInfo:null}}function IT(t){t.features?.forEach(e=>e(t))}function SD(t,e){if(!t)return null;let n=e?wT:BF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(UF)}function $F(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pw(t){return{\u0275providers:t}}function Nw(...t){return{\u0275providers:CT(!0,t),\u0275fromNgModule:!0}}function CT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Aw(e,s=>{let a=s;Gy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&DT(i,o),n}function DT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];kw(i,o=>{e(o,r)})}}function Gy(t,e,n,r){if(t=Cn(t),!t)return!1;let i=null,o=_D(t),s=!o&&Ks(t);if(!o&&!s){let c=t.ngModule;if(o=_D(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Gy(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Aw(o.imports,h=>{Gy(h,e,n,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&DT(u,e)}if(!a){let u=Ws(i)||(()=>new i);e({provide:i,useFactory:u,deps:tr},i),e({provide:mT,useValue:i,multi:!0},i),e({provide:kc,useValue:()=>Q(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;kw(c,h=>{e(h,u)})}}else return!1;return i!==t&&t.providers!==void 0}function kw(t,e){for(let n of t)cT(n)&&(n=n.\u0275providers),Array.isArray(n)?kw(n,e):e(n)}var HF=st({provide:String,useValue:st});function TT(t){return t!==null&&typeof t=="object"&&HF in t}function qF(t){return!!(t&&t.useExisting)}function zF(t){return!!(t&&t.useFactory)}function Fc(t){return typeof t=="function"}function GF(t){return!!t.useClass}var xp=new ae(""),Xf={},WF={},Ay;function Ow(){return Ay===void 0&&(Ay=new sp),Ay}var ir=class{},Vu=class extends ir{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ky(e,s=>this.processProvider(s)),this.records.set(pT,Sc(void 0,this)),i.has("environment")&&this.records.set(ir,Sc(void 0,this));let o=this.records.get(xp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(mT,tr,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ze(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=So(this),r=Vn(void 0),i;try{return e()}finally{So(n),Vn(r)}}get(e,n=Ou,r=xe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ED))return e[ED](this);r=Sp(r);let i,o=So(this),s=Vn(void 0);try{if(!(r&xe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=XF(e)&&Tp(e);u&&this.injectableDefInScope(u)?c=Sc(Wy(e),Xf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&xe.Self?Ow():this.parent;return n=r&xe.Optional&&n===Ou?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ip]=a[ip]||[]).unshift(Dn(e)),o)throw a;return EF(a,e,"R3InjectorError",this.source)}else throw a}finally{Vn(s),So(o)}}resolveInjectorInitializers(){let e=ze(null),n=So(this),r=Vn(void 0),i;try{let o=this.get(kc,tr,xe.Self);for(let s of o)s()}finally{So(n),Vn(r),ze(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Dn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(e){e=Cn(e);let n=Fc(e)?e:Cn(e&&e.provide),r=QF(e);if(!Fc(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Sc(void 0,Xf,!0),i.factory=()=>qy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ze(null);try{return n.value===Xf&&(n.value=WF,n.value=n.factory()),typeof n.value=="object"&&n.value&&ZF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ze(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Cn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Wy(t){let e=Tp(t),n=e!==null?e.factory:Ws(t);if(n!==null)return n;if(t instanceof ae)throw new ve(204,!1);if(t instanceof Function)return KF(t);throw new ve(204,!1)}function KF(t){if(t.length>0)throw new ve(204,!1);let n=aF(t);return n!==null?()=>n.factory(t):()=>new t}function QF(t){if(TT(t))return Sc(void 0,t.useValue);{let e=ST(t);return Sc(e,Xf)}}function ST(t,e,n){let r;if(Fc(t)){let i=Cn(t);return Ws(i)||Wy(i)}else if(TT(t))r=()=>Cn(t.useValue);else if(zF(t))r=()=>t.useFactory(...qy(t.deps||[]));else if(qF(t))r=()=>Q(Cn(t.useExisting));else{let i=Cn(t&&(t.useClass||t.provide));if(YF(t))r=()=>new i(...qy(t.deps));else return Ws(i)||Wy(i)}return r}function Sc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function YF(t){return!!t.deps}function ZF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function XF(t){return typeof t=="function"||typeof t=="object"&&t instanceof ae}function Ky(t,e){for(let n of t)Array.isArray(n)?Ky(n,e):n&&cT(n)?Ky(n.\u0275providers,e):e(n)}function Li(t,e){t instanceof Vu&&t.assertNotDestroyed();let n,r=So(t),i=Vn(void 0);try{return e()}finally{So(r),Vn(i)}}function JF(){return lT()!==void 0||wF()!=null}function e2(t){return typeof t=="function"}var ji=0,Pe=1,_e=2,Tn=3,Cr=4,xr=5,ap=6,cp=7,Dr=8,Vc=9,Xr=10,Ct=11,Lu=12,xD=13,zc=14,Jr=15,Lc=16,xc=17,jc=18,Ap=19,xT=20,xo=21,My=22,nr=23,Tr=25,AT=1;var Qs=7,lp=8,up=9,rr=10,dp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(dp||{});function Ao(t){return Array.isArray(t)&&typeof t[AT]=="object"}function Bi(t){return Array.isArray(t)&&t[AT]===!0}function Fw(t){return(t.flags&4)!==0}function Mp(t){return t.componentOffset>-1}function Rp(t){return(t.flags&1)===1}function Mo(t){return!!t.template}function Qy(t){return(t[_e]&512)!==0}var Yy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function MT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ui(){return RT}function RT(t){return t.type.prototype.ngOnChanges&&(t.setInput=n2),t2}Ui.ngInherit=!0;function t2(){let t=NT(this),e=t?.current;if(e){let n=t.previous;if(n===Nc)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function n2(t,e,n,r,i){let o=this.declaredInputs[r],s=NT(t)||r2(t,{previous:Nc,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Yy(u&&u.currentValue,n,c===Nc),MT(t,e,i,n)}var PT="__ngSimpleChanges__";function NT(t){return t[PT]||null}function r2(t,e){return t[PT]=e}var AD=null;var Kr=function(t,e,n){AD?.(t,e,n)},i2="svg",o2="math";function ei(t){for(;Array.isArray(t);)t=t[ji];return t}function kT(t,e){return ei(e[t])}function or(t,e){return ei(e[t.index])}function OT(t,e){return t.data[e]}function s2(t,e){return t[e]}function Oo(t,e){let n=e[t];return Ao(n)?n:n[ji]}function Vw(t){return(t[_e]&128)===128}function a2(t){return Bi(t[Tn])}function Bc(t,e){return e==null?null:t[e]}function FT(t){t[xc]=0}function VT(t){t[_e]&1024||(t[_e]|=1024,Vw(t)&&Pp(t))}function c2(t,e){for(;t>0;)e=e[zc],t--;return e}function ju(t){return!!(t[_e]&9216||t[nr]?.dirty)}function Zy(t){t[Xr].changeDetectionScheduler?.notify(7),t[_e]&64&&(t[_e]|=1024),ju(t)&&Pp(t)}function Pp(t){t[Xr].changeDetectionScheduler?.notify(0);let e=Ys(t);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!Vw(e)));)e=Ys(e)}function LT(t,e){if((t[_e]&256)===256)throw new ve(911,!1);t[xo]===null&&(t[xo]=[]),t[xo].push(e)}function l2(t,e){if(t[xo]===null)return;let n=t[xo].indexOf(e);n!==-1&&t[xo].splice(n,1)}function Ys(t){let e=t[Tn];return Bi(e)?e[Tn]:e}var Re={lFrame:KT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jT=!1;function u2(){return Re.lFrame.elementDepthCount}function d2(){Re.lFrame.elementDepthCount++}function h2(){Re.lFrame.elementDepthCount--}function BT(){return Re.bindingsEnabled}function f2(){return Re.skipHydrationRootTNode!==null}function p2(t){return Re.skipHydrationRootTNode===t}function m2(){Re.skipHydrationRootTNode=null}function Ye(){return Re.lFrame.lView}function Kt(){return Re.lFrame.tView}function dn(t){return Re.lFrame.contextLView=t,t[Dr]}function hn(t){return Re.lFrame.contextLView=null,t}function Sn(){let t=UT();for(;t!==null&&t.type===64;)t=t.parent;return t}function UT(){return Re.lFrame.currentTNode}function g2(){let t=Re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ta(t,e){let n=Re.lFrame;n.currentTNode=t,n.isParent=e}function Lw(){return Re.lFrame.isParent}function $T(){Re.lFrame.isParent=!1}function HT(){return jT}function MD(t){jT=t}function v2(){let t=Re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function y2(){return Re.lFrame.bindingIndex}function w2(t){return Re.lFrame.bindingIndex=t}function Np(){return Re.lFrame.bindingIndex++}function qT(t){let e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _2(){return Re.lFrame.inI18n}function b2(t,e){let n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xy(e)}function E2(){return Re.lFrame.currentDirectiveIndex}function Xy(t){Re.lFrame.currentDirectiveIndex=t}function I2(t){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zT(t){Re.lFrame.currentQueryIndex=t}function C2(t){let e=t[Pe];return e.type===2?e.declTNode:e.type===1?t[xr]:null}function GT(t,e,n){if(n&xe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&xe.Host);)if(i=C2(o),i===null||(o=o[zc],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Re.lFrame=WT();return r.currentTNode=e,r.lView=t,!0}function jw(t){let e=WT(),n=t[Pe];Re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function WT(){let t=Re.lFrame,e=t===null?null:t.child;return e===null?KT(t):e}function KT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function QT(){let t=Re.lFrame;return Re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var YT=QT;function Bw(){let t=QT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function D2(t){return(Re.lFrame.contextLView=c2(t,Re.lFrame.contextLView))[Dr]}function na(){return Re.lFrame.selectedIndex}function Zs(t){Re.lFrame.selectedIndex=t}function Wu(){let t=Re.lFrame;return OT(t.tView,t.selectedIndex)}function T2(){return Re.lFrame.currentNamespace}var ZT=!0;function kp(){return ZT}function Op(t){ZT=t}function S2(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Fp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Jf(t,e,n){XT(t,e,3,n)}function ep(t,e,n,r){(t[_e]&3)===n&&XT(t,e,n,r)}function Ry(t,e){let n=t[_e];(n&3)===e&&(n&=16383,n+=1,t[_e]=n)}function XT(t,e,n,r){let i=r!==void 0?t[xc]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[xc]+=65536),(a<o||o==-1)&&(x2(t,n,e,c),t[xc]=(t[xc]&4294901760)+c+2),c++}function RD(t,e){Kr(4,t,e);let n=ze(null);try{e.call(t)}finally{ze(n),Kr(5,t,e)}}function x2(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[_e]>>14<t[xc]>>16&&(t[_e]&3)===e&&(t[_e]+=16384,RD(a,o)):RD(a,o)}var Rc=-1,Xs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function A2(t){return t instanceof Xs}function M2(t){return(t.flags&8)!==0}function R2(t){return(t.flags&16)!==0}function JT(t){return t!==Rc}function hp(t){return t&32767}function P2(t){return t>>16}function fp(t,e){let n=P2(t),r=e;for(;n>0;)r=r[zc],n--;return r}var Jy=!0;function pp(t){let e=Jy;return Jy=t,e}var N2=256,eS=N2-1,tS=5,k2=0,Qr={};function O2(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ku)&&(r=n[ku]),r==null&&(r=n[ku]=k2++);let i=r&eS,o=1<<i;e.data[t+(i>>tS)]|=o}function mp(t,e){let n=nS(t,e);if(n!==-1)return n;let r=e[Pe];r.firstCreatePass&&(t.injectorIndex=e.length,Py(r.data,t),Py(e,null),Py(r.blueprint,null));let i=Uw(t,e),o=t.injectorIndex;if(JT(i)){let s=hp(i),a=fp(i,e),c=a[Pe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Py(t,e){t.push(0,0,0,0,0,0,0,0,e)}function nS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Uw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=aS(i),r===null)return Rc;if(n++,i=i[zc],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Rc}function ew(t,e,n){O2(t,e,n)}function rS(t,e,n){if(n&xe.Optional||t!==void 0)return t;xw(e,"NodeInjector")}function iS(t,e,n,r){if(n&xe.Optional&&r===void 0&&(r=null),!(n&(xe.Self|xe.Host))){let i=t[Vc],o=Vn(void 0);try{return i?i.get(e,r,n&xe.Optional):uT(e,r,n&xe.Optional)}finally{Vn(o)}}return rS(r,e,n)}function oS(t,e,n,r=xe.Default,i){if(t!==null){if(e[_e]&2048&&!(r&xe.Self)){let s=B2(t,e,n,r,Qr);if(s!==Qr)return s}let o=sS(t,e,n,r,Qr);if(o!==Qr)return o}return iS(e,n,r,i)}function sS(t,e,n,r,i){let o=L2(n);if(typeof o=="function"){if(!GT(e,t,r))return r&xe.Host?rS(i,n,r):iS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&xe.Optional))xw(n);else return s}finally{YT()}}else if(typeof o=="number"){let s=null,a=nS(t,e),c=Rc,u=r&xe.Host?e[Jr][xr]:null;for((a===-1||r&xe.SkipSelf)&&(c=a===-1?Uw(t,e):e[a+8],c===Rc||!ND(r,!1)?a=-1:(s=e[Pe],a=hp(c),e=fp(c,e)));a!==-1;){let h=e[Pe];if(PD(o,a,h.data)){let m=F2(a,e,n,s,r,u);if(m!==Qr)return m}c=e[a+8],c!==Rc&&ND(r,e[Pe].data[a+8]===u)&&PD(o,a,e)?(s=h,a=hp(c),e=fp(c,e)):a=-1}}return i}function F2(t,e,n,r,i,o){let s=e[Pe],a=s.data[t+8],c=r==null?Mp(a)&&Jy:r!=s&&(a.type&3)!==0,u=i&xe.Host&&o===a,h=V2(a,s,n,c,u);return h!==null?Uc(e,s,h,a):Qr}function V2(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,h=o>>20,m=r?a:a+h,w=i?a+h:u;for(let b=m;b<w;b++){let A=s[b];if(b<c&&n===A||b>=c&&A.type===n)return b}if(i){let b=s[c];if(b&&Mo(b)&&b.type===n)return c}return null}function Uc(t,e,n,r){let i=t[n],o=e.data;if(A2(i)){let s=i;s.resolving&&pF(fF(o[n]));let a=pp(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Vn(s.injectImpl):null,h=GT(t,r,xe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&S2(n,o[n],e)}finally{u!==null&&Vn(u),pp(a),s.resolving=!1,YT()}}return i}function L2(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ku)?t[ku]:void 0;return typeof e=="number"?e>=0?e&eS:j2:e}function PD(t,e,n){let r=1<<t;return!!(n[e+(t>>tS)]&r)}function ND(t,e){return!(t&xe.Self)&&!(t&xe.Host&&e)}var Gs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return oS(this._tNode,this._lView,e,Sp(r),n)}};function j2(){return new Gs(Sn(),Ye())}function $i(t){return qu(()=>{let e=t.prototype.constructor,n=e[rp]||tw(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[rp]||tw(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tw(t){return iT(t)?()=>{let e=tw(Cn(t));return e&&e()}:Ws(t)}function B2(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[_e]&2048&&!(s[_e]&512);){let a=sS(o,s,n,r|xe.Self,Qr);if(a!==Qr)return a;let c=o.parent;if(!c){let u=s[xT];if(u){let h=u.get(n,Qr,r);if(h!==Qr)return h}c=aS(s),s=s[zc]}o=c}return i}function aS(t){let e=t[Pe],n=e.type;return n===2?e.declTNode:n===1?t[xr]:null}function kD(t,e=null,n=null,r){let i=cS(t,e,n,r);return i.resolveInjectorInitializers(),i}function cS(t,e=null,n=null,r,i=new Set){let o=[n||tr,Nw(t)];return r=r||(typeof t=="object"?void 0:Dn(t)),new Vu(o,e||Ow(),r||null,i)}var zs=class zs{static create(e,n){if(Array.isArray(e))return kD({name:""},n,e,"");{let r=e.name??"";return kD({name:r},e.parent,e.providers,r)}}};zs.THROW_IF_NOT_FOUND=Ou,zs.NULL=new sp,zs.\u0275prov=de({token:zs,providedIn:"any",factory:()=>Q(pT)}),zs.__NG_ELEMENT_ID__=-1;var Ro=zs;var U2=new ae("");U2.__NG_ELEMENT_ID__=t=>{let e=Sn();if(e===null)throw new ve(204,!1);if(e.type&2)return e.value;if(t&xe.Optional)return null;throw new ve(204,!1)};var $2="ngOriginalError";function Ny(t){return t[$2]}var Oi=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ny(e);for(;n&&Ny(n);)n=Ny(n);return n||null}},lS=new ae("",{providedIn:"root",factory:()=>oe(Oi).handleError.bind(void 0)}),uS=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=H2,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),nw=class extends uS{constructor(e){super(),this._lView=e}onDestroy(e){return LT(this._lView,e),()=>l2(this._lView,e)}};function H2(){return new nw(Ye())}function q2(){return Vp(Sn(),Ye())}function Vp(t,e){return new Hi(or(t,e))}var Hi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=q2;let t=e;return t})();var Gc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var rw=class extends wt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,JF()&&(this.destroyRef=oe(uS,{optional:!0})??void 0,this.pendingTasks=oe(Gc,{optional:!0})??void 0)}emit(e){let n=ze(null);try{super.next(e)}finally{ze(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof It&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ut=rw;function dS(t){return(t.flags&128)===128}var hS=new Map,z2=0;function G2(){return z2++}function W2(t){hS.set(t[Ap],t)}function K2(t){hS.delete(t[Ap])}var OD="__ngContext__";function Po(t,e){Ao(e)?(t[OD]=e[Ap],W2(e)):t[OD]=e}function fS(t){return mS(t[Lu])}function pS(t){return mS(t[Cr])}function mS(t){for(;t!==null&&!Bi(t);)t=t[Cr];return t}var iw;function gS(t){iw=t}function Q2(){if(iw!==void 0)return iw;if(typeof document<"u")return document;throw new ve(210,!1)}var Lp=new ae("",{providedIn:"root",factory:()=>Y2}),Y2="ng",$w=new ae(""),Ln=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Hw=new ae("",{providedIn:"root",factory:()=>Q2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Z2="h",X2="b";var J2=()=>null;function qw(t,e,n=!1){return J2(t,e,n)}var vS=!1,eV=new ae("",{providedIn:"root",factory:()=>vS});var gp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nT})`}};function jp(t){return t instanceof gp?t.changingThisBreaksApplicationSecurity:t}function yS(t,e){let n=tV(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nT})`)}return n===e}function tV(t){return t instanceof gp&&t.getTypeName()||null}var nV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wS(t){return t=String(t),t.match(nV)?t:"unsafe:"+t}var zw=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(zw||{});function Fo(t){let e=rV();return e?e.sanitize(zw.URL,t)||"":yS(t,"URL")?jp(t):wS(Pc(t))}function rV(){let t=Ye();return t&&t[Xr].sanitizer}var iV=/^>|^->|<!--|-->|--!>|<!-$/g,oV=/(<|>)/g,sV="\u200B$1\u200B";function aV(t){return t.replace(iV,e=>e.replace(oV,sV))}function _S(t){return t instanceof Function?t():t}var Fi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Fi||{}),cV;function Gw(t,e){return cV(t,e)}function Ac(t,e,n,r,i){if(r!=null){let o,s=!1;Bi(r)?o=r:Ao(r)&&(s=!0,r=r[ji]);let a=ei(r);t===0&&n!==null?i==null?DS(e,n,a):vp(e,n,a,i||null,!0):t===1&&n!==null?vp(e,n,a,i||null,!0):t===2?DV(e,a,s):t===3&&e.destroyNode(a),o!=null&&SV(e,t,o,n,i)}}function lV(t,e){return t.createText(e)}function uV(t,e,n){t.setValue(e,n)}function dV(t,e){return t.createComment(aV(e))}function bS(t,e,n){return t.createElement(e,n)}function hV(t,e){ES(t,e),e[ji]=null,e[xr]=null}function fV(t,e,n,r,i,o){r[ji]=i,r[xr]=e,Up(t,r,n,1,i,o)}function ES(t,e){e[Xr].changeDetectionScheduler?.notify(8),Up(t,e,e[Ct],2,null,null)}function pV(t){let e=t[Lu];if(!e)return ky(t[Pe],t);for(;e;){let n=null;if(Ao(e))n=e[Lu];else{let r=e[rr];r&&(n=r)}if(!n){for(;e&&!e[Cr]&&e!==t;)Ao(e)&&ky(e[Pe],e),e=e[Tn];e===null&&(e=t),Ao(e)&&ky(e[Pe],e),n=e&&e[Cr]}e=n}}function mV(t,e,n,r){let i=rr+r,o=n.length;r>0&&(n[i-1][Cr]=e),r<o-rr?(e[Cr]=n[i],fT(n,rr+r,e)):(n.push(e),e[Cr]=null),e[Tn]=n;let s=e[Lc];s!==null&&n!==s&&IS(s,e);let a=e[jc];a!==null&&a.insertView(t),Zy(e),e[_e]|=128}function IS(t,e){let n=t[up],r=e[Tn];if(Ao(r))t[_e]|=dp.HasTransplantedViews;else{let i=r[Tn][Jr];e[Jr]!==i&&(t[_e]|=dp.HasTransplantedViews)}n===null?t[up]=[e]:n.push(e)}function Ww(t,e){let n=t[up],r=n.indexOf(e);n.splice(r,1)}function ow(t,e){if(t.length<=rr)return;let n=rr+e,r=t[n];if(r){let i=r[Lc];i!==null&&i!==t&&Ww(i,r),e>0&&(t[n-1][Cr]=r[Cr]);let o=op(t,rr+e);hV(r[Pe],r);let s=o[jc];s!==null&&s.detachView(o[Pe]),r[Tn]=null,r[Cr]=null,r[_e]&=-129}return r}function CS(t,e){if(!(e[_e]&256)){let n=e[Ct];n.destroyNode&&Up(t,e,n,3,null,null),pV(e)}}function ky(t,e){if(e[_e]&256)return;let n=ze(null);try{e[_e]&=-129,e[_e]|=256,e[nr]&&iy(e[nr]),vV(t,e),gV(t,e),e[Pe].type===1&&e[Ct].destroy();let r=e[Lc];if(r!==null&&Bi(e[Tn])){r!==e[Tn]&&Ww(r,e);let i=e[jc];i!==null&&i.detachView(t)}K2(e)}finally{ze(n)}}function gV(t,e){let n=t.cleanup,r=e[cp];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[cp]=null);let i=e[xo];if(i!==null){e[xo]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function vV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Xs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Kr(4,a,c);try{c.call(a)}finally{Kr(5,a,c)}}else{Kr(4,i,o);try{o.call(i)}finally{Kr(5,i,o)}}}}}function yV(t,e,n){return wV(t,e.parent,n)}function wV(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[ji];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Zr.None||o===Zr.Emulated)return null}return or(r,n)}}function vp(t,e,n,r,i){t.insertBefore(e,n,r,i)}function DS(t,e,n){t.appendChild(e,n)}function FD(t,e,n,r,i){r!==null?vp(t,e,n,r,i):DS(t,e,n)}function _V(t,e,n,r){t.removeChild(e,n,r)}function Kw(t,e){return t.parentNode(e)}function bV(t,e){return t.nextSibling(e)}function EV(t,e,n){return CV(t,e,n)}function IV(t,e,n){return t.type&40?or(t,n):null}var CV=IV,VD;function Bp(t,e,n,r){let i=yV(t,r,e),o=e[Ct],s=r.parent||e[xr],a=EV(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)FD(o,i,n[c],a,!1);else FD(o,i,n,a,!1);VD!==void 0&&VD(o,r,e,n,i)}function tp(t,e){if(e!==null){let n=e.type;if(n&3)return or(e,t);if(n&4)return sw(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return tp(t,r);{let i=t[e.index];return Bi(i)?sw(-1,i):ei(i)}}else{if(n&32)return Gw(e,t)()||ei(t[e.index]);{let r=TS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ys(t[Jr]);return tp(i,r)}else return tp(t,e.next)}}}return null}function TS(t,e){if(e!==null){let r=t[Jr][xr],i=e.projection;return r.projection[i]}return null}function sw(t,e){let n=rr+t+1;if(n<e.length){let r=e[n],i=r[Pe].firstChild;if(i!==null)return tp(r,i)}return e[Qs]}function DV(t,e,n){let r=Kw(t,e);r&&_V(t,r,e,n)}function Qw(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Po(ei(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Qw(t,e,n.child,r,i,o,!1),Ac(e,t,i,a,o);else if(c&32){let u=Gw(n,r),h;for(;h=u();)Ac(e,t,i,h,o);Ac(e,t,i,a,o)}else c&16?TV(t,e,r,n,i,o):Ac(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Up(t,e,n,r,i,o){Qw(n,r,t.firstChild,e,i,o,!1)}function TV(t,e,n,r,i,o){let s=n[Jr],c=s[xr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];Ac(e,t,i,h,o)}else{let u=c,h=s[Tn];dS(r)&&(u.flags|=128),Qw(t,e,u,h,i,o,!0)}}function SV(t,e,n,r,i){let o=n[Qs],s=ei(n);o!==s&&Ac(e,t,r,o,i);for(let a=rr;a<n.length;a++){let c=n[a];Up(c[Pe],c,t,e,r,o)}}function xV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Fi.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Fi.Important),t.setStyle(n,r,i,o))}}function AV(t,e,n){t.setAttribute(e,"style",n)}function SS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&zy(t,e,r),i!==null&&SS(t,e,i),o!==null&&AV(t,e,o)}var Ar={};function R(t=1){AS(Kt(),Ye(),na()+t,!1)}function AS(t,e,n,r){if(!r)if((e[_e]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Jf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ep(e,o,0,n)}Zs(n)}function re(t,e=xe.Default){let n=Ye();if(n===null)return Q(t,e);let r=Sn();return oS(r,n,Cn(t),e)}function MS(t,e,n,r,i,o){let s=ze(null);try{let a=null;i&Oc.SignalBased&&(a=e[r][ey]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Oc.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):MT(e,a,r,o)}finally{ze(s)}}function MV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zs(~i);else{let o=i,s=n[++r],a=n[++r];b2(s,o);let c=e[o];a(2,c)}}}finally{Zs(-1)}}function $p(t,e,n,r,i,o,s,a,c,u,h){let m=e.blueprint.slice();return m[ji]=i,m[_e]=r|4|128|8|64,(u!==null||t&&t[_e]&2048)&&(m[_e]|=2048),FT(m),m[Tn]=m[zc]=t,m[Dr]=n,m[Xr]=s||t&&t[Xr],m[Ct]=a||t&&t[Ct],m[Vc]=c||t&&t[Vc]||null,m[xr]=o,m[Ap]=G2(),m[ap]=h,m[xT]=u,m[Jr]=e.type==2?t[Jr]:m,m}function Ku(t,e,n,r,i){let o=t.data[e];if(o===null)o=RV(t,e,n,r,i),_2()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=g2();o.injectorIndex=s===null?-1:s.injectorIndex}return ta(o,!0),o}function RV(t,e,n,r,i){let o=UT(),s=Lw(),a=s?o:o&&o.parent,c=t.data[e]=FV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function RS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function PS(t,e,n,r,i){let o=na(),s=r&2;try{Zs(-1),s&&e.length>Tr&&AS(t,e,Tr,!1),Kr(s?2:0,i),n(r,i)}finally{Zs(o),Kr(s?3:1,i)}}function Yw(t,e,n){if(Fw(e)){let r=ze(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ze(r)}}}function Zw(t,e,n){BT()&&($V(t,e,n,or(n,e)),(n.flags&64)===64&&OS(t,e,n))}function Xw(t,e,n=or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function NS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Jw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Jw(t,e,n,r,i,o,s,a,c,u,h){let m=Tr+r,w=m+i,b=PV(m,w),A=typeof u=="function"?u():u;return b[Pe]={type:t,blueprint:b,template:n,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:A,incompleteFirstPass:!1,ssrId:h}}function PV(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ar);return n}function NV(t,e,n,r){let o=r.get(eV,vS)||n===Zr.ShadowDom,s=t.selectRootElement(e,o);return kV(s),s}function kV(t){OV(t)}var OV=()=>null;function FV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return f2()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LD(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Oc.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?jD(r,n,u,a,c):jD(r,n,u,a)}return r}function jD(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function VV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let h=r;h<i;h++){let m=o[h],w=n?n.get(m):null,b=w?w.inputs:null,A=w?w.outputs:null;c=LD(0,m.inputs,h,c,b),u=LD(1,m.outputs,h,u,A);let V=c!==null&&s!==null&&!Mw(e)?JV(c,h,s):null;a.push(V)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function LV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Hp(t,e,n,r,i,o,s,a){let c=or(e,n),u=e.inputs,h;!a&&u!=null&&(h=u[r])?(t_(t,n,h,r,i),Mp(e)&&jV(n,e.index)):e.type&3?(r=LV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function jV(t,e){let n=Oo(e,t);n[_e]&16||(n[_e]|=64)}function e_(t,e,n,r){if(BT()){let i=r===null?null:{"":-1},o=qV(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&kS(t,e,n,s,i,a),i&&zV(n,r,i)}n.mergedAttrs=Fu(n.mergedAttrs,n.attrs)}function kS(t,e,n,r,i,o){for(let u=0;u<r.length;u++)ew(mp(n,e),t,r[u].type);WV(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let h=r[u];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=RS(t,e,r.length,null);for(let u=0;u<r.length;u++){let h=r[u];n.mergedAttrs=Fu(n.mergedAttrs,h.hostAttrs),KV(t,n,e,c,h),GV(c,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let m=h.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}VV(t,n,o)}function BV(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;UV(s)!=a&&s.push(a),s.push(n,r,o)}}function UV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function $V(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Mp(n)&&QV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||mp(n,e),Po(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Uc(e,t,a,n);if(Po(u,e),s!==null&&XV(e,a-i,u,c,n,s),Mo(c)){let h=Oo(n.index,e);h[Dr]=Uc(e,t,a,n)}}}function OS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=E2();try{Zs(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Xy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&HV(c,u)}}finally{Zs(-1),Xy(s)}}function HV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function qV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(kF(e,s.selectors,!1))if(r||(r=[]),Mo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;aw(t,e,c)}else r.unshift(s),aw(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function aw(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function zV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new ve(-301,!1);r.push(e[i],o)}}}function GV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Mo(e)&&(n[""]=t)}}function WV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function KV(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ws(i.type,!0)),s=new Xs(o,Mo(i),re);t.blueprint[r]=s,n[r]=s,BV(t,e,r,RS(t,n,i.hostVars,Ar),i)}function QV(t,e,n){let r=or(e,t),i=NS(n),o=t[Xr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=qp(t,$p(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function YV(t,e,n,r,i,o){let s=or(t,e);ZV(e[Ct],s,o,t.value,n,r,i)}function ZV(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Pc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function XV(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],h=s[a++],m=s[a++];MS(r,n,c,u,h,m)}}function JV(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function FS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function VS(t,e){let n=t.contentQueries;if(n!==null){let r=ze(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];zT(o),a.contentQueries(2,e[s],s)}}}finally{ze(r)}}}function qp(t,e){return t[Lu]?t[xD][Cr]=e:t[Lu]=e,t[xD]=e,e}function cw(t,e,n){zT(0);let r=ze(null);try{e(t,n)}finally{ze(r)}}function eL(t){return t[cp]??=[]}function tL(t){return t.cleanup??=[]}function LS(t,e){let n=t[Vc],r=n?n.get(Oi,null):null;r&&r.handleError(e)}function t_(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],h=t.data[s];MS(h,u,r,a,c,i)}}function jS(t,e,n){let r=kT(e,t);uV(t[Ct],r,n)}function nL(t,e){let n=Oo(e,t),r=n[Pe];rL(r,n);let i=n[ji];i!==null&&n[ap]===null&&(n[ap]=qw(i,n[Vc])),n_(r,n,n[Dr])}function rL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function n_(t,e,n){jw(e);try{let r=t.viewQuery;r!==null&&cw(1,r,n);let i=t.template;i!==null&&PS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[jc]?.finishViewCreation(t),t.staticContentQueries&&VS(t,e),t.staticViewQueries&&cw(2,t.viewQuery,n);let o=t.components;o!==null&&iL(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_e]&=-5,Bw()}}function iL(t,e){for(let n=0;n<e.length;n++)nL(t,e[n])}function oL(t,e,n,r){let i=ze(null);try{let o=e.tView,a=t[_e]&4096?4096:16,c=$p(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Lc]=u;let h=t[jc];return h!==null&&(c[jc]=h.createEmbeddedView(o)),n_(o,c,n),c}finally{ze(i)}}function BD(t,e){return!e||e.firstChild===null||dS(t)}function sL(t,e,n,r=!0){let i=e[Pe];if(mV(i,e,t,n),r){let s=sw(n,t),a=e[Ct],c=Kw(a,t[Qs]);c!==null&&fV(i,t[xr],a,e,c,s)}let o=e[ap];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yp(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(ei(o)),Bi(o)&&aL(o,r);let s=n.type;if(s&8)yp(t,e,n.child,r);else if(s&32){let a=Gw(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=TS(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ys(e[Jr]);yp(c[Pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function aL(t,e){for(let n=rr;n<t.length;n++){let r=t[n],i=r[Pe].firstChild;i!==null&&yp(r[Pe],r,i,e)}t[Qs]!==t[ji]&&e.push(t[Qs])}var BS=[];function cL(t){return t[nr]??lL(t)}function lL(t){let e=BS.pop()??Object.create(dL);return e.lView=t,e}function uL(t){t.lView[nr]!==t&&(t.lView=null,BS.push(t))}var dL=je(ee({},ty),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Pp(t.lView)},consumerOnSignalRead(){this.lView[nr]=this}});function hL(t){let e=t[nr]??Object.create(fL);return e.lView=t,e}var fL=je(ee({},ty),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ys(t.lView);for(;e&&!US(e[Pe]);)e=Ys(e);e&&VT(e)},consumerOnSignalRead(){this.lView[nr]=this}});function US(t){return t.type!==2}var pL=100;function $S(t,e=!0,n=0){let r=t[Xr],i=r.rendererFactory,o=!1;o||i.begin?.();try{mL(t,n)}catch(s){throw e&&LS(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function mL(t,e){let n=HT();try{MD(!0),lw(t,e);let r=0;for(;ju(t);){if(r===pL)throw new ve(103,!1);r++,lw(t,1)}}finally{MD(n)}}function gL(t,e,n,r){let i=e[_e];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Xr].inlineEffectRunner?.flush(),jw(e);let a=!0,c=null,u=null;o||(US(t)?(u=cL(e),c=ny(u)):KC()===null?(a=!1,u=hL(e),c=ny(u)):e[nr]&&(iy(e[nr]),e[nr]=null));try{FT(e),w2(t.bindingStartIndex),n!==null&&PS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let b=t.preOrderCheckHooks;b!==null&&Jf(e,b,null)}else{let b=t.preOrderHooks;b!==null&&ep(e,b,0,null),Ry(e,0)}if(s||vL(e),HS(e,0),t.contentQueries!==null&&VS(t,e),!o)if(h){let b=t.contentCheckHooks;b!==null&&Jf(e,b)}else{let b=t.contentHooks;b!==null&&ep(e,b,1),Ry(e,1)}MV(t,e);let m=t.components;m!==null&&zS(e,m,0);let w=t.viewQuery;if(w!==null&&cw(2,w,r),!o)if(h){let b=t.viewCheckHooks;b!==null&&Jf(e,b)}else{let b=t.viewHooks;b!==null&&ep(e,b,2),Ry(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[My]){for(let b of e[My])b();e[My]=null}o||(e[_e]&=-73)}catch(h){throw o||Pp(e),h}finally{u!==null&&(QC(u,c),a&&uL(u)),Bw()}}function HS(t,e){for(let n=fS(t);n!==null;n=pS(n))for(let r=rr;r<n.length;r++){let i=n[r];qS(i,e)}}function vL(t){for(let e=fS(t);e!==null;e=pS(e)){if(!(e[_e]&dp.HasTransplantedViews))continue;let n=e[up];for(let r=0;r<n.length;r++){let i=n[r];VT(i)}}}function yL(t,e,n){let r=Oo(e,t);qS(r,n)}function qS(t,e){Vw(t)&&lw(t,e)}function lw(t,e){let r=t[Pe],i=t[_e],o=t[nr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ry(o)),s||=!1,o&&(o.dirty=!1),t[_e]&=-9217,s)gL(r,t,r.template,t[Dr]);else if(i&8192){HS(t,1);let a=r.components;a!==null&&zS(t,a,1)}}function zS(t,e,n){for(let r=0;r<e.length;r++)yL(t,e[r],n)}function r_(t,e){let n=HT()?64:1088;for(t[Xr].changeDetectionScheduler?.notify(e);t;){t[_e]|=n;let r=Ys(t);if(Qy(t)&&!r)return t;t=r}return null}var Js=class{get rootNodes(){let e=this._lView,n=e[Pe];return yp(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dr]}set context(e){this._lView[Dr]=e}get destroyed(){return(this._lView[_e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tn];if(Bi(e)){let n=e[lp],r=n?n.indexOf(this):-1;r>-1&&(ow(e,r),op(n,r))}this._attachedToViewContainer=!1}CS(this._lView[Pe],this._lView)}onDestroy(e){LT(this._lView,e)}markForCheck(){r_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){Zy(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,$S(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qy(this._lView),n=this._lView[Lc];n!==null&&!e&&Ww(n,this._lView),ES(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=e;let n=Qy(this._lView),r=this._lView[Lc];r!==null&&!n&&IS(r,this._lView),Zy(this._lView)}},zp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=bL;let t=e;return t})(),wL=zp,_L=class extends wL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=oL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Js(i)}};function bL(){return EL(Sn(),Ye())}function EL(t,e){return t.type&4?new _L(e,t,Vp(t,e)):null}var eX=new RegExp(`^(\\d+)*(${X2}|${Z2})*(.*)`);var IL=()=>null;function UD(t,e){return IL(t,e)}var Bu=class{},GS=new ae("",{providedIn:"root",factory:()=>!1});var WS=new ae(""),uw=class{},wp=class{};function CL(t){let e=Error(`No component factory found for ${Dn(t)}.`);return e[DL]=t,e}var DL="ngComponent";var dw=class{resolveComponentFactory(e){throw CL(e)}},v_=class v_{};v_.NULL=new dw;var $c=v_,Hc=class{},Vo=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>TL();let t=e;return t})();function TL(){let t=Ye(),e=Sn(),n=Oo(e.index,t);return(Ao(n)?n:t)[Ct]}var SL=(()=>{let e=class e{};e.\u0275prov=de({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Oy={};var $D=new Set;function KS(t){$D.has(t)||($D.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function QS(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Yr.requestAnimationFrame=="function"&&Yr.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function HD(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function qD(...t){}var Ge=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,ML(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ve(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,xL,qD,qD);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},xL={};function i_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function AL(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{QS(()=>{t.callbackScheduled=!1,hw(t),t.isCheckStableRunning=!0,i_(t),t.isCheckStableRunning=!1})}),hw(t))}function ML(t){let e=()=>{AL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(RL(a))return n.invokeTask(i,o,s,a);try{return zD(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),GD(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return zD(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!PL(a)&&e(),GD(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,hw(t),i_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function hw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function zD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function GD(t){t._nesting--,i_(t)}var fw=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function RL(t){return YS(t,"__ignore_ng_zone__")}function PL(t){return YS(t,"__scheduler_tick__")}function YS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ZS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function _p(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yD(i,a);else if(o==2){let c=a,u=e[++s];r=yD(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var bp=class extends $c{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ks(e);return new Uu(n,this.ngModule)}};function WD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function NL(t){let e=t.toLowerCase();return e==="svg"?i2:e==="math"?o2:null}var pw=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Sp(r);let i=this.injector.get(e,Oy,r);return i!==Oy||n===Oy?i:this.parentInjector.get(e,n,r)}},Uu=class extends wp{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=WD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return WD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=LF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ze(null);try{i=i||this.ngModule;let s=i instanceof ir?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new pw(e,s):e,c=a.get(Hc,null);if(c===null)throw new ve(407,!1);let u=a.get(SL,null),h=a.get(ZS,null),m=a.get(Bu,null),w={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:m},b=c.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",V=r?NV(b,r,this.componentDef.encapsulation,a):bS(b,A,NL(A)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let W=null;V!==null&&(W=qw(V,a,!0));let Z=Jw(0,null,null,1,0,null,null,null,null,null,null),z=$p(null,Z,null,F,null,null,w,b,a,null,W);jw(z);let J,ue;try{let ce=this.componentDef,x,I=null;ce.findHostDirectiveDefs?(x=[],I=new Map,ce.findHostDirectiveDefs(ce,x,I),x.push(ce)):x=[ce];let S=kL(z,V),M=OL(S,V,ce,x,z,w,b);ue=OT(Z,Tr),V&&LL(b,ce,V,r),n!==void 0&&jL(ue,this.ngContentSelectors,n),J=VL(M,ce,x,I,z,[BL]),n_(Z,z,null)}finally{Bw()}return new mw(this.componentType,J,Vp(ue,z),z,ue)}finally{ze(o)}}},mw=class extends uw{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Js(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;t_(o[Pe],o,i,e,n),this.previousInputValues.set(e,n);let s=Oo(this._tNode.index,o);r_(s,1)}}get injector(){return new Gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kL(t,e){let n=t[Pe],r=Tr;return t[r]=e,Ku(n,r,2,"#host",null)}function OL(t,e,n,r,i,o,s){let a=i[Pe];FL(r,t,e,s);let c=null;e!==null&&(c=qw(e,i[Vc]));let u=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let m=$p(i,NS(n),null,h,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&aw(a,t,r.length-1),qp(i,m),i[t.index]=m}function FL(t,e,n,r){for(let i of t)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_p(e,e.mergedAttrs,!0),n!==null&&xS(r,n,e))}function VL(t,e,n,r,i,o){let s=Sn(),a=i[Pe],c=or(s,i);kS(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let m=s.directiveStart+h,w=Uc(i,a,m,s);Po(w,i)}OS(a,i,s),c&&Po(c,i);let u=Uc(i,a,s.directiveStart+s.componentOffset,s);if(t[Dr]=i[Dr]=u,o!==null)for(let h of o)h(u,e);return Yw(a,s,i),u}function LL(t,e,n,r){if(r)zy(t,n,["ng-version","18.0.3"]);else{let{attrs:i,classes:o}=jF(e.selectors[0]);i&&zy(t,n,i),o&&o.length>0&&SS(t,n,o.join(" "))}}function jL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function BL(){let t=Sn();Fp(Ye()[Pe],t)}var Wc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UL;let t=e;return t})();function UL(){let t=Sn();return HL(t,Ye())}var $L=Wc,XS=class extends $L{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vp(this._hostTNode,this._hostLView)}get injector(){return new Gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Uw(this._hostTNode,this._hostLView);if(JT(e)){let n=fp(e,this._hostLView),r=hp(e),i=n[Pe].data[r+8];return new Gs(i,n)}else return new Gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=KD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=UD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,BD(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!e2(e),a;if(s)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let c=s?e:new Uu(Ks(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let V=(s?u:this.parentInjector).get(ir,null);V&&(o=V)}let h=Ks(c.componentType??{}),m=UD(this._lContainer,h?.id??null),w=m?.firstChild??null,b=c.create(u,i,w,o);return this.insertImpl(b.hostView,a,BD(this._hostTNode,m)),b}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(a2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Tn],u=new XS(c,c[xr],c[Tn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return sL(s,i,o,r),e.attachToViewContainerRef(),fT(Fy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=KD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ow(this._lContainer,n);r&&(op(Fy(this._lContainer),n),CS(r[Pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=ow(this._lContainer,n);return r&&op(Fy(this._lContainer),n)!=null?new Js(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function KD(t){return t[lp]}function Fy(t){return t[lp]||(t[lp]=[])}function HL(t,e){let n,r=e[t.index];return Bi(r)?n=r:(n=FS(r,e,null,t),e[t.index]=n,qp(e,n)),zL(n,e,t,r),new XS(n,t,e)}function qL(t,e){let n=t[Ct],r=n.createComment(""),i=or(e,t),o=Kw(n,i);return vp(n,o,r,bV(n,i),!1),r}var zL=KL,GL=()=>!1;function WL(t,e,n){return GL(t,e,n)}function KL(t,e,n,r){if(t[Qs])return;let i;n.type&8?i=ei(r):i=qL(e,n),t[Qs]=i}function QL(t){return typeof t=="function"&&t[ey]!==void 0}function JS(t){return QL(t)&&typeof t.set=="function"}function YL(t){return Object.getPrototypeOf(t.prototype).constructor}function Hn(t){let e=YL(t.type),n=!0,r=[t];for(;e;){let i;if(Mo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ve(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Yf(t.inputs),s.inputTransforms=Yf(t.inputTransforms),s.declaredInputs=Yf(t.declaredInputs),s.outputs=Yf(t.outputs);let a=i.hostBindings;a&&tj(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&JL(t,c),u&&ej(t,u),ZL(t,i),oF(t.outputs,i.outputs),Mo(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Hn&&(n=!1)}}e=Object.getPrototypeOf(e)}XL(r)}function ZL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function XL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fu(i.hostAttrs,n=Fu(n,i.hostAttrs))}}function Yf(t){return t===Nc?{}:t===tr?[]:t}function JL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function ej(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function tj(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var No=class{},$u=class{};var gw=class extends No{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bp(this);let i=bT(e);this._bootstrapComponents=_S(i.bootstrap),this._r3Injector=cS(e,n,[{provide:No,useValue:this},{provide:$c,useValue:this.componentFactoryResolver},...r],Dn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vw=class extends $u{constructor(e){super(),this.moduleType=e}create(e){return new gw(this.moduleType,e,[])}};var Ep=class extends No{constructor(e){super(),this.componentFactoryResolver=new bp(this),this.instance=null;let n=new Vu([...e.providers,{provide:No,useValue:this},{provide:$c,useValue:this.componentFactoryResolver}],e.parent||Ow(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function o_(t,e,n=null){return new Ep({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function ex(t){return rj(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function nj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function rj(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ij(t,e,n){return t[e]=n}function ko(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function oj(t,e,n,r){let i=ko(t,e,n);return ko(t,e+1,r)||i}function sj(t){return(t.flags&32)===32}function aj(t,e,n,r,i,o,s,a,c){let u=e.consts,h=Ku(e,t,4,s||null,a||null);e_(e,n,h,Bc(u,c)),Fp(e,h);let m=h.tView=Jw(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}function cj(t,e,n,r,i,o,s,a,c,u){let h=n+Tr,m=e.firstCreatePass?aj(h,e,t,r,i,o,s,a,c):e.data[h];ta(m,!1);let w=lj(e,t,m,n);kp()&&Bp(e,t,w,m),Po(w,t);let b=FS(w,t,w,m);return t[h]=b,qp(t,b),WL(b,m,t),Rp(m)&&Zw(e,t,m),c!=null&&Xw(t,m,u),m}function X(t,e,n,r,i,o,s,a){let c=Ye(),u=Kt(),h=Bc(u.consts,o);return cj(c,u,t,e,n,r,i,h,s,a),X}var lj=uj;function uj(t,e,n,r){return Op(!0),e[Ct].createComment("")}function Gp(t,e,n,r){let i=Ye(),o=Np();if(ko(i,o,e)){let s=Kt(),a=Wu();YV(a,i,t,e,n,r)}return Gp}function tx(t,e,n,r){return ko(t,Np(),n)?e+Pc(n)+r:Ar}function nx(t,e,n,r,i,o){let s=y2(),a=oj(t,s,n,i);return qT(2),a?e+Pc(n)+r+Pc(i)+o:Ar}function Zf(t,e){return t<<17|e<<2}function ea(t){return t>>17&32767}function dj(t){return(t&2)==2}function hj(t,e){return t&131071|e<<17}function yw(t){return t|2}function qc(t){return(t&131068)>>2}function Vy(t,e){return t&-131069|e<<2}function fj(t){return(t&1)===1}function ww(t){return t|1}function pj(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ea(s),c=qc(s);t[r]=n;let u=!1,h;if(Array.isArray(n)){let m=n;h=m[1],(h===null||Gu(m,h)>0)&&(u=!0)}else h=n;if(i)if(c!==0){let w=ea(t[a+1]);t[r+1]=Zf(w,a),w!==0&&(t[w+1]=Vy(t[w+1],r)),t[a+1]=hj(t[a+1],r)}else t[r+1]=Zf(a,0),a!==0&&(t[a+1]=Vy(t[a+1],r)),a=r;else t[r+1]=Zf(c,0),a===0?a=r:t[c+1]=Vy(t[c+1],r),c=r;u&&(t[r+1]=yw(t[r+1])),QD(t,h,r,!0),QD(t,h,r,!1),mj(e,h,t,r,o),s=Zf(a,c),o?e.classBindings=s:e.styleBindings=s}function mj(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Gu(o,e)>=0&&(n[r+1]=ww(n[r+1]))}function QD(t,e,n,r){let i=t[n+1],o=e===null,s=r?ea(i):qc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];gj(c,e)&&(a=!0,t[s+1]=r?ww(u):yw(u)),s=r?ea(u):qc(u)}a&&(t[n+1]=r?yw(i):ww(i))}function gj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Gu(t,e)>=0:!1}function U(t,e,n){let r=Ye(),i=Np();if(ko(r,i,e)){let o=Kt(),s=Wu();Hp(o,s,r,t,e,r[Ct],n,!1)}return U}function YD(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";t_(t,n,o[s],s,r)}function Wp(t,e){return vj(t,e,null,!0),Wp}function vj(t,e,n,r){let i=Ye(),o=Kt(),s=qT(2);if(o.firstUpdatePass&&wj(o,t,s,r),e!==Ar&&ko(i,s,e)){let a=o.data[na()];Cj(o,a,i,i[Ct],t,i[s+1]=Dj(e,n),r,s)}}function yj(t,e){return e>=t.expandoStartIndex}function wj(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[na()],s=yj(t,n);Tj(o,r)&&e===null&&!s&&(e=!1),e=_j(i,o,e,r),pj(i,o,e,n,s,r)}}function _j(t,e,n,r){let i=I2(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Ly(null,t,e,n,r),n=Hu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Ly(i,t,e,n,r),o===null){let c=bj(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Ly(null,t,e,c[1],r),c=Hu(c,e.attrs,r),Ej(t,e,r,c))}else o=Ij(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function bj(t,e,n){let r=n?e.classBindings:e.styleBindings;if(qc(r)!==0)return t[ea(r)]}function Ej(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ea(i)]=r}function Ij(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Hu(r,s,n)}return Hu(r,e.attrs,n)}function Ly(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Hu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Hu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),DF(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Cj(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],h=fj(u)?ZD(c,e,n,i,qc(u),s):void 0;if(!Ip(h)){Ip(o)||dj(u)&&(o=ZD(c,null,n,i,a,s));let m=kT(na(),n);xV(r,s,m,i,o)}}function ZD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),h=u?c[1]:c,m=h===null,w=n[i+1];w===Ar&&(w=m?tr:void 0);let b=m?xy(w,r):h===r?w:void 0;if(u&&!Ip(b)&&(b=xy(c,r)),Ip(b)&&(a=b,s))return a;let A=t[i+1];i=s?ea(A):qc(A)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=xy(c,r))}return a}function Ip(t){return t!==void 0}function Dj(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Dn(jp(t)))),t}function Tj(t,e){return(t.flags&(e?8:16))!==0}function Sj(t,e,n,r,i,o){let s=e.consts,a=Bc(s,i),c=Ku(e,t,2,r,a);return e_(e,n,c,Bc(s,o)),c.attrs!==null&&_p(c,c.attrs,!1),c.mergedAttrs!==null&&_p(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function C(t,e,n,r){let i=Ye(),o=Kt(),s=Tr+t,a=i[Ct],c=o.firstCreatePass?Sj(s,o,i,e,n,r):o.data[s],u=xj(o,i,c,a,e,t);i[s]=u;let h=Rp(c);return ta(c,!0),xS(a,u,c),!sj(c)&&kp()&&Bp(o,i,u,c),u2()===0&&Po(u,i),d2(),h&&(Zw(o,i,c),Yw(o,c,i)),r!==null&&Xw(i,c),C}function E(){let t=Sn();Lw()?$T():(t=t.parent,ta(t,!1));let e=t;p2(e)&&m2(),h2();let n=Kt();return n.firstCreatePass&&(Fp(n,t),Fw(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&M2(e)&&YD(n,e,Ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&R2(e)&&YD(n,e,Ye(),e.stylesWithoutHost,!1),E}function ye(t,e,n,r){return C(t,e,n,r),E(),ye}var xj=(t,e,n,r,i,o)=>(Op(!0),bS(r,i,T2()));function Aj(t,e,n,r,i){let o=e.consts,s=Bc(o,r),a=Ku(e,t,8,"ng-container",s);s!==null&&_p(a,s,!0);let c=Bc(o,i);return e_(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Qu(t,e,n){let r=Ye(),i=Kt(),o=t+Tr,s=i.firstCreatePass?Aj(o,i,r,e,n):i.data[o];ta(s,!0);let a=Mj(i,r,s,t);return r[o]=a,kp()&&Bp(i,r,a,s),Po(a,r),Rp(s)&&(Zw(i,r,s),Yw(i,s,r)),n!=null&&Xw(r,s),Qu}function Yu(){let t=Sn(),e=Kt();return Lw()?$T():(t=t.parent,ta(t,!1)),e.firstCreatePass&&(Fp(e,t),Fw(t)&&e.queries.elementEnd(t)),Yu}var Mj=(t,e,n,r)=>(Op(!0),dV(e[Ct],""));function jn(){return Ye()}var Cp="en-US";var Rj=Cp;function Pj(t){typeof t=="string"&&(Rj=t.toLowerCase().replace(/_/g,"-"))}var Nj=(t,e,n)=>{};function ge(t,e,n,r){let i=Ye(),o=Kt(),s=Sn();return rx(o,i,i[Ct],s,t,e,r),ge}function kj(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[cp],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function rx(t,e,n,r,i,o,s){let a=Rp(r),u=t.firstCreatePass&&tL(t),h=e[Dr],m=eL(e),w=!0;if(r.type&3||s){let V=or(r,e),F=s?s(V):V,W=m.length,Z=s?J=>s(ei(J[r.index])):r.index,z=null;if(!s&&a&&(z=kj(t,e,i,r.index)),z!==null){let J=z.__ngLastListenerFn__||z;J.__ngNextListenerFn__=o,z.__ngLastListenerFn__=o,w=!1}else{o=JD(r,e,h,o),Nj(V,i,o);let J=n.listen(F,i,o);m.push(o,J),u&&u.push(i,Z,W,W+1)}}else o=JD(r,e,h,o);let b=r.outputs,A;if(w&&b!==null&&(A=b[i])){let V=A.length;if(V)for(let F=0;F<V;F+=2){let W=A[F],Z=A[F+1],ue=e[W][Z].subscribe(o),ce=m.length;m.push(o,ue),u&&u.push(i,r.index,ce,-(ce+1))}}}function XD(t,e,n,r){let i=ze(null);try{return Kr(6,e,n),n(r)!==!1}catch(o){return LS(t,o),!1}finally{Kr(7,e,n),ze(i)}}function JD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Oo(t.index,e):e;r_(s,5);let a=XD(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=XD(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function fe(t=1){return D2(t)}function s_(t,e,n){return ix(t,"",e,"",n),s_}function ix(t,e,n,r,i){let o=Ye(),s=tx(o,e,n,r);if(s!==Ar){let a=Kt(),c=Wu();Hp(a,c,o,t,s,o[Ct],i,!1)}return ix}function Kp(t,e,n,r,i,o,s){let a=Ye(),c=nx(a,e,n,r,i,o);if(c!==Ar){let u=Kt(),h=Wu();Hp(u,h,a,t,c,a[Ct],s,!1)}return Kp}function Oj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function P(t,e=""){let n=Ye(),r=Kt(),i=t+Tr,o=r.firstCreatePass?Ku(r,i,1,e,null):r.data[i],s=Fj(r,n,o,e,t);n[i]=s,kp()&&Bp(r,n,s,o),ta(o,!1)}var Fj=(t,e,n,r,i)=>(Op(!0),lV(e[Ct],r));function Lo(t){return Fe("",t,""),Lo}function Fe(t,e,n){let r=Ye(),i=tx(r,t,e,n);return i!==Ar&&jS(r,na(),i),Fe}function ti(t,e,n,r,i){let o=Ye(),s=nx(o,t,e,n,r,i);return s!==Ar&&jS(o,na(),s),ti}function Qp(t,e,n){JS(e)&&(e=e());let r=Ye(),i=Np();if(ko(r,i,e)){let o=Kt(),s=Wu();Hp(o,s,r,t,e,r[Ct],n,!1)}return Qp}function a_(t,e){let n=JS(t);return n&&t.set(e),n}function Yp(t,e){let n=Ye(),r=Kt(),i=Sn();return rx(r,n,n[Ct],i,t,e),Yp}function Vj(t,e,n){let r=Kt();if(r.firstCreatePass){let i=Mo(t);_w(n,r.data,r.blueprint,i,!0),_w(e,r.data,r.blueprint,i,!1)}}function _w(t,e,n,r,i){if(t=Cn(t),Array.isArray(t))for(let o=0;o<t.length;o++)_w(t[o],e,n,r,i);else{let o=Kt(),s=Ye(),a=Sn(),c=Fc(t)?t:Cn(t.provide),u=ST(t),h=a.providerIndexes&1048575,m=a.directiveStart,w=a.providerIndexes>>20;if(Fc(t)||!t.multi){let b=new Xs(u,i,re),A=By(c,e,i?h:h+w,m);A===-1?(ew(mp(a,s),o,c),jy(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)):(n[A]=b,s[A]=b)}else{let b=By(c,e,h+w,m),A=By(c,e,h,h+w),V=b>=0&&n[b],F=A>=0&&n[A];if(i&&!F||!i&&!V){ew(mp(a,s),o,c);let W=Bj(i?jj:Lj,n.length,i,r,u);!i&&F&&(n[A].providerFactory=W),jy(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(W),s.push(W)}else{let W=ox(n[i?A:b],u,!i&&r);jy(o,t,b>-1?b:A,W)}!i&&r&&F&&n[A].componentProviders++}}}function jy(t,e,n,r){let i=Fc(e),o=GF(e);if(i||o){let c=(o?Cn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[r,c]):u[h+1].push(r,c)}else u.push(n,c)}}}function ox(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function By(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Lj(t,e,n,r){return bw(this.multi,[])}function jj(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Uc(n,n[Pe],this.providerFactory.index,r);o=a.slice(0,s),bw(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],bw(i,o);return o}function bw(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Bj(t,e,n,r,i){let o=new Xs(t,n,re);return o.multi=[],o.index=e,o.componentProviders=0,ox(o,i,r&&!n),o}function qi(t,e=[]){return n=>{n.providersResolver=(r,i)=>Vj(r,i?i(t):t,e)}}var Uj=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=CT(!1,r.type),o=i.length>0?o_([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=de({token:e,providedIn:"environment",factory:()=>new e(Q(ir))});let t=e;return t})();function it(t){KS("NgStandalone"),t.getStandaloneInjector=e=>e.get(Uj).getOrCreateStandaloneInjector(t)}function $j(t,e){let n=t[e];return n===Ar?void 0:n}function Hj(t,e,n,r,i,o){let s=e+n;return ko(t,s,i)?ij(t,s+1,o?r.call(o,i):r(i)):$j(t,s+1)}function zi(t,e){let n=Kt(),r,i=t+Tr;n.firstCreatePass?(r=qj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ws(r.type,!0)),s,a=Vn(re);try{let c=pp(!1),u=o();return pp(c),Oj(n,Ye(),i,u),u}finally{Vn(a)}}function qj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Gi(t,e,n){let r=t+Tr,i=Ye(),o=s2(i,r);return zj(i,r)?Hj(i,v2(),e,o.transform,n,o):o.transform(n)}function zj(t,e){return t[Pe].data[e].pure}var Vi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sx=new Vi("18.0.3");var Zp=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var c_=new ae(""),Zu=new ae(""),Xp=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,l_||(Gj(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(Q(Ge),Q(Jp),Q(Zu))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),Jp=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return l_?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function Gj(t){l_=t}var l_;function jo(t){return!!t&&typeof t.then=="function"}function u_(t){return!!t&&typeof t.subscribe=="function"}var ax=new ae(""),cx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=oe(ax,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(jo(s))r.push(s);else if(u_(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),d_=new ae("");function Wj(){YC(()=>{throw new ve(600,!1)})}function Kj(t){return t.isBoundToModule}var Qj=10;function Yj(t,e,n){try{let r=n();return jo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ra=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(lS),this.afterRenderEffectManager=oe(ZS),this.zonelessEnabled=oe(GS),this.externalTestViews=new Set,this.beforeRender=new wt,this.afterTick=new wt,this.componentTypes=[],this.components=[],this.isStable=oe(Gc).hasPendingTasks.pipe(pe(r=>!r)),this._injector=oe(ir)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof wp;if(!this._injector.get(cx).done){let b=!o&&_T(r),A=!1;throw new ve(405,A)}let a;o?a=r:a=this._injector.get($c).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Kj(a)?void 0:this._injector.get(No),u=i||a.selector,h=a.create(Ro.NULL,[],u,c),m=h.location.nativeElement,w=h.injector.get(c_,null);return w?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),Uy(this.components,h),w?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ve(101,!1);let i=ze(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,ze(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Hc,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<Qj;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)Zj(c,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>ju(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>ju(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Uy(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(d_,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Uy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ve(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Zj(t,e,n,r){if(!n&&!ju(t))return;$S(t,e,n&&!r?0:1)}var Ew=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},h_=(()=>{let e=class e{compileModuleSync(r){return new vw(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=bT(r),s=_S(o.declarations).reduce((a,c)=>{let u=Ks(c);return u&&a.push(new Uu(u)),a},[]);return new Ew(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xj=(()=>{let e=class e{constructor(){this.zone=oe(Ge),this.changeDetectionScheduler=oe(Bu),this.applicationRef=oe(ra)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jj({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ge(tB()),[{provide:Ge,useFactory:t},{provide:kc,multi:!0,useFactory:()=>{let n=oe(Xj,{optional:!0});return()=>n.initialize()}},{provide:kc,multi:!0,useFactory:()=>{let n=oe(nB);return()=>{n.initialize()}}},{provide:lS,useFactory:eB},e===!0?{provide:WS,useValue:!0}:[]]}function eB(){let t=oe(Ge),e=oe(Oi);return n=>t.runOutsideAngular(()=>e.handleError(n))}function tB(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var nB=(()=>{let e=class e{constructor(){this.subscription=new It,this.initialized=!1,this.zone=oe(Ge),this.pendingTasks=oe(Gc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ge.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ge.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rB=(()=>{let e=class e{constructor(){this.appRef=oe(ra),this.taskService=oe(Gc),this.ngZone=oe(Ge),this.zonelessEnabled=oe(GS),this.disableScheduling=oe(WS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new It,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof fw||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?HD:QS;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ge.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,HD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iB(){return typeof $localize<"u"&&$localize.locale||Cp}var f_=new ae("",{providedIn:"root",factory:()=>oe(f_,xe.Optional|xe.SkipSelf)||iB()});var lx=new ae("");var np=null;function oB(t=[],e){return Ro.create({name:e,providers:[{provide:xp,useValue:"platform"},{provide:lx,useValue:new Set([()=>np=null])},...t]})}function sB(t=[]){if(np)return np;let e=oB(t);return np=e,Wj(),aB(e),e}function aB(t){t.get($w,null)?.forEach(n=>n())}function p_(){return!1}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cB;let t=e;return t})();function cB(t){return lB(Sn(),Ye(),(t&16)===16)}function lB(t,e,n){if(Mp(t)&&!n){let r=Oo(t.index,e);return new Js(r,r)}else if(t.type&47){let r=e[Jr];return new Js(r,e)}return null}var Iw=class{constructor(){}supports(e){return ex(e)}create(e){return new Cw(e)}},uB=(t,e)=>e,Cw=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uB}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<eT(r,i,o)?n:r,a=eT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=c-i;if(u!=h){for(let w=0;w<u;w++){let b=w<o.length?o[w]:o[w]=0,A=b+w;h<=A&&A<u&&(o[w]=b+1)}let m=s.previousIndex;o[m]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!ex(e))throw new ve(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,nj(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Dw(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dw=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Tw=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Dp=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Tw,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function tT(){return new m_([new Iw])}var m_=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||tT()),deps:[[e,new hT,new zu]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new ve(901,!1)}};e.\u0275prov=de({token:e,providedIn:"root",factory:tT});let t=e;return t})();var ux=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(Q(ra))},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({});let t=e;return t})();function dx(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=sB(r),o=[Jj({}),{provide:Bu,useExisting:rB},...n||[]],a=new Ep({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ge);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Oi,null),h;c.runOutsideAngular(()=>{h=c.onError.subscribe({next:b=>{u.handleError(b)}})});let m=()=>a.destroy(),w=i.get(lx);return w.add(m),a.onDestroy(()=>{h.unsubscribe(),w.delete(m)}),Yj(u,c,()=>{let b=a.get(cx);return b.runInitializers(),b.donePromise.then(()=>{let A=a.get(f_,Cp);Pj(A||Cp);let V=a.get(ra);return e!==void 0&&V.bootstrap(e),V})})})}catch(e){return Promise.reject(e)}}function Xu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function g_(t){let e=ze(null);try{return t()}finally{ze(e)}}var gx=null;function ni(){return gx}function vx(t){gx??=t}var em=class{};var sr=new ae(""),yx=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(fB),providedIn:"platform"});let t=e;return t})();var fB=(()=>{let e=class e extends yx{constructor(){super(),this._doc=oe(sr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ni().getBaseHref(this._doc)}onPopState(r){let i=ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function wx(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function hx(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ia(t){return t&&t[0]!=="?"?"?"+t:t}var nm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(_x),providedIn:"root"});let t=e;return t})(),pB=new ae(""),_x=(()=>{let e=class e extends nm{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??oe(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return wx(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ia(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ia(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ia(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Q(yx),Q(pB,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ju=(()=>{let e=class e{constructor(r){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=vB(hx(fx(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ia(i))}normalize(r){return e.stripTrailingSlash(gB(this._basePath,fx(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ia(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ia(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=ia,e.joinWithSlash=wx,e.stripTrailingSlash=hx,e.\u0275fac=function(i){return new(i||e)(Q(nm))},e.\u0275prov=de({token:e,factory:()=>mB(),providedIn:"root"});let t=e;return t})();function mB(){return new Ju(Q(nm))}function gB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function fx(t){return t.replace(/\/index.html$/,"")}function vB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bx(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var y_=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kc=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new y_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),px(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);px(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(re(Wc),re(zp),re(m_))},e.\u0275dir=Dt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function px(t,e){t.context.$implicit=e.item}var fn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new w_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){mx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){mx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(re(Wc),re(zp))},e.\u0275dir=Dt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),w_=class{constructor(){this.$implicit=null,this.ngIf=null}};function mx(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Dn(e)}'.`)}function yB(t,e){return new ve(2100,!1)}var __=class{createSubscription(e,n){return g_(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){g_(()=>e.unsubscribe())}},b_=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},wB=new b_,_B=new __,rm=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(jo(r))return wB;if(u_(r))return _B;throw yB(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(re(Wi,16))},e.\u0275pipe=Rw({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Bo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({});let t=e;return t})(),Ex="browser",bB="server";function oa(t){return t===bB}var tm=class{};var C_=class extends em{constructor(){super(...arguments),this.supportsDOMEvents=!0}},D_=class t extends C_{static makeCurrent(){vx(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=EB();return n==null?null:IB(n)}resetBaseElement(){ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bx(document.cookie,e)}},ed=null;function EB(){return ed=ed||document.querySelector("base"),ed?ed.getAttribute("href"):null}function IB(t){return new URL(t,document.baseURI).pathname}var T_=class{addToWindow(e){Yr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ve(5103,!1);return o},Yr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yr.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Yr.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Yr.frameworkStabilizers||(Yr.frameworkStabilizers=[]),Yr.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?ni().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},CB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),S_=new ae(""),Sx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new ve(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Q(S_),Q(Ge))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),im=class{constructor(e){this._doc=e}},E_="ng-app-id",xx=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oa(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${E_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(E_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(E_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Q(sr),Q(Lp),Q(Hw,8),Q(Ln))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),I_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},A_=/%COMP%/g,Ax="%COMP%",DB=`_nghost-${Ax}`,TB=`_ngcontent-${Ax}`,SB=!0,xB=new ae("",{providedIn:"root",factory:()=>SB});function AB(t){return TB.replace(A_,t)}function MB(t){return DB.replace(A_,t)}function Mx(t,e){return e.map(n=>n.replace(A_,t))}var Cx=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=oa(c),this.defaultRenderer=new td(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Zr.ShadowDom&&(i=je(ee({},i),{encapsulation:Zr.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof om?o.applyToHost(r):o instanceof nd&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case Zr.Emulated:s=new om(u,h,i,this.appId,m,a,c,w);break;case Zr.ShadowDom:return new x_(u,h,r,i,a,c,this.nonce,w);default:s=new nd(u,h,i,m,a,c,w);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Q(Sx),Q(xx),Q(Lp),Q(xB),Q(sr),Q(Ln),Q(Ge),Q(Hw))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),td=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(I_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Dx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Dx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ve(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=I_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=I_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Fi.DashCase|Fi.Important)?e.style.setProperty(n,r,i&Fi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Fi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Dx(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var x_=class extends td{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Mx(i.id,i.styles);for(let h of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nd=class extends td{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Mx(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},om=class extends nd{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=AB(u),this.hostAttr=MB(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},RB=(()=>{let e=class e extends im{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(Q(sr))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})(),Tx=["alt","control","meta","shift"],PB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},kB=(()=>{let e=class e extends im{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ni().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Tx.forEach(h=>{let m=i.indexOf(h);m>-1&&(i.splice(m,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=PB[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Tx.forEach(a=>{if(a!==o){let c=NB[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Q(sr))},e.\u0275prov=de({token:e,factory:e.\u0275fac});let t=e;return t})();function Rx(t,e){return dx(ee({rootComponent:t},OB(e)))}function OB(t){return{appProviders:[...Px,...t?.providers??[]],platformProviders:jB}}function FB(){D_.makeCurrent()}function VB(){return new Oi}function LB(){return gS(document),document}var jB=[{provide:Ln,useValue:Ex},{provide:$w,useValue:FB,multi:!0},{provide:sr,useFactory:LB,deps:[]}];var BB=new ae(""),UB=[{provide:Zu,useClass:T_,deps:[]},{provide:c_,useClass:Xp,deps:[Ge,Jp,Zu]},{provide:Xp,useClass:Xp,deps:[Ge,Jp,Zu]}],Px=[{provide:xp,useValue:"root"},{provide:Oi,useFactory:VB,deps:[]},{provide:S_,useClass:RB,multi:!0,deps:[sr,Ge,Ln]},{provide:S_,useClass:kB,multi:!0,deps:[sr]},Cx,xx,Sx,{provide:Hc,useExisting:Cx},{provide:tm,useClass:CB,deps:[]},[]],Nx=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Lp,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(Q(BB,12))},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({providers:[...Px,...UB],imports:[Bo,ux]});let t=e;return t})();var kx=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Q(sr))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Se="primary",wd=Symbol("RouteTitle"),k_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function el(t){return new k_(t)}function HB(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ri(t[n],e[n]))return!1;return!0}function ri(t,e){let n=t?O_(t):void 0,r=e?O_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!$x(t[i],e[i]))return!1;return!0}function O_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function $x(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Hx(t){return t.length>0?t[t.length-1]:null}function $o(t){return wy(t)?t:jo(t)?Oe(Promise.resolve(t)):le(t)}var zB={exact:zx,subset:Gx},qx={exact:GB,subset:WB,ignored:()=>!0};function Ox(t,e,n){return zB[n.paths](t.root,e.root,n.matrixParams)&&qx[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function GB(t,e){return ri(t,e)}function zx(t,e,n){if(!aa(t.segments,e.segments)||!cm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!zx(t.children[r],e.children[r],n))return!1;return!0}function WB(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$x(t[n],e[n]))}function Gx(t,e,n){return Wx(t,e,e.segments,n)}function Wx(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!aa(i,n)||e.hasChildren()||!cm(i,n,r))}else if(t.segments.length===n.length){if(!aa(t.segments,n)||!cm(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Gx(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!aa(t.segments,i)||!cm(t.segments,i,r)||!t.children[Se]?!1:Wx(t.children[Se],e,o,r)}}function cm(t,e,n){return e.every((r,i)=>qx[n](t[i].parameters,r.parameters))}var Uo=class{constructor(e=new Je([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=el(this.queryParams),this._queryParamMap}toString(){return YB.serialize(this)}},Je=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lm(this)}},sa=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=el(this.parameters),this._parameterMap}toString(){return Qx(this)}};function KB(t,e){return aa(t,e)&&t.every((n,r)=>ri(n.parameters,e[r].parameters))}function aa(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function QB(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Se&&(n=n.concat(e(i,r)))}),n}var a0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>new ld,providedIn:"root"});let t=e;return t})(),ld=class{parse(e){let n=new V_(e);return new Uo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${rd(e.root,!0)}`,r=JB(e.queryParams),i=typeof e.fragment=="string"?`#${ZB(e.fragment)}`:"";return`${n}${r}${i}`}},YB=new ld;function lm(t){return t.segments.map(e=>Qx(e)).join("/")}function rd(t,e){if(!t.hasChildren())return lm(t);if(e){let n=t.children[Se]?rd(t.children[Se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Se&&r.push(`${i}:${rd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QB(t,(r,i)=>i===Se?[rd(t.children[Se],!1)]:[`${i}:${rd(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Se]!=null?`${lm(t)}/${n[0]}`:`${lm(t)}/(${n.join("//")})`}}function Kx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sm(t){return Kx(t).replace(/%3B/gi,";")}function ZB(t){return encodeURI(t)}function F_(t){return Kx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function um(t){return decodeURIComponent(t)}function Fx(t){return um(t.replace(/\+/g,"%20"))}function Qx(t){return`${F_(t.path)}${XB(t.parameters)}`}function XB(t){return Object.entries(t).map(([e,n])=>`;${F_(e)}=${F_(n)}`).join("")}function JB(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sm(n)}=${sm(i)}`).join("&"):`${sm(n)}=${sm(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var eU=/^[^\/()?;#]+/;function M_(t){let e=t.match(eU);return e?e[0]:""}var tU=/^[^\/()?;=#]+/;function nU(t){let e=t.match(tU);return e?e[0]:""}var rU=/^[^=?&#]+/;function iU(t){let e=t.match(rU);return e?e[0]:""}var oU=/^[^&#]+/;function sU(t){let e=t.match(oU);return e?e[0]:""}var V_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Je([],{}):new Je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Se]=new Je(e,n)),r}parseSegment(){let e=M_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ve(4009,!1);return this.capture(e),new sa(um(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=nU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=M_(this.remaining);i&&(r=i,this.capture(r))}e[um(n)]=um(r)}parseQueryParam(e){let n=iU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=sU(this.remaining);s&&(r=s,this.capture(r))}let i=Fx(n),o=Fx(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=M_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ve(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Se);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Se]:new Je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ve(4011,!1)}};function Yx(t){return t.segments.length>0?new Je([],{[Se]:t}):t}function Zx(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Zx(i);if(r===Se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Je(t.segments,e);return aU(n)}function aU(t){if(t.numberOfChildren===1&&t.children[Se]){let e=t.children[Se];return new Je(t.segments.concat(e.segments),e.children)}return t}function ud(t){return t instanceof Uo}function cU(t,e,n=null,r=null){let i=Xx(t);return Jx(i,e,n,r)}function Xx(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new Je(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Yx(r);return e??i}function Jx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return R_(i,i,i,n,r);let o=lU(e);if(o.toRoot())return R_(i,i,new Je([],{}),n,r);let s=uU(o,i,t),a=s.processChildren?sd(s.segmentGroup,s.index,o.commands):tA(s.segmentGroup,s.index,o.commands);return R_(i,s.segmentGroup,a,n,r)}function dm(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function dd(t){return typeof t=="object"&&t!=null&&t.outlets}function R_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=eA(t,e,n);let a=Yx(Zx(s));return new Uo(a,o,i)}function eA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=eA(o,e,n)}),new Je(t.segments,r)}var hm=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&dm(r[0]))throw new ve(4003,!1);let i=r.find(dd);if(i&&i!==Hx(r))throw new ve(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new hm(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new hm(n,e,r)}var Zc=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function uU(t,e,n){if(t.isAbsolute)return new Zc(e,!0,0);if(!n)return new Zc(e,!1,NaN);if(n.parent===null)return new Zc(n,!0,0);let r=dm(t.commands[0])?0:1,i=n.segments.length-1+r;return dU(n,i,t.numberOfDoubleDots)}function dU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ve(4005,!1);i=r.segments.length}return new Zc(r,!1,i-o)}function hU(t){return dd(t[0])?t[0].outlets:{[Se]:t}}function tA(t,e,n){if(t??=new Je([],{}),t.segments.length===0&&t.hasChildren())return sd(t,e,n);let r=fU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Je(t.segments.slice(0,r.pathIndex),{});return o.children[Se]=new Je(t.segments.slice(r.pathIndex),t.children),sd(o,0,i)}else return r.match&&i.length===0?new Je(t.segments,{}):r.match&&!t.hasChildren()?L_(t,e,n):r.match?sd(t,0,i):L_(t,e,n)}function sd(t,e,n){if(n.length===0)return new Je(t.segments,{});{let r=hU(n),i={};if(Object.keys(r).some(o=>o!==Se)&&t.children[Se]&&t.numberOfChildren===1&&t.children[Se].segments.length===0){let o=sd(t.children[Se],e,n);return new Je(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=tA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Je(t.segments,i)}}function fU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(dd(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Lx(c,u,s))return o;r+=2}else{if(!Lx(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function L_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(dd(o)){let c=pU(o.outlets);return new Je(r,c)}if(i===0&&dm(n[0])){let c=t.segments[e];r.push(new sa(c.path,Vx(n[0]))),i++;continue}let s=dd(o)?o.outlets[Se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&dm(a)?(r.push(new sa(s,Vx(a))),i+=2):(r.push(new sa(s,{})),i++)}return new Je(r,{})}function pU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=L_(new Je([],{}),0,r))}),e}function Vx(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Lx(t,e,n){return t==n.path&&ri(e,n.parameters)}var ad="imperative",tn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(tn||{}),ar=class{constructor(e,n){this.id=e,this.url=n}},hd=class extends ar{constructor(e,n,r="imperative",i=null){super(e,n),this.type=tn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ca=class extends ar{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=tn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(zn||{}),j_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(j_||{}),Ki=class extends ar{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},la=class extends ar{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tn.NavigationSkipped}},fd=class extends ar{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=tn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fm=class extends ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},B_=class extends ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},U_=class extends ar{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=tn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$_=class extends ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},H_=class extends ar{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},q_=class{constructor(e){this.route=e,this.type=tn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},z_=class{constructor(e){this.route=e,this.type=tn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},G_=class{constructor(e){this.snapshot=e,this.type=tn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},W_=class{constructor(e){this.snapshot=e,this.type=tn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},K_=class{constructor(e){this.snapshot=e,this.type=tn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Q_=class{constructor(e){this.snapshot=e,this.type=tn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var pd=class{},tl=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var Y_=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new _m(this.injector),this.attachRef=null}},_m=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Y_(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(Q(ir))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Z_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Z_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=X_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return X_(e,this._root).map(n=>n.value)}};function Z_(t,e){if(t===e.value)return e;for(let n of e.children){let r=Z_(t,n);if(r)return r}return null}function X_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=X_(t,n);if(r.length)return r.unshift(e),r}return[]}var qn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var mm=class extends pm{constructor(e,n){super(e),this.snapshot=n,c0(this,e)}toString(){return this.snapshot.toString()}};function nA(t){let e=mU(t),n=new Ht([new sa("",{})]),r=new Ht({}),i=new Ht({}),o=new Ht({}),s=new Ht(""),a=new nl(n,r,o,s,i,Se,t,e.root);return a.snapshot=e.root,new mm(new qn(a,[]),e)}function mU(t){let e={},n={},r={},i="",o=new Xc([],e,r,i,n,Se,t,null,{});return new vm("",new qn(o,[]))}var nl=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(pe(u=>u[wd]))??le(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>el(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>el(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ee(ee({},e.params),t.params),data:ee(ee({},e.data),t.data),resolve:ee(ee(ee(ee({},t.data),e.data),i?.data),t._resolvedData)}:r={params:ee({},t.params),data:ee({},t.data),resolve:ee(ee({},t.data),t._resolvedData??{})},i&&iA(i)&&(r.resolve[wd]=i.title),r}var Xc=class{get title(){return this.data?.[wd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=el(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=el(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},vm=class extends pm{constructor(e,n){super(n),this.url=e,c0(this,n)}toString(){return rA(this._root)}};function c0(t,e){e.value._routerState=t,e.children.forEach(n=>c0(t,n))}function rA(t){let e=t.children.length>0?` { ${t.children.map(rA).join(", ")} } `:"";return`${t.value}${e}`}function P_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ri(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ri(e.params,n.params)||t.paramsSubject.next(n.params),qB(e.url,n.url)||t.urlSubject.next(n.url),ri(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function J_(t,e){let n=ri(t.params,e.params)&&KB(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||J_(t.parent,e.parent))}function iA(t){return typeof t.title=="string"||t.title===null}var l0=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Se,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=oe(_m),this.location=oe(Wc),this.changeDetector=oe(Wi),this.inputBinder=oe(u0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ve(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ve(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ve(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ve(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new e0(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Dt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ui]});let t=e;return t})(),e0=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===nl?this.route:e===_m?this.childContexts:this.parent.get(e,n)}},u0=new ae("");function gU(t,e,n){let r=md(t,e._root,n?n._root:void 0);return new mm(r,e)}function md(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vU(t,e,n);return new qn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>md(t,a)),s}}let r=yU(e.value),i=e.children.map(o=>md(t,o));return new qn(r,i)}}function vU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return md(t,r,i);return md(t,r)})}function yU(t){return new nl(new Ht(t.url),new Ht(t.params),new Ht(t.queryParams),new Ht(t.fragment),new Ht(t.data),t.outlet,t.component,t)}var gd=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},oA="ngNavigationCancelingError";function ym(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ud(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sA(!1,zn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function sA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[oA]=!0,n.cancellationCode=e,n}function wU(t){return aA(t)&&ud(t.url)}function aA(t){return!!t&&t[oA]}var _U=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(i,o){i&1&&ye(0,"router-outlet")},dependencies:[l0],encapsulation:2});let t=e;return t})();function bU(t,e){return t.providers&&!t._injector&&(t._injector=o_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function d0(t){let e=t.children&&t.children.map(d0),n=e?je(ee({},t),{children:e}):ee({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Se&&(n.component=_U),n}function Mr(t){return t.outlet||Se}function EU(t,e){let n=t.filter(r=>Mr(r)===e);return n.push(...t.filter(r=>Mr(r)!==e)),n}function _d(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var IU=(t,e,n,r)=>pe(i=>(new t0(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),t0=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),P_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Yc(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Yc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Q_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new W_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(P_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),P_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=_d(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},wm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Jc=class{constructor(e,n){this.component=e,this.route=n}};function CU(t,e,n){let r=t._root,i=e?e._root:null;return id(r,i,n,[r.value])}function DU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function il(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!oT(t)?t:e.get(t):r}function id(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yc(e);return t.children.forEach(s=>{TU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cd(a,n.getContext(s),i)),i}function TU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=SU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?id(t,e,a?a.children:null,r,i):id(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jc(a.outlet.component,s))}else s&&cd(e,a,i),i.canActivateChecks.push(new wm(r)),o.component?id(t,null,a?a.children:null,r,i):id(t,null,n,r,i);return i}function SU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!aa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!aa(t.url,e.url)||!ri(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!J_(t,e)||!ri(t.queryParams,e.queryParams);case"paramsChange":default:return!J_(t,e)}}function cd(t,e,n){let r=Yc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?cd(s,e.children.getContext(o),n):cd(s,null,n):cd(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Jc(e.outlet.component,i)):n.canDeactivateChecks.push(new Jc(null,i)):n.canDeactivateChecks.push(new Jc(null,i))}function bd(t){return typeof t=="function"}function xU(t){return typeof t=="boolean"}function AU(t){return t&&bd(t.canLoad)}function MU(t){return t&&bd(t.canActivate)}function RU(t){return t&&bd(t.canActivateChild)}function PU(t){return t&&bd(t.canDeactivate)}function NU(t){return t&&bd(t.canMatch)}function cA(t){return t instanceof Ni||t?.name==="EmptyError"}var am=Symbol("INITIAL_VALUE");function rl(){return Qe(t=>qf(t.map(e=>e.pipe(ki(1),qs(am)))).pipe(pe(e=>{for(let n of e)if(n!==!0){if(n===am)return am;if(n===!1||kU(n))return n}return!0}),un(e=>e!==am),ki(1)))}function kU(t){return ud(t)||t instanceof gd}function OU(t,e){return qt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?le(je(ee({},n),{guardsResult:!0})):FU(s,r,i,t).pipe(qt(a=>a&&xU(a)?VU(r,o,t,e):le(a)),pe(a=>je(ee({},n),{guardsResult:a})))})}function FU(t,e,n,r){return Oe(t).pipe(qt(i=>$U(i.component,i.route,n,e,r)),er(i=>i!==!0,!0))}function VU(t,e,n,r){return Oe(e).pipe(Dc(i=>Cc(jU(i.route.parent,r),LU(i.route,r),UU(t,i.path,n),BU(t,i.route,n))),er(i=>i!==!0,!0))}function LU(t,e){return t!==null&&e&&e(new K_(t)),le(!0)}function jU(t,e){return t!==null&&e&&e(new G_(t)),le(!0)}function BU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(o=>zf(()=>{let s=_d(e)??n,a=il(o,s),c=MU(a)?a.canActivate(e,t):Li(s,()=>a(e,t));return $o(c).pipe(er())}));return le(i).pipe(rl())}function UU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>DU(s)).filter(s=>s!==null).map(s=>zf(()=>{let a=s.guards.map(c=>{let u=_d(s.node)??n,h=il(c,u),m=RU(h)?h.canActivateChild(r,t):Li(u,()=>h(r,t));return $o(m).pipe(er())});return le(a).pipe(rl())}));return le(o).pipe(rl())}function $U(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return le(!0);let s=o.map(a=>{let c=_d(e)??i,u=il(a,c),h=PU(u)?u.canDeactivate(t,e,n,r):Li(c,()=>u(t,e,n,r));return $o(h).pipe(er())});return le(s).pipe(rl())}function HU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return le(!0);let o=i.map(s=>{let a=il(s,t),c=AU(a)?a.canLoad(e,n):Li(t,()=>a(e,n));return $o(c)});return le(o).pipe(rl(),lA(r))}function lA(t){return fy(Nt(e=>{if(typeof e!="boolean")throw ym(t,e)}),pe(e=>e===!0))}function qU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return le(!0);let o=i.map(s=>{let a=il(s,t),c=NU(a)?a.canMatch(e,n):Li(t,()=>a(e,n));return $o(c)});return le(o).pipe(rl(),lA(r))}var vd=class{constructor(e){this.segmentGroup=e||null}},yd=class extends Error{constructor(e){super(),this.urlTree=e}};function Qc(t){return Ic(new vd(t))}function zU(t){return Ic(new ve(4e3,!1))}function GU(t){return Ic(sA(!1,zn.GuardRejected))}var n0=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return le(r);if(i.numberOfChildren>1||!i.children[Se])return zU(`${e.redirectTo}`);i=i.children[Se]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:h,url:m,outlet:w,params:b,data:A,title:V}=i,F=Li(o,()=>a({params:b,data:A,queryParams:c,fragment:u,routeConfig:h,url:m,outlet:w,title:V}));if(F instanceof Uo)throw new yd(F);n=F}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new yd(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Uo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Je(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ve(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},r0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WU(t,e,n,r,i){let o=h0(t,e,n);return o.matched?(r=bU(e,r),qU(r,e,n,i).pipe(pe(s=>s===!0?o:ee({},r0)))):le(o)}function h0(t,e,n){if(e.path==="**")return KU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ee({},r0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||HB)(n,t,e);if(!i)return ee({},r0);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?ee(ee({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function KU(t){return{matched:!0,parameters:t.length>0?Hx(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function jx(t,e,n,r){return n.length>0&&ZU(t,n,r)?{segmentGroup:new Je(e,YU(r,new Je(n,t.children))),slicedSegments:[]}:n.length===0&&XU(t,n,r)?{segmentGroup:new Je(t.segments,QU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Je(t.segments,t.children),slicedSegments:n}}function QU(t,e,n,r){let i={};for(let o of n)if(bm(t,e,o)&&!r[Mr(o)]){let s=new Je([],{});i[Mr(o)]=s}return ee(ee({},r),i)}function YU(t,e){let n={};n[Se]=e;for(let r of t)if(r.path===""&&Mr(r)!==Se){let i=new Je([],{});n[Mr(r)]=i}return n}function ZU(t,e,n){return n.some(r=>bm(t,e,r)&&Mr(r)!==Se)}function XU(t,e,n){return n.some(r=>bm(t,e,r))}function bm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function JU(t,e,n,r){return Mr(t)!==r&&(r===Se||!bm(e,n,t))?!1:h0(e,t,n).matched}function e$(t,e,n){return e.length===0&&!t.children[n]}var i0=class{};function t$(t,e,n,r,i,o,s="emptyOnly"){return new o0(t,e,n,r,i,s,o).recognize()}var n$=31,o0=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new n0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ve(4002,`'${e.segmentGroup}'`)}recognize(){let e=jx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:n,rootSnapshot:r})=>{let i=new qn(r,n),o=new vm("",i),s=cU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Xc([],Object.freeze({}),Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,n).pipe(pe(r=>({children:r,rootSnapshot:n})),Do(r=>{if(r instanceof yd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vd?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(pe(s=>s instanceof qn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Oe(o).pipe(Dc(s=>{let a=r.children[s],c=EU(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Hs((s,a)=>(s.push(...a),s)),To(null),Dy(),qt(s=>{if(s===null)return Qc(r);let a=uA(s);return r$(a),le(a)}))}processSegment(e,n,r,i,o,s,a){return Oe(n).pipe(Dc(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Do(u=>{if(u instanceof vd)return le(null);throw u}))),er(c=>!!c),Do(c=>{if(cA(c))return e$(r,i,o)?le(new i0):Qc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return JU(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Qc(i):Qc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:m,remainingSegments:w}=h0(n,i,o);if(!c)return Qc(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>n$&&(this.allowRedirects=!1));let b=new Xc(o,u,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Bx(i),Mr(i),i.component??i._loadedComponent??null,i,Ux(i)),A=gm(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let V=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,b,e);return this.applyRedirects.lineralizeSegments(i,V).pipe(qt(F=>this.processSegment(e,r,n,F.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=WU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:u})=>{let h=r._loadedInjector??e,{parameters:m,consumedSegments:w,remainingSegments:b}=c,A=new Xc(w,m,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Bx(r),Mr(r),r.component??r._loadedComponent??null,r,Ux(r)),V=gm(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(V.params),A.data=Object.freeze(V.data);let{segmentGroup:F,slicedSegments:W}=jx(n,w,b,u);if(W.length===0&&F.hasChildren())return this.processChildren(h,u,F,A).pipe(pe(z=>new qn(A,z)));if(u.length===0&&W.length===0)return le(new qn(A,[]));let Z=Mr(r)===o;return this.processSegment(h,u,F,W,Z?Se:o,!0,A).pipe(pe(z=>new qn(A,z instanceof qn?[z]:[])))}))):Qc(n)))}getChildConfig(e,n,r){return n.children?le({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?le({routes:n._loadedRoutes,injector:n._loadedInjector}):HU(e,n,r,this.urlSerializer).pipe(qt(i=>i?this.configLoader.loadChildren(e,n).pipe(Nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):GU(n))):le({routes:[],injector:e})}};function r$(t){t.sort((e,n)=>e.value.outlet===Se?-1:n.value.outlet===Se?1:e.value.outlet.localeCompare(n.value.outlet))}function i$(t){let e=t.value.routeConfig;return e&&e.path===""}function uA(t){let e=[],n=new Set;for(let r of t){if(!i$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=uA(r.children);e.push(new qn(r.value,i))}return e.filter(r=>!n.has(r))}function Bx(t){return t.data||{}}function Ux(t){return t.resolve||{}}function o$(t,e,n,r,i,o){return qt(s=>t$(t,e,n,r,s.extractedUrl,i,o).pipe(pe(({state:a,tree:c})=>je(ee({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function s$(t,e){return qt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return le(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of dA(c))s.add(u);let a=0;return Oe(s).pipe(Dc(c=>o.has(c)?a$(c,r,t,e):(c.data=gm(c,c.parent,t).resolve,le(void 0))),Nt(()=>a++),Tc(1),qt(c=>a===s.size?le(n):In))})}function dA(t){let e=t.children.map(n=>dA(n)).flat();return[t,...e]}function a$(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!iA(i)&&(o[wd]=i.title),c$(o,t,e,r).pipe(pe(s=>(t._resolvedData=s,t.data=gm(t,t.parent,n).resolve,null)))}function c$(t,e,n,r){let i=O_(t);if(i.length===0)return le({});let o={};return Oe(i).pipe(qt(s=>l$(t[s],e,n,r).pipe(er(),Nt(a=>{if(a instanceof gd)throw ym(new ld,a);o[s]=a}))),Tc(1),Iy(o),Do(s=>cA(s)?In:Ic(s)))}function l$(t,e,n,r){let i=_d(e)??r,o=il(t,i),s=o.resolve?o.resolve(e,n):Li(i,()=>o(e,n));return $o(s)}function N_(t){return Qe(e=>{let n=t(e);return n?Oe(n).pipe(pe(()=>e)):le(e)})}var hA=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Se);return i}getResolvedTitleForRoute(r){return r.data[wd]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(u$),providedIn:"root"});let t=e;return t})(),u$=(()=>{let e=class e extends hA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Q(kx))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),f0=new ae("",{providedIn:"root",factory:()=>({})}),p0=new ae(""),d$=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(h_)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return le(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=$o(r.loadComponent()).pipe(pe(fA),Nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Pu(()=>{this.componentLoaders.delete(r)})),o=new wc(i,()=>new wt).pipe(yc());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return le({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=h$(i,this.compiler,r,this.onLoadEndListener).pipe(Pu(()=>{this.childrenLoaders.delete(i)})),a=new wc(s,()=>new wt).pipe(yc());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h$(t,e,n,r){return $o(t.loadChildren()).pipe(pe(fA),qt(i=>i instanceof $u||Array.isArray(i)?le(i):Oe(e.compileModuleAsync(i))),pe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(p0,[],{optional:!0,self:!0}).flat()),{routes:s.map(d0),injector:o}}))}function f$(t){return t&&typeof t=="object"&&"default"in t}function fA(t){return f$(t)?t.default:t}var m0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(p$),providedIn:"root"});let t=e;return t})(),p$=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),m$=new ae("");var g$=new ae(""),v$=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wt,this.transitionAbortSubject=new wt,this.configLoader=oe(d$),this.environmentInjector=oe(ir),this.urlSerializer=oe(a0),this.rootContexts=oe(_m),this.location=oe(Ju),this.inputBindingEnabled=oe(u0,{optional:!0})!==null,this.titleStrategy=oe(hA),this.options=oe(f0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(m0),this.createViewTransition=oe(m$,{optional:!0}),this.navigationErrorHandler=oe(g$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>le(void 0),this.rootComponentType=null;let r=o=>this.events.next(new q_(o)),i=o=>this.events.next(new z_(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(je(ee(ee({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ht({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ad,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(un(s=>s.id!==0),pe(s=>je(ee({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Qe(s=>{let a=!1,c=!1;return le(s).pipe(Qe(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",zn.SupersededByNewNavigation),In;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?je(ee({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&m!=="reload"){let w="";return this.events.next(new la(u.id,this.urlSerializer.serialize(u.rawUrl),w,j_.IgnoredSameUrlNavigation)),u.resolve(!1),In}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return le(u).pipe(Qe(w=>{let b=this.transitions?.getValue();return this.events.next(new hd(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),b!==this.transitions?.getValue()?In:Promise.resolve(w)}),o$(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Nt(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=je(ee({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let b=new fm(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(b)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:w,extractedUrl:b,source:A,restoredState:V,extras:F}=u,W=new hd(w,this.urlSerializer.serialize(b),A,V);this.events.next(W);let Z=nA(this.rootComponentType).snapshot;return this.currentTransition=s=je(ee({},u),{targetSnapshot:Z,urlAfterRedirects:b,extras:je(ee({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,le(s)}else{let w="";return this.events.next(new la(u.id,this.urlSerializer.serialize(u.extractedUrl),w,j_.IgnoredByUrlHandlingStrategy)),u.resolve(!1),In}}),Nt(u=>{let h=new B_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),pe(u=>(this.currentTransition=s=je(ee({},u),{guards:CU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),OU(this.environmentInjector,u=>this.events.next(u)),Nt(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ym(this.urlSerializer,u.guardsResult);let h=new U_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),un(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",zn.GuardRejected),!1)),N_(u=>{if(u.guards.canActivateChecks.length)return le(u).pipe(Nt(h=>{let m=new $_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),Qe(h=>{let m=!1;return le(h).pipe(s$(this.paramsInheritanceStrategy,this.environmentInjector),Nt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(h,"",zn.NoDataFromResolver)}}))}),Nt(h=>{let m=new H_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),N_(u=>{let h=m=>{let w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe(Nt(b=>{m.component=b}),pe(()=>{})));for(let b of m.children)w.push(...h(b));return w};return qf(h(u.targetSnapshot.root)).pipe(To(null),ki(1))}),N_(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,m=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return m?Oe(m).pipe(pe(()=>s)):le(s)}),pe(u=>{let h=gU(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=je(ee({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Nt(()=>{this.events.next(new pd)}),IU(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ki(1),Nt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ca(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Sy(this.transitionAbortSubject.pipe(Nt(u=>{throw u}))),Pu(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",zn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Do(u=>{if(c=!0,aA(u))this.events.next(new Ki(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),wU(u)?this.events.next(new tl(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new fd(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let m=Li(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(m instanceof gd){let{message:w,cancellationCode:b}=ym(this.urlSerializer,m);this.events.next(new Ki(s.id,this.urlSerializer.serialize(s.extractedUrl),w,b)),this.events.next(new tl(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(h);let w=r.errorHandler(u);s.resolve(!!w)}}catch(m){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(m)}}return In}))}))}cancelNavigationTransition(r,i,o){let s=new Ki(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function y$(t){return t!==ad}var w$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(_$),providedIn:"root"});let t=e;return t})(),s0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_$=(()=>{let e=class e extends s0{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:()=>oe(b$),providedIn:"root"});let t=e;return t})(),b$=(()=>{let e=class e extends pA{constructor(){super(...arguments),this.location=oe(Ju),this.urlSerializer=oe(a0),this.options=oe(f0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(m0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Uo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=nA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof hd)this.stateMemento=this.createStateMemento();else if(r instanceof la)this.rawUrlTree=i.initialUrl;else if(r instanceof fm){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof pd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ki&&(r.code===zn.GuardRejected||r.code===zn.NoDataFromResolver)?this.restoreHistory(i):r instanceof fd?this.restoreHistory(i,!0):r instanceof ca&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=ee(ee({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=ee(ee({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),od=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(od||{});function E$(t,e){t.events.pipe(un(n=>n instanceof ca||n instanceof Ki||n instanceof fd||n instanceof la),pe(n=>n instanceof ca||n instanceof la?od.COMPLETE:(n instanceof Ki?n.code===zn.Redirect||n.code===zn.SupersededByNewNavigation:!1)?od.REDIRECTING:od.FAILED),un(n=>n!==od.REDIRECTING),ki(1)).subscribe(()=>{e()})}function I$(t){throw t}var C$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=oe(Zp),this.stateManager=oe(pA),this.options=oe(f0,{optional:!0})||{},this.pendingTasks=oe(Gc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(v$),this.urlSerializer=oe(a0),this.location=oe(Ju),this.urlHandlingStrategy=oe(m0),this._events=new wt,this.errorHandler=this.options.errorHandler||I$,this.navigated=!1,this.routeReuseStrategy=oe(w$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(p0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(u0,{optional:!0}),this.eventsSubscription=new It,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ki&&i.code!==zn.Redirect&&i.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ca)this.navigated=!0;else if(i instanceof tl){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u=ee({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||y$(o.source)},a);this.scheduleNavigation(c,ad,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}S$(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ad,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=ee({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(d0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,h=u?this.currentUrlTree.fragment:a,m=null;switch(c){case"merge":m=ee(ee({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let w;try{let b=o?o.snapshot:this.routerState.snapshot.root;w=Xx(b)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),w=this.currentUrlTree.root}return Jx(w,r,m,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=ud(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ad,null,i)}navigate(r,i={skipLocationChange:!1}){return T$(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=ee({},C$):i===!1?o=ee({},D$):o=i,ud(r))return Ox(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Ox(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,h;a?(c=a.resolve,u=a.reject,h=a.promise):h=new Promise((w,b)=>{c=w,u=b});let m=this.pendingTasks.add();return E$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(w=>Promise.reject(w))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function T$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ve(4008,!1)}function S$(t){return!(t instanceof pd)&&!(t instanceof tl)}var x$=new ae("");function mA(t,...e){return Pw([{provide:p0,multi:!0,useValue:t},[],{provide:nl,useFactory:A$,deps:[pn]},{provide:d_,multi:!0,useFactory:M$},e.map(n=>n.\u0275providers)])}function A$(t){return t.routerState.root}function M$(){let t=oe(Ro);return e=>{let n=t.get(ra);if(e!==n.components[0])return;let r=t.get(pn),i=t.get(R$);t.get(P$)===1&&r.initialNavigation(),t.get(N$,null,xe.Optional)?.setUpPreloading(),t.get(x$,null,xe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var R$=new ae("",{factory:()=>new wt}),P$=new ae("",{providedIn:"root",factory:()=>1});var N$=new ae("");var gA='body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:66.9vh;padding:50px}.title[_ngcontent-%COMP%]{font-size:2rem;color:#2e4c6d;margin-bottom:20px;font-family:Dune,sans-serif}.description[_ngcontent-%COMP%]{font-size:2rem;color:#2e4c6d;font-family:Dune,sans-serif}.footer[_ngcontent-%COMP%]{background-color:#2e4c6d;color:#d2691e;text-align:center;padding:20px 0;bottom:0;width:100%}',vA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-bienvenida"]],standalone:!0,features:[it],decls:14,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container"],[1,"title"],[1,"description"],[1,"footer"],[1,"footer-content"]],template:function(i,o){i&1&&(C(0,"html",0)(1,"head"),ye(2,"meta",1)(3,"meta",2),E(),C(4,"body")(5,"div",3)(6,"h1",4),P(7,"Bienvenido a la cl\xEDnica de Paul Atreides"),E(),C(8,"p",5),P(9,"Trataremos tus heridas de batalla, no te preocupes"),E()(),C(10,"footer",6)(11,"div",7)(12,"p"),P(13,"No desperdicies agua, en Arrakis es un recurso muy preciado"),E()()()()())},styles:[gA,gA]});let t=e;return t})();var lo=Tu(ol());var SA=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(re(Vo),re(Hi))},e.\u0275dir=Dt({type:e});let t=e;return t})(),Rm=(()=>{let e=class e extends SA{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275dir=Dt({type:e,features:[Hn]});let t=e;return t})(),ll=new ae("");var k$={provide:ll,useExisting:Sr(()=>cr),multi:!0};function O$(){let t=ni()?ni().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var F$=new ae(""),cr=(()=>{let e=class e extends SA{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!O$())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(re(Vo),re(Hi),re(F$,8))},e.\u0275dir=Dt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ge("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[qi([k$]),Hn]});let t=e;return t})();function Ho(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function xA(t){return t!=null&&typeof t.length=="number"}var Pm=new ae(""),I0=new ae(""),V$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ve=class{static min(e){return L$(e)}static max(e){return j$(e)}static required(e){return AA(e)}static requiredTrue(e){return B$(e)}static email(e){return U$(e)}static minLength(e){return $$(e)}static maxLength(e){return H$(e)}static pattern(e){return q$(e)}static nullValidator(e){return Im(e)}static compose(e){return OA(e)}static composeAsync(e){return VA(e)}};function L$(t){return e=>{if(Ho(e.value)||Ho(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function j$(t){return e=>{if(Ho(e.value)||Ho(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function AA(t){return Ho(t.value)?{required:!0}:null}function B$(t){return t.value===!0?null:{required:!0}}function U$(t){return Ho(t.value)||V$.test(t.value)?null:{email:!0}}function $$(t){return e=>Ho(e.value)||!xA(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function H$(t){return e=>xA(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function q$(t){if(!t)return Im;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Ho(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Im(t){return null}function MA(t){return t!=null}function RA(t){return jo(t)?Oe(t):t}function PA(t){let e={};return t.forEach(n=>{e=n!=null?ee(ee({},e),n):e}),Object.keys(e).length===0?null:e}function NA(t,e){return e.map(n=>n(t))}function z$(t){return!t.validate}function kA(t){return t.map(e=>z$(e)?e:n=>e.validate(n))}function OA(t){if(!t)return null;let e=t.filter(MA);return e.length==0?null:function(n){return PA(NA(n,e))}}function FA(t){return t!=null?OA(kA(t)):null}function VA(t){if(!t)return null;let e=t.filter(MA);return e.length==0?null:function(n){let r=NA(n,e).map(RA);return _y(r).pipe(pe(PA))}}function LA(t){return t!=null?VA(kA(t)):null}function yA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function jA(t){return t._rawValidators}function BA(t){return t._rawAsyncValidators}function v0(t){return t?Array.isArray(t)?t:[t]:[]}function Cm(t,e){return Array.isArray(t)?t.includes(e):t===e}function wA(t,e){let n=v0(e);return v0(t).forEach(i=>{Cm(n,i)||n.push(i)}),n}function _A(t,e){return v0(e).filter(n=>!Cm(t,n))}var Dm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},da=class extends Dm{get formDirective(){return null}get path(){return null}},ha=class extends Dm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Tm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},G$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},OJ=je(ee({},G$),{"[class.ng-submitted]":"isSubmitted"}),oi=(()=>{let e=class e extends Tm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(re(ha,2))},e.\u0275dir=Dt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Wp("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Hn]});let t=e;return t})(),zo=(()=>{let e=class e extends Tm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(re(da,10))},e.\u0275dir=Dt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Wp("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Hn]});let t=e;return t})();var Ed="VALID",Em="INVALID",sl="PENDING",Id="DISABLED",qo=class{},Sm=class extends qo{constructor(e,n){super(),this.value=e,this.source=n}},Cd=class extends qo{constructor(e,n){super(),this.pristine=e,this.source=n}},Dd=class extends qo{constructor(e,n){super(),this.touched=e,this.source=n}},al=class extends qo{constructor(e,n){super(),this.status=e,this.source=n}},y0=class extends qo{constructor(e){super(),this.source=e}},w0=class extends qo{constructor(e){super(),this.source=e}};function C0(t){return(Nm(t)?t.validators:t)||null}function W$(t){return Array.isArray(t)?FA(t):t||null}function D0(t,e){return(Nm(e)?e.asyncValidators:t)||null}function K$(t){return Array.isArray(t)?LA(t):t||null}function Nm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function UA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ve(1e3,"");if(!r[n])throw new ve(1001,"")}function $A(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ve(1002,"")})}var cl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new wt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ed}get invalid(){return this.status===Em}get pending(){return this.status==sl}get disabled(){return this.status===Id}get enabled(){return this.status!==Id}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_A(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_A(e,this._rawAsyncValidators))}hasValidator(e){return Cm(this._rawValidators,e)}hasAsyncValidator(e){return Cm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(je(ee({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Dd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Dd(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(je(ee({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Cd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Cd(!0,r))}markAsPending(e={}){this.status=sl;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new al(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(je(ee({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Id,this.errors=null,this._forEachChild(i=>{i.disable(je(ee({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sm(this.value,r)),this._events.next(new al(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(je(ee({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ed,this._forEachChild(r=>{r.enable(je(ee({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(je(ee({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ed||this.status===sl)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sm(this.value,n)),this._events.next(new al(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(je(ee({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Id:Ed}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=sl,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=RA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new al(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?Id:this.errors?Em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sl)?sl:this._anyControlsHaveStatus(Em)?Em:Ed}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Cd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Dd(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=W$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=K$(this._rawAsyncValidators)}},xm=class extends cl{constructor(e,n,r){super(C0(n),D0(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){$A(this,!0,e),Object.keys(e).forEach(r=>{UA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _0=class extends xm{};var km=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>Om}),Om="always";function HA(t,e){return[...e.path,t]}function b0(t,e,n=Om){T0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Y$(t,e),X$(t,e),Z$(t,e),Q$(t,e)}function bA(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Mm(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Am(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Q$(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function T0(t,e){let n=jA(t);e.validator!==null?t.setValidators(yA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=BA(t);e.asyncValidator!==null?t.setAsyncValidators(yA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Am(e._rawValidators,i),Am(e._rawAsyncValidators,i)}function Mm(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=jA(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=BA(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Am(e._rawValidators,r),Am(e._rawAsyncValidators,r),n}function Y$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&qA(t,e)})}function Z$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&qA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function qA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function X$(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function J$(t,e){t==null,T0(t,e)}function e4(t,e){return Mm(t,e)}function zA(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function t4(t){return Object.getPrototypeOf(t.constructor)===Rm}function n4(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function GA(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===cr?n=o:t4(o)?r=o:i=o}),i||r||n||null}function r4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function EA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Td=class extends cl{constructor(e=null,n,r){super(C0(n),D0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(IA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var i4=t=>t instanceof Td;var o4={provide:ha,useExisting:Sr(()=>S0)},CA=Promise.resolve(),S0=(()=>{let e=class e extends ha{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Td,this._registered=!1,this.name="",this.update=new ut,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=GA(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),zA(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){b0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){CA.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Xu(i);CA.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?HA(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(re(da,9),re(Pm,10),re(I0,10),re(ll,10),re(Wi,8),re(km,8))},e.\u0275dir=Dt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qi([o4]),Hn,Ui]});let t=e;return t})(),Go=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Dt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),s4={provide:ll,useExisting:Sr(()=>fa),multi:!0},fa=(()=>{let e=class e extends Rm{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&ge("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[qi([s4]),Hn]});let t=e;return t})();var WA=new ae("");var a4={provide:da,useExisting:Sr(()=>Qi)},Qi=(()=>{let e=class e extends da{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ut,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return b0(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){bA(r.control||null,r,!1),r4(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,n4(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new y0(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1,this.form._events.next(new w0(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(bA(i||null,r),i4(o)&&(b0(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);J$(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&e4(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){T0(this.form,this),this._oldForm&&Mm(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(re(Pm,10),re(I0,10),re(km,8))},e.\u0275dir=Dt({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&ge("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qi([a4]),Hn,Ui]});let t=e;return t})();var c4={provide:ha,useExisting:Sr(()=>Yi)},Yi=(()=>{let e=class e extends ha{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ut,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=GA(this,s)}ngOnChanges(r){this._added||this._setUpControl(),zA(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return HA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(re(da,13),re(Pm,10),re(I0,10),re(ll,10),re(WA,8))},e.\u0275dir=Dt({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[qi([c4]),Hn,Ui]});let t=e;return t})(),l4={provide:ll,useExisting:Sr(()=>Fm),multi:!0};function KA(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function u4(t){return t.split(":")[0]}var Fm=(()=>{let e=class e extends Rm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=KA(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=u4(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&ge("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[qi([l4]),Hn]});let t=e;return t})(),QA=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(KA(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(re(Hi),re(Vo),re(Fm,9))},e.\u0275dir=Dt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),d4={provide:ll,useExisting:Sr(()=>YA),multi:!0};function DA(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function h4(t){return t.split(":")[0]}var YA=(()=>{let e=class e extends Rm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],h=this._getOptionValue(u.value);o.push(h)}}else{let a=i.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let h=this._getOptionValue(u.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=h4(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&ge("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[qi([d4]),Hn]});let t=e;return t})(),ZA=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(DA(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(DA(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(re(Hi),re(Vo),re(YA,9))},e.\u0275dir=Dt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var f4=(()=>{let e=class e{constructor(){this._validator=Im}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Im,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Dt({type:e,features:[Ui]});let t=e;return t})();var p4={provide:Pm,useExisting:Sr(()=>Zi),multi:!0};var Zi=(()=>{let e=class e extends f4{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Xu,this.createValidator=r=>AA}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=$i(e)))(o||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Gp("required",o._enabled?"":null)},inputs:{required:"required"},features:[qi([p4]),Hn]});let t=e;return t})();var XA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({});let t=e;return t})(),E0=class extends cl{constructor(e,n,r){super(C0(n),D0(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){$A(this,!1,e),e.forEach((r,i)=>{UA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function TA(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var si=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return TA(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new xm(o,s)}record(r,i=null){let o=this._reduceControls(r);return new _0(o,i)}control(r,i,o){let s={};return this.useNonNullable?(TA(i)?s=i:(s.validators=i,s.asyncValidators=o),new Td(r,je(ee({},s),{nonNullable:!0}))):new Td(r,i,o)}array(r,i,o){let s=r.map(a=>this._createControl(a));return new E0(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof Td)return r;if(r instanceof cl)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:km,useValue:r.callSetDisabledState??Om}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({imports:[XA]});let t=e;return t})(),ai=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:WA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:km,useValue:r.callSetDisabledState??Om}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=en({type:e}),e.\u0275inj=Jt({imports:[XA]});let t=e;return t})();var Vm=(()=>{let e=class e{constructor(){this.credencialesSeleccionadas=new ut}seleccionarCredenciales(r,i){let o={email:r,password:i};this.credencialesSeleccionadas.emit(o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-botones-inicio"]],outputs:{credencialesSeleccionadas:"credencialesSeleccionadas"},standalone:!0,features:[it],decls:14,vars:0,consts:[[1,"container"],[1,"ingreso-rapido-container","d-flex","flex-column","align-items-center","mb-4"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnAdmin",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnEsp1",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnEsp2",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac1",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac2",3,"click"],[1,"btn","btn-lg","btnIngreso","btn-primary","btnPac3",3,"click"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1)(2,"button",2),ge("click",function(){return o.seleccionarCredenciales("pexari1606@luravel.com","111111")}),P(3,"(admin)"),E(),C(4,"button",3),ge("click",function(){return o.seleccionarCredenciales("negah99739@nolanzip.com","chani123")}),P(5,"(especialista)"),E(),C(6,"button",4),ge("click",function(){return o.seleccionarCredenciales("bidegi7129@mposhop.com","stilgar123")}),P(7,"(especialista)"),E(),C(8,"button",5),ge("click",function(){return o.seleccionarCredenciales("doreno1189@mposhop.com","feyd123")}),P(9,"(paciente)"),E(),C(10,"button",6),ge("click",function(){return o.seleccionarCredenciales("rajir12322@nolanzip.com","rabban123")}),P(11,"(paciente)"),E(),C(12,"button",7),ge("click",function(){return o.seleccionarCredenciales("tafakaw234@kinsef.com","harkonnen123")}),P(13,"(paciente)"),E()()())},styles:['.btnIngreso[_ngcontent-%COMP%]{margin-bottom:15px;background-size:cover;background-position:center;width:90px;height:90px;border:none;border-radius:10px;color:#d2691e;font-weight:700;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;text-shadow:2px 2px 4px rgba(0,0,0,.9);position:relative;display:flex;flex-direction:column;justify-content:flex-end;padding:5px}.btnIngreso[_ngcontent-%COMP%]:hover{filter:brightness(.7);cursor:pointer;transform:scale(1.09)}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:90vh}.ingreso-rapido-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btn[_ngcontent-%COMP%]{margin-bottom:3px;margin-left:10px}.btnAdmin[_ngcontent-%COMP%]{background-image:url("./media/paul-TOTLTP7V.jpg")}.btnPac1[_ngcontent-%COMP%]{background-image:url("./media/feyd-PPCNG5RK.jpg")}.btnPac2[_ngcontent-%COMP%]{background-image:url("./media/rabban-SKHYYKXC.jpg")}.btnPac3[_ngcontent-%COMP%]{background-image:url("./media/harkonnen-WZNTQZTQ.jpg")}.btnEsp1[_ngcontent-%COMP%]{background-image:url("./media/chani-MDD6D4RA.jpg")}.btnEsp2[_ngcontent-%COMP%]{background-image:url("./media/stilgar-JGY2FHP7.jpg")}']});let t=e;return t})();var m4="firebase",g4="10.12.2";Xn(m4,g4,"app");var Xi=new Vi("ANGULARFIRE2_VERSION");var JA=(t,e)=>{let n=e?[e]:WC(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ci=class{constructor(){return JA(v4)}},v4="app-check";function dl(){}var Lm=class{zone;delegate;constructor(e,n=vy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},x0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dl,{},dl,dl)),n.pipe(Nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ma=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Lm(Zone.current)),this.insideAngular=n.run(()=>new Lm(Zone.current,$s)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Q(Ge))};static \u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function y4(t){return Sd().ngZone.runOutsideAngular(()=>t())}function pa(t){return Sd().ngZone.run(()=>t())}function A0(t){return t.pipe(Fn(Sd().outsideAngular))}function Qt(t){return w4(Sd())(t)}function w4(t){return function(n){return n=n.lift(new x0(t.ngZone)),n.pipe(Jn(t.outsideAngular),Fn(t.insideAngular))}}var _4=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),pa(()=>t.apply(void 0,r))},eM=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=pa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dl,{},dl,dl))),r[o]=_4(r[o],n));let i=y4(()=>t.apply(this,r));if(!e)if(i instanceof Te){let o=Sd();return i.pipe(Jn(o.outsideAngular),Fn(o.insideAngular))}else return pa(()=>i);return i instanceof Te?i.pipe(Qt):i instanceof Promise?pa(()=>new Promise((o,s)=>i.then(a=>pa(()=>o(a)),a=>pa(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:pa(()=>i)};var tM=eM(Zv,!0);var _H=new Map,bH={activated:!1,tokenObservers:[]},EH={initialized:!1,enabled:!1};function Rr(t){return _H.get(t)||Object.assign({},bH)}function cM(){return EH}var IH="https://content-firebaseappcheck.googleapis.com/v1";var CH="exchangeDebugToken",nM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Kee=24*60*60*1e3;var P0=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return k(this,null,function*(){this.stop();try{this.pending=new Kv,this.pending.promise.catch(n=>{}),yield DH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Kv,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function DH(t){return new Promise(e=>{setTimeout(e,t)})}var TH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wo=new GC("appCheck","AppCheck",TH);function lM(t){if(!Rr(t).activated)throw Wo.create("use-before-activation",{appName:t.name})}function uM(r,i){return k(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let b=yield s.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(b){throw Wo.create("fetch-network-error",{originalErrorMessage:b?.message})}if(c.status!==200)throw Wo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(b){throw Wo.create("fetch-parse-error",{originalErrorMessage:b?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Wo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let m=Number(h[1])*1e3,w=Date.now();return{token:u.token,expireTimeMillis:w+m,issuedAtTimeMillis:w}})}function dM(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${IH}/projects/${n}/apps/${r}:${CH}?key=${i}`,body:{debug_token:e}}}var SH="firebase-app-check-database",xH=1,N0="firebase-app-check-store";var jm=null;function AH(){return jm||(jm=new Promise((t,e)=>{try{let n=indexedDB.open(SH,xH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Wo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(N0,{keyPath:"compositeKey"})}}}catch(n){e(Wo.create("storage-open",{originalErrorMessage:n?.message}))}}),jm)}function MH(t,e){return RH(PH(t),e)}function RH(t,e){return k(this,null,function*(){let r=(yield AH()).transaction(N0,"readwrite"),o=r.objectStore(N0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Wo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function PH(t){return`${t.options.appId}-${t.name}`}var k0=new wf("@firebase/app-check");function R0(t,e){return vf()?MH(t,e).catch(n=>{k0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function hM(){return cM().enabled}function fM(){return k(this,null,function*(){let t=cM();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var NH={error:"UNKNOWN_ERROR"};function kH(t){return zC.encodeString(JSON.stringify(t),!1)}function O0(t,e=!1){return k(this,null,function*(){let n=t.app;lM(n);let r=Rr(n),i=r.token,o;if(i&&!xd(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(xd(c)?i=c:yield R0(n,void 0))}if(!e&&i&&xd(i))return{token:i.token};let s=!1;if(hM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uM(dM(n,yield fM()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield R0(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Rr(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?k0.warn(c.message):k0.error(c),o=c}let a;return i?o?xd(i)?a={token:i.token,internalError:o}:a=iM(o):(a={token:i.token},r.token=i,yield R0(n,i)):a=iM(o),s&&LH(n,a),a})}function OH(t){return k(this,null,function*(){let e=t.app;lM(e);let{provider:n}=Rr(e);if(hM()){let r=yield fM(),{token:i}=yield uM(dM(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function FH(t,e,n,r){let{app:i}=t,o=Rr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xd(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),rM(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>rM(t))}function pM(t,e){let n=Rr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function rM(t){let{app:e}=t,n=Rr(e),r=n.tokenRefresher;r||(r=VH(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function VH(t){let{app:e}=t;return new P0(()=>k(this,null,function*(){let n=Rr(e),r;if(n.token?r=yield O0(t,!0):r=yield O0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Rr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nM.RETRIAL_MIN_WAIT,nM.RETRIAL_MAX_WAIT)}function LH(t,e){let n=Rr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xd(t){return t.expireTimeMillis-Date.now()>0}function iM(t){return{token:kH(NH),error:t}}var F0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Rr(this.app);for(let n of e)pM(this.app,n.next);return Promise.resolve()}};function jH(t,e){return new F0(t,e)}function BH(t){return{getToken:e=>O0(t,e),getLimitedUseToken:()=>OH(t),addTokenListener:e=>FH(t,"INTERNAL",e),removeTokenListener:e=>pM(t.app,e)}}var UH="@firebase/app-check",$H="0.8.4";var HH="app-check",oM="app-check-internal";function qH(){Ls(new br(HH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return jH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(oM).initialize()})),Ls(new br(oM,t=>{let e=t.getProvider("app-check").getImmediate();return BH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xn(UH,$H)}qH();var zH=["localhost","0.0.0.0","127.0.0.1"],ste=typeof window<"u"&&zH.includes(window.location.hostname);var GH="firebase",WH="10.12.2";Wt.registerVersion(GH,WH,"app-compat");var KH=["ngOnDestroy"],gM=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(KH.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(h=>{let m=h?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,m),m})})})});var Bm=class{constructor(e){return e}},Ko=new ae("angularfire2.app.options"),Qo=new ae("angularfire2.app.name");function ga(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Wt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Wt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;QH("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Bm(s)}var QH=(t,...e)=>{p_()&&typeof console<"u"&&console[t](...e)},YH={provide:Bm,useFactory:ga,deps:[Ko,Ge,[new zu,Qo]]},vM=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ko,useValue:n},{provide:Qo,useValue:r}]}}constructor(n){Wt.registerVersion("angularfire",Xi.full,"core"),Wt.registerVersion("angularfire",Xi.full,"app-compat"),Wt.registerVersion("angular",sx.full,n.toString())}static \u0275fac=function(r){return new(r||t)(Q(Ln))};static \u0275mod=en({type:t});static \u0275inj=Jt({providers:[YH]})}return t})();function hl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return ZH(i,s)||(mM("error",`${e} was already initialized on the ${n} Firebase App with different settings.${XH?" You may need to reload as Firebase is not HMR aware.":""}`),mM("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function ZH(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var XH=typeof module<"u"&&!!module.hot,mM=(t,...e)=>{p_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var L0=new ae("angularfire2.auth.use-emulator"),j0=new ae("angularfire2.auth.settings"),B0=new ae("angularfire2.auth.tenant-id"),U0=new ae("angularfire2.auth.langugage-code"),$0=new ae("angularfire2.auth.use-device-language"),H0=new ae("angularfire.auth.persistence"),q0=(t,e,n,r,i,o,s,a)=>hl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,h]of Object.entries(s))c.settings[u]=h;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),va=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,h,m,w,b){let A=new wt,V=le(void 0).pipe(Fn(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-VDW56KPK.js"))),pe(()=>ga(n,o,r)),pe(F=>q0(F,o,a,u,h,m,c,w)),Wf({bufferSize:1,refCount:!1}));if(oa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=le(null);else{V.pipe(er()).subscribe();let F=V.pipe(Qe(z=>z.getRedirectResult().then(J=>J,()=>null)),Qt,Wf({bufferSize:1,refCount:!1})),W=V.pipe(Qe(z=>new Te(J=>({unsubscribe:o.runOutsideAngular(()=>z.onAuthStateChanged(ue=>J.next(ue),ue=>J.error(ue),()=>J.complete()))})))),Z=V.pipe(Qe(z=>new Te(J=>({unsubscribe:o.runOutsideAngular(()=>z.onIdTokenChanged(ue=>J.next(ue),ue=>J.error(ue),()=>J.complete()))}))));this.authState=F.pipe(Kf(W),Jn(s.outsideAngular),Fn(s.insideAngular)),this.user=F.pipe(Kf(Z),Jn(s.outsideAngular),Fn(s.insideAngular)),this.idToken=this.user.pipe(Qe(z=>z?Oe(z.getIdToken()):le(null))),this.idTokenResult=this.user.pipe(Qe(z=>z?Oe(z.getIdTokenResult()):le(null))),this.credential=by(F,A,this.authState.pipe(un(z=>!z))).pipe(pe(z=>z?.user?z:null),Jn(s.outsideAngular),Fn(s.insideAngular))}return gM(this,V,o,{spy:{apply:(F,W,Z)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&Z.then(z=>A.next(z))}}})}static \u0275fac=function(r){return new(r||t)(Q(Ko),Q(Qo,8),Q(Ln),Q(Ge),Q(ma),Q(L0,8),Q(j0,8),Q(B0,8),Q(U0,8),Q($0,8),Q(H0,8),Q(ci,8))};static \u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),yM=(()=>{class t{constructor(){Wt.registerVersion("angularfire",Xi.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=en({type:t});static \u0275inj=Jt({providers:[va]})}return t})();var wM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_M={};var Yo,G0;(function(){var t;function e(x,I){function S(){}S.prototype=I.prototype,x.D=I.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(M,N,L){for(var T=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)T[Qn-2]=arguments[Qn];return I.prototype[N].apply(M,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,S){S||(S=0);var M=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)M[N]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(N=0;16>N;++N)M[N]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=x.g[0],S=x.g[1],N=x.g[2];var L=x.g[3],T=I+(L^S&(N^L))+M[0]+3614090360&4294967295;I=S+(T<<7&4294967295|T>>>25),T=L+(N^I&(S^N))+M[1]+3905402710&4294967295,L=I+(T<<12&4294967295|T>>>20),T=N+(S^L&(I^S))+M[2]+606105819&4294967295,N=L+(T<<17&4294967295|T>>>15),T=S+(I^N&(L^I))+M[3]+3250441966&4294967295,S=N+(T<<22&4294967295|T>>>10),T=I+(L^S&(N^L))+M[4]+4118548399&4294967295,I=S+(T<<7&4294967295|T>>>25),T=L+(N^I&(S^N))+M[5]+1200080426&4294967295,L=I+(T<<12&4294967295|T>>>20),T=N+(S^L&(I^S))+M[6]+2821735955&4294967295,N=L+(T<<17&4294967295|T>>>15),T=S+(I^N&(L^I))+M[7]+4249261313&4294967295,S=N+(T<<22&4294967295|T>>>10),T=I+(L^S&(N^L))+M[8]+1770035416&4294967295,I=S+(T<<7&4294967295|T>>>25),T=L+(N^I&(S^N))+M[9]+2336552879&4294967295,L=I+(T<<12&4294967295|T>>>20),T=N+(S^L&(I^S))+M[10]+4294925233&4294967295,N=L+(T<<17&4294967295|T>>>15),T=S+(I^N&(L^I))+M[11]+2304563134&4294967295,S=N+(T<<22&4294967295|T>>>10),T=I+(L^S&(N^L))+M[12]+1804603682&4294967295,I=S+(T<<7&4294967295|T>>>25),T=L+(N^I&(S^N))+M[13]+4254626195&4294967295,L=I+(T<<12&4294967295|T>>>20),T=N+(S^L&(I^S))+M[14]+2792965006&4294967295,N=L+(T<<17&4294967295|T>>>15),T=S+(I^N&(L^I))+M[15]+1236535329&4294967295,S=N+(T<<22&4294967295|T>>>10),T=I+(N^L&(S^N))+M[1]+4129170786&4294967295,I=S+(T<<5&4294967295|T>>>27),T=L+(S^N&(I^S))+M[6]+3225465664&4294967295,L=I+(T<<9&4294967295|T>>>23),T=N+(I^S&(L^I))+M[11]+643717713&4294967295,N=L+(T<<14&4294967295|T>>>18),T=S+(L^I&(N^L))+M[0]+3921069994&4294967295,S=N+(T<<20&4294967295|T>>>12),T=I+(N^L&(S^N))+M[5]+3593408605&4294967295,I=S+(T<<5&4294967295|T>>>27),T=L+(S^N&(I^S))+M[10]+38016083&4294967295,L=I+(T<<9&4294967295|T>>>23),T=N+(I^S&(L^I))+M[15]+3634488961&4294967295,N=L+(T<<14&4294967295|T>>>18),T=S+(L^I&(N^L))+M[4]+3889429448&4294967295,S=N+(T<<20&4294967295|T>>>12),T=I+(N^L&(S^N))+M[9]+568446438&4294967295,I=S+(T<<5&4294967295|T>>>27),T=L+(S^N&(I^S))+M[14]+3275163606&4294967295,L=I+(T<<9&4294967295|T>>>23),T=N+(I^S&(L^I))+M[3]+4107603335&4294967295,N=L+(T<<14&4294967295|T>>>18),T=S+(L^I&(N^L))+M[8]+1163531501&4294967295,S=N+(T<<20&4294967295|T>>>12),T=I+(N^L&(S^N))+M[13]+2850285829&4294967295,I=S+(T<<5&4294967295|T>>>27),T=L+(S^N&(I^S))+M[2]+4243563512&4294967295,L=I+(T<<9&4294967295|T>>>23),T=N+(I^S&(L^I))+M[7]+1735328473&4294967295,N=L+(T<<14&4294967295|T>>>18),T=S+(L^I&(N^L))+M[12]+2368359562&4294967295,S=N+(T<<20&4294967295|T>>>12),T=I+(S^N^L)+M[5]+4294588738&4294967295,I=S+(T<<4&4294967295|T>>>28),T=L+(I^S^N)+M[8]+2272392833&4294967295,L=I+(T<<11&4294967295|T>>>21),T=N+(L^I^S)+M[11]+1839030562&4294967295,N=L+(T<<16&4294967295|T>>>16),T=S+(N^L^I)+M[14]+4259657740&4294967295,S=N+(T<<23&4294967295|T>>>9),T=I+(S^N^L)+M[1]+2763975236&4294967295,I=S+(T<<4&4294967295|T>>>28),T=L+(I^S^N)+M[4]+1272893353&4294967295,L=I+(T<<11&4294967295|T>>>21),T=N+(L^I^S)+M[7]+4139469664&4294967295,N=L+(T<<16&4294967295|T>>>16),T=S+(N^L^I)+M[10]+3200236656&4294967295,S=N+(T<<23&4294967295|T>>>9),T=I+(S^N^L)+M[13]+681279174&4294967295,I=S+(T<<4&4294967295|T>>>28),T=L+(I^S^N)+M[0]+3936430074&4294967295,L=I+(T<<11&4294967295|T>>>21),T=N+(L^I^S)+M[3]+3572445317&4294967295,N=L+(T<<16&4294967295|T>>>16),T=S+(N^L^I)+M[6]+76029189&4294967295,S=N+(T<<23&4294967295|T>>>9),T=I+(S^N^L)+M[9]+3654602809&4294967295,I=S+(T<<4&4294967295|T>>>28),T=L+(I^S^N)+M[12]+3873151461&4294967295,L=I+(T<<11&4294967295|T>>>21),T=N+(L^I^S)+M[15]+530742520&4294967295,N=L+(T<<16&4294967295|T>>>16),T=S+(N^L^I)+M[2]+3299628645&4294967295,S=N+(T<<23&4294967295|T>>>9),T=I+(N^(S|~L))+M[0]+4096336452&4294967295,I=S+(T<<6&4294967295|T>>>26),T=L+(S^(I|~N))+M[7]+1126891415&4294967295,L=I+(T<<10&4294967295|T>>>22),T=N+(I^(L|~S))+M[14]+2878612391&4294967295,N=L+(T<<15&4294967295|T>>>17),T=S+(L^(N|~I))+M[5]+4237533241&4294967295,S=N+(T<<21&4294967295|T>>>11),T=I+(N^(S|~L))+M[12]+1700485571&4294967295,I=S+(T<<6&4294967295|T>>>26),T=L+(S^(I|~N))+M[3]+2399980690&4294967295,L=I+(T<<10&4294967295|T>>>22),T=N+(I^(L|~S))+M[10]+4293915773&4294967295,N=L+(T<<15&4294967295|T>>>17),T=S+(L^(N|~I))+M[1]+2240044497&4294967295,S=N+(T<<21&4294967295|T>>>11),T=I+(N^(S|~L))+M[8]+1873313359&4294967295,I=S+(T<<6&4294967295|T>>>26),T=L+(S^(I|~N))+M[15]+4264355552&4294967295,L=I+(T<<10&4294967295|T>>>22),T=N+(I^(L|~S))+M[6]+2734768916&4294967295,N=L+(T<<15&4294967295|T>>>17),T=S+(L^(N|~I))+M[13]+1309151649&4294967295,S=N+(T<<21&4294967295|T>>>11),T=I+(N^(S|~L))+M[4]+4149444226&4294967295,I=S+(T<<6&4294967295|T>>>26),T=L+(S^(I|~N))+M[11]+3174756917&4294967295,L=I+(T<<10&4294967295|T>>>22),T=N+(I^(L|~S))+M[2]+718787259&4294967295,N=L+(T<<15&4294967295|T>>>17),T=S+(L^(N|~I))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+L&4294967295}r.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var S=I-this.blockSize,M=this.B,N=this.h,L=0;L<I;){if(N==0)for(;L<=S;)i(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<I;)if(M[N++]=x.charCodeAt(L++),N==this.blockSize){i(this,M),N=0;break}}else for(;L<I;)if(M[N++]=x[L++],N==this.blockSize){i(this,M),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var S=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=S&255,S/=256;for(this.u(x),x=Array(16),I=S=0;4>I;++I)for(var M=0;32>M;M+=8)x[S++]=this.g[I]>>>M&255;return x};function o(x,I){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=I(x)}function s(x,I){this.h=I;for(var S=[],M=!0,N=x.length-1;0<=N;N--){var L=x[N]|0;M&&L==I||(S[N]=L,M=!1)}this.g=S}var a={};function c(x){return-128<=x&&128>x?o(x,function(I){return new s([I|0],0>I?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return F(u(-x));for(var I=[],S=1,M=0;x>=S;M++)I[M]=x/S|0,S*=4294967296;return new s(I,0)}function h(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return F(h(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(I,8)),M=m,N=0;N<x.length;N+=8){var L=Math.min(8,x.length-N),T=parseInt(x.substring(N,N+L),I);8>L?(L=u(Math.pow(I,L)),M=M.j(L).add(u(T))):(M=M.j(S),M=M.add(u(T)))}return M}var m=c(0),w=c(1),b=c(16777216);t=s.prototype,t.m=function(){if(V(this))return-F(this).m();for(var x=0,I=1,S=0;S<this.g.length;S++){var M=this.i(S);x+=(0<=M?M:4294967296+M)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(A(this))return"0";if(V(this))return"-"+F(this).toString(x);for(var I=u(Math.pow(x,6)),S=this,M="";;){var N=J(S,I).g;S=W(S,N.j(I));var L=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=N,A(S))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function A(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function V(x){return x.h==-1}t.l=function(x){return x=W(this,x),V(x)?-1:A(x)?0:1};function F(x){for(var I=x.g.length,S=[],M=0;M<I;M++)S[M]=~x.g[M];return new s(S,~x.h).add(w)}t.abs=function(){return V(this)?F(this):this},t.add=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],M=0,N=0;N<=I;N++){var L=M+(this.i(N)&65535)+(x.i(N)&65535),T=(L>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);M=T>>>16,L&=65535,T&=65535,S[N]=T<<16|L}return new s(S,S[S.length-1]&-2147483648?-1:0)};function W(x,I){return x.add(F(I))}t.j=function(x){if(A(this)||A(x))return m;if(V(this))return V(x)?F(this).j(F(x)):F(F(this).j(x));if(V(x))return F(this.j(F(x)));if(0>this.l(b)&&0>x.l(b))return u(this.m()*x.m());for(var I=this.g.length+x.g.length,S=[],M=0;M<2*I;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(var N=0;N<x.g.length;N++){var L=this.i(M)>>>16,T=this.i(M)&65535,Qn=x.i(N)>>>16,_s=x.i(N)&65535;S[2*M+2*N]+=T*_s,Z(S,2*M+2*N),S[2*M+2*N+1]+=L*_s,Z(S,2*M+2*N+1),S[2*M+2*N+1]+=T*Qn,Z(S,2*M+2*N+1),S[2*M+2*N+2]+=L*Qn,Z(S,2*M+2*N+2)}for(M=0;M<I;M++)S[M]=S[2*M+1]<<16|S[2*M];for(M=I;M<2*I;M++)S[M]=0;return new s(S,0)};function Z(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function z(x,I){this.g=x,this.h=I}function J(x,I){if(A(I))throw Error("division by zero");if(A(x))return new z(m,m);if(V(x))return I=J(F(x),I),new z(F(I.g),F(I.h));if(V(I))return I=J(x,F(I)),new z(F(I.g),I.h);if(30<x.g.length){if(V(x)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var S=w,M=I;0>=M.l(x);)S=ue(S),M=ue(M);var N=ce(S,1),L=ce(M,1);for(M=ce(M,2),S=ce(S,2);!A(M);){var T=L.add(M);0>=T.l(x)&&(N=N.add(S),L=T),M=ce(M,1),S=ce(S,1)}return I=W(x,N.j(I)),new z(N,I)}for(N=m;0<=x.l(I);){for(S=Math.max(1,Math.floor(x.m()/I.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=u(S),T=L.j(I);V(T)||0<T.l(x);)S-=M,L=u(S),T=L.j(I);A(L)&&(L=w),N=N.add(L),x=W(x,T)}return new z(N,x)}t.A=function(x){return J(this,x).h},t.and=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],M=0;M<I;M++)S[M]=this.i(M)&x.i(M);return new s(S,this.h&x.h)},t.or=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],M=0;M<I;M++)S[M]=this.i(M)|x.i(M);return new s(S,this.h|x.h)},t.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),S=[],M=0;M<I;M++)S[M]=this.i(M)^x.i(M);return new s(S,this.h^x.h)};function ue(x){for(var I=x.g.length+1,S=[],M=0;M<I;M++)S[M]=x.i(M)<<1|x.i(M-1)>>>31;return new s(S,x.h)}function ce(x,I){var S=I>>5;I%=32;for(var M=x.g.length-S,N=[],L=0;L<M;L++)N[L]=0<I?x.i(L+S)>>>I|x.i(L+S+1)<<32-I:x.i(L+S);return new s(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,G0=_M.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Yo=_M.Integer=s}).apply(typeof wM<"u"?wM:typeof self<"u"?self:typeof window<"u"?window:{});var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ji={};var W0,K0,fl,Q0,Ad,$m,Y0,Z0,X0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,g){return l==Array.prototype||l==Object.prototype||(l[p]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Um=="object"&&Um];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,p){if(p)e:{var g=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in g))break e;g=g[O]}l=l[l.length-1],_=g[l],p=p(_),p!=_&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}function o(l,p){l instanceof String&&(l+="");var g=0,_=!1,O={next:function(){if(!_&&g<l.length){var B=g++;return{value:p(B,l[B]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(l){return l||function(){return o(this,function(p,g){return g})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function u(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,g){return l.call.apply(l.bind,arguments)}function m(l,p,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(p,O)}}return function(){return l.apply(p,arguments)}}function w(l,p,g){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,w.apply(null,arguments)}function b(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function A(l,p){function g(){}g.prototype=p.prototype,l.aa=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,O,B){for(var Y=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Y[Xe-2]=arguments[Xe];return p.prototype[O].apply(_,Y)}}function V(l){let p=l.length;if(0<p){let g=Array(p);for(let _=0;_<p;_++)g[_]=l[_];return g}return[]}function F(l,p){for(let g=1;g<arguments.length;g++){let _=arguments[g];if(c(_)){let O=l.length||0,B=_.length||0;l.length=O+B;for(let Y=0;Y<B;Y++)l[O+Y]=_[Y]}else l.push(_)}}class W{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(l){return/^[\s\xa0]*$/.test(l)}function z(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function J(l){return J[" "](l),l}J[" "]=function(){};var ue=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ce(l,p,g){for(let _ in l)p.call(g,l[_],_,l)}function x(l,p){for(let g in l)p.call(void 0,l[g],g,l)}function I(l){let p={};for(let g in l)p[g]=l[g];return p}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(l,p){let g,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(g in _)l[g]=_[g];for(let B=0;B<S.length;B++)g=S[B],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function N(l){var p=1;l=l.split(":");let g=[];for(;0<p&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function L(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Qa;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class Qn{constructor(){this.h=this.g=null}add(p,g){let _=_s.get();_.set(p,g),this.h?this.h.next=_:this.g=_,this.h=_}}var _s=new W(()=>new De,l=>l.reset());class De{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let bs,Es=!1,Qa=new Qn,Ih=()=>{let l=a.Promise.resolve(void 0);bs=()=>{l.then(H)}};var H=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(g){L(g)}var p=_s;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}Es=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var Ch=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return l}();function bi(l,p){if(xt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(ue){e:{try{J(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:on[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&bi.aa.h.call(this)}}A(bi,xt);var on={2:"touch",3:"pen",4:"mouse"};bi.prototype.h=function(){bi.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Un="closure_listenable_"+(1e6*Math.random()|0),Dh=0;function Mv(l,p,g,_,O){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!_,this.ha=O,this.key=++Dh,this.da=this.fa=!1}function Ya(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ei(l){this.src=l,this.g={},this.h=0}Ei.prototype.add=function(l,p,g,_,O){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var Y=Ii(l,p,_,O);return-1<Y?(p=l[Y],g||(p.fa=!1)):(p=new Mv(p,this.src,B,!!_,O),p.fa=g,l.push(p)),p};function Is(l,p){var g=p.type;if(g in l.g){var _=l.g[g],O=Array.prototype.indexOf.call(_,p,void 0),B;(B=0<=O)&&Array.prototype.splice.call(_,O,1),B&&(Ya(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ii(l,p,g,_){for(var O=0;O<l.length;++O){var B=l[O];if(!B.da&&B.listener==p&&B.capture==!!g&&B.ha==_)return O}return-1}var Cs="closure_lm_"+(1e6*Math.random()|0),Gt={};function fo(l,p,g,_,O){if(_&&_.once)return po(l,p,g,_,O);if(Array.isArray(p)){for(var B=0;B<p.length;B++)fo(l,p[B],g,_,O);return null}return g=Pn(g),l&&l[Un]?l.K(p,g,u(_)?!!_.capture:!!_,O):sn(l,p,g,!1,_,O)}function sn(l,p,g,_,O,B){if(!p)throw Error("Invalid event type");var Y=u(O)?!!O.capture:!!O,Xe=Ds(l);if(Xe||(l[Cs]=Xe=new Ei(l)),g=Xe.add(p,g,_,Y,B),g.proxy)return g;if(_=Ke(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)Ch||(O=Y),O===void 0&&(O=!1),l.addEventListener(p.toString(),_,O);else if(l.attachEvent)l.attachEvent(Xa(p.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ke(){function l(g){return p.call(l.src,l.listener,g)}let p=Sh;return l}function po(l,p,g,_,O){if(Array.isArray(p)){for(var B=0;B<p.length;B++)po(l,p[B],g,_,O);return null}return g=Pn(g),l&&l[Un]?l.L(p,g,u(_)?!!_.capture:!!_,O):sn(l,p,g,!0,_,O)}function Th(l,p,g,_,O){if(Array.isArray(p))for(var B=0;B<p.length;B++)Th(l,p[B],g,_,O);else _=u(_)?!!_.capture:!!_,g=Pn(g),l&&l[Un]?(l=l.i,p=String(p).toString(),p in l.g&&(B=l.g[p],g=Ii(B,g,_,O),-1<g&&(Ya(B[g]),Array.prototype.splice.call(B,g,1),B.length==0&&(delete l.g[p],l.h--)))):l&&(l=Ds(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ii(p,g,_,O)),(g=-1<l?p[l]:null)&&Za(g))}function Za(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Un])Is(p.i,l);else{var g=l.type,_=l.proxy;p.removeEventListener?p.removeEventListener(g,_,l.capture):p.detachEvent?p.detachEvent(Xa(g),_):p.addListener&&p.removeListener&&p.removeListener(_),(g=Ds(p))?(Is(g,l),g.h==0&&(g.src=null,p[Cs]=null)):Ya(l)}}}function Xa(l){return l in Gt?Gt[l]:Gt[l]="on"+l}function Sh(l,p){if(l.da)l=!0;else{p=new bi(p,this);var g=l.listener,_=l.ha||l.src;l.fa&&Za(l),l=g.call(_,p)}return l}function Ds(l){return l=l[Cs],l instanceof Ei?l:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(l){return typeof l=="function"?l:(l[mo]||(l[mo]=function(p){return l.handleEvent(p)}),l[mo])}function vt(){Vr.call(this),this.i=new Ei(this),this.M=this,this.F=null}A(vt,Vr),vt.prototype[Un]=!0,vt.prototype.removeEventListener=function(l,p,g,_){Th(this,l,p,g,_)};function yt(l,p){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=p.type||p,typeof p=="string")p=new xt(p,l);else if(p instanceof xt)p.target=p.target||l;else{var O=p;p=new xt(_,l),M(p,O)}if(O=!0,g)for(var B=g.length-1;0<=B;B--){var Y=p.g=g[B];O=Ja(Y,_,!0,p)&&O}if(Y=p.g=l,O=Ja(Y,_,!0,p)&&O,O=Ja(Y,_,!1,p)&&O,g)for(B=0;B<g.length;B++)Y=p.g=g[B],O=Ja(Y,_,!1,p)&&O}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var g=l.g[p],_=0;_<g.length;_++)Ya(g[_]);delete l.g[p],l.h--}}this.F=null},vt.prototype.K=function(l,p,g,_){return this.i.add(String(l),p,!1,g,_)},vt.prototype.L=function(l,p,g,_){return this.i.add(String(l),p,!0,g,_)};function Ja(l,p,g,_){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,B=0;B<p.length;++B){var Y=p[B];if(Y&&!Y.da&&Y.capture==g){var Xe=Y.listener,Bt=Y.ha||Y.src;Y.fa&&Is(l.i,Y),O=Xe.call(Bt,_)!==!1&&O}}return O&&!_.defaultPrevented}function Ci(l,p,g){if(typeof l=="function")g&&(l=w(l,g));else if(l&&typeof l.handleEvent=="function")l=w(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function go(l){l.g=Ci(()=>{l.g=null,l.i&&(l.i=!1,go(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class xh extends Vr{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:go(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lr(l){Vr.call(this),this.h=l,this.g={}}A(Lr,Vr);var ec=[];function Ah(l){ce(l.g,function(p,g){this.g.hasOwnProperty(g)&&Za(p)},l),l.g={}}Lr.prototype.N=function(){Lr.aa.N.call(this),Ah(this)},Lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=a.JSON.stringify,uu=a.JSON.parse,tc=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function du(){}du.prototype.h=null;function an(l){return l.h||(l.h=l.i())}function Yn(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cn(){xt.call(this,"d")}A(cn,xt);function vo(){xt.call(this,"c")}A(vo,xt);var jr={},hu=null;function Ae(){return hu=hu||new vt}jr.La="serverreachability";function $n(l){xt.call(this,jr.La,l)}A($n,xt);function Nn(l){let p=Ae();yt(p,new $n(p))}jr.STAT_EVENT="statevent";function Br(l,p){xt.call(this,jr.STAT_EVENT,l),this.stat=p}A(Br,xt);function Ue(l){let p=Ae();yt(p,new Br(p,l))}jr.Ma="timingevent";function jt(l,p){xt.call(this,jr.Ma,l),this.size=p}A(jt,xt);function Di(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function yo(){this.g=!0}yo.prototype.xa=function(){this.g=!1};function xs(l,p,g,_,O,B){l.info(function(){if(l.g)if(B)for(var Y="",Xe=B.split("&"),Bt=0;Bt<Xe.length;Bt++){var Ne=Xe[Bt].split("=");if(1<Ne.length){var Ut=Ne[0];Ne=Ne[1];var $t=Ut.split("_");Y=2<=$t.length&&$t[1]=="type"?Y+(Ut+"="+Ne+"&"):Y+(Ut+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+p+`
`+g+`
`+Y})}function wn(l,p,g,_,O,B,Y){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+p+`
`+g+`
`+B+" "+Y})}function wo(l,p,g,_){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Rh(l,g)+(_?" "+_:"")})}function Mh(l,p){l.info(function(){return"TIMEOUT: "+p})}yo.prototype.info=function(){};function Rh(l,p){if(!l.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return Ts(g)}catch{return p}}var _o={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ph={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nc;function rc(){}A(rc,du),rc.prototype.g=function(){return new XMLHttpRequest},rc.prototype.i=function(){return{}},nc=new rc;function Ur(l,p,g,_){this.j=l,this.i=p,this.l=g,this.R=_||1,this.U=new Lr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $r}function $r(){this.i=null,this.g="",this.h=!1}var Nh={},fu={};function pu(l,p,g){l.L=1,l.v=oc(_n(p)),l.m=g,l.P=!0,kh(l,null)}function kh(l,p){l.F=Date.now(),ic(l),l.A=_n(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Kh(g.i,"t",_),l.C=0,g=l.j.J,l.h=new $r,l.g=cf(l.j,g?p:null,!l.m),0<l.O&&(l.M=new xh(w(l.Y,l,l.g),l.O)),p=l.U,g=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(ec[0]=O.toString()),O=ec);for(var B=0;B<O.length;B++){var Y=fo(g,O[B],_||p.handleEvent,!1,p.h||p);if(!Y)break;p.g[Y.key]=Y}p=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Nn(),xs(l.i,l.u,l.A,l.l,l.R,l.m)}Ur.prototype.ca=function(l){l=l.target;let p=this.M;p&&wr(l)==3?p.j():this.Y(l)},Ur.prototype.Y=function(l){try{if(l==this.g)e:{let $t=wr(this.g);var p=this.g.Ba();let qr=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||ef(this.g)))){this.J||$t!=4||p==7||(p==8||0>=qr?Nn(3):Nn(2)),gr(this);var g=this.g.Z();this.X=g;t:if(Oh(this)){var _=ef(this.g);l="";var O=_.length,B=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),As(this);var Y="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,l+=this.h.i.decode(_[p],{stream:!(B&&p==O-1)});_.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,wn(this.i,this.u,this.A,this.l,this.R,$t,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Bt=this.g;if((Xe=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Xe)){var Ne=Xe;break t}}Ne=null}if(g=Ne)wo(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gu(this,g);else{this.o=!1,this.s=3,Ue(12),Ti(this),As(this);break e}}if(this.P){g=!0;let ln;for(;!this.J&&this.C<Y.length;)if(ln=mu(this,Y),ln==fu){$t==4&&(this.s=4,Ue(14),g=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Nh){this.s=4,Ue(15),wo(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else wo(this.i,this.l,ln,null),gu(this,ln);if(Oh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||Y.length!=0||this.h.h||(this.s=1,Ue(16),g=!1),this.o=this.o&&g,!g)wo(this.i,this.l,Y,"[Invalid Chunked Response]"),Ti(this),As(this);else if(0<Y.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Ri(Ut),Ut.M=!0,Ue(11))}}else wo(this.i,this.l,Y,null),gu(this,Y);$t==4&&Ti(this),this.o&&!this.J&&($t==4?of(this.j,this):(this.o=!1,ic(this)))}else Hv(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),Ti(this),As(this)}}}catch{}finally{}};function Oh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function mu(l,p){var g=l.C,_=p.indexOf(`
`,g);return _==-1?fu:(g=Number(p.substring(g,_)),isNaN(g)?Nh:(_+=1,_+g>p.length?fu:(p=p.slice(_,_+g),l.C=_+g,p)))}Ur.prototype.cancel=function(){this.J=!0,Ti(this)};function ic(l){l.S=Date.now()+l.I,Fh(l,l.I)}function Fh(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Di(w(l.ba,l),p)}function gr(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ur.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Mh(this.i,this.A),this.L!=2&&(Nn(),Ue(17)),Ti(this),this.s=2,As(this)):Fh(this,this.S-l)};function As(l){l.j.G==0||l.J||of(l.j,l)}function Ti(l){gr(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Ah(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function gu(l,p){try{var g=l.j;if(g.G!=0&&(g.g==l||yu(g.h,l))){if(!l.K&&yu(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)lc(g),sc(g);else break e;cc(g),Ue(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Di(w(g.Za,g),6e3));if(1>=jh(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else kn(g,11)}else if((l.K||g.g==l)&&lc(g),!Z(p))for(O=g.Da.g.parse(p),p=0;p<O.length;p++){let Ne=O[p];if(g.T=Ne[0],Ne=Ne[1],g.G==2)if(Ne[0]=="c"){g.K=Ne[1],g.ia=Ne[2];let Ut=Ne[3];Ut!=null&&(g.la=Ut,g.j.info("VER="+g.la));let $t=Ne[4];$t!=null&&(g.Aa=$t,g.j.info("SVER="+g.Aa));let qr=Ne[5];qr!=null&&typeof qr=="number"&&0<qr&&(_=1.5*qr,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;let ln=l.g;if(ln){let dc=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dc){var B=_.h;B.g||dc.indexOf("spdy")==-1&&dc.indexOf("quic")==-1&&dc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(wu(B,B.h),B.h=null))}if(_.D){let hc=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;hc&&(_.ya=hc,ot(_.I,_.D,hc))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var Y=l;if(_.qa=af(_,_.J?_.ia:null,_.W),Y.K){tt(_.h,Y);var Xe=Y,Bt=_.L;Bt&&(Xe.I=Bt),Xe.B&&(gr(Xe),ic(Xe)),_.g=Y}else nf(_);0<g.i.length&&ac(g)}else Ne[0]!="stop"&&Ne[0]!="close"||kn(g,7);else g.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?kn(g,7):Eu(g):Ne[0]!="noop"&&g.l&&g.l.ta(Ne),g.v=0)}}Nn(4)}catch{}}var vu=class{constructor(l,p){this.g=l,this.map=p}};function Vh(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lh(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function jh(l){return l.h?1:l.g?l.g.size:0}function yu(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function wu(l,p){l.g?l.g.add(p):l.h=p}function tt(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Vh.prototype.cancel=function(){if(this.i=Bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Bh(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let g of l.g.values())p=p.concat(g.D);return p}return V(l.i)}function Rv(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var p=[],g=l.length,_=0;_<g;_++)p.push(l[_]);return p}p=[],g=0;for(_ in l)p[g++]=l[_];return p}function Pv(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var p=[];l=l.length;for(var g=0;g<l;g++)p.push(g);return p}p=[],g=0;for(let _ in l)p[g++]=_;return p}}}function Uh(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var g=Pv(l),_=Rv(l),O=_.length,B=0;B<O;B++)p.call(void 0,_[B],g&&g[B],l)}var $h=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nv(l,p){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),O=null;if(0<=_){var B=l[g].substring(0,_);O=l[g].substring(_+1)}else B=l[g];p(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function vr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof vr){this.h=l.h,Ms(this,l.j),this.o=l.o,this.g=l.g,Si(this,l.s),this.l=l.l;var p=l.i,g=new Ps;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),ht(this,g),this.m=l.m}else l&&(p=String(l).match($h))?(this.h=!1,Ms(this,p[1]||"",!0),this.o=Rs(p[2]||""),this.g=Rs(p[3]||"",!0),Si(this,p[4]),this.l=Rs(p[5]||"",!0),ht(this,p[6]||"",!0),this.m=Rs(p[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}vr.prototype.toString=function(){var l=[],p=this.j;p&&l.push(bo(p,Hh,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(bo(p,Hh,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(bo(g,g.charAt(0)=="/"?qh:Ov,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",bo(g,zh)),l.join("")};function _n(l){return new vr(l)}function Ms(l,p,g){l.j=g?Rs(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Si(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function ht(l,p,g){p instanceof Ps?(l.i=p,Vv(l.i,l.h)):(g||(p=bo(p,Fv)),l.i=new Ps(p,l.h))}function ot(l,p,g){l.i.set(p,g)}function oc(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Rs(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bo(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,kv),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function kv(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Hh=/[#\/\?@]/g,Ov=/[#\?:]/g,qh=/[#\?]/g,Fv=/[#\?@]/g,zh=/#/g;function Ps(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Hr(l){l.g||(l.g=new Map,l.h=0,l.i&&Nv(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ps.prototype,t.add=function(l,p){Hr(this),this.i=null,l=Eo(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function Gh(l,p){Hr(l),p=Eo(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Wh(l,p){return Hr(l),p=Eo(l,p),l.g.has(p)}t.forEach=function(l,p){Hr(this),this.g.forEach(function(g,_){g.forEach(function(O){l.call(p,O,_,this)},this)},this)},t.na=function(){Hr(this);let l=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let _=0;_<p.length;_++){let O=l[_];for(let B=0;B<O.length;B++)g.push(p[_])}return g},t.V=function(l){Hr(this);let p=[];if(typeof l=="string")Wh(this,l)&&(p=p.concat(this.g.get(Eo(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)p=p.concat(l[g])}return p},t.set=function(l,p){return Hr(this),this.i=null,l=Eo(this,l),Wh(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Kh(l,p,g){Gh(l,p),0<g.length&&(l.i=null,l.g.set(Eo(l,p),V(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var _=p[g];let B=encodeURIComponent(String(_)),Y=this.V(_);for(_=0;_<Y.length;_++){var O=B;Y[_]!==""&&(O+="="+encodeURIComponent(String(Y[_]))),l.push(O)}}return this.i=l.join("&")};function Eo(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Vv(l,p){p&&!l.j&&(Hr(l),l.i=null,l.g.forEach(function(g,_){var O=_.toLowerCase();_!=O&&(Gh(this,_),Kh(this,O,g))},l)),l.j=p}function Qh(l,p){let g=new yo;if(a.Image){let _=new Image;_.onload=b(yr,g,"TestLoadImage: loaded",!0,p,_),_.onerror=b(yr,g,"TestLoadImage: error",!1,p,_),_.onabort=b(yr,g,"TestLoadImage: abort",!1,p,_),_.ontimeout=b(yr,g,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else p(!1)}function Lv(l,p){let g=new yo,_=new AbortController,O=setTimeout(()=>{_.abort(),yr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:_.signal}).then(B=>{clearTimeout(O),B.ok?yr(g,"TestPingServer: ok",!0,p):yr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),yr(g,"TestPingServer: error",!1,p)})}function yr(l,p,g,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(g)}catch{}}function jv(){this.g=new tc}function Bv(l,p,g){let _=g||"";try{Uh(l,function(O,B){let Y=O;u(O)&&(Y=Ts(O)),p.push(_+B+"="+encodeURIComponent(Y))})}catch(O){throw p.push(_+"type="+encodeURIComponent("_badmap")),O}}function Zn(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Zn,du),Zn.prototype.g=function(){return new Ns(this.l,this.j)},Zn.prototype.i=function(l){return function(){return l}}({});function Ns(l,p){vt.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ns,vt),t=Ns.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Io(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yh(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yh(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?xi(this):Io(this),this.readyState==3&&Yh(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,xi(this))},t.Qa=function(l){this.g&&(this.response=l,xi(this))},t.ga=function(){this.g&&xi(this)};function xi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Io(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Io(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zh(l){let p="";return ce(l,function(g,_){p+=_,p+=":",p+=g,p+=`\r
`}),p}function _u(l,p,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Zh(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ot(l,p,g))}function ft(l){vt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ft,vt);var Uv=/^https?$/i,$v=["POST","PUT"];t=ft.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nc.g(),this.v=this.o?an(this.o):an(nc),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(B){Xh(this,B);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)g.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let B of _.keys())g.set(B,_.get(B));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call($v,p,void 0))||_||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Y]of g)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Xh(this,B)}};function Xh(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Ai(l),ks(l)}function Ai(l){l.A||(l.A=!0,yt(l,"complete"),yt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,yt(this,"complete"),yt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jh(this):this.bb())},t.bb=function(){Jh(this)};function Jh(l){if(l.h&&typeof s<"u"&&(!l.v[1]||wr(l)!=4||l.Z()!=2)){if(l.u&&wr(l)==4)Ci(l.Ea,0,l);else if(yt(l,"readystatechange"),wr(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var _;if(_=Y===0){var O=String(l.D).match($h)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),_=!Uv.test(O?O.toLowerCase():"")}g=_}if(g)yt(l,"complete"),yt(l,"success");else{l.m=6;try{var B=2<wr(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Ai(l)}}finally{ks(l)}}}}function ks(l,p){if(l.g){bu(l);let g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||yt(l,"ready");try{g.onreadystatechange=_}catch{}}}function bu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function wr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),uu(p)}};function ef(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Hv(l){let p={};l=(l.g&&2<=wr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(Z(l[_]))continue;var g=N(l[_]);let O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let B=p[O]||[];p[O]=B,B.push(g)}x(p,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function tf(l){this.Aa=0,this.i=[],this.j=new yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,l),this.cb=Os("retryDelaySeedMs",1e4,l),this.Wa=Os("forwardChannelMaxRetries",2,l),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Vh(l&&l.concurrentRequestLimit),this.Da=new jv,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tf.prototype,t.la=8,t.G=1,t.connect=function(l,p,g,_){Ue(0),this.W=l,this.H=p||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=af(this,null,this.W),ac(this)};function Eu(l){if(Mi(l),l.G==3){var p=l.U++,g=_n(l.I);if(ot(g,"SID",l.K),ot(g,"RID",p),ot(g,"TYPE","terminate"),Fs(l,g),p=new Ur(l,l.j,p),p.L=2,p.v=oc(_n(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=cf(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ic(p)}sf(l)}function sc(l){l.g&&(Ri(l),l.g.cancel(),l.g=null)}function Mi(l){sc(l),l.u&&(a.clearTimeout(l.u),l.u=null),lc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ac(l){if(!Lh(l.h)&&!l.s){l.s=!0;var p=l.Ga;bs||Ih(),Es||(bs(),Es=!0),Qa.add(p,l),l.B=0}}function qv(l,p){return jh(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Di(w(l.Ga,l,p),Cu(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let O=new Ur(this,this.j,l),B=this.o;if(this.S&&(B?(B=I(B),M(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=_r(this,O,p),g=_n(this.I),ot(g,"RID",l),ot(g,"CVER",22),this.D&&ot(g,"X-HTTP-Session-Id",this.D),Fs(this,g),B&&(this.O?p="headers="+encodeURIComponent(String(Zh(B)))+"&"+p:this.m&&_u(g,this.m,B)),wu(this.h,O),this.Ua&&ot(g,"TYPE","init"),this.P?(ot(g,"$req",p),ot(g,"SID","null"),O.T=!0,pu(O,g,null)):pu(O,g,p),this.G=2}}else this.G==3&&(l?Iu(this,l):this.i.length==0||Lh(this.h)||Iu(this))};function Iu(l,p){var g;p?g=p.l:g=l.U++;let _=_n(l.I);ot(_,"SID",l.K),ot(_,"RID",g),ot(_,"AID",l.T),Fs(l,_),l.m&&l.o&&_u(_,l.m,l.o),g=new Ur(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),p&&(l.i=p.D.concat(l.i)),p=_r(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wu(l.h,g),pu(g,_,p)}function Fs(l,p){l.H&&ce(l.H,function(g,_){ot(p,_,g)}),l.l&&Uh({},function(g,_){ot(p,_,g)})}function _r(l,p,g){g=Math.min(l.i.length,g);var _=l.l?w(l.l.Na,l.l,l):null;e:{var O=l.i;let B=-1;for(;;){let Y=["count="+g];B==-1?0<g?(B=O[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let Xe=!0;for(let Bt=0;Bt<g;Bt++){let Ne=O[Bt].g,Ut=O[Bt].map;if(Ne-=B,0>Ne)B=Math.max(0,O[Bt].g-100),Xe=!1;else try{Bv(Ut,Y,"req"+Ne+"_")}catch{_&&_(Ut)}}if(Xe){_=Y.join("&");break e}}}return l=l.i.splice(0,g),p.D=l,_}function nf(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;bs||Ih(),Es||(bs(),Es=!0),Qa.add(p,l),l.v=0}}function cc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Di(w(l.Fa,l),Cu(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Di(w(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),sc(this),rf(this))};function Ri(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function rf(l){l.g=new Ur(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=_n(l.qa);ot(p,"RID","rpc"),ot(p,"SID",l.K),ot(p,"AID",l.T),ot(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(p,"TO",l.ja),ot(p,"TYPE","xmlhttp"),Fs(l,p),l.m&&l.o&&_u(p,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=oc(_n(p)),g.m=null,g.P=!0,kh(g,l)}t.Za=function(){this.C!=null&&(this.C=null,sc(this),cc(this),Ue(19))};function lc(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function of(l,p){var g=null;if(l.g==p){lc(l),Ri(l),l.g=null;var _=2}else if(yu(l.h,p))g=p.D,tt(l.h,p),_=1;else return;if(l.G!=0){if(p.o)if(_==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var O=l.B;_=Ae(),yt(_,new jt(_,g)),ac(l)}else nf(l);else if(O=p.s,O==3||O==0&&0<p.X||!(_==1&&qv(l,p)||_==2&&cc(l)))switch(g&&0<g.length&&(p=l.h,p.i=p.i.concat(g)),O){case 1:kn(l,5);break;case 4:kn(l,10);break;case 3:kn(l,6);break;default:kn(l,2)}}}function Cu(l,p){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*p}function kn(l,p){if(l.j.info("Error code "+p),p==2){var g=w(l.fb,l),_=l.Xa;let O=!_;_=new vr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ms(_,"https"),oc(_),O?Qh(_.toString(),g):Lv(_.toString(),g)}else Ue(2);l.G=0,l.l&&l.l.sa(p),sf(l),Mi(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function sf(l){if(l.G=0,l.ka=[],l.l){let p=Bh(l.h);(p.length!=0||l.i.length!=0)&&(F(l.ka,p),F(l.ka,l.i),l.h.i.length=0,V(l.i),l.i.length=0),l.l.ra()}}function af(l,p,g){var _=g instanceof vr?_n(g):new vr(g);if(_.g!="")p&&(_.g=p+"."+_.g),Si(_,_.s);else{var O=a.location;_=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var B=new vr(null);_&&Ms(B,_),p&&(B.g=p),O&&Si(B,O),g&&(B.l=g),_=B}return g=l.D,p=l.ya,g&&p&&ot(_,g,p),ot(_,"VER",l.la),Fs(l,_),_}function cf(l,p,g){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new ft(new Zn({eb:g})):new ft(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lf(){}t=lf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function uc(){}uc.prototype.g=function(l,p){return new bn(l,p)};function bn(l,p){vt.call(this),this.g=new tf(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!Z(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Z(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Co(this)}A(bn,vt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Eu(this.g)},bn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Ts(l),l=g);p.i.push(new vu(p.Ya++,l)),p.G==3&&ac(p)},bn.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,bn.aa.N.call(this)};function uf(l){cn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}A(uf,cn);function df(){vo.call(this),this.status=1}A(df,vo);function Co(l){this.g=l}A(Co,lf),Co.prototype.ua=function(){yt(this.g,"a")},Co.prototype.ta=function(l){yt(this.g,new uf(l))},Co.prototype.sa=function(l){yt(this.g,new df)},Co.prototype.ra=function(){yt(this.g,"b")},uc.prototype.createWebChannel=uc.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,X0=Ji.createWebChannelTransport=function(){return new uc},Z0=Ji.getStatEventTarget=function(){return Ae()},Y0=Ji.Event=jr,$m=Ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_o.NO_ERROR=0,_o.TIMEOUT=8,_o.HTTP_ERROR=6,Ad=Ji.ErrorCode=_o,Ph.COMPLETE="complete",Q0=Ji.EventType=Ph,Yn.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",vt.prototype.listen=vt.prototype.K,fl=Ji.WebChannel=Yn,K0=Ji.FetchXmlHttpFactory=Zn,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,W0=Ji.XhrIo=ft}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});var bM="@firebase/firestore";var Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");var ql="10.12.1";var rs=new wf("@firebase/firestore");function yl(){return rs.logLevel}function b1(t){rs.setLogLevel(t)}function K(t,...e){if(rs.logLevel<=Gr.DEBUG){let n=e.map(tI);rs.debug(`Firestore (${ql}): ${t}`,...n)}}function Mt(t,...e){if(rs.logLevel<=Gr.ERROR){let n=e.map(tI);rs.error(`Firestore (${ql}): ${t}`,...n)}}function dr(t,...e){if(rs.logLevel<=Gr.WARN){let n=e.map(tI);rs.warn(`Firestore (${ql}): ${t}`,...n)}}function tI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function se(t="Unexpected state"){let e=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: `+t;throw Mt(e),new Error(e)}function he(t,e){t||se()}function E1(t,e){t||se()}function ne(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends yf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Vt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Jm=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}},ib=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ob=class{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>k(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Jm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Ft(e)}},sb=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ab=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new cb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function e5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var eg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=e5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function be(t,e){return t<e?-1:t>e?1:0}function Sl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function I1(t){return t+"\0"}var _t=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var me=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new _t(0,0))}static max(){return new t(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var tg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},He=class t extends tg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new G($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rt=class t extends tg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new G($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var te=class t{constructor(e){this.path=e}static fromPath(e){return new t(He.fromString(e))}static fromName(e){return new t(He.fromString(e).popFirst(5))}static empty(){return new t(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new He(e.slice()))}};var xl=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function ub(t){return t.fields.find(e=>e.kind===2)}function wa(t){return t.fields.filter(e=>e.kind!==2)}xl.UNKNOWN_ID=-1;var Cl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Ud=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,hr.min())}};function C1(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new hr(i,te.empty(),e)}function D1(t){return new hr(t.readTime,t.key,-1)}var hr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(me.min(),te.empty(),-1)}static max(){return new t(me.max(),te.empty(),-1)}};function nI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}var T1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ng=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fs(t){return k(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==T1)throw t;K("LocalStore","Unexpectedly lost primary lease")})}var j=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var rg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Vt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Da(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=rI(r.target.error);this.V.reject(new Da(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Da(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(K("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new hb(n)}},is=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Su())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return K("SimpleDb","Removing database:",e),_a(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vf())return!1;if(t.C())return!0;let e=Su(),n=t.S(e),r=0<n&&n<10,i=S1(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return k(this,null,function*(){return this.db||(K("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Da(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new G($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new G($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Da(e,s))},i.onupgradeneeded=o=>{K("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{K("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return k(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=rg.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),j.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(K("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function S1(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var db=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _a(this.B.delete())}},Da=class extends G{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ps(t){return t.name==="IndexedDbTransactionError"}var hb=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(K("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_a(r)}add(e){return K("SimpleDb","ADD",this.store.name,e,e),_a(this.store.add(e))}get(e){return _a(this.store.get(e)).next(n=>(n===void 0&&(n=null),K("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return K("SimpleDb","DELETE",this.store.name,e),_a(this.store.delete(e))}count(){return K("SimpleDb","COUNT",this.store.name),_a(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new j((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new j((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){K("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new j((r,i)=>{n.onerror=o=>{let s=rI(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new j((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new db(a),u=n(a.primaryKey,a.value,c);if(u instanceof j){let h=u.catch(m=>(c.done(),j.reject(m)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>j.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function _a(t){return new j((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=rI(r.target.error);n(i)}})}var EM=!1;function rI(t){let e=is.S(Su());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EM||(EM=!0,setTimeout(()=>{throw r},0)),r}}return t}var fb=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){K("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>k(this,null,function*(){this.task=null;try{K("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ps(n)?K("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield fs(n)}yield this.X(6e4)}))}},pb=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return k(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return j.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return K("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(K("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=D1(o);nI(s,r)>0&&(r=s)}),new hr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Gn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function lh(t){return t==null}function $d(t){return t===0&&1/t==-1/0}function x1(t){return typeof t=="number"&&Number.isInteger(t)&&!$d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IM(e)),e=n5(t.get(n),e);return IM(e)}function n5(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function IM(t){return t+""}function li(t){let e=t.length;if(he(e>=2),e===2)return he(t.charAt(0)===""&&t.charAt(1)===""),He.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&se(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:se()}o=s+2}return new He(r)}var CM=["userId","batchId"];function Wm(t,e){return[t,xn(e)]}function A1(t,e,n){return[t,xn(e),n]}var r5={},i5=["prefixPath","collectionGroup","readTime","documentId"],o5=["prefixPath","collectionGroup","documentId"],s5=["collectionGroup","readTime","prefixPath","documentId"],a5=["canonicalId","targetId"],c5=["targetId","path"],l5=["path","targetId"],u5=["collectionId","parent"],d5=["indexId","uid"],h5=["uid","sequenceNumber"],f5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p5=["indexId","uid","orderedDocumentKey"],m5=["userId","collectionPath","documentId"],g5=["userId","collectionPath","largestBatchId"],v5=["userId","collectionGroup","largestBatchId"],M1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],y5=[...M1,"documentOverlays"],R1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],P1=R1,N1=[...P1,"indexConfiguration","indexState","indexEntries"],w5=N1;var Hd=class extends ng{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Zt(t,e){let n=ne(t);return is.F(n._e,e)}function DM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Va(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k1(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var dt=class t{constructor(e,n){this.comparator=e,this.root=n||di.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}},Il=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},di=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();let e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}};di.EMPTY=null,di.RED=!0,di.BLACK=!1;di.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,o){return this}insert(e,n,r){return new di(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ig(this.data.getIterator())}getIteratorFrom(e){return new ig(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ig=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function pl(t){return t.hasNext()?t.getNext():void 0}var Wn=class t{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(Rt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var og=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function O1(){return typeof atob<"u"}var Yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new og("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Yt.EMPTY_BYTE_STRING=new Yt("");var _5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(he(!!t),typeof t=="string"){let e=0,n=_5.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}function Qg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iI(t){let e=t.mapValue.fields.__previous_value__;return Qg(e)?iI(e):e}function qd(t){let e=no(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}var mb=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ss=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ts={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Km={nullValue:"NULL_VALUE"};function Ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qg(t)?4:F1(t)?9007199254740991:10:se()}function pi(t,e){if(t===e)return!0;let n=Ta(t);if(n!==Ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qd(t).isEqual(qd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=no(i.timestampValue),a=no(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return os(i.bytesValue).isEqual(os(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Tt(i.doubleValue),a=Tt(o.doubleValue);return s===a?$d(s)===$d(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Sl(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DM(s)!==DM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!pi(s[c],a[c])))return!1;return!0}(t,e);default:return se()}}function zd(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function as(t,e){if(t===e)return 0;let n=Ta(t),r=Ta(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Tt(o.integerValue||o.doubleValue),c=Tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return TM(t.timestampValue,e.timestampValue);case 4:return TM(qd(t),qd(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(o,s){let a=os(o),c=os(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=be(a[u],c[u]);if(h!==0)return h}return be(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=be(Tt(o.latitude),Tt(s.latitude));return a!==0?a:be(Tt(o.longitude),Tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let h=as(a[u],c[u]);if(h)return h}return be(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ts.mapValue&&s===ts.mapValue)return 0;if(o===ts.mapValue)return 1;if(s===ts.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let w=be(c[m],h[m]);if(w!==0)return w;let b=as(a[c[m]],u[h[m]]);if(b!==0)return b}return be(c.length,h.length)}(t.mapValue,e.mapValue);default:throw se()}}function TM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);let n=no(t),r=no(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function Al(t){return gb(t)}function gb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=no(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=gb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gb(n.fields[s])}`;return i+"}"}(t.mapValue):se()}function Sa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vb(t){return!!t&&"integerValue"in t}function Gd(t){return!!t&&"arrayValue"in t}function SM(t){return!!t&&"nullValue"in t}function xM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qm(t){return!!t&&"mapValue"in t}function Fd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Va(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fd(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function F1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function b5(t){return"nullValue"in t?Km:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Sa(ss.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:se()}function E5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Sa(ss.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ts:se()}function AM(t,e){let n=as(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MM(t,e){let n=as(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var gn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Fd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Qm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Va(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Fd(this.value))}};function V1(t){let e=[];return Va(t.fields,(n,r)=>{let i=new Rt([n]);if(Qm(r)){let o=V1(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wn(e)}var Lt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,me.min(),me.min(),me.min(),gn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,me.min(),me.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,me.min(),me.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mi=class{constructor(e,n){this.position=e,this.inclusive=n}};function RM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),n.key):r=as(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}var xa=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function I5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var sg=class{},Le=class t extends sg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _b(e,n,r):n==="array-contains"?new Ib(e,r):n==="in"?new ag(e,r):n==="not-in"?new Cb(e,r):n==="array-contains-any"?new Db(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bb(e,r):new Eb(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(as(n,this.value)):n!==null&&Ta(this.value)===Ta(n)&&this.matchesComparison(as(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nt=class t extends sg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ml(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ml(t){return t.op==="and"}function yb(t){return t.op==="or"}function oI(t){return L1(t)&&Ml(t)}function L1(t){for(let e of t.filters)if(e instanceof nt)return!1;return!0}function wb(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Al(t.value);if(oI(t))return t.filters.map(e=>wb(e)).join(",");{let e=t.filters.map(n=>wb(n)).join(",");return`${t.op}(${e})`}}function j1(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&pi(r.value,i.value)}(t,e):t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&j1(s,i.filters[a]),!0):!1}(t,e):void se()}function B1(t,e){let n=t.filters.concat(e);return nt.create(n,t.op)}function U1(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`}(t):t instanceof nt?function(n){return n.op.toString()+" {"+n.getFilters().map(U1).join(" ,")+"}"}(t):"Filter"}var _b=class extends Le{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){let n=te.comparator(e.key,this.key);return this.matchesComparison(n)}},bb=class extends Le{constructor(e,n){super(e,"in",n),this.keys=$1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Eb=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=$1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}var Ib=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Gd(n)&&zd(n.arrayValue,this.value)}},ag=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&zd(this.value.arrayValue,n)}},Cb=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!zd(this.value.arrayValue,n)}},Db=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Gd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zd(this.value.arrayValue,r))}};var Tb=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Sb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Tb(t,e,n,r,i,o,s)}function Aa(t){let e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Al(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Al(r)).join(",")),e.ue=n}return e.ue}function uh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PM(t.startAt,e.startAt)&&PM(t.endAt,e.endAt)}function cg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function lg(t,e){return t.filters.filter(n=>n instanceof Le&&n.field.isEqual(e))}function NM(t,e,n){let r=Km,i=!0;for(let o of lg(t,e)){let s=Km,a=!0;switch(o.op){case"<":case"<=":s=b5(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Km}AM({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];AM({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function kM(t,e,n){let r=ts,i=!0;for(let o of lg(t,e)){let s=ts,a=!0;switch(o.op){case">=":case">":s=E5(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ts}MM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];MM({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Pr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function H1(t,e,n,r,i,o,s,a){return new Pr(t,e,n,r,i,o,s,a)}function zl(t){return new Pr(t)}function OM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sI(t){return t.collectionGroup!==null}function Dl(t){let e=ne(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new at(Rt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new xa(o,r))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new xa(Rt.keyField(),r))}return e.ce}function An(t){let e=ne(t);return e.le||(e.le=C5(e,Dl(t))),e.le}function C5(t,e){if(t.limitType==="F")return Sb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xa(i.field,o)});let n=t.endAt?new mi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mi(t.startAt.position,t.startAt.inclusive):null;return Sb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xb(t,e){let n=t.filters.concat([e]);return new Pr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ug(t,e,n){return new Pr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return uh(An(t),An(e))&&t.limitType===e.limitType}function q1(t){return`${Aa(An(t))}|lt:${t.limitType}`}function wl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>U1(i)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Al(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Al(i)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Dl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=RM(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Dl(r),i)||r.endAt&&!function(s,a,c){let u=RM(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Dl(r),i))}(t,e)}function z1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G1(t){return(e,n)=>{let r=!1;for(let i of Dl(t)){let o=D5(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function D5(t,e,n){let r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?as(c,u):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}var gi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Va(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return k1(this.inner)}size(){return this.innerSize}};var T5=new dt(te.comparator);function Bn(){return T5}var W1=new dt(te.comparator);function kd(...t){let e=W1;for(let n of t)e=e.insert(n.key,n);return e}function K1(t){let e=W1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return Vd()}function Q1(){return Vd()}function Vd(){return new gi(t=>t.toString(),(t,e)=>t.isEqual(e))}var S5=new dt(te.comparator),x5=new at(te.comparator);function Ce(...t){let e=x5;for(let n of t)e=e.add(n);return e}var A5=new at(be);function aI(){return A5}function Y1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function Z1(t){return{integerValue:""+t}}function X1(t,e){return x1(e)?Z1(e):Y1(t,e)}var Rl=class{constructor(){this._=void 0}};function M5(t,e,n){return t instanceof cs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qg(o)&&(o=iI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ro?eR(t,e):t instanceof io?tR(t,e):function(i,o){let s=J1(i,o),a=FM(s)+FM(i.Pe);return vb(s)&&vb(i.Pe)?Z1(a):Y1(i.serializer,a)}(t,e)}function R5(t,e,n){return t instanceof ro?eR(t,e):t instanceof io?tR(t,e):n}function J1(t,e){return t instanceof ls?function(r){return vb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var cs=class extends Rl{},ro=class extends Rl{constructor(e){super(),this.elements=e}};function eR(t,e){let n=nR(e);for(let r of t.elements)n.some(i=>pi(i,r))||n.push(r);return{arrayValue:{values:n}}}var io=class extends Rl{constructor(e){super(),this.elements=e}};function tR(t,e){let n=nR(e);for(let r of t.elements)n=n.filter(i=>!pi(i,r));return{arrayValue:{values:n}}}var ls=class extends Rl{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function FM(t){return Tt(t.integerValue||t.doubleValue)}function nR(t){return Gd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ma=class{constructor(e,n){this.field=e,this.transform=n}};function P5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ro&&i instanceof ro||r instanceof io&&i instanceof io?Sl(r.elements,i.elements,pi):r instanceof ls&&i instanceof ls?pi(r.Pe,i.Pe):r instanceof cs&&i instanceof cs}(t.transform,e.transform)}var Ab=class{constructor(e,n){this.version=e,this.transformResults=n}},St=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ym(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Pl=class{};function rR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ds(t.key,St.none()):new us(t.key,t.data,St.none());{let n=t.data,r=gn.empty(),i=new at(Rt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nr(t.key,r,new Wn(i.toArray()),St.none())}}function N5(t,e,n){t instanceof us?function(i,o,s){let a=i.value.clone(),c=LM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(i,o,s){if(!Ym(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=LM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iR(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ld(t,e,n,r){return t instanceof us?function(o,s,a,c){if(!Ym(o.precondition,s))return a;let u=o.value.clone(),h=jM(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Nr?function(o,s,a,c){if(!Ym(o.precondition,s))return a;let u=jM(o.fieldTransforms,c,s),h=s.data;return h.setAll(iR(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(o,s,a){return Ym(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function k5(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=J1(r.transform,i||null);o!=null&&(n===null&&(n=gn.empty()),n.set(r.field,o))}return n||null}function VM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sl(r,i,(o,s)=>P5(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var us=class extends Pl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nr=class extends Pl{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function LM(t,e,n){let r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,R5(s,a,n[i]))}return r}function jM(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,M5(o,s,e))}return r}var ds=class extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wd=class extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Kd=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&N5(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ld(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ld(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Q1();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=rR(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,(n,r)=>VM(n,r))&&Sl(this.baseMutations,e.baseMutations,(n,r)=>VM(n,r))}},Mb=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return S5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Qd=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rb=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var kt,$e;function oR(t){switch(t){default:return se();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function sR(t){if(t===void 0)return Mt("GRPC error has no .code"),$.UNKNOWN;switch(t){case kt.OK:return $.OK;case kt.CANCELLED:return $.CANCELLED;case kt.UNKNOWN:return $.UNKNOWN;case kt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case kt.INTERNAL:return $.INTERNAL;case kt.UNAVAILABLE:return $.UNAVAILABLE;case kt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case kt.NOT_FOUND:return $.NOT_FOUND;case kt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case kt.ABORTED:return $.ABORTED;case kt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case kt.DATA_LOSS:return $.DATA_LOSS;default:return se()}}($e=kt||(kt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";var BM=null;function aR(){return new TextEncoder}var O5=new Yo([4294967295,4294967295],0);function UM(t){let e=aR().encode(t),n=new G0;return n.update(e),new Uint8Array(n.digest())}function $M(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yo([n,r],0),new Yo([i,o],0)]}var Pb=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Yo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Yo.fromNumber(r)));return i.compare(O5)===1&&(i=new Yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=UM(e),[r,i]=$M(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=UM(e),[r,i]=$M(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ca=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(me.min(),i,new dt(be),Bn(),Ce())}},Zd=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ce(),Ce(),Ce())}};var Tl=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},dg=class{constructor(e,n){this.targetId=e,this.me=n}},hg=class{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},fg=class{constructor(){this.fe=0,this.ge=qM(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new Zd(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=qM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Nb=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bn(),this.qe=HM(),this.Qe=new dt(be)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(cg(o))if(r===0){let s=new te(o.path);this.Ue(n,s,Lt.newNoDocument(s,me.min()))}else he(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}BM?.et(function(h,m,w,b,A){var V,F,W,Z,z,J;let ue={localCacheCount:h,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},ce=m.unchangedNames;return ce&&(ue.bloomFilter={applied:A===0,hashCount:(V=ce?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(Z=(W=(F=ce?.bits)===null||F===void 0?void 0:F.bitmap)===null||W===void 0?void 0:W.length)!==null&&Z!==void 0?Z:0,padding:(J=(z=ce?.bits)===null||z===void 0?void 0:z.padding)!==null&&J!==void 0?J:0,mightContain:x=>{var I;return(I=b?.mightContain(x))!==null&&I!==void 0&&I}}),ue}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=os(r).toUint8Array()}catch(c){if(c instanceof og)return dr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Pb(s,i,o)}catch(c){return dr(c instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&cg(a.target)){let c=new te(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Lt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=Ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Yd(e,n,this.Qe,this.ke,r);return this.ke=Bn(),this.qe=HM(),this.Qe=new dt(be),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(be),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function HM(){return new dt(te.comparator)}function qM(){return new dt(te.comparator)}var F5={asc:"ASCENDING",desc:"DESCENDING"},V5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L5={and:"AND",or:"OR"},kb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ob(t,e){return t.useProto3Json||lh(e)?e:{value:e}}function Nl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j5(t,e){return Nl(t,e.toTimestamp())}function Pt(t){return he(!!t),me.fromTimestamp(function(n){let r=no(n);return new _t(r.seconds,r.nanos)}(t))}function cI(t,e){return Fb(t,e).canonicalString()}function Fb(t,e){let n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lR(t){let e=He.fromString(t);return he(wR(e)),e}function Xd(t,e){return cI(t.databaseId,e.path)}function hi(t,e){let n=lR(e);if(n.get(1)!==t.databaseId.projectId)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(hR(n))}function uR(t,e){return cI(t.databaseId,e)}function dR(t){let e=lR(t);return e.length===4?He.emptyPath():hR(e)}function Vb(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hR(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zM(t,e,n){return{name:Xd(t,e),fields:n.value.mapValue.fields}}function fR(t,e,n){let r=hi(t,e.name),i=Pt(e.updateTime),o=e.createTime?Pt(e.createTime):me.min(),s=new gn({mapValue:{fields:e.fields}}),a=Lt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function B5(t,e){return"found"in e?function(r,i){he(!!i.found),i.found.name,i.found.updateTime;let o=hi(r,i.found.name),s=Pt(i.found.updateTime),a=i.found.createTime?Pt(i.found.createTime):me.min(),c=new gn({mapValue:{fields:i.found.fields}});return Lt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){he(!!i.missing),he(!!i.readTime);let o=hi(r,i.missing),s=Pt(i.readTime);return Lt.newNoDocument(o,s)}(t,e):se()}function U5(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(he(h===void 0||typeof h=="string"),Yt.fromBase64String(h||"")):(he(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?$.UNKNOWN:sR(u.code);return new G(h,u.message||"")}(s);n=new hg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hi(t,r.document.name),o=Pt(r.document.updateTime),s=r.document.createTime?Pt(r.document.createTime):me.min(),a=new gn({mapValue:{fields:r.document.fields}}),c=Lt.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Tl(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hi(t,r.document),o=r.readTime?Pt(r.readTime):me.min(),s=Lt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Tl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hi(t,r.document),o=r.removedTargetIds||[];n=new Tl([],o,i,null)}else{if(!("filter"in e))return se();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Rb(i,o),a=r.targetId;n=new dg(a,s)}}return n}function Jd(t,e){let n;if(e instanceof us)n={update:zM(t,e.key,e.value)};else if(e instanceof ds)n={delete:Xd(t,e.key)};else if(e instanceof Nr)n={update:zM(t,e.key,e.data),updateMask:W5(e.fieldMask)};else{if(!(e instanceof Wd))return se();n={verify:Xd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof cs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ro)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof io)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ls)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:j5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se()}(t,e.precondition)),n}function Lb(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?St.updateTime(Pt(o.updateTime)):o.exists!==void 0?St.exists(o.exists):St.none()}(e.currentDocument):St.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)he(a.setToServerValue==="REQUEST_TIME"),c=new cs;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new ro(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new io(h)}else"increment"in a?c=new ls(s,a.increment):se();let u=Rt.fromServerFormat(a.fieldPath);return new Ma(u,c)}(t,i)):[];if(e.update){e.update.name;let i=hi(t,e.update.name),o=new gn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Wn(u.map(h=>Rt.fromServerFormat(h)))}(e.updateMask);return new Nr(i,o,s,n,r)}return new us(i,o,n,r)}if(e.delete){let i=hi(t,e.delete);return new ds(i,n)}if(e.verify){let i=hi(t,e.verify);return new Wd(i,n)}return se()}function $5(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pt(i.updateTime):Pt(o);return s.isEqual(me.min())&&(s=Pt(o)),new Ab(s,i.transformResults||[])}(n,e))):[]}function pR(t,e){return{documents:[uR(t,e.path)]}}function mR(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uR(t,i);let o=function(u){if(u.length!==0)return yR(nt.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(w){return{field:_l(w.field),direction:q5(w.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Ob(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function gR(t){let e=dR(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){he(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(m){let w=vR(m);return w instanceof nt&&oI(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(w=>function(A){return new xa(bl(A.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(m){let w;return w=typeof m=="object"?m.value:m,lh(w)?null:w}(n.limit));let c=null;n.startAt&&(c=function(m){let w=!!m.before,b=m.values||[];return new mi(b,w)}(n.startAt));let u=null;return n.endAt&&(u=function(m){let w=!m.before,b=m.values||[];return new mi(b,w)}(n.endAt)),H1(e,i,s,o,a,"F",c,u)}function H5(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=bl(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=bl(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=bl(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=bl(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(bl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nt.create(n.compositeFilter.filters.map(r=>vR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function q5(t){return F5[t]}function z5(t){return V5[t]}function G5(t){return L5[t]}function _l(t){return{fieldPath:t.canonicalString()}}function bl(t){return Rt.fromServerFormat(t.fieldPath)}function yR(t){return t instanceof Le?function(n){if(n.op==="=="){if(xM(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NAN"}};if(SM(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xM(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NAN"}};if(SM(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(n.field),op:z5(n.op),value:n.value}}}(t):t instanceof nt?function(n){let r=n.getFilters().map(i=>yR(i));return r.length===1?r[0]:{compositeFilter:{op:G5(n.op),filters:r}}}(t):se()}function W5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var kl=class t{constructor(e,n,r,i,o=me.min(),s=me.min(),a=Yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pg=class{constructor(e){this.ct=e}};function K5(t,e){let n;if(e.document)n=fR(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=te.fromSegments(e.noDocument.path),i=Pa(e.noDocument.readTime);n=Lt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return se();{let r=te.fromSegments(e.unknownDocument.path),i=Pa(e.unknownDocument.version);n=Lt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new _t(i[0],i[1]);return me.fromTimestamp(o)}(e.readTime)),n}function GM(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Xd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Nl(o,s.version.toTimestamp()),createTime:Nl(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return se();r.unknownDocument={path:n.path.toArray(),version:Ra(e.version)}}return r}function mg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pa(t){let e=new _t(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function ba(t,e){let n=(e.baseMutations||[]).map(o=>Lb(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Lb(t.ct,o)),i=_t.fromMillis(e.localWriteTimeMs);return new Kd(e.batchId,i,n,r)}function Od(t){let e=Pa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Pa(t.lastLimboFreeSnapshotVersion):me.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return he(o.documents.length===1),An(zl(dR(o.documents[0])))}(t.query):function(o){return An(gR(o))}(t.query),new kl(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Yt.fromBase64String(t.resumeToken))}function _R(t,e){let n=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion),i;i=cg(e.target)?pR(t.ct,e.target):mR(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lI(t){let e=gR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ug(e,e.limit,"L"):e}function J0(t,e){return new Qd(e.largestBatchId,Lb(t.ct,e.overlayMutation))}function WM(t,e){let n=e.path.lastSegment();return[t,xn(e.path.popLast()),n]}function KM(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ra(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}var jb=class{getBundleMetadata(e,n){return QM(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Pa(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return QM(e).put(function(i){return{bundleId:i.id,createTime:Ra(Pt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return YM(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:lI(o.bundledQuery),readTime:Pa(o.readTime)}}(r)})}saveNamedQuery(e,n){return YM(e).put(function(i){return{name:i.name,readTime:Ra(Pt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function QM(t){return Zt(t,"bundles")}function YM(t){return Zt(t,"namedQueries")}var gg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Md(e).get(WM(this.userId,n)).next(r=>r?J0(this.serializer,r):null)}getOverlays(e,n){let r=ui();return j.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Qd(n,s);i.push(this.ht(e,a))}),j.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(xn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Md(e).j("collectionPathOverlayIndex",a))}),j.waitFor(o)}getOverlaysForCollection(e,n,r){let i=ui(),o=xn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Md(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=J0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=ui(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Md(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{let m=J0(this.serializer,u);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Md(e).put(function(i,o,s){let[a,c,u]=WM(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Jd(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Md(t){return Zt(t,"documentOverlays")}var eo=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),$d(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=no(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(os(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?F1(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):se()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),te.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};eo.bt=new eo;function Q5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function ZM(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Q5(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Bb=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=ZM(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=ZM(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ub=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},$b=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ea=class{constructor(){this.Gt=new Bb,this.zt=new Ub(this.Gt),this.jt=new $b(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ia=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Zo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=XM(t.arrayValue,e.arrayValue),n!==0?n:(n=XM(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function XM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var vg=class{constructor(e){this.Yt=new at((n,r)=>Rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(he(e.collectionGroup===this.collectionId),this.en)return!1;let n=ub(e);if(n!==void 0&&!this.nn(n))return!1;let r=wa(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new at(Rt.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Cl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Cl(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Cl(r.field,r.dir==="asc"?0:1)));return new xl(xl.UNKNOWN_ID,this.collectionId,n,Ud.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function bR(t){var e,n;if(he(t instanceof Le||t instanceof nt),t instanceof Le){if(t instanceof ag){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Le.create(t.field,"==",o)))||[];return nt.create(i,"or")}return t}let r=t.filters.map(i=>bR(i));return nt.create(r,t.op)}function Y5(t){if(t.getFilters().length===0)return[];let e=zb(bR(t));return he(ER(e)),Hb(e)||qb(e)?[e]:e.getFilters()}function Hb(t){return t instanceof Le}function qb(t){return t instanceof nt&&oI(t)}function ER(t){return Hb(t)||qb(t)||function(n){if(n instanceof nt&&yb(n)){for(let r of n.getFilters())if(!Hb(r)&&!qb(r))return!1;return!0}return!1}(t)}function zb(t){if(he(t instanceof Le||t instanceof nt),t instanceof Le)return t;if(t.filters.length===1)return zb(t.filters[0]);let e=t.filters.map(r=>zb(r)),n=nt.create(e,t.op);return n=yg(n),ER(n)?n:(he(n instanceof nt),he(Ml(n)),he(n.filters.length>1),n.filters.reduce((r,i)=>uI(r,i)))}function uI(t,e){let n;return he(t instanceof Le||t instanceof nt),he(e instanceof Le||e instanceof nt),n=t instanceof Le?e instanceof Le?function(i,o){return nt.create([i,o],"and")}(t,e):JM(t,e):e instanceof Le?JM(e,t):function(i,o){if(he(i.filters.length>0&&o.filters.length>0),Ml(i)&&Ml(o))return B1(i,o.getFilters());let s=yb(i)?i:o,a=yb(i)?o:i,c=s.filters.map(u=>uI(u,a));return nt.create(c,"or")}(t,e),yg(n)}function JM(t,e){if(Ml(e))return B1(e,t.getFilters());{let n=e.filters.map(r=>uI(t,r));return nt.create(n,"or")}}function yg(t){if(he(t instanceof Le||t instanceof nt),t instanceof Le)return t;let e=t.getFilters();if(e.length===1)return yg(e[0]);if(L1(t))return t;let n=e.map(i=>yg(i)),r=[];return n.forEach(i=>{i instanceof Le?r.push(i):i instanceof nt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:nt.create(r,t.op)}var Gb=class{constructor(){this._n=new eh}addToCollectionParentIndex(e,n){return this._n.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(hr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}},eh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(He.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(He.comparator)).toArray()}};var Hm=new Uint8Array(0),Wb=class{constructor(e,n){this.databaseId=n,this.an=new eh,this.un=new gi(r=>Aa(r),(r,i)=>uh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:xn(i)};return e1(e).put(o)}return j.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[I1(n),""],!1,!0);return e1(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(li(s.parent))}return r})}addFieldIndex(e,n){let r=Rd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=gl(e);return o.next(a=>{s.put(KM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Rd(e),i=gl(e),o=ml(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Rd(e),r=ml(e),i=gl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return j.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new vg(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ml(e),i=!0,o=new Map;return j.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ce(),a=[];return j.forEach(o,(c,u)=>{K("IndexedDbIndexManager",`Using index ${function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(c)} to execute ${Aa(n)}`);let h=function(z,J){let ue=ub(J);if(ue===void 0)return null;for(let ce of lg(z,ue.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(u,c),m=function(z,J){let ue=new Map;for(let ce of wa(J))for(let x of lg(z,ce.fieldPath))switch(x.op){case"==":case"in":ue.set(ce.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ue.set(ce.fieldPath.canonicalString(),x.value),Array.from(ue.values())}return null}(u,c),w=function(z,J){let ue=[],ce=!0;for(let x of wa(J)){let I=x.kind===0?NM(z,x.fieldPath,z.startAt):kM(z,x.fieldPath,z.startAt);ue.push(I.value),ce&&(ce=I.inclusive)}return new mi(ue,ce)}(u,c),b=function(z,J){let ue=[],ce=!0;for(let x of wa(J)){let I=x.kind===0?kM(z,x.fieldPath,z.endAt):NM(z,x.fieldPath,z.endAt);ue.push(I.value),ce&&(ce=I.inclusive)}return new mi(ue,ce)}(u,c),A=this.hn(c,u,w),V=this.hn(c,u,b),F=this.Pn(c,u,m),W=this.In(c.indexId,h,A,w.inclusive,V,b.inclusive,F);return j.forEach(W,Z=>r.G(Z,n.limit).next(z=>{z.forEach(J=>{let ue=te.fromSegments(J.documentKey);s.has(ue)||(s=s.add(ue),a.push(ue))})}))}).next(()=>a)}return j.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=Y5(nt.create(e.filters,"and")).map(r=>Sb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),h=[];for(let m=0;m<c;++m){let w=n?this.Tn(n[m/u]):Hm,b=this.En(e,w,r[m%u],i),A=this.dn(e,w,o[m%u],s),V=a.map(F=>this.En(e,w,F,!0));h.push(...this.createRange(b,A,V))}return h}En(e,n,r,i){let o=new Ia(e,te.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Ia(e,te.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new vg(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return j.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new at(Rt.comparator),h=!1;for(let m of c.filters)for(let w of m.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?h=!0:u=u.add(w.field));for(let m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Ea;for(let i of wa(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);eo.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Ea;return eo.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Ea;return eo.bt.Pt(Sa(this.databaseId,n),r.Ht(function(o){let s=wa(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Ea);let o=0;for(let s of wa(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&Gd(a))i=this.mn(i,s,a);else{let u=c.Ht(s.kind);eo.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ea;c.seed(a.Wt()),eo.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Rd(e),i=gl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return j.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,m){let w=m?new Ud(m.sequenceNumber,new hr(Pa(m.readTime),new te(li(m.documentKey)),m.largestBatchId)):Ud.empty(),b=h.fields.map(([A,V])=>new Cl(Rt.fromServerFormat(A),V));return new xl(h.indexId,h.collectionGroup,b,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Rd(e),o=gl(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>j.forEach(a,c=>o.put(KM(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return j.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?j.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),j.forEach(a,c=>this.pn(e,i,c).next(u=>{let h=this.yn(o,c);return u.isEqual(h)?j.resolve():this.wn(e,o,c,u,h)}))))})}Sn(e,n,r,i){return ml(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ml(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=ml(e),o=new at(Zo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Ia(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new at(Zo),i=this.An(n,e);if(i==null)return r;let o=ub(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Gd(s))for(let a of s.arrayValue.values||[])r=r.add(new Ia(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ia(n.indexId,e.key,Hm,i));return r}wn(e,n,r,i,o){K("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,h,m,w){let b=c.getIterator(),A=u.getIterator(),V=pl(b),F=pl(A);for(;V||F;){let W=!1,Z=!1;if(V&&F){let z=h(V,F);z<0?Z=!0:z>0&&(W=!0)}else V!=null?Z=!0:W=!0;W?(m(F),F=pl(A)):Z?(w(V),V=pl(b)):(V=pl(b),F=pl(A))}}(i,o,Zo,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),j.waitFor(s)}gn(e){let n=1;return gl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Zo(s,a)).filter((s,a,c)=>!a||Zo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Zo(s,e),c=Zo(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Hm,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Hm,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return Zo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(t1)}getMinOffset(e,n){return j.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||se())).next(t1)}};function e1(t){return Zt(t,"collectionParents")}function ml(t){return Zt(t,"indexEntries")}function Rd(t){return Zt(t,"indexConfiguration")}function gl(t){return Zt(t,"indexState")}function t1(t){he(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;nI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hr(e.readTime,e.documentKey,n)}var n1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ur=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function IR(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(h,m,w)=>(a++,w.delete()));o.push(c.next(()=>{he(a===1)}));let u=[];for(let h of n.mutations){let m=A1(e,h.key.path,n.batchId);o.push(i.delete(m)),u.push(h.key)}return j.waitFor(o).next(()=>u)}function wg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw se();e=t.noDocument}return JSON.stringify(e).length}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(41943040,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);var _g=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){he(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=El(e),s=Xo(e);return s.add({}).next(a=>{he(typeof a=="number");let c=new Kd(a,n,r,i),u=function(b,A,V){let F=V.baseMutations.map(Z=>Jd(b.ct,Z)),W=V.mutations.map(Z=>Jd(b.ct,Z));return{userId:A,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:F,mutations:W}}(this.serializer,this.userId,c),h=[],m=new at((w,b)=>be(w.canonicalString(),b.canonicalString()));for(let w of i){let b=A1(this.userId,w.key.path,a);m=m.add(w.key.path.popLast()),h.push(s.put(u)),h.push(o.put(b,r5))}return m.forEach(w=>{h.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),j.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Xo(e).get(n).next(r=>r?(he(r.userId===this.userId),ba(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?j.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xo(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(he(a.batchId>=r),o=ba(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Xo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).U("userMutationsIndex",n).next(r=>r.map(i=>ba(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Wm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return El(e).J({range:i},(s,a,c)=>{let[u,h,m]=s,w=li(h);if(u===this.userId&&n.path.isEqual(w))return Xo(e).get(m).next(b=>{if(!b)throw se();he(b.userId===this.userId),o.push(ba(this.serializer,b))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(be),i=[];return n.forEach(o=>{let s=Wm(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=El(e).J({range:a},(u,h,m)=>{let[w,b,A]=u,V=li(b);w===this.userId&&o.path.isEqual(V)?r=r.add(A):m.done()});i.push(c)}),j.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Wm(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new at(be);return El(e).J({range:s},(c,u,h)=>{let[m,w,b]=c,A=li(w);m===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(b)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Xo(e).get(o).next(s=>{if(s===null)throw se();he(s.userId===this.userId),r.push(ba(this.serializer,s))}))}),j.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return IR(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),j.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return j.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return El(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=li(o[1]);i.push(c)}else a.done()}).next(()=>{he(i.length===0)})})}containsKey(e,n){return CR(e,this.userId,n)}xn(e){return DR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function CR(t,e,n){let r=Wm(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return El(t).J({range:o,H:!0},(a,c,u)=>{let[h,m,w]=a;h===e&&m===i&&(s=!0),u.done()}).next(()=>s)}function Xo(t){return Zt(t,"mutations")}function El(t){return Zt(t,"documentMutations")}function DR(t){return Zt(t,"mutationQueues")}var Ol=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Kb=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Ol(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>me.fromTimestamp(new _t(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(he(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return vl(e).J((s,a)=>{let c=Od(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>j.waitFor(o)).next(()=>i)}forEachTarget(e,n){return vl(e).J((r,i)=>{let o=Od(i);n(o)})}Bn(e){return r1(e).get("targetGlobalKey").next(n=>(he(n!==null),n))}kn(e,n){return r1(e).put("targetGlobalKey",n)}qn(e,n){return vl(e).put(_R(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Aa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return vl(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=Od(a);uh(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Jo(e);return n.forEach(s=>{let a=xn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),j.waitFor(i)}removeMatchingKeys(e,n,r){let i=Jo(e);return j.forEach(n,o=>{let s=xn(o.path);return j.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Jo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Jo(e),o=Ce();return i.J({range:r,H:!0},(s,a,c)=>{let u=li(s[1]),h=new te(u);o=o.add(h)}).next(()=>o)}containsKey(e,n){let r=xn(n.path),i=IDBKeyRange.bound([r],[I1(r)],!1,!0),o=0;return Jo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return vl(e).get(n).next(r=>r?Od(r):null)}};function vl(t){return Zt(t,"targets")}function r1(t){return Zt(t,"targetGlobal")}function Jo(t){return Zt(t,"targetDocuments")}function i1([t,e],[n,r]){let i=be(t,n);return i===0?be(e,r):i}var Qb=class{constructor(e){this.Kn=e,this.buffer=new at(i1),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();i1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Yb=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>k(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ps(n)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield fs(n)}yield this.zn(3e5)}))}},Zb=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Gn.oe);let r=new Qb(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(n1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n1):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),yl()<=Gr.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function Z5(t,e){return new Zb(t,e)}var Xb=class{constructor(e,n){this.db=e,this.garbageCollector=Z5(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return qm(e,r)}removeReference(e,n,r){return qm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qm(e,n)}er(e,n){return function(i,o){let s=!1;return DR(i).Y(a=>CR(i,a,o).next(c=>(c&&(s=!0),j.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,me.min()),Jo(e).delete(function(m){return[0,xn(m.path)]}(s))))});i.push(c)}}).next(()=>j.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qm(e,n)}Xn(e,n){let r=Jo(e),i,o=Gn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Gn.oe&&n(new te(li(i)),o),o=u,i=c):o=Gn.oe}).next(()=>{o!==Gn.oe&&n(new te(li(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function qm(t,e){return Jo(t).put(function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var bg=class{constructor(){this.changes=new gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jb=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ya(e).put(r)}removeEntry(e,n,r){return ya(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Lt.newInvalidDocument(n);return ya(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Lt.newInvalidDocument(n)};return ya(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(n))},(i,o)=>{r={document:this.nr(n,o),size:wg(o)}}).next(()=>r)}getEntries(e,n){let r=Bn();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Bn(),i=new dt(te.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,wg(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return j.resolve();let i=new at(a1);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Pd(i.first()),Pd(i.last())),s=i.getIterator(),a=s.getNext();return ya(e).J({index:"documentKeyIndex",range:o},(c,u,h)=>{let m=te.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&a1(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?h.$(Pd(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),mg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ya(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let h=Bn();for(let m of u){let w=this.nr(te.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);w.isFoundDocument()&&(hh(n,w)||i.has(w.key))&&(h=h.insert(w.key,w))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Bn(),s=s1(n,r),a=s1(n,hr.max());return ya(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,h)=>{let m=this.nr(te.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(m.key,m),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new eE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return o1(e).get("remoteDocumentGlobalKey").next(n=>(he(!!n),n))}tr(e,n){return o1(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=K5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(me.min())))return r}return Lt.newInvalidDocument(e)}};function TR(t){return new Jb(t)}var eE=class extends bg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new gi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new at((o,s)=>be(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=GM(this.ar.serializer,s);i=i.add(o.path.popLast());let u=wg(c);r+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=GM(this.ar.serializer,s.convertToNoDocument(me.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),j.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function o1(t){return Zt(t,"remoteDocumentGlobal")}function ya(t){return Zt(t,"remoteDocumentsV14")}function Pd(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function s1(t,e){let n=e.documentKey.path.toArray();return[t,mg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function a1(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=be(n[o],r[o]),i)return i;return i=be(n.length,r.length),i||(i=be(n[n.length-2],r[r.length-2]),i||be(n[n.length-1],r[r.length-1]))}var tE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Eg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ld(r.mutation,i,Wn.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){let i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=kd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Bn(),s=Vd(),a=function(){return Vd()}();return n.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Nr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Ld(h.mutation,u,h.mutation.getFieldMask(),_t.now())):s.set(u.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var m;return a.set(u,new tE(h,(m=s.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Vd(),i=new dt((s,a)=>s-a),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let h=r.get(c)||Wn.empty();h=a.applyToLocalView(u,h),r.set(c,h);let m=(i.get(a.batchId)||Ce()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,m=Q1();h.forEach(w=>{if(!o.has(w)){let b=rR(n.get(w),r.get(w));b!==null&&m.set(w,b),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):j.resolve(ui()),a=-1,c=o;return s.next(u=>j.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(w=>{c=c.insert(h,w)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ce())).next(h=>({batchId:a,changes:K1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=kd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=kd();return this.indexManager.getCollectionParents(e,o).next(a=>j.forEach(a,c=>{let u=function(m,w){return new Pr(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((m,w)=>{s=s.insert(m,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Lt.newInvalidDocument(h)))});let a=kd();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Ld(h.mutation,u,Wn.empty(),_t.now()),hh(n,u)&&(a=a.insert(c,u))}),a})}};var nE=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return j.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pt(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:lI(i.bundledQuery),readTime:Pt(i.readTime)}}(n)),j.resolve()}};var rE=class{constructor(){this.overlays=new dt(te.comparator),this.hr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ui();return j.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),j.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){let i=ui(),o=n.length+1,s=new te(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new dt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=ui(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=ui(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Qd(n,r));let o=this.hr.get(n);o===void 0&&(o=Ce(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var th=class{constructor(){this.Pr=new at(Ot.Ir),this.Tr=new at(Ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new te(new He([])),r=new Ot(n,e),i=new Ot(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new te(new He([])),r=new Ot(n,e),i=new Ot(n,e+1),o=Ce();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ot=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||te.comparator(e.key,n.key)}};var iE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new at(Ot.Ir)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Kd(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,n){return j.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ot(n,0),i=new Ot(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(be);return n.forEach(i=>{let o=new Ot(i,0),s=new Ot(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),j.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new Ot(new te(o),0),a=new at(be);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),j.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return j.forEach(n.mutations,i=>{let o=new Ot(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ot(n,0),i=this.wr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var oE=class{constructor(e){this.vr=e,this.docs=function(){return new dt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Lt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Bn(),s=n.path,a=new te(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||nI(D1(h),r)<=0||(i.has(h.key)||hh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,n,r,i){se()}Fr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sE(this)}getSize(e){return j.resolve(this.size)}},sE=class extends bg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var aE=class{constructor(e){this.persistence=e,this.Mr=new gi(n=>Aa(n),uh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new th,this.targetCount=0,this.Lr=Ol.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),j.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.qn(n),j.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),j.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Nr.containsKey(n))}};var Ig=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Gn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new aE(this),this.indexManager=new Gb,this.remoteDocumentCache=function(i){return new oE(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new pg(n),this.$r=new nE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new iE(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);let i=new cE(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return j.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},cE=class extends ng{constructor(e){super(),this.currentSequenceNumber=e}},Cg=class t{constructor(e){this.persistence=e,this.zr=new th,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),j.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Jr,r=>{let i=te.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return j.or([()=>j.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var lE=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new rg("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CM,{unique:!0}),c.createObjectStore("documentMutations")}(e),c1(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=j.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),c1(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CM,{unique:!0});let m=u.store("mutations"),w=h.map(b=>m.put(b));return j.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:m5});u.createIndex("collectionPathOverlayIndex",g5,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",v5,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:i5});u.createIndex("documentKeyIndex",o5),u.createIndex("collectionGroupIndex",s5)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:d5}).createIndex("sequenceNumberIndex",h5,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:f5}).createIndex("documentKeyIndex",p5,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=wg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>j.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>j.forEach(a,c=>{he(c.userId===o.userId);let u=ba(this.serializer,c);return IR(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new He(s),u=function(m){return[0,xn(m)]}(c);o.push(n.get(u).next(h=>h?j.resolve():(m=>n.put({targetId:0,path:xn(m),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>j.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:u5});let r=n.store("collectionParents"),i=new eh,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:xn(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new He(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let h=li(a);return o(h.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=Od(i),s=_R(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(m){return m.document?new te(He.fromString(m.document.name).popFirst(5)):m.noDocument?te.fromSegments(m.noDocument.path):m.unknownDocument?te.fromSegments(m.unknownDocument.path):se()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>j.waitFor(i))}si(e,n){let r=n.store("mutations"),i=TR(this.serializer),o=new Ig(Cg.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:Ce();ba(this.serializer,c).keys().forEach(m=>h=h.add(m)),a.set(c.userId,h)}),j.forEach(a,(c,u)=>{let h=new Ft(u),m=gg.lt(this.serializer,h),w=o.getIndexManager(h),b=_g.lt(h,this.serializer,w,o.referenceDelegate);return new Eg(i,b,m,w).recalculateAndSaveOverlaysForDocumentKeys(new Hd(n,Gn.oe),c).next()})})}};function c1(t){t.createObjectStore("targetDocuments",{keyPath:c5}).createIndex("documentTargetsIndex",l5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",a5,{unique:!0}),t.createObjectStore("targetGlobal")}var eb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uE=class t{constructor(e,n,r,i,o,s,a,c,u,h,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=h,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new G($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xb(this,i),this.Ti=n+"main",this.serializer=new pg(c),this.Ei=new is(this.Ti,this.ui,new lE(this.serializer)),this.Qr=new Kb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TR(this.serializer),this.$r=new jb,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&Mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G($.FAILED_PRECONDITION,eb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Gn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>k(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>k(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>k(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ps(e))return K("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Nd(e).get("owner").next(n=>j.resolve(this.Si(n)))}bi(e){return zm(e).delete(this.clientId)}Di(){return k(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Zt(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return j.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?j.resolve(!0):Nd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new G($.FAILED_PRECONDITION,eb);return!1}}return!(!this.networkEnabled||!this.inForeground)||zm(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return k(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Hd(e,Gn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>zm(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return _g.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wb(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){K("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?w5:c===15?N1:c===14?P1:c===13?R1:c===12?y5:c===11?M1:void se()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Hd(a,this.kr?this.kr.next():Gn.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G($.FAILED_PRECONDITION,T1);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Nd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G($.FAILED_PRECONDITION,eb)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nd(e).put("owner",n)}static D(){return is.D()}yi(e){let n=Nd(e);return n.get("owner").next(r=>this.Si(r)?(K("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):j.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Qv()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return K("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Nd(t){return Zt(t,"owner")}function zm(t){return Zt(t,"clientMetadata")}function dI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var dE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ce(),i=Ce();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var hE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Dg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Qv()?8:S1(Su())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new hE;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(yl()<=Gr.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),j.resolve()):(yl()<=Gr.DEBUG&&K("QueryEngine","Query:",wl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(yl()<=Gr.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):j.resolve())}ji(e,n){if(OM(n))return j.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ug(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,ug(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return OM(n)||i.isEqual(me.min())?j.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?j.resolve(null):(yl()<=Gr.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wl(n)),this.es(e,s,n,C1(i,-1)).next(a=>a))})}Zi(e,n){let r=new at(G1(e));return n.forEach((i,o)=>{hh(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return yl()<=Gr.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",wl(n)),this.zi.getDocumentsMatchingQuery(e,n,hr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var fE=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new dt(be),this.rs=new gi(o=>Aa(o),uh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function SR(t,e,n,r){return new fE(t,e,n,r)}function xR(t,e){return k(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ce();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function X5(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let m=u.batch,w=m.keys(),b=j.resolve();return w.forEach(A=>{b=b.next(()=>h.getEntry(c,A)).next(V=>{let F=u.docVersions.get(A);he(F!==null),V.version.compareTo(F)<0&&(m.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),h.addEntry(V)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function AR(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function J5(t,e){let n=ne(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,m)=>{let w=i.get(m);if(!w)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,m)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(Yt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(m,b),function(V,F,W){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(w,b,h)&&a.push(n.Qr.updateTargetData(o,b))});let c=Bn(),u=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(MR(o,s,e.documentUpdates).next(h=>{c=h.cs,u=h.ls})),!r.isEqual(me.min())){let h=n.Qr.getLastRemoteSnapshotVersion(o).next(m=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function MR(t,e,n){let r=Ce(),i=Ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Bn();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function eq(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fl(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new kl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Vl(t,e,n){return k(this,null,function*(){let r=ne(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ps(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Tg(t,e,n){let r=ne(t),i=me.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let m=ne(c),w=m.rs.get(h);return w!==void 0?j.resolve(m.ns.get(w)):m.Qr.getTargetData(u,h)}(r,s,An(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:me.min(),n?o:Ce())).next(a=>(NR(r,z1(e),a),{documents:a,hs:o})))}function RR(t,e){let n=ne(t),r=ne(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function PR(t,e){let n=ne(t),r=n.ss.get(e)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,C1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NR(n,e,i),i))}function NR(t,e,n){let r=t.ss.get(e)||me.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function tq(t,e,n,r){return k(this,null,function*(){let i=ne(t),o=Ce(),s=Bn();for(let u of n){let h=e.Ps(u.metadata.name);u.document&&(o=o.add(h));let m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(h,m)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Fl(i,function(h){return An(zl(He.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>MR(u,a,s).next(h=>(a.apply(u),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.cs,h.ls)).next(()=>h.cs)))})}function nq(r,i){return k(this,arguments,function*(t,e,n=Ce()){let o=yield Fl(t,An(lI(e.bundledQuery))),s=ne(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Pt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(Yt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function l1(t,e){return`firestore_clients_${t}_${e}`}function u1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tb(t,e){return`firestore_targets_${t}_${e}`}var Sg=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new G(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jd=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new G(r.error.code,r.error.message))),o?new t(e,r.state,i):(Mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},xg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=aI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=x1(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},pE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Mt("SharedClientState",`Failed to parse online state: ${e}`),null)}},nh=class{constructor(){this.activeTargetIds=aI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Bd=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new dt(be),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=l1(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new nh),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return k(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(l1(this.persistenceKey,r));if(i){let o=xg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(tb(this.persistenceKey,e));if(r){let i=jd.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return K("SharedClientState","READ",e,n),n}setItem(e,n){K("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){K("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(K("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>k(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Gn.oe;if(o!=null)try{let a=JSON.parse(o);he(typeof a=="number"),s=a}catch(a){Mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Gn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Sg(this.currentUser,e,n,r),o=u1(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=u1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=tb(this.persistenceKey,e),o=new jd(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return xg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Sg.Es(new Ft(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return jd.Es(i,n)}xs(e){return pE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return k(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);K("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=aI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Ag=class{constructor(){this.no=new nh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mE=class{io(e){}shutdown(){}};var Mg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gm=null;function nb(){return Gm===null?Gm=function(){return 268435456+Math.round(2147483648*Math.random())}():Gm++,"0x"+Gm.toString(16)}var rq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var mn="WebChannelConnection",vE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=nb(),c=this.vo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,o,s),this.Mo(n,c,u,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw dr("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ql}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=rq[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=nb();return new Promise((s,a)=>{let c=new W0;c.setWithCredentials(!0),c.listenOnce(Q0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ad.NO_ERROR:let h=c.getResponseJson();K(mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ad.TIMEOUT:K(mn,`RPC '${e}' ${o} timed out`),a(new G($.DEADLINE_EXCEEDED,"Request time out"));break;case Ad.HTTP_ERROR:let m=c.getStatus();if(K(mn,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let A=function(F){let W=F.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(W)>=0?W:$.UNKNOWN}(b.status);a(new G(A,b.message))}else a(new G($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G($.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{K(mn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);K(mn,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Oo(e,n,r){let i=nb(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=X0(),a=Z0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new K0({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");K(mn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let m=s.createWebChannel(h,c),w=!1,b=!1,A=new gE({lo:F=>{b?K(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(w||(K(mn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),K(mn,`RPC '${e}' stream ${i} sending:`,F),m.send(F))},ho:()=>m.close()}),V=(F,W,Z)=>{F.listen(W,z=>{try{Z(z)}catch(J){setTimeout(()=>{throw J},0)}})};return V(m,fl.EventType.OPEN,()=>{b||(K(mn,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),V(m,fl.EventType.CLOSE,()=>{b||(b=!0,K(mn,`RPC '${e}' stream ${i} transport closed`),A.po())}),V(m,fl.EventType.ERROR,F=>{b||(b=!0,dr(mn,`RPC '${e}' stream ${i} transport errored:`,F),A.po(new G($.UNAVAILABLE,"The operation could not be completed")))}),V(m,fl.EventType.MESSAGE,F=>{var W;if(!b){let Z=F.data[0];he(!!Z);let z=Z,J=z.error||((W=z[0])===null||W===void 0?void 0:W.error);if(J){K(mn,`RPC '${e}' stream ${i} received error:`,J);let ue=J.status,ce=function(S){let M=kt[S];if(M!==void 0)return sR(M)}(ue),x=J.message;ce===void 0&&(ce=$.INTERNAL,x="Unknown error status: "+ue+" with message "+J.message),b=!0,A.po(new G(ce,x)),m.close()}else K(mn,`RPC '${e}' stream ${i} received:`,Z),A.yo(Z)}}),V(a,Y0.STAT_EVENT,F=>{F.stat===$m.PROXY?K(mn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===$m.NOPROXY&&K(mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function kR(){return typeof window<"u"?window:null}function Zm(){return typeof document<"u"?document:null}function fh(t){return new kb(t,!0)}var rh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Rg=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new rh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return k(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return k(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return k(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Mt(n.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new G($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>k(this,null,function*(){this.state=0,this.start()}))}c_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yE=class extends Rg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=U5(this.serializer,e),r=function(o){if(!("targetChange"in o))return me.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?me.min():s.readTime?Pt(s.readTime):me.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Vb(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=cg(c)?{documents:pR(o,c)}:{query:mR(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cR(o,s.resumeToken);let u=Ob(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(me.min())>0){a.readTime=Nl(o,s.snapshotVersion.toTimestamp());let u=Ob(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=H5(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Vb(this.serializer),n.removeTarget=e,this.i_(n)}},wE=class extends Rg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=$5(e.writeResults,e.commitTime),r=Pt(e.commitTime);return this.listener.A_(r,n)}return he(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Vb(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Jd(this.serializer,r))};this.i_(n)}};var _E=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Fb(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G($.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Fb(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G($.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},bE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Mt(n),this.y_=!1):K("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var EE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>k(this,null,function*(){ms(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return k(this,null,function*(){let u=ne(c);u.M_.add(4),yield Gl(u),u.N_.set("Unknown"),u.M_.delete(4),yield ph(u)})}(this))}))}),this.N_=new bE(r,i)}};function ph(t){return k(this,null,function*(){if(ms(t))for(let e of t.x_)yield e(!0)})}function Gl(t){return k(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Yg(t,e){let n=ne(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),pI(n)?fI(n):Kl(n).Xo()&&hI(n,e))}function Ll(t,e){let n=ne(t),r=Kl(n);n.F_.delete(e),r.Xo()&&OR(n,e),n.F_.size===0&&(r.Xo()?r.n_():ms(n)&&n.N_.set("Unknown"))}function hI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).P_(e)}function OR(t,e){t.L_.xe(e),Kl(t).I_(e)}function fI(t){t.L_=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.N_.w_()}function pI(t){return ms(t)&&!Kl(t).Zo()&&t.F_.size>0}function ms(t){return ne(t).M_.size===0}function FR(t){t.L_=void 0}function iq(t){return k(this,null,function*(){t.N_.set("Online")})}function oq(t){return k(this,null,function*(){t.F_.forEach((e,n)=>{hI(t,e)})})}function sq(t,e){return k(this,null,function*(){FR(t),pI(t)?(t.N_.D_(e),fI(t)):t.N_.set("Unknown")})}function aq(t,e,n){return k(this,null,function*(){if(t.N_.set("Online"),e instanceof hg&&e.state===2&&e.cause)try{yield function(i,o){return k(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pg(t,r)}else if(e instanceof Tl?t.L_.Ke(e):e instanceof dg?t.L_.He(e):t.L_.We(e),!n.isEqual(me.min()))try{let r=yield AR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.F_.get(u);h&&o.F_.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.F_.get(c);if(!h)return;o.F_.set(c,h.withResumeToken(Yt.EMPTY_BYTE_STRING,h.snapshotVersion)),OR(o,c);let m=new kl(h.target,c,u,h.sequenceNumber);hI(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield Pg(t,r)}})}function Pg(t,e,n){return k(this,null,function*(){if(!ps(e))throw e;t.M_.add(1),yield Gl(t),t.N_.set("Offline"),n||(n=()=>AR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>k(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ph(t)}))})}function VR(t,e){return e().catch(n=>Pg(t,n,e))}function Wl(t){return k(this,null,function*(){let e=ne(t),n=hs(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;cq(e);)try{let i=yield eq(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,lq(e,i)}catch(i){yield Pg(e,i)}LR(e)&&jR(e)})}function cq(t){return ms(t)&&t.v_.length<10}function lq(t,e){t.v_.push(e);let n=hs(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function LR(t){return ms(t)&&!hs(t).Zo()&&t.v_.length>0}function jR(t){hs(t).start()}function uq(t){return k(this,null,function*(){hs(t).V_()})}function dq(t){return k(this,null,function*(){let e=hs(t);for(let n of t.v_)e.d_(n.mutations)})}function hq(t,e,n){return k(this,null,function*(){let r=t.v_.shift(),i=Mb.from(r,e,n);yield VR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Wl(t)})}function fq(t,e){return k(this,null,function*(){e&&hs(t).E_&&(yield function(r,i){return k(this,null,function*(){if(function(s){return oR(s)&&s!==$.ABORTED}(i.code)){let o=r.v_.shift();hs(r).t_(),yield VR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wl(r)}})}(t,e)),LR(t)&&jR(t)})}function d1(t,e){return k(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=ms(n);n.M_.add(3),yield Gl(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ph(n)})}function IE(t,e){return k(this,null,function*(){let n=ne(t);e?(n.M_.delete(2),yield ph(n)):e||(n.M_.add(2),yield Gl(n),n.N_.set("Unknown"))})}function Kl(t){return t.B_||(t.B_=function(n,r,i){let o=ne(n);return o.f_(),new yE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:iq.bind(null,t),To:oq.bind(null,t),Ao:sq.bind(null,t),h_:aq.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.B_.t_(),pI(t)?fI(t):t.N_.set("Unknown")):(yield t.B_.stop(),FR(t))}))),t.B_}function hs(t){return t.k_||(t.k_=function(n,r,i){let o=ne(n);return o.f_(),new wE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:uq.bind(null,t),Ao:fq.bind(null,t),R_:dq.bind(null,t),A_:hq.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.k_.t_(),yield Wl(t)):(yield t.k_.stop(),t.v_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var CE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ql(t,e){if(Mt("AsyncQueue",`${e}: ${t}`),ps(t))return new G($.UNAVAILABLE,`${e}: ${t}`);throw t}var Ng=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=kd(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var kg=class{constructor(){this.q_=new dt(te.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):se():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},jl=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ng.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var DE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},TE=class{constructor(){this.queries=new gi(e=>q1(e),dh),this.onlineState="Unknown",this.z_=new Set}};function mI(t,e){return k(this,null,function*(){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new DE,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Ql(s,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&vI(n)})}function gI(t,e){return k(this,null,function*(){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function pq(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&vI(n)}function mq(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function vI(t){t.z_.forEach(e=>{e.next()})}var SE,h1;(h1=SE||(SE={})).J_="default",h1.Cache="cache";var ih=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==SE.Cache}};var xE=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Og=class{constructor(e){this.serializer=e}Ps(e){return hi(this.serializer,e)}Is(e){return e.metadata.exists?fR(this.serializer,e.document,!1):Lt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Pt(e)}},AE=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=He.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Og(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Ce()).add(o);n.set(s,a)}}return n}complete(){return k(this,null,function*(){let e=yield tq(this.localStore,new Og(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield nq(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function BR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Fg=class{constructor(e){this.key=e}},Vg=class{constructor(e){this.key=e}},Lg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=G1(e),this.Ta=new Ng(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new kg,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{let w=i.get(h),b=hh(this.query,m)?m:null,A=!!w&&this.mutatedKeys.has(w.key),V=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),F=!1;w&&b?w.data.isEqual(b.data)?A!==V&&(r.track({type:3,doc:b}),F=!0):this.Ra(w,b)||(r.track({type:2,doc:b}),F=!0,(c&&this.Ia(b,c)>0||u&&this.Ia(b,u)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),F=!0):w&&!b&&(r.track({type:1,doc:w}),F=!0,(c||u)&&(a=!0)),F&&(b?(s=s.add(b),o=V?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((h,m)=>function(b,A){let V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return V(b)-V(A)}(h.type,m.type)||this.Ia(h.doc,m.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,s.length!==0||u?{snapshot:new jl(this.query,e.Ta,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new kg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Vg(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Fg(r))}),n}pa(e){this.la=e.hs,this.Pa=Ce();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return jl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ME=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},RE=class{constructor(e){this.key=e,this.wa=!1}},PE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new gi(a=>q1(a),dh),this.Da=new Map,this.Ca=new Set,this.va=new dt(te.comparator),this.Fa=new Map,this.Ma=new th,this.xa={},this.Oa=new Map,this.Na=Ol.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function gq(t,e,n=!0){return k(this,null,function*(){let r=Zg(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield UR(r,e,n,!0),i})}function vq(t,e){return k(this,null,function*(){let n=Zg(t);yield UR(n,e,!0,!1)})}function UR(t,e,n,r){return k(this,null,function*(){let i=yield Fl(t.localStore,An(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield yI(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Yg(t.remoteStore,i),a})}function yI(t,e,n,r,i){return k(this,null,function*(){t.Ba=(m,w,b)=>function(V,F,W,Z){return k(this,null,function*(){let z=F.view.da(W);z.Xi&&(z=yield Tg(V.localStore,F.query,!1).then(({documents:x})=>F.view.da(x,z)));let J=Z&&Z.targetChanges.get(F.targetId),ue=Z&&Z.targetMismatches.get(F.targetId)!=null,ce=F.view.applyChanges(z,V.isPrimaryClient,J,ue);return NE(V,F.targetId,ce.fa),ce.snapshot})}(t,m,w,b);let o=yield Tg(t.localStore,e,!0),s=new Lg(e,o.hs),a=s.da(o.documents),c=Zd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);NE(t,n,u.fa);let h=new ME(e,n,s);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function yq(t,e,n){return k(this,null,function*(){let r=ne(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!dh(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ll(r.remoteStore,i.targetId),Bl(r,i.targetId)}).catch(fs))):(Bl(r,i.targetId),yield Vl(r.localStore,i.targetId,!0))})}function wq(t,e){return k(this,null,function*(){let n=ne(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ll(n.remoteStore,r.targetId))})}function _q(t,e,n){return k(this,null,function*(){let r=EI(t);try{let i=yield function(s,a){let c=ne(s),u=_t.now(),h=a.reduce((b,A)=>b.add(A.key),Ce()),m,w;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let A=Bn(),V=Ce();return c.os.getEntries(b,h).next(F=>{A=F,A.forEach((W,Z)=>{Z.isValidDocument()||(V=V.add(W))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,A)).next(F=>{m=F;let W=[];for(let Z of a){let z=k5(Z,m.get(Z.key).overlayedDocument);z!=null&&W.push(new Nr(Z.key,z,V1(z.value.mapValue),St.exists(!0)))}return c.mutationQueue.addMutationBatch(b,u,W,a)}).next(F=>{w=F;let W=F.applyToLocalDocumentSet(m,V);return c.documentOverlayCache.saveOverlays(b,F.batchId,W)})}).then(()=>({batchId:w.batchId,changes:K1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.xa[s.currentUser.toKey()];u||(u=new dt(be)),u=u.insert(a,c),s.xa[s.currentUser.toKey()]=u}(r,i.batchId,n),yield ao(r,i.changes),yield Wl(r.remoteStore)}catch(i){let o=Ql(i,"Failed to persist write");n.reject(o)}})}function $R(t,e){return k(this,null,function*(){let n=ne(t);try{let r=yield J5(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?he(s.wa):i.removedDocuments.size>0&&(he(s.wa),s.wa=!1))}),yield ao(n,r,e)}catch(r){yield fs(r)}})}function f1(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ne(s);c.onlineState=a;let u=!1;c.queries.forEach((h,m)=>{for(let w of m.U_)w.j_(a)&&(u=!0)}),u&&vI(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bq(t,e,n){return k(this,null,function*(){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new dt(te.comparator);s=s.insert(o,Lt.newNoDocument(o,me.min()));let a=Ce().add(o),c=new Yd(me.min(),new Map,new dt(be),s,a);yield $R(r,c),r.va=r.va.remove(o),r.Fa.delete(e),bI(r)}else yield Vl(r.localStore,e,!1).then(()=>Bl(r,e,n)).catch(fs)})}function Eq(t,e){return k(this,null,function*(){let n=ne(t),r=e.batch.batchId;try{let i=yield X5(n.localStore,e);_I(n,r,null),wI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ao(n,i)}catch(i){yield fs(i)}})}function Iq(t,e,n){return k(this,null,function*(){let r=ne(t);try{let i=yield function(s,a){let c=ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(he(m!==null),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);_I(r,e,n),wI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ao(r,i)}catch(i){yield fs(i)}})}function Cq(t,e){return k(this,null,function*(){let n=ne(t);ms(n.remoteStore)||K("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=ne(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Ql(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function wI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function _I(t,e,n){let r=ne(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Bl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||HR(t,r)})}function HR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Ll(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),bI(t))}function NE(t,e,n){for(let r of n)r instanceof Fg?(t.Ma.addReference(r.key,e),Dq(t,r)):r instanceof Vg?(K("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||HR(t,r.key)):se()}function Dq(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(K("SyncEngine","New document in limbo: "+n),t.Ca.add(r),bI(t))}function bI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new te(He.fromString(e)),r=t.Na.next();t.Fa.set(r,new RE(n)),t.va=t.va.insert(n,r),Yg(t.remoteStore,new kl(An(zl(n.path)),r,"TargetPurposeLimboResolution",Gn.oe))}}function ao(t,e,n){return k(this,null,function*(){let r=ne(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient){let h=u&&!u.fromCache;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=dE.Ki(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,u){return k(this,null,function*(){let h=ne(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>j.forEach(u,w=>j.forEach(w.qi,b=>h.persistence.referenceDelegate.addReference(m,w.targetId,b)).next(()=>j.forEach(w.Qi,b=>h.persistence.referenceDelegate.removeReference(m,w.targetId,b)))))}catch(m){if(!ps(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(let m of u){let w=m.targetId;if(!m.fromCache){let b=h.ns.get(w),A=b.snapshotVersion,V=b.withLastLimboFreeSnapshotVersion(A);h.ns=h.ns.insert(w,V)}}})}(r.localStore,o))})}function Tq(t,e){return k(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield xR(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new G($.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ao(n,r.us)}})}function Sq(t,e){let n=ne(t),r=n.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function xq(t,e){return k(this,null,function*(){let n=ne(t),r=yield Tg(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&NE(n,e.targetId,i.fa),i})}function Aq(t,e){return k(this,null,function*(){let n=ne(t);return PR(n.localStore,e).then(r=>ao(n,r))})}function Mq(t,e,n,r){return k(this,null,function*(){let i=ne(t),o=yield function(a,c){let u=ne(a),h=ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.vn(m,c).next(w=>w?u.localDocuments.getDocuments(m,w):j.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Wl(i.remoteStore):n==="acknowledged"||n==="rejected"?(_I(i,e,r||null),wI(i,e),function(a,c){ne(ne(a).mutationQueue).Mn(c)}(i.localStore,e)):se(),yield ao(i,o)):K("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Rq(t,e){return k(this,null,function*(){let n=ne(t);if(Zg(n),EI(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield p1(n,r.toArray());n.La=!0,yield IE(n.remoteStore,!0);for(let o of i)Yg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Bl(n,s),Vl(n.localStore,s,!0))),Ll(n.remoteStore,s)}),yield i,yield p1(n,r),function(s){let a=ne(s);a.Fa.forEach((c,u)=>{Ll(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new dt(te.comparator)}(n),n.La=!1,yield IE(n.remoteStore,!1)}})}function p1(t,e,n){return k(this,null,function*(){let r=ne(t),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield Fl(r.localStore,An(c[0]));for(let u of c){let h=r.ba.get(u),m=yield xq(r,h);m.snapshot&&o.push(m.snapshot)}}else{let u=yield RR(r.localStore,s);a=yield Fl(r.localStore,u),yield yI(r,qR(u),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function qR(t){return H1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Pq(t){return function(n){return ne(ne(n).persistence).Bi()}(ne(t).localStore)}function Nq(t,e,n,r){return k(this,null,function*(){let i=ne(t);if(i.La)return void K("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield PR(i.localStore,z1(o[0])),a=Yd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Yt.EMPTY_BYTE_STRING);yield ao(i,s,a);break}case"rejected":yield Vl(i.localStore,e,!0),Bl(i,e,r);break;default:se()}})}function kq(t,e,n){return k(this,null,function*(){let r=Zg(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){K("SyncEngine","Adding an already active target "+i);continue}let o=yield RR(r.localStore,i),s=yield Fl(r.localStore,o);yield yI(r,qR(o),s.targetId,!1,s.resumeToken),Yg(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield Vl(r.localStore,i,!1).then(()=>{Ll(r.remoteStore,i),Bl(r,i)}).catch(fs))}})}function Zg(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bq.bind(null,e),e.Sa.h_=pq.bind(null,e.eventManager),e.Sa.ka=mq.bind(null,e.eventManager),e}function EI(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iq.bind(null,e),e}function Oq(t,e,n){let r=ne(t);(function(o,s,a){return k(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(b,A){let V=ne(b),F=Pt(A.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",W=>V.$r.getBundleMetadata(W,A.id)).then(W=>!!W&&W.createTime.compareTo(F)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(BR(c));let u=new AE(c,o.localStore,s.serializer),h=yield s.qa();for(;h;){let w=yield u._a(h);w&&a._updateProgress(w),h=yield s.qa()}let m=yield u.complete();return yield ao(o,m.ca,void 0),yield function(b,A){let V=ne(b);return V.persistence.runTransaction("Save bundle","readwrite",F=>V.$r.saveBundleMetadata(F,A))}(o.localStore,c),a._completeWith(m.progress),Promise.resolve(m.ua)}catch(c){return dr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var oh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SR(this.persistence,new Dg,e.initialUser,this.serializer)}createPersistence(e){return new Ig(Cg.Hr,this.serializer)}createSharedClientState(e){return new Ag}terminate(){return k(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var jg=class t extends oh{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){yield Wv(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield EI(this.Qa.syncEngine),yield Wl(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return SR(this.persistence,new Dg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Yb(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new pb(n,this.persistence);return new fb(e.asyncQueue,r)}createPersistence(e){let n=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new uE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kR(),Zm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ag}},kE=class t extends jg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return k(this,null,function*(){yield Wv(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Bd&&(this.sharedClientState.syncEngine={Zs:Mq.bind(null,n),Xs:Nq.bind(null,n),eo:kq.bind(null,n),Bi:Pq.bind(null,n),Ys:Aq.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>k(this,null,function*(){yield Rq(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=kR();if(!Bd.D(n))throw new G($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bd(n,e.asyncQueue,r,e.clientId,e.initialUser)}},sh=class{initialize(e,n){return k(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>f1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tq.bind(null,this.syncEngine),yield IE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new TE}()}createDatastore(e){let n=fh(e.databaseInfo.databaseId),r=function(o){return new vE(o)}(e.databaseInfo);return function(o,s,a,c){return new _E(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new EE(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>f1(this.syncEngine,n,0),function(){return Mg.D()?new Mg:new mE}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,h){let m=new PE(i,o,s,a,c,u);return h&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return k(this,null,function*(){var e;yield function(r){return k(this,null,function*(){let i=ne(r);K("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Gl(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function m1(t,e=10240){let n=0;return{read(){return k(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return k(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ul=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var OE=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Vt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return k(this,null,function*(){return this.metadata.promise})}qa(){return k(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return k(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new xE(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return k(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return k(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return k(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var FE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return k(this,null,function*(){let s=ne(i),a={documents:o.map(m=>Xd(s.serializer,m))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,He.emptyPath(),a,o.length),u=new Map;c.forEach(m=>{let w=B5(s.serializer,m);u.set(w.key.toString(),w)});let h=[];return o.forEach(m=>{let w=u.get(m.toString());he(!!w),h.push(w)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ds(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=te.fromPath(r);this.mutations.push(new Wd(i,this.precondition(i)))}),yield function(r,i){return k(this,null,function*(){let o=ne(r),s={writes:i.map(a=>Jd(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,He.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw se();n=me.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new G($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(me.min())?St.exists(!1):St.updateTime(n):St.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(me.min()))throw new G($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(n)}return St.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var VE=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new rh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>k(this,null,function*(){let e=new FE(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!lh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!oR(n)}return!1}};var LE=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>k(this,null,function*(){K("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ql(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Xm(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>k(this,null,function*(){r.isEqual(i)||(yield xR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function jE(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield II(t);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>d1(e.remoteStore,i)),t._onlineComponents=e})}function zR(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function II(t){return k(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!zR(n))throw n;dr("Error using user provided cache. Falling back to memory cache: "+n),yield Xm(t,new oh)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield Xm(t,new oh);return t._offlineComponents})}function Xg(t){return k(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield jE(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield jE(t,new sh))),t._onlineComponents})}function GR(t){return II(t).then(e=>e.persistence)}function CI(t){return II(t).then(e=>e.localStore)}function WR(t){return Xg(t).then(e=>e.remoteStore)}function DI(t){return Xg(t).then(e=>e.syncEngine)}function Fq(t){return Xg(t).then(e=>e.datastore)}function $l(t){return k(this,null,function*(){let e=yield Xg(t),n=e.eventManager;return n.onListen=gq.bind(null,e.syncEngine),n.onUnlisten=yq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wq.bind(null,e.syncEngine),n})}function Vq(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield GR(t),n=yield WR(t);return e.setNetworkEnabled(!0),function(i){let o=ne(i);return o.M_.delete(0),ph(o)}(n)}))}function Lq(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield GR(t),n=yield WR(t);return e.setNetworkEnabled(!1),function(i){return k(this,null,function*(){let o=ne(i);o.M_.add(0),yield Gl(o),o.N_.set("Offline")})}(n)}))}function jq(t,e){let n=new Vt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield function(u,h){let m=ne(u);return m.persistence.runTransaction("read document","readonly",w=>m.localDocuments.getDocument(w,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new G($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ql(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield CI(t),e,n)})),n.promise}function KR(t,e,n={}){let r=new Vt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,c,u){let h=new Ul({next:w=>{s.enqueueAndForget(()=>gI(o,m));let b=w.docs.has(a);!b&&w.fromCache?u.reject(new G($.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&c&&c.source==="server"?u.reject(new G($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(w)},error:w=>u.reject(w)}),m=new ih(zl(a.path),h,{includeMetadataChanges:!0,ra:!0});return mI(o,m)}(yield $l(t),t.asyncQueue,e,n,r)})),r.promise}function Bq(t,e){let n=new Vt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield Tg(i,o,!0),c=new Lg(o,a.hs),u=c.da(a.documents),h=c.applyChanges(u,!1);s.resolve(h.snapshot)}catch(a){let c=Ql(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield CI(t),e,n)})),n.promise}function QR(t,e,n={}){let r=new Vt;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,c,u){let h=new Ul({next:w=>{s.enqueueAndForget(()=>gI(o,m)),w.fromCache&&c.source==="server"?u.reject(new G($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(w)},error:w=>u.reject(w)}),m=new ih(a,h,{includeMetadataChanges:!0,ra:!0});return mI(o,m)}(yield $l(t),t.asyncQueue,e,n,r)})),r.promise}function Uq(t,e){let n=new Ul(e);return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){ne(i).z_.add(o),o.next()}(yield $l(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){ne(i).z_.delete(o)}(yield $l(t),n)}))}}function $q(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?aR().encode(s):s,function(h,m){return new OE(h,m)}(function(h,m){if(h instanceof Uint8Array)return m1(h,m);if(h instanceof ArrayBuffer)return m1(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,fh(e));t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){Oq(yield DI(t),i,r)}))}function Hq(t,e){return t.asyncQueue.enqueue(()=>k(this,null,function*(){return function(r,i){let o=ne(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield CI(t),e)}))}function YR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var g1=new Map;function TI(t,e,n){if(!n)throw new G($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SI(t,e,n,r){if(e===!0&&r===!0)throw new G($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function v1(t){if(!te.isDocumentKey(t))throw new G($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y1(t){if(te.isDocumentKey(t))throw new G($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function qe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Jg(t);throw new G($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZR(t,e){if(e<=0)throw new G($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Bg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Na=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rb;switch(r.type){case"firstParty":return new ab(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=g1.get(n);r&&(K("ComponentProvider","Removing Datastore"),g1.delete(n),r.terminate())}(this),Promise.resolve()}};function XR(t,e,n,r={}){var i;let o=(t=qe(t,Na))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ft.MOCK_USER;else{a=gf(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new G($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ft(u)}t._authCredentials=new ib(new Jm(a,c))}}var nn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ct=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},fi=class t extends nn{constructor(e,n,r){super(e,n,zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new te(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xI(t,e,...n){if(t=We(t),TI("collection","path",e),t instanceof Na){let r=He.fromString(e,...n);return y1(r),new fi(t,null,r)}{if(!(t instanceof ct||t instanceof fi))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return y1(r),new fi(t.firestore,null,r)}}function JR(t,e){if(t=qe(t,Na),TI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nn(t,null,function(r){return new Pr(He.emptyPath(),r)}(e))}function mh(t,e,...n){if(t=We(t),arguments.length===1&&(e=eg.newId()),TI("doc","path",e),t instanceof Na){let r=He.fromString(e,...n);return v1(r),new ct(t,null,new te(r))}{if(!(t instanceof ct||t instanceof fi))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return v1(r),new ct(t.firestore,t instanceof fi?t.converter:null,new te(r))}}function AI(t,e){return t=We(t),e=We(e),(t instanceof ct||t instanceof fi)&&(e instanceof ct||e instanceof fi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function MI(t,e){return t=We(t),e=We(e),t instanceof nn&&e instanceof nn&&t.firestore===e.firestore&&dh(t._query,e._query)&&t.converter===e.converter}var BE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new rh(this,"async_queue_retry"),this.hu=()=>{let n=Zm();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Zm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Vt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return k(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ps(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Mt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=CE.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&se()}verifyOperationInProgress(){}du(){return k(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function UE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var $E=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var eP=-1,mt=class extends Na{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new BE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tP(this),this._firestoreClient.terminate()}};function zt(t){return t._firestoreClient||tP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tP(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,h){return new mb(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new LE(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nP(t,e){dP(t=qe(t,mt));let n=zt(t);if(n._uninitializedComponentsProvider)throw new G($.FAILED_PRECONDITION,"SDK cache is already specified.");dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new sh;return iP(n,i,new jg(i,r.cacheSizeBytes,e?.forceOwnership))}function rP(t){dP(t=qe(t,mt));let e=zt(t);if(e._uninitializedComponentsProvider)throw new G($.FAILED_PRECONDITION,"SDK cache is already specified.");dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new sh;return iP(e,r,new kE(r,n.cacheSizeBytes))}function iP(t,e,n){let r=new Vt;return t.asyncQueue.enqueue(()=>k(this,null,function*(){try{yield Xm(t,n),yield jE(t,e),r.resolve()}catch(i){let o=i;if(!zR(o))throw o;dr("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function oP(t){if(t._initialized&&!t._terminated)throw new G($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Vt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{yield function(r){return k(this,null,function*(){if(!is.D())return Promise.resolve();let i=r+"main";yield is.delete(i)})}(dI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function sP(t){return function(n){let r=new Vt;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return Cq(yield DI(n),r)})),r.promise}(zt(t=qe(t,mt)))}function aP(t){return Vq(zt(t=qe(t,mt)))}function cP(t){return Lq(zt(t=qe(t,mt)))}function lP(t,e){let n=zt(t=qe(t,mt)),r=new $E;return $q(n,t._databaseId,e,r),r}function uP(t,e){return Hq(zt(t=qe(t,mt)),e).then(n=>n?new nn(t,null,n.query):null)}function dP(t){if(t._initialized||t._terminated)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Yt.fromBase64String(e))}catch(n){throw new G($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var kr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var oo=class{constructor(e){this._methodName=e}};var ka=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}};var qq=/^__.*__$/,HE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new us(e,this.data,n,this.fieldTransforms)}},Ug=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function hP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}var $g=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Hg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(hP(this.fu)&&qq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},qE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fh(e)}Fu(e,n,r,i=!1){return new $g({fu:e,methodName:n,vu:r,path:Rt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function La(t){let e=t._freezeSettings(),n=fh(t._databaseId);return new qE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ev(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);NI("Data must be an object, but it was:",s,r);let a=mP(r,s),c,u;if(o.merge)c=new Wn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let m of o.mergeFields){let w=QE(e,m,n);if(!s.contains(w))throw new G($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);vP(h,w)||h.push(w)}c=new Wn(h),u=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=s.fieldTransforms;return new HE(new gn(a),c,u)}var ah=class t extends oo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function fP(t,e,n){return new $g({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zE=class t extends oo{_toFieldTransform(e){return new Ma(e.path,new cs)}isEqual(e){return e instanceof t}},GE=class t extends oo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=fP(this,e,!0),r=this.Mu.map(o=>ja(o,n)),i=new ro(r);return new Ma(e.path,i)}isEqual(e){return e instanceof t&&Yv(this.Mu,e.Mu)}},WE=class t extends oo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=fP(this,e,!0),r=this.Mu.map(o=>ja(o,n)),i=new io(r);return new Ma(e.path,i)}isEqual(e){return e instanceof t&&Yv(this.Mu,e.Mu)}},KE=class t extends oo{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new ls(e.serializer,X1(e.serializer,this.xu));return new Ma(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function RI(t,e,n,r){let i=t.Fu(1,e,n);NI("Data must be an object, but it was:",i,r);let o=[],s=gn.empty();Va(r,(c,u)=>{let h=kI(e,c,n);u=We(u);let m=i.Su(h);if(u instanceof ah)o.push(h);else{let w=ja(u,m);w!=null&&(o.push(h),s.set(h,w))}});let a=new Wn(o);return new Ug(s,a,i.fieldTransforms)}function PI(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[QE(e,r,n)],c=[i];if(o.length%2!=0)throw new G($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(QE(e,o[w])),c.push(o[w+1]);let u=[],h=gn.empty();for(let w=a.length-1;w>=0;--w)if(!vP(u,a[w])){let b=a[w],A=c[w];A=We(A);let V=s.Su(b);if(A instanceof ah)u.push(b);else{let F=ja(A,V);F!=null&&(u.push(b),h.set(b,F))}}let m=new Wn(u);return new Ug(h,m,s.fieldTransforms)}function pP(t,e,n,r=!1){return ja(n,t.Fu(r?4:3,e))}function ja(t,e){if(gP(t=We(t)))return NI("Unsupported field value:",e,t),mP(t,e);if(t instanceof oo)return function(r,i){if(!hP(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=ja(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=_t.fromDate(r);return{timestampValue:Nl(i.serializer,o)}}if(r instanceof _t){let o=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nl(i.serializer,o)}}if(r instanceof ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vi)return{bytesValue:cR(i.serializer,r._byteString)};if(r instanceof ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Jg(r)}`)}(t,e)}function mP(t,e){let n={};return k1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Va(t,(r,i)=>{let o=ja(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function gP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof ka||t instanceof vi||t instanceof ct||t instanceof oo)}function NI(t,e,n){if(!gP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Jg(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function QE(t,e,n){if((e=We(e))instanceof kr)return e._internalPath;if(typeof e=="string")return kI(t,e);throw Hg("Field path arguments must be of type string or ",t,!1,void 0,n)}var zq=new RegExp("[~\\*/\\[\\]]");function kI(t,e,n){if(e.search(zq)>=0)throw Hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kr(...e.split("."))._internalPath}catch{throw Hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G($.INVALID_ARGUMENT,a+t+c)}function vP(t,e){return t.some(n=>n.isEqual(e))}var Oa=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new YE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(tv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},YE=class extends Oa{data(){return super.data()}};function tv(t,e){return typeof e=="string"?kI(t,e):e instanceof kr?e._internalPath:e._delegate._internalPath}function yP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ch=class{},Fa=class extends ch{};function co(t,e,...n){let r=[];e instanceof ch&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof ZE).length,a=o.filter(c=>c instanceof qg).length;if(s>1||s>0&&a>0)throw new G($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var qg=class t extends Fa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return xP(e._query,n),new nn(e.firestore,e.converter,xb(e._query,n))}_parse(e){let n=La(e.firestore);return function(o,s,a,c,u,h,m){let w;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){_1(m,h);let b=[];for(let A of m)b.push(w1(c,o,A));w={arrayValue:{values:b}}}else w=w1(c,o,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||_1(m,h),w=pP(a,s,m,h==="in"||h==="not-in");return Le.create(u,h,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function wP(t,e,n){let r=e,i=tv("where",t);return qg._create(i,r,n)}var ZE=class t extends ch{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)xP(s,c),s=xb(s,c)}(e._query,n),new nn(e.firestore,e.converter,xb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var XE=class t extends Fa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(o,s)}(e._query,this._field,this._direction);return new nn(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Pr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function _P(t,e="asc"){let n=e,r=tv("orderBy",t);return XE._create(r,n)}var zg=class t extends Fa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new nn(e.firestore,e.converter,ug(e._query,this._limit,this._limitType))}};function bP(t){return ZR("limit",t),zg._create("limit",t,"F")}function EP(t){return ZR("limitToLast",t),zg._create("limitToLast",t,"L")}var Gg=class t extends Fa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=SP(e,this.type,this._docOrFields,this._inclusive);return new nn(e.firestore,e.converter,function(i,o){return new Pr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function IP(...t){return Gg._create("startAt",t,!0)}function CP(...t){return Gg._create("startAfter",t,!1)}var Wg=class t extends Fa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=SP(e,this.type,this._docOrFields,this._inclusive);return new nn(e.firestore,e.converter,function(i,o){return new Pr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function DP(...t){return Wg._create("endBefore",t,!1)}function TP(...t){return Wg._create("endAt",t,!0)}function SP(t,e,n,r){if(n[0]=We(n[0]),n[0]instanceof Oa)return function(o,s,a,c,u){if(!c)throw new G($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let m of Dl(o))if(m.field.isKeyField())h.push(Sa(s,c.key));else{let w=c.data.field(m.field);if(Qg(w))throw new G($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let b=m.field.canonicalString();throw new G($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}h.push(w)}return new mi(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=La(t.firestore);return function(s,a,c,u,h,m){let w=s.explicitOrderBy;if(h.length>w.length)throw new G($.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let A=0;A<h.length;A++){let V=h[A];if(w[A].field.isKeyField()){if(typeof V!="string")throw new G($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof V}`);if(!sI(s)&&V.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${V}' contains a slash.`);let F=s.path.child(He.fromString(V));if(!te.isDocumentKey(F))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let W=new te(F);b.push(Sa(a,W))}else{let F=pP(c,u,V);b.push(F)}}return new mi(b,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function w1(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new G($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sI(e)&&n.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(He.fromString(n));if(!te.isDocumentKey(r))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sa(t,new te(r))}if(n instanceof ct)return Sa(t,n._key);throw new G($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jg(n)}.`)}function _1(t,e){if(!Array.isArray(t)||t.length===0)throw new G($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xP(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Hl=class{convertValue(e,n="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Va(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ka(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=iI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qd(e));default:return null}}convertTimestamp(e){let n=no(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=He.fromString(e);he(wR(r));let i=new ss(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(n)||Mt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function nv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var JE=class extends Hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}};var to=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fr=class extends Oa{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(tv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ns=class extends fr{data(e={}){return super.data(e)}},Or=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new to(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ns(this._firestore,this._userDataWriter,r.key,r,new to(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Gq(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Gq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}function OI(t,e){return t instanceof fr&&e instanceof fr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Or&&e instanceof Or&&t._firestore===e._firestore&&MI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function AP(t){t=qe(t,ct);let e=qe(t.firestore,mt);return KR(zt(e),t._key).then(n=>jI(e,t,n))}var so=class extends Hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}};function MP(t){t=qe(t,ct);let e=qe(t.firestore,mt),n=zt(e),r=new so(e);return jq(n,t._key).then(i=>new fr(e,r,t._key,i,new to(i!==null&&i.hasLocalMutations,!0),t.converter))}function RP(t){t=qe(t,ct);let e=qe(t.firestore,mt);return KR(zt(e),t._key,{source:"server"}).then(n=>jI(e,t,n))}function PP(t){t=qe(t,nn);let e=qe(t.firestore,mt),n=zt(e),r=new so(e);return yP(t._query),QR(n,t._query).then(i=>new Or(e,r,t,i))}function NP(t){t=qe(t,nn);let e=qe(t.firestore,mt),n=zt(e),r=new so(e);return Bq(n,t._query).then(i=>new Or(e,r,t,i))}function kP(t){t=qe(t,nn);let e=qe(t.firestore,mt),n=zt(e),r=new so(e);return QR(n,t._query,{source:"server"}).then(i=>new Or(e,r,t,i))}function FI(t,e,n){t=qe(t,ct);let r=qe(t.firestore,mt),i=nv(t.converter,e,n);return Yl(r,[ev(La(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,St.none())])}function VI(t,e,n,...r){t=qe(t,ct);let i=qe(t.firestore,mt),o=La(i),s;return s=typeof(e=We(e))=="string"||e instanceof kr?PI(o,"updateDoc",t._key,e,n,r):RI(o,"updateDoc",t._key,e),Yl(i,[s.toMutation(t._key,St.exists(!0))])}function OP(t){return Yl(qe(t.firestore,mt),[new ds(t._key,St.none())])}function FP(t,e){let n=qe(t.firestore,mt),r=mh(t),i=nv(t.converter,e);return Yl(n,[ev(La(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,St.exists(!1))]).then(()=>r)}function LI(t,...e){var n,r,i;t=We(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||UE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(UE(e[s])){let m=e[s];e[s]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[s+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,u,h;if(t instanceof ct)u=qe(t.firestore,mt),h=zl(t._key.path),c={next:m=>{e[s]&&e[s](jI(u,t,m))},error:e[s+1],complete:e[s+2]};else{let m=qe(t,nn);u=qe(m.firestore,mt),h=m._query;let w=new so(u);c={next:b=>{e[s]&&e[s](new Or(u,w,m,b))},error:e[s+1],complete:e[s+2]},yP(t._query)}return function(w,b,A,V){let F=new Ul(V),W=new ih(b,F,A);return w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return mI(yield $l(w),W)})),()=>{F.$a(),w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return gI(yield $l(w),W)}))}}(zt(u),h,a,c)}function VP(t,e){return Uq(zt(t=qe(t,mt)),UE(e)?e:{next:e})}function Yl(t,e){return function(r,i){let o=new Vt;return r.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return _q(yield DI(r),i,o)})),o.promise}(zt(t),e)}function jI(t,e,n){let r=n.docs.get(e._key),i=new so(t);return new fr(t,i,e._key,r,new to(n.hasPendingWrites,n.fromCache),e.converter)}var Wq={maxAttempts:5};var Kg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=La(e)}set(e,n,r){this._verifyNotCommitted();let i=es(e,this._firestore),o=nv(i.converter,n,r),s=ev(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,St.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=es(e,this._firestore),s;return s=typeof(n=We(n))=="string"||n instanceof kr?PI(this._dataReader,"WriteBatch.update",o._key,n,r,i):RI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,St.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=es(e,this._firestore);return this._mutations=this._mutations.concat(new ds(n._key,St.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function es(t,e){if((t=We(t)).firestore!==e)throw new G($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var eI=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=La(n)}get(n){let r=es(n,this._firestore),i=new JE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return se();let s=o[0];if(s.isFoundDocument())return new Oa(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Oa(this._firestore,i,r._key,null,r.converter);throw se()})}set(n,r,i){let o=es(n,this._firestore),s=nv(o.converter,r,i),a=ev(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=es(n,this._firestore),a;return a=typeof(r=We(r))=="string"||r instanceof kr?PI(this._dataReader,"Transaction.update",s._key,r,i,o):RI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=es(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=es(e,this._firestore),r=new so(this._firestore);return super.get(e).then(i=>new fr(this._firestore,r,n._key,i._document,new to(!1,!1),n.converter))}};function LP(t,e,n){t=qe(t,mt);let r=Object.assign(Object.assign({},Wq),n);return function(o){if(o.maxAttempts<1)throw new G($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Vt;return o.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){let u=yield Fq(o);new VE(o.asyncQueue,u,a,s,c).Xa()})),c.promise}(zt(t),i=>e(new eI(t,i)),r)}function jP(){return new ah("deleteField")}function BP(){return new zE("serverTimestamp")}function UP(...t){return new GE("arrayUnion",t)}function $P(...t){return new WE("arrayRemove",t)}function HP(t){return new KE("increment",t)}(function(e,n=!0){(function(i){ql=i})(_f),Ls(new br("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new mt(new ob(r.getProvider("auth-internal")),new lb(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xn(bM,"4.6.3",e),Xn(bM,"4.6.3","esm2017")})();var Kq="@firebase/firestore-compat",Qq="0.3.32";function zI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function qP(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function zP(){if(!O1())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var rv=class t{constructor(e){this._delegate=e}static fromBase64String(e){return zP(),new t(vi.fromBase64String(e))}static fromUint8Array(e){return qP(),new t(vi.fromUint8Array(e))}toBase64(){return zP(),this._delegate.toBase64()}toUint8Array(){return qP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function BI(t){return Yq(t,["next","error","complete"])}function Yq(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var UI=class{enableIndexedDbPersistence(e,n){return nP(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return rP(e._delegate)}clearIndexedDbPersistence(e){return oP(e._delegate)}},iv=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ss||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){XR(this._delegate,e,n,r)}enableNetwork(){return aP(this._delegate)}disableNetwork(){return cP(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SI("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return sP(this._delegate)}onSnapshotsInSync(e){return VP(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jl(this,xI(this._delegate,e))}catch(n){throw Mn(n,"collection()","Firestore.collection()")}}doc(e){try{return new yi(this,mh(this._delegate,e))}catch(n){throw Mn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ha(this,JR(this._delegate,e))}catch(n){throw Mn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LP(this._delegate,n=>e(new ov(this,n)))}batch(){return zt(this._delegate),new sv(new Kg(this._delegate,e=>Yl(this._delegate,e)))}loadBundle(e){return lP(this._delegate,e)}namedQuery(e){return uP(this._delegate,e).then(n=>n?new Ha(this,n):null)}},Zl=class extends Hl{constructor(e){super(),this.firestore=e}convertBytes(e){return new rv(new vi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return yi.forKey(n,this.firestore,null)}};function Zq(t){b1(t)}var ov=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Zl(e)}get(e){let n=Ba(e);return this._delegate.get(n).then(r=>new Ua(this._firestore,new fr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Ba(e);return r?(zI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Ba(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Ba(e);return this._delegate.delete(n),this}},sv=class{constructor(e){this._delegate=e}set(e,n,r){let i=Ba(e);return r?(zI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Ba(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Ba(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Xl=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new ns(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $a(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Zl(e),n),i.set(n,o)),o}};Xl.INSTANCES=new WeakMap;var yi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zl(e)}static forPath(e,n,r){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ct(n._delegate,r,new te(e)))}static forKey(e,n,r){return new t(n,new ct(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Jl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jl(this.firestore,xI(this._delegate,e))}catch(n){throw Mn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=We(e),e instanceof ct?AI(this._delegate,e):!1}set(e,n){n=zI("DocumentReference.set",n);try{return n?FI(this._delegate,e,n):FI(this._delegate,e)}catch(r){throw Mn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?VI(this._delegate,e):VI(this._delegate,e,n,...r)}catch(i){throw Mn(i,"updateDoc()","DocumentReference.update()")}}delete(){return OP(this._delegate)}onSnapshot(...e){let n=GP(e),r=WP(e,i=>new Ua(this.firestore,new fr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LI(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=MP(this._delegate):e?.source==="server"?n=RP(this._delegate):n=AP(this._delegate),n.then(r=>new Ua(this.firestore,new fr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mn(t,e,n){return t.message=t.message.replace(e,n),t}function GP(t){for(let e of t)if(typeof e=="object"&&!BI(e))return e;return{}}function WP(t,e){var n,r;let i;return BI(t[0])?i=t[0]:BI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ua=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new yi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return OI(this._delegate,e._delegate)}},$a=class extends Ua{data(e){let n=this._delegate.data(e);return this._delegate._converter||E1(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ha=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zl(e)}where(e,n,r){try{return new t(this.firestore,co(this._delegate,wP(e,n,r)))}catch(i){throw Mn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,co(this._delegate,_P(e,n)))}catch(r){throw Mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,co(this._delegate,bP(e)))}catch(n){throw Mn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,co(this._delegate,EP(e)))}catch(n){throw Mn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,co(this._delegate,IP(...e)))}catch(n){throw Mn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,co(this._delegate,CP(...e)))}catch(n){throw Mn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,co(this._delegate,DP(...e)))}catch(n){throw Mn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,co(this._delegate,TP(...e)))}catch(n){throw Mn(n,"endAt()","Query.endAt()")}}isEqual(e){return MI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=NP(this._delegate):e?.source==="server"?n=kP(this._delegate):n=PP(this._delegate),n.then(r=>new gh(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=GP(e),r=WP(e,i=>new gh(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LI(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},$I=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new $a(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},gh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ha(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $a(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new $I(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new $a(this._firestore,r))})}isEqual(e){return OI(this._delegate,e._delegate)}},Jl=class t extends Ha{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new yi(this.firestore,e):null}doc(e){try{return e===void 0?new yi(this.firestore,mh(this._delegate)):new yi(this.firestore,mh(this._delegate,e))}catch(n){throw Mn(n,"doc()","CollectionReference.doc()")}}add(e){return FP(this._delegate,e).then(n=>new yi(this.firestore,n))}isEqual(e){return AI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Xl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ba(t){return qe(t,ct)}var HI=class t{constructor(...e){this._delegate=new kr(...e)}static documentId(){return new t(Rt.keyField().canonicalString())}isEqual(e){return e=We(e),e instanceof kr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var qI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=BP();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=jP();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=UP(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=$P(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=HP(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Xq={Firestore:iv,GeoPoint:ka,Timestamp:_t,Blob:rv,Transaction:ov,WriteBatch:sv,DocumentReference:yi,DocumentSnapshot:Ua,Query:Ha,QueryDocumentSnapshot:$a,QuerySnapshot:gh,CollectionReference:Jl,FieldPath:HI,FieldValue:qI,setLogLevel:Zq,CACHE_SIZE_UNLIMITED:eP};function Jq(t,e){t.INTERNAL.registerComponent(new br("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Xq)))}function e3(t){Jq(t,(e,n)=>new iv(e,n,new UI)),t.registerVersion(Kq,Qq)}e3(Wt);function t3(t,e=$s){return new Te(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function KP(t,e){return t3(t,e)}function n3(t,e){return KP(t,e).pipe(qs(void 0),Nu(),pe(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function KI(t,e){return KP(t,e).pipe(pe(n=>({payload:n,type:"query"})))}var av=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=JP(r,n);return new lv(i,o,this.afs)}snapshotChanges(){return n3(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return this.snapshotChanges().pipe(pe(({payload:n})=>e.idField?je(ee({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Oe(this.ref.get(e)).pipe(Qt)}};function cv(t,e){return KI(t,e).pipe(qs(void 0),Nu(),pe(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function QP(t,e,n){return cv(t,n).pipe(Hs((r,i)=>r3(r,i.map(o=>o.payload),e),[]),Cy(),pe(r=>r.map(i=>({type:i.type,payload:i}))))}function r3(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=i3(t,r))}),t}function GI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function i3(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return GI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return GI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GI(t,e.oldIndex,1);break}return t}function YP(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var lv=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=cv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(pe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(qs(void 0),Nu(),un(([r,i])=>i.length>0||!r),pe(([,r])=>r),Qt)}auditTrail(e){return this.stateChanges(e).pipe(Hs((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=YP(e);return QP(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return KI(this.query,this.afs.schedulers.outsideAngular).pipe(pe(n=>n.payload.docs.map(r=>e.idField?je(ee({},r.data()),{[e.idField]:r.id}):r.data())),Qt)}get(e){return Oe(this.query.get(e)).pipe(Qt)}add(e){return this.ref.add(e)}doc(e){return new av(this.ref.doc(e),this.afs)}},WI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?cv(this.query,this.afs.schedulers.outsideAngular).pipe(Qt):cv(this.query,this.afs.schedulers.outsideAngular).pipe(pe(n=>n.filter(r=>e.indexOf(r.type)>-1)),un(n=>n.length>0),Qt)}auditTrail(e){return this.stateChanges(e).pipe(Hs((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=YP(e);return QP(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return KI(this.query,this.afs.schedulers.outsideAngular).pipe(pe(r=>r.payload.docs.map(i=>e.idField?ee({[e.idField]:i.id},i.data()):i.data())),Qt)}get(e){return Oe(this.query.get(e)).pipe(Qt)}},ZP=new ae("angularfire2.enableFirestorePersistence"),XP=new ae("angularfire2.firestore.persistenceSettings"),o3=new ae("angularfire2.firestore.settings"),s3=new ae("angularfire2.firestore.use-emulator");function JP(t,e=n=>n){return{query:e(t),ref:t}}var qa=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,h,m,w,b,A,V,F,W,Z){this.schedulers=c;let z=ga(n,a,r),J=h;m&&q0(z,a,w,A,V,F,b,W),[this.firestore,this.persistenceEnabled$]=hl(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{let ue=a.runOutsideAngular(()=>z.firestore());if(o&&ue.settings(o),J&&ue.useEmulator(...J),i&&!oa(s)){let ce=()=>{try{return Oe(ue.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(x){return typeof console<"u"&&console.warn(x),le(!1)}};return[ue,a.runOutsideAngular(ce)]}else return[ue,le(!1)]},[o,J,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=JP(i,r),a=this.schedulers.ngZone.run(()=>o);return new lv(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new WI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new av(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(Q(Ko),Q(Qo,8),Q(ZP,8),Q(o3,8),Q(Ln),Q(Ge),Q(ma),Q(XP,8),Q(s3,8),Q(va,8),Q(L0,8),Q(j0,8),Q(B0,8),Q(U0,8),Q($0,8),Q(H0,8),Q(ci,8))};static \u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),eN=(()=>{class t{constructor(){Wt.registerVersion("angularfire",Xi.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:ZP,useValue:!0},{provide:XP,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=en({type:t});static \u0275inj=Jt({providers:[qa]})}return t})();var lN="firebasestorage.googleapis.com",uN="storageBucket",a3=2*60*1e3,c3=10*60*1e3,l3=1e3;var bt=class t extends yf{constructor(e,n,r=0){super(YI(e),`Firebase Storage: ${n} (${YI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},gt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(gt||{});function YI(t){return"storage/"+t}function iC(){let t="An unknown error occurred, please check the error payload for server response.";return new bt(gt.UNKNOWN,t)}function u3(t){return new bt(gt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function d3(t){return new bt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h3(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(gt.UNAUTHENTICATED,t)}function f3(){return new bt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p3(t){return new bt(gt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dN(){return new bt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hN(){return new bt(gt.CANCELED,"User canceled the upload/download.")}function m3(t){return new bt(gt.INVALID_URL,"Invalid URL '"+t+"'.")}function g3(t){return new bt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function v3(){return new bt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uN+"' property when initializing the app?")}function fN(){return new bt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y3(){return new bt(gt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function w3(){return new bt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _3(t){return new bt(gt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function za(t){return new bt(gt.INVALID_ARGUMENT,t)}function pN(){return new bt(gt.APP_DELETED,"The Firebase app was deleted.")}function oC(t){return new bt(gt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yh(t,e){return new bt(gt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vh(t){throw new bt(gt.INTERNAL_ERROR,"Internal error: "+t)}var Rn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw g3(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(J){J.path_=decodeURIComponent(J.path)}let h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${h}/b/${i}/o${w}`,"i"),A={bucket:1,path:3},V=n===lN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",W=new RegExp(`^https?://${V}/${i}/${F}`,"i"),z=[{regex:a,indices:c,postModify:o},{regex:b,indices:A,postModify:u},{regex:W,indices:{bucket:1,path:2},postModify:u}];for(let J=0;J<z.length;J++){let ue=z[J],ce=ue.regex.exec(e);if(ce){let x=ce[ue.indices.bucket],I=ce[ue.indices.path];I||(I=""),r=new t(x,I),ue.postModify(r);break}}if(r==null)throw m3(e);return r}},XI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function b3(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function h(...F){u||(u=!0,e.apply(null,F))}function m(F){i=setTimeout(()=>{i=null,t(b,c())},F)}function w(){o&&clearTimeout(o)}function b(F,...W){if(u){w();return}if(F){w(),h.call(null,F,...W);return}if(c()||s){w(),h.call(null,F,...W);return}r<64&&(r*=2);let z;a===1?(a=2,z=0):z=(r+Math.random())*1e3,m(z)}let A=!1;function V(F){A||(A=!0,w(),!u&&(i!==null?(F||(a=2),clearTimeout(i),m(0)):F||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,V(!0)},n),V}function E3(t){t(!1)}function I3(t){return t!==void 0}function C3(t){return typeof t=="function"}function D3(t){return typeof t=="object"&&!Array.isArray(t)}function hv(t){return typeof t=="string"||t instanceof String}function tN(t){return sC()&&t instanceof Blob}function sC(){return typeof Blob<"u"}function JI(t,e,n,r){if(r<e)throw za(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw za(`Invalid value for '${t}'. Expected ${n} or less.`)}function gs(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function mN(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var nu=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(nu||{});function gN(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var eC=class{constructor(e,n,r,i,o,s,a,c,u,h,m,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=m,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,A)=>{this.resolve_=b,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new tu(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===nu.NO_ERROR,c=o.getStatus();if(!a||gN(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===nu.ABORT;r(!1,new tu(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new tu(u,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());I3(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=iC();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?pN():hN();s(c)}else{let c=dN();s(c)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=b3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},tu=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function T3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function S3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function A3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function M3(t,e,n,r,i,o,s=!0){let a=mN(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return x3(u,e),T3(u,n),S3(u,o),A3(u,r),new eC(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function R3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P3(...t){let e=R3();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(sC())return new Blob(t);throw new bt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function N3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function k3(t){if(typeof atob>"u")throw _3("base-64");return atob(t)}var Kn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wh=class{constructor(e,n){this.data=e,this.contentType=n||null}};function aC(t,e){switch(t){case Kn.RAW:return new wh(vN(e));case Kn.BASE64:case Kn.BASE64URL:return new wh(yN(t,e));case Kn.DATA_URL:return new wh(F3(e),V3(e))}throw iC()}function vN(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function O3(t){let e;try{e=decodeURIComponent(t)}catch{throw yh(Kn.DATA_URL,"Malformed data URL.")}return vN(e)}function yN(t,e){switch(t){case Kn.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw yh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Kn.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw yh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=k3(e)}catch(i){throw i.message.includes("polyfill")?i:yh(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var dv=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw yh(Kn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=L3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function F3(t){let e=new dv(t);return e.base64?yN(Kn.BASE64,e.rest):O3(e.rest)}function V3(t){return new dv(t).contentType}function L3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ru=class t{constructor(e,n){let r=0,i="";tN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(tN(this.data_)){let r=this.data_,i=N3(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(sC()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(P3.apply(null,n))}else{let n=e.map(s=>hv(s)?aC(Kn.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function cC(t){let e;try{e=JSON.parse(t)}catch{return null}return D3(e)?e:null}function j3(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B3(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function wN(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function U3(t,e){return e}var rn=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||U3}},uv=null;function $3(t){return!hv(t)||t.length<2?t:wN(t)}function fv(){if(uv)return uv;let t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(o,s){return $3(s)}let n=new rn("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new rn("size");return i.xform=r,t.push(i),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),uv=t,uv}function H3(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Rn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function q3(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return H3(r,t),r}function _N(t,e,n){let r=cC(e);return r===null?null:q3(t,r,n)}function z3(t,e,n,r){let i=cC(e);if(i===null||!hv(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=t.bucket,m=t.fullPath,w="/b/"+s(h)+"/o/"+s(m),b=gs(w,n,r),A=mN({alt:"media",token:u});return b+A})[0]}function lC(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var nN="prefixes",rN="items";function G3(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[nN])for(let i of n[nN]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new Rn(e,o));r.prefixes.push(s)}if(n[rN])for(let i of n[rN]){let o=t._makeStorageReference(new Rn(e,i.name));r.items.push(o)}return r}function W3(t,e,n){let r=cC(n);return r===null?null:G3(t,e,r)}var Fr=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function _i(t){if(!t)throw iC()}function pv(t,e){function n(r,i){let o=_N(t,i,e);return _i(o!==null),o}return n}function K3(t,e){function n(r,i){let o=W3(t,e,i);return _i(o!==null),o}return n}function Q3(t,e){function n(r,i){let o=_N(t,i,e);return _i(o!==null),z3(o,i,t.host,t._protocol)}return n}function su(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=f3():i=h3():n.getStatus()===402?i=d3(t.bucket):n.getStatus()===403?i=p3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function mv(t){let e=su(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=u3(t.path)),o.serverResponse=i.serverResponse,o}return n}function bN(t,e,n){let r=e.fullServerUrl(),i=gs(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Fr(i,o,pv(t,n),s);return a.errorHandler=mv(e),a}function Y3(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=gs(s,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new Fr(a,c,K3(t,e.bucket),u);return h.urlParams=o,h.errorHandler=su(e),h}function Z3(t,e,n){let r=e.fullServerUrl(),i=gs(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Fr(i,o,Q3(t,n),s);return a.errorHandler=mv(e),a}function X3(t,e,n,r){let i=e.fullServerUrl(),o=gs(i,t.host,t._protocol),s="PATCH",a=lC(n,r),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new Fr(o,s,pv(t,r),u);return h.headers=c,h.body=a,h.errorHandler=mv(e),h}function J3(t,e){let n=e.fullServerUrl(),r=gs(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,u){}let a=new Fr(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=mv(e),a}function ez(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function EN(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ez(null,e)),r}function tz(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let z="";for(let J=0;J<2;J++)z=z+Math.random().toString().slice(2);return z}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=EN(e,r,i),h=lC(u,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,w=`\r
--`+c+"--",b=ru.getBlob(m,r,w);if(b===null)throw fN();let A={name:u.fullPath},V=gs(o,t.host,t._protocol),F="POST",W=t.maxUploadRetryTime,Z=new Fr(V,F,pv(t,n),W);return Z.urlParams=A,Z.headers=s,Z.body=b.uploadData(),Z.errorHandler=su(e),Z}var iu=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function uC(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{_i(!1)}return _i(!!n&&(e||["active"]).indexOf(n)!==-1),n}function nz(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=EN(e,r,i),a={name:s.fullPath},c=gs(o,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=lC(s,n),w=t.maxUploadRetryTime;function b(V){uC(V);let F;try{F=V.getResponseHeader("X-Goog-Upload-URL")}catch{_i(!1)}return _i(hv(F)),F}let A=new Fr(c,u,b,w);return A.urlParams=a,A.headers=h,A.body=m,A.errorHandler=su(e),A}function rz(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(u){let h=uC(u,["active","final"]),m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_i(!1)}m||_i(!1);let w=Number(m);return _i(!isNaN(w)),new iu(w,r.size(),h==="final")}let s="POST",a=t.maxUploadRetryTime,c=new Fr(n,s,o,a);return c.headers=i,c.errorHandler=su(e),c}var iN=256*1024;function iz(t,e,n,r,i,o,s,a){let c=new iu(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw y3();let u=c.total-c.current,h=u;i>0&&(h=Math.min(h,i));let m=c.current,w=m+h,b="";h===0?b="finalize":u===h?b="upload, finalize":b="upload";let A={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${c.current}`},V=r.slice(m,w);if(V===null)throw fN();function F(J,ue){let ce=uC(J,["active","final"]),x=c.current+h,I=r.size(),S;return ce==="final"?S=pv(e,o)(J,ue):S=null,new iu(x,I,ce==="final",S)}let W="POST",Z=e.maxUploadRetryTime,z=new Fr(n,W,F,Z);return z.headers=A,z.body=V.uploadData(),z.progressCallback=a||null,z.errorHandler=su(t),z}var IN={STATE_CHANGED:"state_changed"},vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ZI(t){switch(t){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}var tC=class{constructor(e,n,r){if(C3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function eu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var oN=null,nC=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw vh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},rC=class extends nC{initXhr(){this.xhr_.responseType="text"}};function wi(){return oN?oN():new rC}var _h=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=fv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(gt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(gN(i.status,[]))if(o)i=dN();else{this.sleepTime=Math.max(this.sleepTime*2,l3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(gt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=nz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=rz(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,wi,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=iN*this._chunkMultiplier,n=new iu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=iz(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,wi,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){iN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=bN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=tz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=hN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=ZI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new tC(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ZI(this._state)){case vn.SUCCESS:eu(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:let n=this._reject;eu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ZI(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&eu(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&eu(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&eu(e.error.bind(e,this._error))();break;default:e.error&&eu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var ou=class t{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wN(this._location.path)}get storage(){return this._service}get parent(){let e=j3(this._location.path);if(e===null)return null;let n=new Rn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw oC(e)}};function oz(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _h(t,new ru(e),n)}function sz(t){let e={prefixes:[],items:[]};return CN(t,e).then(()=>e)}function CN(t,e,n){return k(this,null,function*(){let i=yield DN(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield CN(t,e,i.nextPageToken))})}function DN(t,e){e!=null&&typeof e.maxResults=="number"&&JI("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=Y3(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,wi)}function az(t){t._throwIfRoot("getMetadata");let e=bN(t.storage,t._location,fv());return t.storage.makeRequestWithTokens(e,wi)}function cz(t,e){t._throwIfRoot("updateMetadata");let n=X3(t.storage,t._location,e,fv());return t.storage.makeRequestWithTokens(n,wi)}function lz(t){t._throwIfRoot("getDownloadURL");let e=Z3(t.storage,t._location,fv());return t.storage.makeRequestWithTokens(e,wi).then(n=>{if(n===null)throw w3();return n})}function uz(t){t._throwIfRoot("deleteObject");let e=J3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,wi)}function TN(t,e){let n=B3(t._location.path,e),r=new Rn(t._location.bucket,n);return new ou(t.storage,r)}function dz(t){return/^[A-Za-z]+:\/\//.test(t)}function hz(t,e){return new ou(t,e)}function SN(t,e){if(t instanceof bh){let n=t;if(n._bucket==null)throw v3();let r=new ou(n,n._bucket);return e!=null?SN(r,e):r}else return e!==void 0?TN(t,e):t}function fz(t,e){if(e&&dz(e)){if(t instanceof bh)return hz(t,e);throw za("To use ref(service, url), the first argument must be a Storage instance.")}else return SN(t,e)}function sN(t,e){let n=e?.[uN];return n==null?null:Rn.makeFromBucketSpec(n,t)}function pz(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:gf(i,t.app.options.projectId))}var bh=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=lN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a3,this._maxUploadRetryTime=c3,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=sN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=sN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return k(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return k(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ou(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new XI(pN());{let s=M3(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return k(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},aN="@firebase/storage",cN="0.12.5";var mz="storage";function xN(t,e,n){return t=We(t),oz(t,e,n)}function AN(t){return t=We(t),az(t)}function MN(t,e){return t=We(t),cz(t,e)}function RN(t,e){return t=We(t),DN(t,e)}function PN(t){return t=We(t),sz(t)}function NN(t){return t=We(t),lz(t)}function kN(t){return t=We(t),uz(t)}function dC(t,e){return t=We(t),fz(t,e)}function ON(t,e){return TN(t,e)}function FN(t,e,n,r={}){pz(t,e,n,r)}function gz(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new bh(n,r,i,e,_f)}function vz(){Ls(new br(mz,gz,"PUBLIC").setMultipleInstances(!0)),Xn(aN,cN,""),Xn(aN,cN,"esm2017")}vz();var au=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var gv=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new au(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new au(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new au(s,this,this._ref)):o={next:n.next?s=>n.next(new au(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},vv=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ga(e,this._service))}get items(){return this._delegate.items.map(e=>new Ga(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Ga=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=ON(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new gv(xN(this._delegate,e,n),this)}putString(e,n=Kn.RAW,r){this._throwIfRoot("putString");let i=aC(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new gv(new _h(this._delegate,new ru(i.data,!0),o),this)}listAll(){return PN(this._delegate).then(e=>new vv(e,this.storage))}list(e){return RN(this._delegate,e||void 0).then(n=>new vv(n,this.storage))}getMetadata(){return AN(this._delegate)}updateMetadata(e){return MN(this._delegate,e)}getDownloadURL(){return NN(this._delegate)}delete(){return this._throwIfRoot("delete"),kN(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw oC(e)}};var yv=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VN(e))throw za("ref() expected a child path but got a URL, use refFromURL instead.");return new Ga(dC(this._delegate,e),this)}refFromURL(e){if(!VN(e))throw za("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rn.makeFromUrl(e,this._delegate.host)}catch{throw za("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ga(dC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){FN(this._delegate,e,n,r)}};function VN(t){return/^[A-Za-z]+:\/\//.test(t)}var yz="@firebase/storage-compat",wz="0.3.8";var _z="storage-compat";function bz(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new yv(n,r)}function Ez(t){let e={TaskState:vn,TaskEvent:IN,StringFormat:Kn,Storage:yv,Reference:Ga};t.INTERNAL.registerComponent(new br(_z,bz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(yz,wz)}Ez(Wt);function Iz(t){return new Te(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(Ey(0))}function LN(t){let e=Iz(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(pe(n=>n.bytesTransferred/n.totalBytes*100))}}function wv(t){return{getDownloadURL:()=>le(void 0).pipe(A0,Qe(()=>t.getDownloadURL()),Qt),getMetadata:()=>le(void 0).pipe(A0,Qe(()=>t.getMetadata()),Qt),delete:()=>Oe(t.delete()),child:e=>wv(t.child(e)),updateMetadata:e=>Oe(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return LN(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return LN(i)},list:e=>Oe(t.list(e)),listAll:()=>Oe(t.listAll())}}var Cz=new ae("angularfire2.storageBucket"),Dz=new ae("angularfire2.storage.maxUploadRetryTime"),Tz=new ae("angularfire2.storage.maxOperationRetryTime"),Sz=new ae("angularfire2.storage.use-emulator"),jN=(()=>{class t{storage;constructor(n,r,i,o,s,a,c,u,h,m){let w=ga(n,s,r);this.storage=hl(`${w.name}.storage.${i}`,"AngularFireStorage",w.name,()=>{let b=s.runOutsideAngular(()=>w.storage(i||void 0)),A=h;return A&&b.useEmulator(...A),c&&b.setMaxUploadRetryTime(c),u&&b.setMaxOperationRetryTime(u),b},[c,u])}ref(n){return wv(this.storage.ref(n))}refFromURL(n){return wv(this.storage.refFromURL(n))}upload(n,r,i){let o=this.storage.ref(n);return wv(o).put(r,i)}static \u0275fac=function(r){return new(r||t)(Q(Ko),Q(Qo,8),Q(Cz,8),Q(Ln),Q(Ge),Q(ma),Q(Dz,8),Q(Tz,8),Q(Sz,8),Q(ci,8))};static \u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Xt=(()=>{let e=class e{constructor(r,i,o,s){this.afAuth=r,this.afs=i,this.afStorage=o,this.router=s,this.esAdmin=!1,this.esEspecialista=!1,this.esPaciente=!1,this.roleSubject=new Ht({esAdmin:!1,esEspecialista:!1,esPaciente:!1}),this.role$=this.roleSubject.asObservable(),this.user$=this.afAuth.authState.pipe(Qe(a=>a?le(a):le(null))),this.isLoggedIn$=this.user$.pipe(pe(a=>!!a))}guardarPaciente(r,i){return k(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r.mail,i),s=o.user;if(o&&o.user){let a=yield this.uploadFileAndGetUrl(r.foto1,o.user.uid,"foto1"),c=yield this.uploadFileAndGetUrl(r.foto2,o.user.uid,"foto2");return yield this.afs.collection("pacientes").doc(o.user.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",obraSocial:r.obraSocial||"",mail:r.mail||"",foto1:a||"",foto2:c||""}),s!=null&&(yield s.sendEmailVerification()),o.user.uid}else throw new Error("No se pudo crear el usuario")}catch(o){throw console.error("Error al guardar el paciente en Firestore:",o),o}})}guardarEspecialista(r,i,o){return k(this,null,function*(){try{let a=(yield this.afAuth.createUserWithEmailAndPassword(r.mail,i)).user;if(a){let c=yield this.uploadFileAndGetUrl(r.foto1,a.uid,"foto1");return yield this.afs.collection("especialistas").doc(a.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",especialidad:r.especialidad||"",mail:r.mail||"",foto1:c||"",habilitado:!1,horarios:o||[]}),yield a.sendEmailVerification(),a.uid}else throw new Error("No se pudo crear el usuario")}catch(s){throw console.error("Error al guardar el especialista en Firestore:",s),s}})}guardarAdmin(r,i){return k(this,null,function*(){try{let o=yield this.afAuth.createUserWithEmailAndPassword(r.mail,i),s=o.user;if(o&&o.user){let a=yield this.uploadFileAndGetUrl(r.foto1,o.user.uid,"foto1");return yield this.afs.collection("administradores").doc(o.user.uid).set({nombre:r.nombre||"",apellido:r.apellido||"",edad:r.edad||"",DNI:r.dni||"",mail:r.mail||"",foto1:a||""}),s!=null&&(yield s.sendEmailVerification()),o.user.uid}else throw new Error("No se pudo crear el usuario")}catch(o){throw console.error("Error al guardar el admin en Firestore:",o),o}})}login(r,i){return k(this,null,function*(){try{let s=(yield this.afAuth.signInWithEmailAndPassword(r,i)).user;if(s){if(!s.emailVerified)throw yield this.afAuth.signOut(),new Error("Email no verificado");this.esAdmin=!1,this.esEspecialista=!1,this.esPaciente=!1,(yield this.afs.collection("administradores").doc(s.uid).ref.get()).exists?this.esAdmin=!0:(yield this.afs.collection("especialistas").doc(s.uid).ref.get()).exists?this.esEspecialista=!0:(yield this.afs.collection("pacientes").doc(s.uid).ref.get()).exists&&(this.esPaciente=!0),this.roleSubject.next({esAdmin:this.esAdmin,esEspecialista:this.esEspecialista,esPaciente:this.esPaciente})}this.router.navigate(["/"])}catch(o){throw console.error("Error al iniciar sesi\xF3n:",o),o}})}logout(){return k(this,null,function*(){try{yield this.afAuth.signOut(),this.router.navigate(["/login"])}catch(r){throw console.error("Error al cerrar sesi\xF3n:",r),r}})}uploadFileAndGetUrl(r,i,o){return k(this,null,function*(){try{if(!r||!(r instanceof Blob))throw new Error("El archivo no es v\xE1lido");let s=this.afStorage.storage.ref(`users/${i}/${o}`);return yield s.put(r),yield s.getDownloadURL()}catch(s){throw console.error("Error al subir archivo a Firebase Storage:",s),s}})}getCurrentUser(){return k(this,null,function*(){return tM().currentUser})}getEspecialistaData(r){return k(this,null,function*(){try{let i=yield this.afs.collection("especialistas").doc(r).ref.get();return i.exists?i.data():null}catch(i){throw console.error("Error al obtener datos del especialista:",i),i}})}getAllPacientes(){return k(this,null,function*(){try{let r=yield this.afs.collection("pacientes").get().toPromise();if(!r)throw new Error('No se encontraron documentos en la colecci\xF3n "pacientes"');return r.docs.map(i=>{let o=i.data();return ee({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los pacientes:",r),r}})}getAllAdmin(){return k(this,null,function*(){try{let r=yield this.afs.collection("administradores").get().toPromise();if(!r)throw new Error("No se obtuvo ning\xFAn snapshot de admin");return r.docs.map(i=>{let o=i.data();return ee({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los admins:",r),r}})}getAllEspecialistas(){return k(this,null,function*(){try{let r=yield this.afs.collection("especialistas").get().toPromise();if(!r)throw new Error("No se obtuvo ning\xFAn snapshot de especialistas");return r.docs.map(i=>{let o=i.data();return ee({id:i.id},o)})}catch(r){throw console.error("Error al obtener los datos de los especialistas:",r),r}})}toggleHabilitadoEspecialista(r,i){return k(this,null,function*(){try{yield this.afs.collection("especialistas").doc(r).update({habilitado:i})}catch(o){throw console.error("Error al cambiar la habilitaci\xF3n del especialista:",o),o}})}getUserRole(r){return k(this,null,function*(){let i=yield this.afs.collection("administradores").doc(r).ref.get();if(i.exists)return{role:"admin",data:i.data()};let o=yield this.afs.collection("especialistas").doc(r).ref.get();if(o.exists)return{role:"especialista",data:o.data()};let s=yield this.afs.collection("pacientes").doc(r).ref.get();if(s.exists)return{role:"paciente",data:s.data()};throw new Error("Usuario no encontrado en ninguna colecci\xF3n")})}getCurrentUserData(){return this.afAuth.authState.pipe(Qe(r=>{if(r){let i=r.uid;return this.afs.doc(`administradores/${i}`).valueChanges().pipe(Qe(o=>o?le({role:"admin",data:o}):this.afs.doc(`especialistas/${i}`).valueChanges().pipe(Qe(s=>s?le({role:"especialista",data:s}):this.afs.doc(`pacientes/${i}`).valueChanges().pipe(Qe(a=>a?le({role:"paciente",data:a}):le(null)))))))}else return le(null)}))}isTurnoTaken(r,i,o){return k(this,null,function*(){let s=new Date(i);return s.setHours(o.getHours(),o.getMinutes(),0,0),new Date(s).setMinutes(s.getMinutes()+30),!(yield this.afs.collection("turnos",u=>u.where("especialista","==",r).where("turno","==",s)).get().toPromise())?.empty})}saveTurno(r){let i={especialista:r.specialistId,especialidad:r.specialty,turno:r.time,creado:new Date,pacienteId:r.pacienteId};return this.afs.collection("turnos").add(i)}};e.\u0275fac=function(i){return new(i||e)(Q(va),Q(qa),Q(jN),Q(pn))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Az(t,e){t&1&&(C(0,"div"),P(1,"Correo electr\xF3nico es requerido."),E())}function Mz(t,e){t&1&&(C(0,"div"),P(1,"Correo electr\xF3nico no v\xE1lido."),E())}function Rz(t,e){if(t&1&&(C(0,"div"),X(1,Az,2,0,"div",5)(2,Mz,2,0,"div",5),E()),t&2){let n,r,i=fe();R(),U("ngIf",(n=i.loginForm.get("email"))==null?null:n.hasError("required")),R(),U("ngIf",(r=i.loginForm.get("email"))==null?null:r.hasError("email"))}}function Pz(t,e){t&1&&(C(0,"div"),P(1,"Contrase\xF1a es requerida."),E())}function Nz(t,e){if(t&1&&(C(0,"div"),X(1,Pz,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.loginForm.get("password"))==null?null:n.hasError("required"))}}function kz(t,e){if(t&1&&(C(0,"div",11),P(1),E()),t&2){let n=fe();R(),Lo(n.errorMessage)}}var BN=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.fb=i,this.router=o,this.errorMessage="",this.loginForm=this.fb.group({email:["",[Ve.required,Ve.email]],password:["",[Ve.required]]})}onSubmit(){return k(this,null,function*(){if(this.loginForm.valid){let{email:r,password:i}=this.loginForm.value;try{yield this.authService.login(r,i);let o=yield this.authService.getCurrentUser();if(o){let{role:s,data:a}=yield this.authService.getUserRole(o.uid);if(s==="especialista")if(a.habilitado===!0)lo.default.fire({position:"top-right",icon:"success",title:"Bienvenido especialista",showConfirmButton:!1,timer:1500}),this.router.navigate(["/bienvenida"]);else throw lo.default.fire({position:"top-left",icon:"error",title:"Todav\xEDa no ha sido verificado",showConfirmButton:!1,timer:1500}),new Error("Especialista no verificado");else s==="admin"?(lo.default.fire({position:"top-right",icon:"success",title:"Bienvenido administrador",showConfirmButton:!1,timer:1500}),this.router.navigate(["/bienvenida"])):s==="paciente"&&(lo.default.fire({position:"top-right",icon:"success",title:"Bienvenido paciente",showConfirmButton:!1,timer:1500}),this.router.navigate(["/bienvenida"]))}else lo.default.fire({position:"top-left",icon:"error",title:"Usuario no encontrado",showConfirmButton:!1,timer:1500})}catch(o){console.error("Error al iniciar sesi\xF3n:",o),o.message==="Email no verificado"?lo.default.fire({position:"top-left",icon:"error",title:"Correo no verificado",text:"Por favor, verifica tu correo electr\xF3nico antes de iniciar sesi\xF3n.",showConfirmButton:!0}):o.message==="Especialista no verificado"?lo.default.fire({position:"top-left",icon:"error",title:"Especialista no verificado",text:"Por favor, espere a que su cuenta sea habilitada.",showConfirmButton:!0}):lo.default.fire({position:"top-left",icon:"error",title:"Credenciales incorrectas",showConfirmButton:!1,timer:1500})}}})}ingresoRapido(r,i){this.loginForm.patchValue({email:r,password:i})}manejarCredencialesSeleccionadas(r){this.loginForm.patchValue({email:r.email,password:r.password})}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(si),re(pn))},e.\u0275cmp=rt({type:e,selectors:[["app-login"]],standalone:!0,features:[it],decls:19,vars:5,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],[4,"ngIf"],["for","pass"],["type","password","id","password","name","password","formControlName","password","required",""],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[3,"credencialesSeleccionadas"],[1,"error-message"]],template:function(i,o){if(i&1&&(C(0,"body")(1,"div",0)(2,"h2"),P(3,"Iniciar Sesi\xF3n"),E(),C(4,"form",1),ge("ngSubmit",function(){return o.onSubmit()}),C(5,"div",2)(6,"label",3),P(7,"Correo Electr\xF3nico"),E(),ye(8,"input",4),X(9,Rz,3,2,"div",5),E(),C(10,"div",2)(11,"label",6),P(12,"Contrase\xF1a"),E(),ye(13,"input",7),X(14,Nz,2,1,"div",5),E(),C(15,"button",8),P(16,"Iniciar Sesi\xF3n"),E(),X(17,kz,2,1,"div",9),E()(),C(18,"app-botones-inicio",10),ge("credencialesSeleccionadas",function(a){return o.manejarCredencialesSeleccionadas(a)}),E()()),i&2){let s,a;R(4),U("formGroup",o.loginForm),R(5),U("ngIf",((s=o.loginForm.get("email"))==null?null:s.invalid)&&(((s=o.loginForm.get("email"))==null?null:s.dirty)||((s=o.loginForm.get("email"))==null?null:s.touched))),R(5),U("ngIf",((a=o.loginForm.get("password"))==null?null:a.invalid)&&(((a=o.loginForm.get("password"))==null?null:a.dirty)||((a=o.loginForm.get("password"))==null?null:a.touched))),R(),U("disabled",o.loginForm.invalid),R(2),U("ngIf",o.errorMessage)}},dependencies:[fn,lr,Go,cr,oi,zo,Zi,ai,Qi,Yi,Vm],styles:['body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:90vh;margin:0;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.login-container[_ngcontent-%COMP%]{background-color:#d1a054;width:300px;padding:20px;border-radius:8px;box-shadow:0 0 10px #2e4c6d;text-align:center}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e4c6d;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 20px);padding:10px;font-size:14px;border:1px solid #2e4c6d;border-radius:4px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#2e4c6d;color:#d2691e;border:none;padding:10px 20px;font-size:16px;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#d2691e;color:#2e4c6d}']});let t=e;return t})();var UN='body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune;display:flex;justify-content:center;align-items:center;background-image:url("./media/fondo-5DKL25FJ.jpg");background-size:cover;background-position:center}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:90vh;background:none}.button1[_ngcontent-%COMP%]{width:30%;padding:150px;margin:20px;font-size:25px;text-align:center;font-family:Dune,sans-serif;color:#2e4c6d;border:none;border-radius:10px;cursor:pointer;background-image:url("./media/paciente-CAD7PT2O.jpg");background-size:cover;background-position:center}.button2[_ngcontent-%COMP%]{width:30%;padding:150px;margin:20px;font-size:25px;text-align:center;font-family:Dune,sans-serif;color:#2e4c6d;border:none;border-radius:10px;cursor:pointer;background-image:url("./media/especialista-3RG2A3G3.jpg");background-size:cover;background-position:center}',$N=(()=>{let e=class e{constructor(r,i){this.formBuilder=r,this.router=i}navegarPacientes(){this.router.navigateByUrl("/registro_pacientes")}navegarEspecialistas(){this.router.navigateByUrl("/registro_especialistas")}};e.\u0275fac=function(i){return new(i||e)(re(si),re(pn))},e.\u0275cmp=rt({type:e,selectors:[["app-registro"]],standalone:!0,features:[it],decls:10,vars:0,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container"],[1,"button1",3,"click"],[1,"button2",3,"click"]],template:function(i,o){i&1&&(C(0,"html",0)(1,"head"),ye(2,"meta",1)(3,"meta",2),E(),C(4,"body")(5,"div",3)(6,"button",4),ge("click",function(){return o.navegarPacientes()}),P(7,"Pacientes"),E(),C(8,"button",5),ge("click",function(){return o.navegarEspecialistas()}),P(9,"Especialistas"),E()()()())},styles:[UN,UN]});let t=e;return t})();var Be=class{static onlyLetters(e){let n=/^[a-zA-Z]*$/;return e.value&&!n.test(e.value)?{onlyLetters:!0}:null}static onlyNumbers(e){let n=/^[0-9]*$/;return e.value&&!n.test(e.value)?{onlyNumbers:!0}:null}static minLength(e){return n=>n.value&&n.value.length<e?{minLength:!0}:null}static maxLength(e){return n=>n.value&&n.value.length>e?{maxLength:!0}:null}};var fC=Tu(ol());function Oz(t,e){if(t&1&&(C(0,"option"),P(1),E()),t&2){let n=e.$implicit;R(),Lo(n)}}var _v=(()=>{let e=class e{constructor(){this.especialidad="Dermat\xF3logo",this.nuevaEspecialidad="",this.especialidades=["Dermat\xF3logo","Kinesi\xF3logo","Cardi\xF3logo","Neur\xF3logo"],this.agregandoEspecialidad=!1,this.especilidadSeleccionada=new ut}mostrarInput(){this.agregandoEspecialidad=!0}agregarEspecialidad(){this.nuevaEspecialidad.trim()!=""&&this.especialidades.indexOf(this.nuevaEspecialidad)==-1&&(this.especialidades.push(this.nuevaEspecialidad),this.especialidad=this.nuevaEspecialidad,this.nuevaEspecialidad="",this.agregandoEspecialidad=!1)}cancelarAgregado(){this.agregandoEspecialidad=!1,this.nuevaEspecialidad=""}enviarEspecialidad(){this.especilidadSeleccionada.emit(this.especialidad)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-especialidades"]],outputs:{especilidadSeleccionada:"especilidadSeleccionada"},standalone:!0,features:[it],decls:9,vars:3,consts:[[1,"login__field"],[2,"width","100%","margin-bottom","10px"],[1,"login-input",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[2,"width","100%","display","flex","justify-content","space-between","align-items","center"],["type","text","placeholder","Otra","name","otraEspecialidad",1,"login-input",2,"flex","1","margin-right","20px",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1)(2,"select",2),Yp("ngModelChange",function(a){return a_(o.especialidad,a)||(o.especialidad=a),a}),ge("ngModelChange",function(){return o.enviarEspecialidad()}),X(3,Oz,2,1,"option",3),E()(),C(4,"div",4)(5,"input",5),Yp("ngModelChange",function(a){return a_(o.nuevaEspecialidad,a)||(o.nuevaEspecialidad=a),a}),E(),C(6,"button",6),ge("click",function(){return o.agregarEspecialidad()}),C(7,"i"),P(8,"\u2795"),E()()()()),i&2&&(R(2),Qp("ngModel",o.especialidad),R(),U("ngForOf",o.especialidades),R(2),Qp("ngModel",o.nuevaEspecialidad))},dependencies:[lr,QA,ZA,cr,Fm,oi,S0,Kc],styles:[".login__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.login-input[_ngcontent-%COMP%]{border:none;padding:10px;border:1px solid #2e4c6d;outline:none;border-radius:5px;background:none;margin-bottom:10px;width:100%}button[_ngcontent-%COMP%]{border:1px solid #2e4c6d;background-color:#2e4c6d;width:50px;height:35px;border:none;border-radius:4px;cursor:pointer;margin-bottom:10px}"]});let t=e;return t})();var cu=(()=>{let e=class e{constructor(r){this.firestore=r}};e.\u0275fac=function(i){return new(i||e)(Q(qa))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Fz(t,e){t&1&&(C(0,"div"),P(1,"Nombre es requerido."),E())}function Vz(t,e){t&1&&(C(0,"div"),P(1,"El nombre no debe contener n\xFAmeros."),E())}function Lz(t,e){t&1&&(C(0,"div"),P(1,"El nombre debe tener m\xEDnimo 3 caracteres"),E())}function jz(t,e){if(t&1&&(C(0,"div"),X(1,Fz,2,0,"div",5)(2,Vz,2,0,"div",5)(3,Lz,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function Bz(t,e){t&1&&(C(0,"div"),P(1,"Apellido es requerido."),E())}function Uz(t,e){t&1&&(C(0,"div"),P(1,"El apellido no debe contener n\xFAmeros."),E())}function $z(t,e){t&1&&(C(0,"div"),P(1,"El apellido debe tener m\xEDnimo 3 caracteres"),E())}function Hz(t,e){if(t&1&&(C(0,"div"),X(1,Bz,2,0,"div",5)(2,Uz,2,0,"div",5)(3,$z,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function qz(t,e){t&1&&(C(0,"div"),P(1,"Edad es requerida."),E())}function zz(t,e){t&1&&(C(0,"div"),P(1,"La edad no debe contener letras."),E())}function Gz(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function Wz(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function Kz(t,e){if(t&1&&(C(0,"div"),X(1,qz,2,0,"div",5)(2,zz,2,0,"div",5)(3,Gz,2,0,"div",5)(4,Wz,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function Qz(t,e){t&1&&(C(0,"div"),P(1,"DNI es requerido."),E())}function Yz(t,e){t&1&&(C(0,"div"),P(1,"El DNI no debe contener letras."),E())}function Zz(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function Xz(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function Jz(t,e){if(t&1&&(C(0,"div"),X(1,Qz,2,0,"div",5)(2,Yz,2,0,"div",5)(3,Zz,2,0,"div",5)(4,Xz,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function e9(t,e){t&1&&(C(0,"div"),P(1,"Correo es requerido."),E())}function t9(t,e){t&1&&(C(0,"div"),P(1,"Correo no v\xE1lido."),E())}function n9(t,e){if(t&1&&(C(0,"div"),X(1,e9,2,0,"div",5)(2,t9,2,0,"div",5),E()),t&2){let n,r,i=fe();R(),U("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),R(),U("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function r9(t,e){t&1&&(C(0,"div"),P(1,"Contrase\xF1a es requerida."),E())}function i9(t,e){if(t&1&&(C(0,"div"),X(1,r9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function o9(t,e){t&1&&(C(0,"div"),P(1,"Imagen de perfil 1 es requerida."),E())}function s9(t,e){if(t&1&&(C(0,"div"),X(1,o9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}var bv=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImage=null,this.registerForm=this.formBuilder.group({nombre:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],apellido:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],dni:["",[Ve.required,Be.onlyNumbers,Be.maxLength(8),Be.minLength(8)]],edad:["",[Ve.required,Be.onlyNumbers,Be.maxLength(1),Be.minLength(2)]],especialidad:["",Ve.required],mail:["",[Ve.required,Ve.email]],password:["",Ve.required],foto1:["",Ve.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password,o=[];try{let s=yield this.auth.guardarEspecialista(r,i,o);console.log("Especialista registrado con ID: ",s),fC.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch(s){console.error("Error al registrar el especialista:",s),fC.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r){let i=r.target.files[0];i&&this.registerForm.patchValue({foto1:i})}recibirEspecialidad(r){this.registerForm.controls.especialidad.setValue(r)}};e.\u0275fac=function(i){return new(i||e)(re(si),re(pn),re(Xt),re(cu))},e.\u0275cmp=rt({type:e,selectors:[["app-registro-especialistas"]],standalone:!0,features:[it],decls:45,vars:9,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],[3,"especilidadSeleccionada"],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage"],["type","file","id","profileImage","name","profileImage","required","",3,"change"],["type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(C(0,"body")(1,"div",0)(2,"h2"),P(3,"Registro de especialistas"),E(),C(4,"form",1),ge("ngSubmit",function(){return o.onSubmit()}),C(5,"div",2)(6,"label",3),P(7,"Nombre"),E(),ye(8,"input",4),X(9,jz,4,3,"div",5),E(),C(10,"div",2)(11,"label",6),P(12,"Apellido"),E(),ye(13,"input",7),X(14,Hz,4,3,"div",5),E(),C(15,"div",2)(16,"label",8),P(17,"Edad"),E(),ye(18,"input",9),X(19,Kz,5,4,"div",5),E(),C(20,"div",2)(21,"label",10),P(22,"DNI"),E(),ye(23,"input",11),X(24,Jz,5,4,"div",5),E(),C(25,"label"),P(26,"Especialidad"),E(),C(27,"app-especialidades",12),ge("especilidadSeleccionada",function(a){return o.recibirEspecialidad(a)}),E(),C(28,"div",2)(29,"label",13),P(30,"Correo"),E(),ye(31,"input",14),X(32,n9,3,2,"div",5),E(),C(33,"div",2)(34,"label",15),P(35,"Contrase\xF1a"),E(),ye(36,"input",16),X(37,i9,2,1,"div",5),E(),C(38,"div",2)(39,"label",17),P(40,"Imagen de Perfil"),E(),C(41,"input",18),ge("change",function(a){return o.onFileChange(a)}),E(),X(42,s9,2,1,"div",5),E(),C(43,"button",19),P(44,"Registrarse"),E()()()()),i&2){let s,a,c,u,h,m,w;R(4),U("formGroup",o.registerForm),R(5),U("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),R(5),U("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),R(5),U("ngIf",((c=o.registerForm.get("edad"))==null?null:c.invalid)&&(((c=o.registerForm.get("edad"))==null?null:c.dirty)||((c=o.registerForm.get("edad"))==null?null:c.touched))),R(5),U("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),R(8),U("ngIf",((h=o.registerForm.get("mail"))==null?null:h.invalid)&&(((h=o.registerForm.get("mail"))==null?null:h.dirty)||((h=o.registerForm.get("mail"))==null?null:h.touched))),R(5),U("ngIf",((m=o.registerForm.get("password"))==null?null:m.invalid)&&(((m=o.registerForm.get("password"))==null?null:m.dirty)||((m=o.registerForm.get("password"))==null?null:m.touched))),R(5),U("ngIf",((w=o.registerForm.get("foto1"))==null?null:w.invalid)&&(((w=o.registerForm.get("foto1"))==null?null:w.dirty)||((w=o.registerForm.get("foto1"))==null?null:w.touched))),R(),U("disabled",o.registerForm.invalid)}},dependencies:[lr,Go,cr,fa,oi,zo,Zi,fn,ai,Qi,Yi,_v],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondoRegistro2-YAPGI55K.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}input[type=file][_ngcontent-%COMP%]{width:100%;box-sizing:border-box;margin-top:5px;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();var pC=Tu(ol());function a9(t,e){t&1&&(C(0,"div"),P(1,"Nombre es requerido."),E())}function c9(t,e){t&1&&(C(0,"div"),P(1,"El nombre no debe contener n\xFAmeros."),E())}function l9(t,e){t&1&&(C(0,"div"),P(1,"El nombre debe tener m\xEDnimo 3 caracteres"),E())}function u9(t,e){if(t&1&&(C(0,"div"),X(1,a9,2,0,"div",5)(2,c9,2,0,"div",5)(3,l9,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function d9(t,e){t&1&&(C(0,"div"),P(1,"Apellido es requerido."),E())}function h9(t,e){t&1&&(C(0,"div"),P(1,"El apellido no debe contener n\xFAmeros."),E())}function f9(t,e){t&1&&(C(0,"div"),P(1,"El apellido debe tener m\xEDnimo 3 caracteres"),E())}function p9(t,e){if(t&1&&(C(0,"div"),X(1,d9,2,0,"div",5)(2,h9,2,0,"div",5)(3,f9,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function m9(t,e){t&1&&(C(0,"div"),P(1,"Edad es requerida."),E())}function g9(t,e){t&1&&(C(0,"div"),P(1,"La edad no debe contener letras."),E())}function v9(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function y9(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function w9(t,e){if(t&1&&(C(0,"div"),X(1,m9,2,0,"div",5)(2,g9,2,0,"div",5)(3,v9,2,0,"div",5)(4,y9,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function _9(t,e){t&1&&(C(0,"div"),P(1,"DNI es requerido."),E())}function b9(t,e){t&1&&(C(0,"div"),P(1,"El DNI no debe contener letras."),E())}function E9(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function I9(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function C9(t,e){if(t&1&&(C(0,"div"),X(1,_9,2,0,"div",5)(2,b9,2,0,"div",5)(3,E9,2,0,"div",5)(4,I9,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function D9(t,e){t&1&&(C(0,"div"),P(1,"Obra Social es requerida."),E())}function T9(t,e){if(t&1&&(C(0,"div"),X(1,D9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("obraSocial"))==null?null:n.hasError("required"))}}function S9(t,e){t&1&&(C(0,"div"),P(1,"Correo es requerido."),E())}function x9(t,e){t&1&&(C(0,"div"),P(1,"Correo no v\xE1lido."),E())}function A9(t,e){if(t&1&&(C(0,"div"),X(1,S9,2,0,"div",5)(2,x9,2,0,"div",5),E()),t&2){let n,r,i=fe();R(),U("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),R(),U("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function M9(t,e){t&1&&(C(0,"div"),P(1,"Contrase\xF1a es requerida."),E())}function R9(t,e){if(t&1&&(C(0,"div"),X(1,M9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function P9(t,e){t&1&&(C(0,"div"),P(1,"Imagen de perfil 1 es requerida."),E())}function N9(t,e){if(t&1&&(C(0,"div"),X(1,P9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}function k9(t,e){t&1&&(C(0,"div"),P(1,"Imagen de perfil 2 es requerida."),E())}function O9(t,e){if(t&1&&(C(0,"div"),X(1,k9,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("foto2"))==null?null:n.hasError("required"))}}var Ev=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImages=[],this.vieneDeRegistro=!1,this.registerForm=this.formBuilder.group({nombre:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],apellido:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],dni:["",[Ve.required,Be.onlyNumbers,Be.maxLength(8),Be.minLength(8)]],edad:["",[Ve.required,Be.onlyNumbers,Be.maxLength(1),Be.minLength(2)]],obraSocial:["",Ve.required],mail:["",[Ve.required,Ve.email]],password:["",Ve.required],foto1:["",Ve.required],foto2:["",Ve.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password;try{let o=yield this.auth.guardarPaciente(r,i);console.log("Paciente registrado con ID: ",o),pC.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch{pC.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r,i){let o=r.target.files[0];o&&this.registerForm.patchValue({[`foto${i}`]:o})}};e.\u0275fac=function(i){return new(i||e)(re(si),re(pn),re(Xt),re(cu))},e.\u0275cmp=rt({type:e,selectors:[["app-registro-pacientes"]],standalone:!0,features:[it],decls:52,vars:11,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],["for","obraSocial"],["type","text","id","obraSocial","name","obraSocial","formControlName","obraSocial","required",""],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage1"],["type","file","id","profileImage1","name","profileImage1","required","",3,"change"],["for","profileImage2"],["type","file","id","profileImage2","name","profileImage2","required","",3,"change"],["type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(C(0,"body")(1,"div",0)(2,"h2"),P(3,"Registro de pacientes"),E(),C(4,"form",1),ge("ngSubmit",function(){return o.onSubmit()}),C(5,"div",2)(6,"label",3),P(7,"Nombre"),E(),ye(8,"input",4),X(9,u9,4,3,"div",5),E(),C(10,"div",2)(11,"label",6),P(12,"Apellido"),E(),ye(13,"input",7),X(14,p9,4,3,"div",5),E(),C(15,"div",2)(16,"label",8),P(17,"Edad"),E(),ye(18,"input",9),X(19,w9,5,4,"div",5),E(),C(20,"div",2)(21,"label",10),P(22,"DNI"),E(),ye(23,"input",11),X(24,C9,5,4,"div",5),E(),C(25,"div",2)(26,"label",12),P(27,"Obra Social"),E(),ye(28,"input",13),X(29,T9,2,1,"div",5),E(),C(30,"div",2)(31,"label",14),P(32,"Correo"),E(),ye(33,"input",15),X(34,A9,3,2,"div",5),E(),C(35,"div",2)(36,"label",16),P(37,"Contrase\xF1a"),E(),ye(38,"input",17),X(39,R9,2,1,"div",5),E(),C(40,"div",2)(41,"label",18),P(42,"Imagen de Perfil 1"),E(),C(43,"input",19),ge("change",function(a){return o.onFileChange(a,1)}),E(),X(44,N9,2,1,"div",5),E(),C(45,"div",2)(46,"label",20),P(47,"Imagen de Perfil 2"),E(),C(48,"input",21),ge("change",function(a){return o.onFileChange(a,2)}),E(),X(49,O9,2,1,"div",5),E(),C(50,"button",22),P(51,"Registrarse"),E()()()()),i&2){let s,a,c,u,h,m,w,b,A;R(4),U("formGroup",o.registerForm),R(5),U("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),R(5),U("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),R(5),U("ngIf",((c=o.registerForm.get("edad"))==null?null:c.invalid)&&(((c=o.registerForm.get("edad"))==null?null:c.dirty)||((c=o.registerForm.get("edad"))==null?null:c.touched))),R(5),U("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),R(5),U("ngIf",((h=o.registerForm.get("obraSocial"))==null?null:h.invalid)&&(((h=o.registerForm.get("obraSocial"))==null?null:h.dirty)||((h=o.registerForm.get("obraSocial"))==null?null:h.touched))),R(5),U("ngIf",((m=o.registerForm.get("mail"))==null?null:m.invalid)&&(((m=o.registerForm.get("mail"))==null?null:m.dirty)||((m=o.registerForm.get("mail"))==null?null:m.touched))),R(5),U("ngIf",((w=o.registerForm.get("password"))==null?null:w.invalid)&&(((w=o.registerForm.get("password"))==null?null:w.dirty)||((w=o.registerForm.get("password"))==null?null:w.touched))),R(5),U("ngIf",((b=o.registerForm.get("foto1"))==null?null:b.invalid)&&(((b=o.registerForm.get("foto1"))==null?null:b.dirty)||((b=o.registerForm.get("foto1"))==null?null:b.touched))),R(5),U("ngIf",((A=o.registerForm.get("foto2"))==null?null:A.invalid)&&(((A=o.registerForm.get("foto2"))==null?null:A.dirty)||((A=o.registerForm.get("foto2"))==null?null:A.touched))),R(),U("disabled",o.registerForm.invalid)}},dependencies:[lr,Go,cr,fa,oi,zo,Zi,fn,ai,Qi,Yi],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondoRegistro-RX6QQ6QR.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();function F9(t,e){if(t&1&&(C(0,"li")(1,"div")(2,"strong",3),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E()()()),t&2){let n=e.$implicit;R(3),ti("",n.nombre," ",n.apellido,""),R(2),Fe("Edad: ",n.edad,""),R(2),Fe("DNI: ",n.DNI,""),R(2),Fe("Mail: ",n.mail,"")}}function V9(t,e){if(t&1){let n=jn();C(0,"li")(1,"div",4)(2,"strong",3),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E()(),C(10,"div",5)(11,"p"),P(12),E(),C(13,"button",6),ge("click",function(){let i=dn(n).$implicit,o=fe();return hn(o.toggleHabilitado(i.id,i.habilitado))}),P(14),E()()()}if(t&2){let n=e.$implicit;R(3),ti("",n.nombre," ",n.apellido,""),R(2),Fe("Edad: ",n.edad,""),R(2),Fe("DNI: ",n.DNI,""),R(2),Fe("Mail: ",n.mail,""),R(3),Fe("Habilitado: ",n.habilitado?"S\xED":"No",""),R(),U("disabled",n.habilitado),R(),Fe(" ",n.habilitado?"Habilitado":"Habilitar"," ")}}function L9(t,e){if(t&1&&(C(0,"li")(1,"div")(2,"strong",3),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E()()()),t&2){let n=e.$implicit;R(3),ti("",n.nombre," ",n.apellido,""),R(2),Fe("Edad: ",n.edad,""),R(2),Fe("DNI: ",n.DNI,""),R(2),Fe("Mail: ",n.mail,"")}}var Iv=(()=>{let e=class e{constructor(r){this.auth=r,this.especialistas=[],this.pacientes=[],this.administradores=[]}ngOnInit(){this.loadEspecialistas(),this.loadPacientes(),this.loadAdministradores()}loadEspecialistas(){return k(this,null,function*(){try{this.especialistas=yield this.auth.getAllEspecialistas()}catch(r){console.error("Error al obtener los especialistas:",r)}})}loadPacientes(){return k(this,null,function*(){try{this.pacientes=yield this.auth.getAllPacientes()}catch(r){console.error("Error al obtener los pacientes:",r)}})}loadAdministradores(){return k(this,null,function*(){try{this.administradores=yield this.auth.getAllAdmin()}catch(r){console.error("Error al obtener los administradores:",r)}})}toggleHabilitado(r,i){return k(this,null,function*(){let o=!i;try{yield this.auth.toggleHabilitadoEspecialista(r,o);let s=this.especialistas.findIndex(a=>a.id===r);s!==-1&&(this.especialistas[s].habilitado=o)}catch(s){console.error("Error al cambiar la habilitaci\xF3n del especialista:",s)}})}};e.\u0275fac=function(i){return new(i||e)(re(Xt))},e.\u0275cmp=rt({type:e,selectors:[["app-habilitar-especialistas"]],standalone:!0,features:[it],decls:16,vars:3,consts:[[1,"container"],[1,"especialistas-list"],[4,"ngFor","ngForOf"],[1,"nombre-apellido"],[1,"especialista-details"],[1,"especialista-button"],[3,"click","disabled"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),P(4,"Listado de administradores"),E(),C(5,"ul"),X(6,F9,10,5,"li",2),E()(),C(7,"h2"),P(8,"Listado de especialistas"),E(),C(9,"ul"),X(10,V9,15,8,"li",2),E(),C(11,"div")(12,"h2"),P(13,"Listado de pacientes"),E(),C(14,"ul"),X(15,L9,10,5,"li",2),E()()()()),i&2&&(R(6),U("ngForOf",o.administradores),R(4),U("ngForOf",o.especialistas),R(5),U("ngForOf",o.pacientes))},dependencies:[Kc],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-family:Arial,sans-serif}.especialistas-list[_ngcontent-%COMP%]{width:80%;max-width:700px;margin:20px;padding:10px;background-color:#d1a054;border-radius:5px;box-shadow:0 4px 8px #0000001a;color:#2e4c6d}.especialistas-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.especialistas-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding:15px;background-color:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a;font-size:2px}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;border:none;border-radius:2px;cursor:pointer;background-color:#d2691e;color:#2e4c6d;transition:background-color .3s ease;font-family:Roboto,Arial,sans-serif;margin-top:10px}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2e4c6d;color:#d2691e}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:14px;font-family:Arial,sans-serif;color:#2e4c6d}.especialistas-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:15px;font-weight:700;font-family:Tahoma,Geneva,Verdana,sans-serif}.nombre-apellido[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#d2691e}"]});let t=e;return t})();var mC=Tu(ol());function j9(t,e){t&1&&(C(0,"div"),P(1,"Nombre es requerido."),E())}function B9(t,e){t&1&&(C(0,"div"),P(1,"El nombre no debe contener n\xFAmeros."),E())}function U9(t,e){t&1&&(C(0,"div"),P(1,"El nombre debe tener m\xEDnimo 3 caracteres"),E())}function $9(t,e){if(t&1&&(C(0,"div"),X(1,j9,2,0,"div",5)(2,B9,2,0,"div",5)(3,U9,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("nombre"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("nombre"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("nombre"))==null?null:i.hasError("minLength"))}}function H9(t,e){t&1&&(C(0,"div"),P(1,"Apellido es requerido."),E())}function q9(t,e){t&1&&(C(0,"div"),P(1,"El apellido no debe contener n\xFAmeros."),E())}function z9(t,e){t&1&&(C(0,"div"),P(1,"El apellido debe tener m\xEDnimo 3 caracteres"),E())}function G9(t,e){if(t&1&&(C(0,"div"),X(1,H9,2,0,"div",5)(2,q9,2,0,"div",5)(3,z9,2,0,"div",5),E()),t&2){let n,r,i,o=fe();R(),U("ngIf",(n=o.registerForm.get("apellido"))==null?null:n.hasError("required")),R(),U("ngIf",(r=o.registerForm.get("apellido"))==null?null:r.hasError("onlyLetters")),R(),U("ngIf",(i=o.registerForm.get("apellido"))==null?null:i.hasError("minLength"))}}function W9(t,e){t&1&&(C(0,"div"),P(1,"Edad es requerida."),E())}function K9(t,e){t&1&&(C(0,"div"),P(1,"La edad no debe contener letras."),E())}function Q9(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function Y9(t,e){t&1&&(C(0,"div"),P(1,"Debe tener una edad entre 1-99"),E())}function Z9(t,e){if(t&1&&(C(0,"div"),X(1,W9,2,0,"div",5)(2,K9,2,0,"div",5)(3,Q9,2,0,"div",5)(4,Y9,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("edad"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("edad"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("edad"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("edad"))==null?null:o.hasError("maxLength"))}}function X9(t,e){t&1&&(C(0,"div"),P(1,"DNI es requerido."),E())}function J9(t,e){t&1&&(C(0,"div"),P(1,"El DNI no debe contener letras."),E())}function e6(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function t6(t,e){t&1&&(C(0,"div"),P(1,"Deben ser 8 d\xEDgitos"),E())}function n6(t,e){if(t&1&&(C(0,"div"),X(1,X9,2,0,"div",5)(2,J9,2,0,"div",5)(3,e6,2,0,"div",5)(4,t6,2,0,"div",5),E()),t&2){let n,r,i,o,s=fe();R(),U("ngIf",(n=s.registerForm.get("dni"))==null?null:n.hasError("required")),R(),U("ngIf",(r=s.registerForm.get("dni"))==null?null:r.hasError("onlyNumbers")),R(),U("ngIf",(i=s.registerForm.get("dni"))==null?null:i.hasError("minLength")),R(),U("ngIf",(o=s.registerForm.get("dni"))==null?null:o.hasError("maxLength"))}}function r6(t,e){t&1&&(C(0,"div"),P(1,"Correo es requerido."),E())}function i6(t,e){t&1&&(C(0,"div"),P(1,"Correo no v\xE1lido."),E())}function o6(t,e){if(t&1&&(C(0,"div"),X(1,r6,2,0,"div",5)(2,i6,2,0,"div",5),E()),t&2){let n,r,i=fe();R(),U("ngIf",(n=i.registerForm.get("mail"))==null?null:n.hasError("required")),R(),U("ngIf",(r=i.registerForm.get("mail"))==null?null:r.hasError("email"))}}function s6(t,e){t&1&&(C(0,"div"),P(1,"Contrase\xF1a es requerida."),E())}function a6(t,e){if(t&1&&(C(0,"div"),X(1,s6,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("password"))==null?null:n.hasError("required"))}}function c6(t,e){t&1&&(C(0,"div"),P(1,"Imagen de perfil 1 es requerida."),E())}function l6(t,e){if(t&1&&(C(0,"div"),X(1,c6,2,0,"div",5),E()),t&2){let n,r=fe();R(),U("ngIf",(n=r.registerForm.get("foto1"))==null?null:n.hasError("required"))}}var Cv=(()=>{let e=class e{constructor(r,i,o,s){this.formBuilder=r,this.router=i,this.auth=o,this.data=s,this.profileImages=[],this.vieneDeRegistro=!1,this.registerForm=this.formBuilder.group({nombre:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],apellido:["",[Ve.required,Be.onlyLetters,Be.minLength(3)]],dni:["",[Ve.required,Be.onlyNumbers,Be.maxLength(8),Be.minLength(8)]],edad:["",[Ve.required,Be.onlyNumbers,Be.maxLength(1),Be.minLength(2)]],mail:["",[Ve.required,Ve.email]],password:["",Ve.required],foto1:["",Ve.required]})}onSubmit(){return k(this,null,function*(){if(this.registerForm&&this.registerForm.valid){let r=this.registerForm.value,i=this.registerForm.value.password;try{let o=yield this.auth.guardarAdmin(r,i);console.log("Admin registrado con ID: ",o),mC.default.fire({position:"top-right",icon:"success",title:"Te has registrado correctamente",showConfirmButton:!1,timer:1500})}catch(o){console.error("Error al registrar admin:",o),mC.default.fire({position:"top-left",icon:"error",title:"Error al registrarte",showConfirmButton:!1,timer:1500})}}else this.markFormGroupTouched(this.registerForm)})}markFormGroupTouched(r){Object.values(r.controls).forEach(i=>{i.markAsTouched()})}onFileChange(r,i){let o=r.target.files[0];o&&this.registerForm.patchValue({[`foto${i}`]:o})}};e.\u0275fac=function(i){return new(i||e)(re(si),re(pn),re(Xt),re(cu))},e.\u0275cmp=rt({type:e,selectors:[["app-registro-admins"]],standalone:!0,features:[it],decls:42,vars:9,consts:[[1,"register-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","formControlName","nombre","required",""],[4,"ngIf"],["for","apellido"],["type","text","id","apellido","name","apellido","formControlName","apellido","required",""],["for","edad"],["type","number","id","edad","name","edad","formControlName","edad","required",""],["for","dni"],["type","text","id","dni","name","dni","formControlName","dni","required",""],["for","mail"],["type","email","id","mail","name","mail","formControlName","mail","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["for","profileImage1"],["type","file","id","profileImage1","name","profileImage1","required","",3,"change"],["type","submit",3,"disabled"]],template:function(i,o){if(i&1&&(C(0,"body")(1,"div",0)(2,"h2"),P(3,"Registro de admin"),E(),C(4,"form",1),ge("ngSubmit",function(){return o.onSubmit()}),C(5,"div",2)(6,"label",3),P(7,"Nombre"),E(),ye(8,"input",4),X(9,$9,4,3,"div",5),E(),C(10,"div",2)(11,"label",6),P(12,"Apellido"),E(),ye(13,"input",7),X(14,G9,4,3,"div",5),E(),C(15,"div",2)(16,"label",8),P(17,"Edad"),E(),ye(18,"input",9),X(19,Z9,5,4,"div",5),E(),C(20,"div",2)(21,"label",10),P(22,"DNI"),E(),ye(23,"input",11),X(24,n6,5,4,"div",5),E(),C(25,"div",2)(26,"label",12),P(27,"Correo"),E(),ye(28,"input",13),X(29,o6,3,2,"div",5),E(),C(30,"div",2)(31,"label",14),P(32,"Contrase\xF1a"),E(),ye(33,"input",15),X(34,a6,2,1,"div",5),E(),C(35,"div",2)(36,"label",16),P(37,"Imagen de Perfil 1"),E(),C(38,"input",17),ge("change",function(a){return o.onFileChange(a,1)}),E(),X(39,l6,2,1,"div",5),E(),C(40,"button",18),P(41,"Registrarse"),E()()()()),i&2){let s,a,c,u,h,m,w;R(4),U("formGroup",o.registerForm),R(5),U("ngIf",((s=o.registerForm.get("nombre"))==null?null:s.invalid)&&(((s=o.registerForm.get("nombre"))==null?null:s.dirty)||((s=o.registerForm.get("nombre"))==null?null:s.touched))),R(5),U("ngIf",((a=o.registerForm.get("apellido"))==null?null:a.invalid)&&(((a=o.registerForm.get("apellido"))==null?null:a.dirty)||((a=o.registerForm.get("apellido"))==null?null:a.touched))),R(5),U("ngIf",((c=o.registerForm.get("edad"))==null?null:c.invalid)&&(((c=o.registerForm.get("edad"))==null?null:c.dirty)||((c=o.registerForm.get("edad"))==null?null:c.touched))),R(5),U("ngIf",((u=o.registerForm.get("dni"))==null?null:u.invalid)&&(((u=o.registerForm.get("dni"))==null?null:u.dirty)||((u=o.registerForm.get("dni"))==null?null:u.touched))),R(5),U("ngIf",((h=o.registerForm.get("mail"))==null?null:h.invalid)&&(((h=o.registerForm.get("mail"))==null?null:h.dirty)||((h=o.registerForm.get("mail"))==null?null:h.touched))),R(5),U("ngIf",((m=o.registerForm.get("password"))==null?null:m.invalid)&&(((m=o.registerForm.get("password"))==null?null:m.dirty)||((m=o.registerForm.get("password"))==null?null:m.touched))),R(5),U("ngIf",((w=o.registerForm.get("foto1"))==null?null:w.invalid)&&(((w=o.registerForm.get("foto1"))==null?null:w.dirty)||((w=o.registerForm.get("foto1"))==null?null:w.touched))),R(),U("disabled",o.registerForm.invalid)}},dependencies:[lr,Go,cr,fa,oi,zo,Zi,fn,ai,Qi,Yi],styles:['body[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Dune_Rise;display:flex;background-image:url("./media/fondo-admin-NCOT7MAL.jpg");background-size:cover;background-position:center;height:90vh}.register-container[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;border:1px solid #2e4c6D;border-radius:10px;background-color:#d1a054}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#2e4c6d}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#2e4c6d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:3px;box-sizing:border-box;color:#2e4c6d}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#d2691e;color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#2e4c6d;cursor:not-allowed;color:#d2691e}']});let t=e;return t})();function u6(t,e){t&1&&(Qu(0),ye(1,"app-registro-admins"),Yu())}function d6(t,e){t&1&&(Qu(0),ye(1,"app-registro-pacientes"),Yu())}function h6(t,e){t&1&&(Qu(0),ye(1,"app-registro-especialistas"),Yu())}var HN=(()=>{let e=class e{constructor(){this.registroSeleccionado="admin"}showRegistro(r){this.registroSeleccionado=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-seccion-usuarios"]],standalone:!0,features:[it],decls:13,vars:3,consts:[[1,"container"],[1,"panel"],[3,"click"],[4,"ngIf"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"div",1),ye(2,"app-habilitar-especialistas"),E(),C(3,"div",1)(4,"button",2),ge("click",function(){return o.showRegistro("paciente")}),P(5,"Registrar Paciente"),E(),C(6,"button",2),ge("click",function(){return o.showRegistro("admin")}),P(7,"Registrar Admin"),E(),C(8,"button",2),ge("click",function(){return o.showRegistro("especialista")}),P(9,"Registrar Especialista"),E(),X(10,u6,2,0,"ng-container",3)(11,d6,2,0,"ng-container",3)(12,h6,2,0,"ng-container",3),E()()),i&2&&(R(10),U("ngIf",o.registroSeleccionado==="admin"),R(),U("ngIf",o.registroSeleccionado==="paciente"),R(),U("ngIf",o.registroSeleccionado==="especialista"))},dependencies:[Iv,Cv,bv,Ev,fn],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-image:url("./media/fondo-usuarios-2G6PD2YQ.jpg");background-size:cover;background-position:center;overflow:hidden}.panel[_ngcontent-%COMP%]{width:36%;padding:10px}button[_ngcontent-%COMP%]{border:1px solid #2e4c6d;background-color:#2e4c6d;color:#d2691e;border-radius:8px;padding:10px 20px;margin:10px;font-size:16px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#1f3548;transform:scale(1.05)}button[_ngcontent-%COMP%]:active{background-color:#162738;transform:scale(.95)}']});let t=e;return t})();var Dv=Tu(ol());function f6(t,e){if(t&1&&(C(0,"div"),ye(1,"img",4),C(2,"p"),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E(),C(10,"p"),P(11),E()()),t&2){let n=fe().ngIf;R(),U("src",n==null||n.data==null?null:n.data.foto1,Fo),R(2),Fe("Nombre: ",n==null||n.data==null?null:n.data.nombre,""),R(2),Fe("Apellido: ",n==null||n.data==null?null:n.data.apellido,""),R(2),Fe("DNI: ",n==null||n.data==null?null:n.data.DNI,""),R(2),Fe("Correo: ",n==null||n.data==null?null:n.data.mail,""),R(2),Fe("Edad: ",n==null||n.data==null?null:n.data.edad,"")}}function p6(t,e){if(t&1){let n=jn();C(0,"div"),ye(1,"img",4),C(2,"p"),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E(),C(10,"p"),P(11),E(),C(12,"p"),P(13),E(),C(14,"div")(15,"label")(16,"input",5),ge("change",function(i){dn(n);let o=fe(2);return hn(o.toggleHorario("ma\xF1ana",i))}),E(),P(17," Ma\xF1ana "),E(),C(18,"label")(19,"input",5),ge("change",function(i){dn(n);let o=fe(2);return hn(o.toggleHorario("tarde",i))}),E(),P(20," Tarde "),E(),C(21,"button",6),ge("click",function(){dn(n);let i=fe(2);return hn(i.guardarHorarios())}),P(22,"Guardar Horarios"),E()()()}if(t&2){let n=fe().ngIf;R(),U("src",n==null||n.data==null?null:n.data.foto1,Fo),R(2),Fe("Nombre: ",n==null||n.data==null?null:n.data.nombre,""),R(2),Fe("Apellido: ",n==null||n.data==null?null:n.data.apellido,""),R(2),Fe("DNI: ",n==null||n.data==null?null:n.data.DNI,""),R(2),Fe("Correo: ",n==null||n.data==null?null:n.data.mail,""),R(2),Fe("Edad: ",n==null||n.data==null?null:n.data.edad,""),R(2),Fe("Especialidad: ",n==null||n.data==null?null:n.data.especialidad,"")}}function m6(t,e){if(t&1&&(C(0,"div"),ye(1,"img",4),C(2,"p"),P(3),E(),C(4,"p"),P(5),E(),C(6,"p"),P(7),E(),C(8,"p"),P(9),E(),C(10,"p"),P(11),E(),C(12,"p"),P(13),E()()),t&2){let n=fe().ngIf;R(),U("src",n==null||n.data==null?null:n.data.foto1,Fo),R(2),Fe("Nombre: ",n==null||n.data==null?null:n.data.nombre,""),R(2),Fe("Apellido: ",n==null||n.data==null?null:n.data.apellido,""),R(2),Fe("DNI: ",n==null||n.data==null?null:n.data.DNI,""),R(2),Fe("Correo: ",n==null||n.data==null?null:n.data.mail,""),R(2),Fe("Edad: ",n==null||n.data==null?null:n.data.edad,""),R(2),Fe("Obra social: ",n==null||n.data==null?null:n.data.obraSocial,"")}}function g6(t,e){if(t&1&&(C(0,"div",2),X(1,f6,12,6,"div",3)(2,p6,23,7,"div",3)(3,m6,14,7,"div",3),E()),t&2){let n=e.ngIf;R(),U("ngIf",(n==null?null:n.role)==="admin"),R(),U("ngIf",(n==null?null:n.role)==="especialista"),R(),U("ngIf",(n==null?null:n.role)==="paciente")}}var qN=(()=>{let e=class e{constructor(r,i,o){this.authService=r,this.afAuth=i,this.afs=o,this.horarioMa\u00F1ana=!1,this.horarioTarde=!1,this.user$=le(null)}ngOnInit(){this.user$=this.authService.getCurrentUserData()}toggleHorario(r,i){let s=i.target.checked;r==="ma\xF1ana"?this.horarioMa\u00F1ana=s:r==="tarde"&&(this.horarioTarde=s)}guardarHorarios(){return k(this,null,function*(){let r=[];this.horarioMa\u00F1ana&&r.push("Ma\xF1ana"),this.horarioTarde&&r.push("Tarde");try{let i=yield this.afAuth.currentUser;i?(yield this.afs.collection("especialistas").doc(i.uid).update({horarios:r}),Dv.default.fire({position:"top-right",icon:"success",title:"Horarios guardados correctamente",showConfirmButton:!1,timer:1500})):Dv.default.fire({position:"top-left",icon:"error",title:"Error al guardar horarios, no se encontr\xF3 el usuario",showConfirmButton:!1,timer:1500})}catch(i){console.error("Error al guardar los horarios:",i),Dv.default.fire({position:"top-left",icon:"error",title:"Error al guardar los horarios",showConfirmButton:!1,timer:1500})}})}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(va),re(qa))},e.\u0275cmp=rt({type:e,selectors:[["app-mi-perfil"]],standalone:!0,features:[it],decls:4,vars:3,consts:[[1,"app-container"],["class","user-profile",4,"ngIf"],[1,"user-profile"],[4,"ngIf"],["alt","Usuario",3,"src"],["type","checkbox",3,"change"],[3,"click"]],template:function(i,o){i&1&&(C(0,"body")(1,"div",0),X(2,g6,4,3,"div",1),zi(3,"async"),E()()),i&2&&(R(2),U("ngIf",Gi(3,1,o.user$)))},dependencies:[fn,Bo,rm],styles:['body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:90vh;margin:0;background-color:#d1a054;background-image:url("./media/fondo-perfil-WDAVYXRX.jpg");background-size:cover;background-position:center}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100%}.navbar[_ngcontent-%COMP%]{width:100%;background-color:#ffffffe6;padding:10px 20px;box-shadow:0 2px 4px #0000001a;position:fixed;top:0;z-index:10}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.navbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;color:#2e4c6d;margin-left:10px}.navbar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;color:#555;transition:color .3s}.navbar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#000}.user-profile[_ngcontent-%COMP%]{background-color:#d1a054;padding:30px;border-radius:15px;box-shadow:0 8px 16px #0003;text-align:center;max-width:450px;width:90%;margin-top:100px;border:2px solid #2e4c6d}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;border-radius:50%;margin-bottom:20px;border:3px solid #2e4c6d}.user-profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:18px;color:#2e4c6d}.user-profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.footer[_ngcontent-%COMP%]{margin-top:auto;padding:20px;text-align:center;color:#fff;background-color:#00000080;width:100%}']});let t=e;return t})();function et(t){let e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function yn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function zN(t,e){let n=et(t);return isNaN(e)?yn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function GN(t){return et(t).getDay()===6}function WN(t){return et(t).getDay()===0}function KN(t,e){let n=+et(t);return yn(t,n+e)}var v6=Math.pow(10,8)*24*60*60*1e3,Wre=-v6,Tv=6048e5,QN=864e5,YN=6e4;var y6=3600;var ZN=y6*24,Kre=ZN*7,w6=ZN*365.2425,_6=w6/12,Qre=_6*3;var b6={};function ys(){return b6}function uo(t,e){let n=ys(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=et(t),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Wa(t){return uo(t,{weekStartsOn:1})}function Sv(t){let e=et(t),n=e.getFullYear(),r=yn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);let i=Wa(r),o=yn(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);let s=Wa(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Eh(t){let e=et(t);return e.setHours(0,0,0,0),e}function gC(t){let e=et(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function XN(t,e){let n=Eh(t),r=Eh(e),i=+n-gC(n),o=+r-gC(r);return Math.round((i-o)/QN)}function JN(t){let e=Sv(t),n=yn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Wa(n)}function ek(t,e){return KN(t,e*YN)}function tk(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nk(t){if(!tk(t)&&typeof t!="number")return!1;let e=et(t);return!isNaN(Number(e))}function rk(t){let e=et(t),n=yn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}var E6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ik=(t,e,n)=>{let r,i=E6[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ws(t){return(e={})=>{let n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var I6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ok={date:ws({formats:I6,defaultWidth:"full"}),time:ws({formats:C6,defaultWidth:"full"}),dateTime:ws({formats:D6,defaultWidth:"full"})};var T6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sk=(t,e,n,r)=>T6[t];function pr(t){return(e,n)=>{let r=n?.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){let s=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{let s=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[s]}let o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}var S6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},x6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},A6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N6=(t,e)=>{let n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ak={ordinalNumber:N6,era:pr({values:S6,defaultWidth:"wide"}),quarter:pr({values:x6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pr({values:A6,defaultWidth:"wide"}),day:pr({values:M6,defaultWidth:"wide"}),dayPeriod:pr({values:R6,defaultWidth:"wide",formattingValues:P6,defaultFormattingWidth:"wide"})};function mr(t){return(e,n={})=>{let r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?O6(a,m=>m.test(s)):k6(a,m=>m.test(s)),u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;let h=e.slice(s.length);return{value:u,rest:h}}}function k6(t,e){for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function O6(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function xv(t){return(e,n={})=>{let r=e.match(t.matchPattern);if(!r)return null;let i=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var F6=/^(\d+)(th|st|nd|rd)?/i,V6=/\d+/i,L6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j6={any:[/^b/i,/^(a|c)/i]},B6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U6={any:[/1/i,/2/i,/3/i,/4/i]},$6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},H6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},G6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ck={ordinalNumber:xv({matchPattern:F6,parsePattern:V6,valueCallback:t=>parseInt(t,10)}),era:mr({matchPatterns:L6,defaultMatchWidth:"wide",parsePatterns:j6,defaultParseWidth:"any"}),quarter:mr({matchPatterns:B6,defaultMatchWidth:"wide",parsePatterns:U6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mr({matchPatterns:$6,defaultMatchWidth:"wide",parsePatterns:H6,defaultParseWidth:"any"}),day:mr({matchPatterns:q6,defaultMatchWidth:"wide",parsePatterns:z6,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:G6,defaultMatchWidth:"any",parsePatterns:W6,defaultParseWidth:"any"})};var vC={code:"en-US",formatDistance:ik,formatLong:ok,formatRelative:sk,localize:ak,match:ck,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lk(t){let e=et(t);return XN(e,rk(e))+1}function uk(t){let e=et(t),n=+Wa(e)-+JN(e);return Math.round(n/Tv)+1}function Av(t,e){let n=et(t),r=n.getFullYear(),i=ys(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=yn(t,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=uo(s,e),c=yn(t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let u=uo(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function dk(t,e){let n=ys(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Av(t,e),o=yn(t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),uo(o,e)}function hk(t,e){let n=et(t),r=+uo(n,e)-+dk(n,e);return Math.round(r/Tv)+1}function Ze(t,e){let n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}var ho={y(t,e){let n=t.getFullYear(),r=n>0?n:1-n;return Ze(e==="yy"?r%100:r,e.length)},M(t,e){let n=t.getMonth();return e==="M"?String(n+1):Ze(n+1,2)},d(t,e){return Ze(t.getDate(),e.length)},a(t,e){let n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ze(t.getHours()%12||12,e.length)},H(t,e){return Ze(t.getHours(),e.length)},m(t,e){return Ze(t.getMinutes(),e.length)},s(t,e){return Ze(t.getSeconds(),e.length)},S(t,e){let n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ze(i,e.length)}};var lu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yC={G:function(t,e,n){let r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){let r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ho.y(t,e)},Y:function(t,e,n,r){let i=Av(t,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return Ze(s,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ze(o,e.length)},R:function(t,e){let n=Sv(t);return Ze(n,e.length)},u:function(t,e){let n=t.getFullYear();return Ze(n,e.length)},Q:function(t,e,n){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ze(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ze(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){let r=t.getMonth();switch(e){case"M":case"MM":return ho.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){let r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ze(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){let i=hk(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ze(i,e.length)},I:function(t,e,n){let r=uk(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ze(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ho.d(t,e)},D:function(t,e,n){let r=lk(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ze(r,e.length)},E:function(t,e,n){let r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){let i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ze(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){let i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ze(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){let r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ze(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){let i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){let r=t.getHours(),i;switch(r===12?i=lu.noon:r===0?i=lu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){let r=t.getHours(),i;switch(r>=17?i=lu.evening:r>=12?i=lu.afternoon:r>=4?i=lu.morning:i=lu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ho.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ho.H(t,e)},K:function(t,e,n){let r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ho.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ho.s(t,e)},S:function(t,e){return ho.S(t,e)},X:function(t,e,n){let r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return pk(r);case"XXXX":case"XX":return Ka(r);case"XXXXX":case"XXX":default:return Ka(r,":")}},x:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"x":return pk(r);case"xxxx":case"xx":return Ka(r);case"xxxxx":case"xxx":default:return Ka(r,":")}},O:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fk(r,":");case"OOOO":default:return"GMT"+Ka(r,":")}},z:function(t,e,n){let r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fk(r,":");case"zzzz":default:return"GMT"+Ka(r,":")}},t:function(t,e,n){let r=Math.trunc(t.getTime()/1e3);return Ze(r,e.length)},T:function(t,e,n){let r=t.getTime();return Ze(r,e.length)}};function fk(t,e=""){let n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+Ze(o,2)}function pk(t,e){return t%60===0?(t>0?"-":"+")+Ze(Math.abs(t)/60,2):Ka(t,e)}function Ka(t,e=""){let n=t>0?"-":"+",r=Math.abs(t),i=Ze(Math.trunc(r/60),2),o=Ze(r%60,2);return n+i+e+o}var mk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},gk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},K6=(t,e)=>{let n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return mk(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",mk(r,e)).replace("{{time}}",gk(i,e))},vk={p:gk,P:K6};var Q6=/^D+$/,Y6=/^Y+$/,Z6=["D","DD","YY","YYYY"];function yk(t){return Q6.test(t)}function wk(t){return Y6.test(t)}function _k(t,e,n){let r=X6(t,e,n);if(console.warn(r),Z6.includes(t))throw new RangeError(r)}function X6(t,e,n){let r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var J6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tG=/^'([^]*?)'?$/,nG=/''/g,rG=/[a-zA-Z]/;function bk(t,e,n){let r=ys(),i=n?.locale??r.locale??vC,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=et(t);if(!nk(a))throw new RangeError("Invalid time value");let c=e.match(eG).map(h=>{let m=h[0];if(m==="p"||m==="P"){let w=vk[m];return w(h,i.formatLong)}return h}).join("").match(J6).map(h=>{if(h==="''")return{isToken:!1,value:"'"};let m=h[0];if(m==="'")return{isToken:!1,value:iG(h)};if(yC[m])return{isToken:!0,value:h};if(m.match(rG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let u={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(h=>{if(!h.isToken)return h.value;let m=h.value;(!n?.useAdditionalWeekYearTokens&&wk(m)||!n?.useAdditionalDayOfYearTokens&&yk(m))&&_k(m,e,String(t));let w=yC[m[0]];return w(a,m,i.localize,u)}).join("")}function iG(t){let e=t.match(tG);return e?e[1].replace(nG,"'"):t}var oG={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xEDa",other:"{{count}} d\xEDas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xF1o",other:"alrededor de {{count}} a\xF1os"},xYears:{one:"1 a\xF1o",other:"{{count}} a\xF1os"},overXYears:{one:"m\xE1s de 1 a\xF1o",other:"m\xE1s de {{count}} a\xF1os"},almostXYears:{one:"casi 1 a\xF1o",other:"casi {{count}} a\xF1os"}},Ek=(t,e,n)=>{let r,i=oG[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r};var sG={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},aG={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},cG={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ik={date:ws({formats:sG,defaultWidth:"full"}),time:ws({formats:aG,defaultWidth:"full"}),dateTime:ws({formats:cG,defaultWidth:"full"})};var lG={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xF1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},uG={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xF1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Ck=(t,e,n,r)=>e.getHours()!==1?uG[t]:lG[t];var dG={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xE9s de cristo"]},hG={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xBA trimestre","2\xBA trimestre","3\xBA trimestre","4\xBA trimestre"]},fG={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},pG={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xE1"],abbreviated:["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],wide:["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"]},mG={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},gG={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},vG=(t,e)=>Number(t)+"\xBA",Dk={ordinalNumber:vG,era:pr({values:dG,defaultWidth:"wide"}),quarter:pr({values:hG,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:pr({values:fG,defaultWidth:"wide"}),day:pr({values:pG,defaultWidth:"wide"}),dayPeriod:pr({values:mG,defaultWidth:"wide",formattingValues:gG,defaultFormattingWidth:"wide"})};var yG=/^(\d+)()?/i,wG=/\d+/i,_G={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},bG={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},EG={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},IG={any:[/1/i,/2/i,/3/i,/4/i]},CG={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},DG={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},TG={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},SG={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},xG={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},AG={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Tk={ordinalNumber:xv({matchPattern:yG,parsePattern:wG,valueCallback:function(t){return parseInt(t,10)}}),era:mr({matchPatterns:_G,defaultMatchWidth:"wide",parsePatterns:bG,defaultParseWidth:"any"}),quarter:mr({matchPatterns:EG,defaultMatchWidth:"wide",parsePatterns:IG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mr({matchPatterns:CG,defaultMatchWidth:"wide",parsePatterns:DG,defaultParseWidth:"any"}),day:mr({matchPatterns:TG,defaultMatchWidth:"wide",parsePatterns:SG,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:xG,defaultMatchWidth:"any",parsePatterns:AG,defaultParseWidth:"any"})};var Sk={code:"es",formatDistance:Ek,formatLong:Ik,formatRelative:Ck,localize:Dk,match:Tk,options:{weekStartsOn:1,firstWeekContainsDate:1}};function MG(t,e){if(t&1){let n=jn();C(0,"div",10)(1,"button",11),ge("click",function(){let i=dn(n).$implicit,o=fe(2);return hn(o.selectSpecialist(i))}),ye(2,"img",12),C(3,"p"),P(4),E()()()}if(t&2){let n=e.$implicit;R(2),Kp("alt","",n.nombre," ",n.apellido,""),U("src",n.foto1,Fo),R(2),ti("",n.nombre," ",n.apellido,"")}}function RG(t,e){if(t&1&&(C(0,"div",8),X(1,MG,5,6,"div",9),E()),t&2){let n=fe();R(),U("ngForOf",n.specialists)}}function PG(t,e){if(t&1){let n=jn();C(0,"div",17)(1,"button",11),ge("click",function(){let i=dn(n).$implicit,o=fe(2);return hn(o.selectSpecialty(i))}),ye(2,"img",18),C(3,"span"),P(4),E()()()}if(t&2){let n=e.$implicit,r=fe(2);R(2),s_("alt",n),U("src",r.getEspecialidadImage(n),Fo),R(2),Lo(n)}}function NG(t,e){if(t&1){let n=jn();C(0,"div",13)(1,"div",14),ye(2,"img",12),C(3,"p"),P(4),E(),C(5,"button",11),ge("click",function(){dn(n);let i=fe();return hn(i.deselectSpecialist())}),P(6,"Cambiar especialista"),E(),C(7,"p"),P(8,"Especialidades:"),E()(),C(9,"div",15),X(10,PG,5,3,"div",16),E()()}if(t&2){let n=fe();R(2),Kp("alt","",n.selectedSpecialist.nombre," ",n.selectedSpecialist.apellido,""),U("src",n.selectedSpecialist.foto1,Fo),R(2),ti("",n.selectedSpecialist.nombre," ",n.selectedSpecialist.apellido,""),R(6),U("ngForOf",n.selectedSpecialist.especialidad)}}function kG(t,e){if(t&1){let n=jn();C(0,"div",21)(1,"button",11),ge("click",function(){let i=dn(n).$implicit,o=fe(2);return hn(o.selectDay(i))}),P(2),E()()}if(t&2){let n=e.$implicit,r=fe(2);R(2),Fe(" ",r.formatDate(n,"EEEE, d MMMM yyyy")," ")}}function OG(t,e){if(t&1&&(C(0,"div",19)(1,"p"),P(2),E(),X(3,kG,3,1,"div",20),E()),t&2){let n=fe();R(2),Fe("D\xEDas disponibles para ",n.selectedSpecialty,":"),R(),U("ngForOf",n.availableDays)}}function FG(t,e){if(t&1){let n=jn();C(0,"div",24)(1,"button",11),ge("click",function(){let i=dn(n).$implicit,o=fe(2);return hn(o.selectHorario(i))}),P(2),E()()}if(t&2){let n=e.$implicit,r=fe(2);R(2),Fe(" ",r.formatDate(n,"HH:mm")," ")}}function VG(t,e){if(t&1&&(C(0,"div",22)(1,"p"),P(2),E(),X(3,FG,3,1,"div",23),E()),t&2){let n=fe();R(2),ti("Horarios disponibles para ",n.selectedSpecialty," el ",n.formatDate(n.selectedDay,"EEEE, d MMMM yyyy"),":"),R(),U("ngForOf",n.horariosDisponibles)}}function LG(t,e){if(t&1){let n=jn();C(0,"div",27)(1,"button",11),ge("click",function(){let i=dn(n).$implicit,o=fe(2);return hn(o.selectedPaciente=i)}),P(2),E()()}if(t&2){let n=e.$implicit;R(2),ti(" ",n.nombre," ",n.apellido," ")}}function jG(t,e){if(t&1&&(C(0,"div",25)(1,"p"),P(2,"Selecciona un paciente:"),E(),X(3,LG,3,2,"div",26),E()),t&2){let n=fe();R(3),U("ngForOf",n.pacientes)}}function BG(t,e){if(t&1){let n=jn();C(0,"div",28)(1,"button",11),ge("click",function(){dn(n);let i=fe();return hn(i.saveTurno())}),P(2,"Guardar Turno"),E()()}}function UG(t,e){if(t&1&&(C(0,"div",29)(1,"p"),P(2),E()()),t&2){let n=fe();R(2),Lo(n.errorMessage)}}var xk=(()=>{let e=class e{constructor(r){this.authService=r,this.specialists=[],this.selectedSpecialist=null,this.selectedSpecialty=null,this.availableDays=[],this.selectedDay=null,this.selectedHorario=null,this.horariosDisponibles=[],this.errorMessage=null,this.isAdmin=!1,this.isPaciente=!1,this.pacientes=[],this.selectedPaciente=null}ngOnInit(){this.loadSpecialists(),this.authService.role$.subscribe(r=>{this.isAdmin=r.esAdmin,this.isPaciente=r.esPaciente,this.isAdmin&&this.loadPacientes()})}loadSpecialists(){this.authService.getAllEspecialistas().then(r=>{this.specialists=r})}loadPacientes(){this.authService.getAllPacientes().then(r=>{this.pacientes=r})}selectSpecialist(r){this.selectedSpecialist=r,typeof this.selectedSpecialist.especialidad=="string"&&(this.selectedSpecialist.especialidad=[this.selectedSpecialist.especialidad])}deselectSpecialist(){this.selectedSpecialist=null,this.selectedSpecialty=null,this.availableDays=[],this.selectedDay=null,this.selectedHorario=null,this.horariosDisponibles=[],this.errorMessage=null}getEspecialidadImage(r){switch(r.toLowerCase()){case"dermat\xF3logo":return"assets/dermatologo.png";case"kinesi\xF3logo":return"assets/kinesiologo.png";case"cardi\xF3logo":return"assets/cardiologo.png";case"neur\xF3logo":return"assets/neurologo.png";default:return"assets/default.png"}}selectSpecialty(r){this.selectedSpecialty=r,this.generateAvailableDays()}generateAvailableDays(){let r=new Date;this.availableDays=Array.from({length:15},(i,o)=>zN(r,o)).filter(i=>!WN(i))}selectDay(r){this.selectedDay=r,this.generateAvailableSlots(r)}generateAvailableSlots(r){if(!this.selectedSpecialist||!this.selectedSpecialist.horarios)return;let i=[];GN(r)?this.addSlotsForPeriod(r,8,14,i):(this.selectedSpecialist.horarios.includes("Ma\xF1ana")&&this.addSlotsForPeriod(r,8,12,i),this.selectedSpecialist.horarios.includes("Tarde")&&this.addSlotsForPeriod(r,12,19,i)),this.horariosDisponibles=i}addSlotsForPeriod(r,i,o,s){let a=Eh(r);for(let c=i;c<o;c++)for(let u=0;u<60;u+=30)s.push(ek(a,c*60+u))}selectHorario(r){this.selectedHorario=r,console.log("Horario seleccionado:",r)}formatDate(r,i){return bk(r,i,{locale:Sk})}saveTurno(){return k(this,null,function*(){if(this.selectedSpecialist&&this.selectedSpecialty&&this.selectedDay&&this.selectedHorario){if(yield this.authService.isTurnoTaken(this.selectedSpecialist.id,this.selectedDay,this.selectedHorario)){this.errorMessage="Este turno ya est\xE1 tomado. Por favor, elige otro horario.";return}let i="";if(this.isAdmin){if(!this.selectedPaciente){this.errorMessage="Por favor, selecciona un paciente.";return}i=this.selectedPaciente.id}else this.isPaciente&&(i=(yield this.authService.getCurrentUser())?.uid||"");this.authService.saveTurno({specialistId:this.selectedSpecialist.id,specialty:this.selectedSpecialty,date:this.selectedDay,time:this.selectedHorario,pacienteId:i}).then(()=>{console.log("Turno guardado con \xE9xito"),this.errorMessage=null}).catch(o=>{console.error("Error al guardar el turno:",o),this.errorMessage="Ocurri\xF3 un error al guardar el turno. Int\xE9ntalo de nuevo."})}})}};e.\u0275fac=function(i){return new(i||e)(re(Xt))},e.\u0275cmp=rt({type:e,selectors:[["app-solicitar-turnos"]],standalone:!0,features:[it],decls:9,vars:7,consts:[[1,"content-wrapper"],["class","specialists-container",4,"ngIf"],["class","selected-specialist-container",4,"ngIf"],["class","available-days-container",4,"ngIf"],["class","horarios-container",4,"ngIf"],["class","select-paciente-container",4,"ngIf"],["class","save-turno-container",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"specialists-container"],["class","specialist-card",4,"ngFor","ngForOf"],[1,"specialist-card"],[3,"click"],[3,"src","alt"],[1,"selected-specialist-container"],[1,"selected-specialist"],[1,"specialties-container"],["class","specialty-card",4,"ngFor","ngForOf"],[1,"specialty-card"],[1,"specialty-image",3,"src","alt"],[1,"available-days-container"],["class","day-card",4,"ngFor","ngForOf"],[1,"day-card"],[1,"horarios-container"],["class","horario-card",4,"ngFor","ngForOf"],[1,"horario-card"],[1,"select-paciente-container"],["class","paciente-card",4,"ngFor","ngForOf"],[1,"paciente-card"],[1,"save-turno-container"],[1,"error-message"]],template:function(i,o){i&1&&(C(0,"body")(1,"div",0),X(2,RG,2,1,"div",1)(3,NG,11,7,"div",2)(4,OG,4,2,"div",3)(5,VG,4,3,"div",4)(6,jG,4,1,"div",5)(7,BG,3,0,"div",6)(8,UG,3,1,"div",7),E()()),i&2&&(R(2),U("ngIf",!o.selectedSpecialist),R(),U("ngIf",o.selectedSpecialist),R(),U("ngIf",o.selectedSpecialty),R(),U("ngIf",o.selectedDay),R(),U("ngIf",o.isAdmin),R(),U("ngIf",o.selectedHorario),R(),U("ngIf",o.errorMessage))},dependencies:[Kc,fn,Bo],styles:['body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;height:150vh;margin:0;background-image:url("./media/fondo-perfil-WDAVYXRX.jpg");background-size:cover;background-position:center}.content-wrapper[_ngcontent-%COMP%]{background-color:#d1a054b3;border-radius:15px;padding:20px;box-shadow:0 4px 8px #0003;max-width:900px;width:100%;margin:20px;box-sizing:border-box}.specialists-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;margin-top:20px}.specialist-card[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;text-align:center}.specialist-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;border:1px solid #2e4c6d;border-radius:8px;padding:0;background-color:#2e4c6d;cursor:pointer;transition:transform .2s,box-shadow .2s;overflow:hidden;position:relative}.specialist-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #0003}.specialist-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}.specialist-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;margin:0;font-size:14px;color:#2e4c6d;background-color:#fff9;padding:5px;box-sizing:border-box;border-bottom-left-radius:8px;border-bottom-right-radius:8px}.selected-specialist-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:20px}.selected-specialist[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.selected-specialist[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;object-fit:cover;margin-bottom:10px;border:3px solid #2e4c6d}.selected-specialist[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:10px 0}.selected-specialist[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;padding:8px 16px;border:none;border-radius:5px;background-color:#2e4c6d;color:#fff;cursor:pointer;transition:background-color .3s,transform .2s}.selected-specialist[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#132d49;transform:translateY(-2px)}.specialties-container[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.specialties-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.specialty-card[_ngcontent-%COMP%]{margin-top:10px}.specialty-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;border:1px solid #2e4c6d;border-radius:8px;background-color:#3e546b;cursor:pointer;transition:background-color .3s,transform .2s,box-shadow .2s;padding:10px;height:100px;overflow:hidden;color:#fff}.specialty-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2e4c6d;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.specialty-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;margin-right:10px}.specialty-image[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;margin-right:10px}.available-days-container[_ngcontent-%COMP%], .horarios-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;margin-top:20px}.available-days-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .horarios-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:700;width:100%;text-align:center;margin-bottom:10px}.day-card[_ngcontent-%COMP%], .horario-card[_ngcontent-%COMP%]{margin-top:10px}.day-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .horario-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:#fff;background-color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .2s,box-shadow .2s}.day-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .horario-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#132d49;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.save-turno-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.save-turno-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;color:#fff;background-color:#2e4c6d;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s,transform .2s,box-shadow .2s}.save-turno-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#132d49;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.save-turno-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:#132d49;transform:translateY(0);box-shadow:none}']});let t=e;return t})();var Ak=[{path:"bienvenida",component:vA},{path:"",redirectTo:"/bienvenida",pathMatch:"full"},{path:"login",component:BN},{path:"registro",component:$N},{path:"registro_especialistas",component:bv},{path:"registro_pacientes",component:Ev},{path:"especialidades",component:_v},{path:"botones",component:Vm},{path:"seccion-usuarios",component:HN},{path:"registro_admins",component:Cv},{path:"habilitar-especialistas",component:Iv},{path:"mi-perfil",component:qN},{path:"solicitar-turnos",component:xk}];var Mk={providers:[mA(Ak),Nw(lr,ai,vM.initializeApp({apiKey:"AIzaSyDGif3NJXC7v7VKBGL1rhq_yiAQKG94WfU",authDomain:"tp02-ef411.firebaseapp.com",projectId:"tp02-ef411",storageBucket:"tp02-ef411.appspot.com",messagingSenderId:"1038947319102",appId:"1:1038947319102:web:c95224758351e20770806f"}),eN,yM,Nx,Xt)]};function $G(t,e){t&1&&(C(0,"li",10)(1,"a",11),P(2,"Iniciar sesi\xF3n"),E()())}function HG(t,e){t&1&&(C(0,"li",10)(1,"a",12),P(2,"Registrarse"),E()())}function qG(t,e){t&1&&(C(0,"li",10)(1,"a",13),P(2,"Usuarios"),E()())}function zG(t,e){t&1&&(C(0,"li",10)(1,"a",14),P(2,"Mi perfil"),E()())}function GG(t,e){t&1&&(C(0,"li",10)(1,"a",15),P(2,"Solicitar Turno"),E()())}function WG(t,e){if(t&1){let n=jn();C(0,"li",10)(1,"a",16),ge("click",function(){dn(n);let i=fe();return hn(i.OnLogOutClick())}),P(2,"Cerrar sesi\xF3n"),E()()}}var Rk=(()=>{let e=class e{constructor(r,i){this.router=r,this.auth=i,this.isAdmin=!1,this.isEspecialista=!1,this.isPaciente=!1,this.isLoggedIn$=this.auth.isLoggedIn$}ngOnInit(){this.roleSubscription=this.auth.role$.subscribe(r=>{this.isAdmin=r.esAdmin,this.isEspecialista=r.esEspecialista,this.isPaciente=r.esPaciente})}ngOnDestroy(){this.roleSubscription&&this.roleSubscription.unsubscribe()}OnLogOutClick(){return k(this,null,function*(){yield this.auth.logout(),this.router.navigateByUrl("home")})}};e.\u0275fac=function(i){return new(i||e)(re(pn),re(Xt))},e.\u0275cmp=rt({type:e,selectors:[["app-root"]],standalone:!0,features:[it],decls:24,vars:18,consts:[[1,"app-container"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand"],["src","./../assets/icono.png",2,"width","50px"],[1,"title"],["id","navbarTogglerDemo02",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item","active"],["href","#",1,"nav-link"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["href","login",1,"nav-link"],["href","registro",1,"nav-link"],["href","seccion-usuarios",1,"nav-link"],["href","mi-perfil",1,"nav-link"],["href","solicitar-turnos",1,"nav-link"],[1,"nav-link",3,"click"]],template:function(i,o){i&1&&(C(0,"div",0)(1,"nav",1)(2,"a",2),ye(3,"img",3),E(),C(4,"h1",4),P(5,"Lisan al-Clinic"),E(),C(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),P(10,"P\xE1gina principal"),E()(),X(11,$G,3,0,"li",9),zi(12,"async"),X(13,HG,3,0,"li",9),zi(14,"async"),X(15,qG,3,0,"li",9),zi(16,"async"),X(17,zG,3,0,"li",9),zi(18,"async"),X(19,GG,3,0,"li",9),zi(20,"async"),X(21,WG,3,0,"li",9),zi(22,"async"),E()()(),ye(23,"router-outlet"),E()),i&2&&(R(11),U("ngIf",!Gi(12,6,o.isLoggedIn$)),R(2),U("ngIf",!Gi(14,8,o.isLoggedIn$)),R(2),U("ngIf",Gi(16,10,o.isLoggedIn$)&&o.isAdmin),R(2),U("ngIf",Gi(18,12,o.isLoggedIn$)),R(2),U("ngIf",Gi(20,14,o.isLoggedIn$)&&(o.isAdmin||o.isPaciente)),R(2),U("ngIf",Gi(22,16,o.isLoggedIn$)))},dependencies:[l0,fn,Bo,rm],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.navbar[_ngcontent-%COMP%]{background-color:#d1a054;display:flex;align-items:center;justify-content:space-between;padding:1rem}.title[_ngcontent-%COMP%]{margin:0;color:#2e4c6d;font-size:1.5rem;display:flex;align-items:center}.navbar-brand[_ngcontent-%COMP%]{display:flex}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;margin-right:1rem}.navbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1.5rem;margin-left:335px;padding:.5rem 0;font-family:Dune,sans-serif}.navbar-nav[_ngcontent-%COMP%]{display:flex;flex-grow:1}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;text-decoration:none}.nav-item[_ngcontent-%COMP%]{margin:0 10px}.nav-link[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1rem;transition:color .3s;text-decoration:none}.nav-link[_ngcontent-%COMP%]:hover{color:#d2691e}.logout-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#d2691e;font-size:1.2rem;transition:color .3s}.logout-btn[_ngcontent-%COMP%]:hover{color:#d1a054}.navbar-toggler[_ngcontent-%COMP%]{border-color:#2e4c6d}.navbar-toggler-icon[_ngcontent-%COMP%]{color:#2e4c6d;font-size:1.5rem}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{list-style-type:none;text-decoration:none}"]});let t=e;return t})();Rx(Rk,Mk).catch(t=>console.error(t));
